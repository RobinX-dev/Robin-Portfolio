{"ast":null,"code":"import _asyncToGenerator from \"/home/robin/Desktop/Github/Robin-Portfolio/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _awaitAsyncGenerator from \"/home/robin/Desktop/Github/Robin-Portfolio/node_modules/@babel/runtime/helpers/esm/awaitAsyncGenerator.js\";\nimport _wrapAsyncGenerator from \"/home/robin/Desktop/Github/Robin-Portfolio/node_modules/@babel/runtime/helpers/esm/wrapAsyncGenerator.js\";\nimport _asyncIterator from \"/home/robin/Desktop/Github/Robin-Portfolio/node_modules/@babel/runtime/helpers/esm/asyncIterator.js\";\n/**\n * @licstart The following is the entire license notice for the\n * JavaScript code in this page\n *\n * Copyright 2024 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * @licend The above is the entire license notice for the\n * JavaScript code in this page\n */\n\n/******/ // The require scope\n/******/\nvar __webpack_require__ = {};\n/******/\n/************************************************************************/\n/******/ /* webpack/runtime/define property getters */\n/******/\n(() => {\n  /******/ // define getter functions for harmony exports\n  /******/__webpack_require__.d = (exports, definition) => {\n    /******/for (var key in definition) {\n      /******/if (__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n        /******/Object.defineProperty(exports, key, {\n          enumerable: true,\n          get: definition[key]\n        });\n        /******/\n      }\n      /******/\n    }\n    /******/\n  };\n  /******/\n})();\n/******/\n/******/ /* webpack/runtime/hasOwnProperty shorthand */\n/******/\n(() => {\n  /******/__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\n  /******/\n})();\n/******/\n/************************************************************************/\nvar __webpack_exports__ = globalThis.pdfjsViewer = {};\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  AnnotationLayerBuilder: () => /* reexport */AnnotationLayerBuilder,\n  DownloadManager: () => /* reexport */DownloadManager,\n  EventBus: () => /* reexport */EventBus,\n  FindState: () => /* reexport */FindState,\n  GenericL10n: () => /* reexport */genericl10n_GenericL10n,\n  LinkTarget: () => /* reexport */LinkTarget,\n  PDFFindController: () => /* reexport */PDFFindController,\n  PDFHistory: () => /* reexport */PDFHistory,\n  PDFLinkService: () => /* reexport */PDFLinkService,\n  PDFPageView: () => /* reexport */PDFPageView,\n  PDFScriptingManager: () => /* reexport */PDFScriptingManagerComponents,\n  PDFSinglePageViewer: () => /* reexport */PDFSinglePageViewer,\n  PDFViewer: () => /* reexport */PDFViewer,\n  ProgressBar: () => /* reexport */ProgressBar,\n  RenderingStates: () => /* reexport */RenderingStates,\n  ScrollMode: () => /* reexport */ScrollMode,\n  SimpleLinkService: () => /* reexport */SimpleLinkService,\n  SpreadMode: () => /* reexport */SpreadMode,\n  StructTreeLayerBuilder: () => /* reexport */StructTreeLayerBuilder,\n  TextLayerBuilder: () => /* reexport */TextLayerBuilder,\n  XfaLayerBuilder: () => /* reexport */XfaLayerBuilder,\n  parseQueryString: () => /* reexport */parseQueryString\n});\n; // ./web/ui_utils.js\nconst DEFAULT_SCALE_VALUE = \"auto\";\nconst DEFAULT_SCALE = 1.0;\nconst DEFAULT_SCALE_DELTA = 1.1;\nconst MIN_SCALE = 0.1;\nconst MAX_SCALE = 10.0;\nconst UNKNOWN_SCALE = 0;\nconst MAX_AUTO_SCALE = 1.25;\nconst SCROLLBAR_PADDING = 40;\nconst VERTICAL_PADDING = 5;\nconst RenderingStates = {\n  INITIAL: 0,\n  RUNNING: 1,\n  PAUSED: 2,\n  FINISHED: 3\n};\nconst PresentationModeState = {\n  UNKNOWN: 0,\n  NORMAL: 1,\n  CHANGING: 2,\n  FULLSCREEN: 3\n};\nconst SidebarView = {\n  UNKNOWN: -1,\n  NONE: 0,\n  THUMBS: 1,\n  OUTLINE: 2,\n  ATTACHMENTS: 3,\n  LAYERS: 4\n};\nconst TextLayerMode = {\n  DISABLE: 0,\n  ENABLE: 1,\n  ENABLE_PERMISSIONS: 2\n};\nconst ScrollMode = {\n  UNKNOWN: -1,\n  VERTICAL: 0,\n  HORIZONTAL: 1,\n  WRAPPED: 2,\n  PAGE: 3\n};\nconst SpreadMode = {\n  UNKNOWN: -1,\n  NONE: 0,\n  ODD: 1,\n  EVEN: 2\n};\nconst CursorTool = {\n  SELECT: 0,\n  HAND: 1,\n  ZOOM: 2\n};\nconst AutoPrintRegExp = /\\bprint\\s*\\(/;\nfunction scrollIntoView(element, spot, scrollMatches = false) {\n  let parent = element.offsetParent;\n  if (!parent) {\n    console.error(\"offsetParent is not set -- cannot scroll\");\n    return;\n  }\n  let offsetY = element.offsetTop + element.clientTop;\n  let offsetX = element.offsetLeft + element.clientLeft;\n  while (parent.clientHeight === parent.scrollHeight && parent.clientWidth === parent.scrollWidth || scrollMatches && (parent.classList.contains(\"markedContent\") || getComputedStyle(parent).overflow === \"hidden\")) {\n    offsetY += parent.offsetTop;\n    offsetX += parent.offsetLeft;\n    parent = parent.offsetParent;\n    if (!parent) {\n      return;\n    }\n  }\n  if (spot) {\n    if (spot.top !== undefined) {\n      offsetY += spot.top;\n    }\n    if (spot.left !== undefined) {\n      offsetX += spot.left;\n      parent.scrollLeft = offsetX;\n    }\n  }\n  parent.scrollTop = offsetY;\n}\nfunction watchScroll(viewAreaElement, callback, abortSignal = undefined) {\n  const debounceScroll = function (evt) {\n    if (rAF) {\n      return;\n    }\n    rAF = window.requestAnimationFrame(function viewAreaElementScrolled() {\n      rAF = null;\n      const currentX = viewAreaElement.scrollLeft;\n      const lastX = state.lastX;\n      if (currentX !== lastX) {\n        state.right = currentX > lastX;\n      }\n      state.lastX = currentX;\n      const currentY = viewAreaElement.scrollTop;\n      const lastY = state.lastY;\n      if (currentY !== lastY) {\n        state.down = currentY > lastY;\n      }\n      state.lastY = currentY;\n      callback(state);\n    });\n  };\n  const state = {\n    right: true,\n    down: true,\n    lastX: viewAreaElement.scrollLeft,\n    lastY: viewAreaElement.scrollTop,\n    _eventHandler: debounceScroll\n  };\n  let rAF = null;\n  viewAreaElement.addEventListener(\"scroll\", debounceScroll, {\n    useCapture: true,\n    signal: abortSignal\n  });\n  abortSignal?.addEventListener(\"abort\", () => window.cancelAnimationFrame(rAF), {\n    once: true\n  });\n  return state;\n}\nfunction parseQueryString(query) {\n  const params = new Map();\n  for (const [key, value] of new URLSearchParams(query)) {\n    params.set(key.toLowerCase(), value);\n  }\n  return params;\n}\nconst InvisibleCharsRegExp = /[\\x00-\\x1F]/g;\nfunction removeNullCharacters(str, replaceInvisible = false) {\n  if (!InvisibleCharsRegExp.test(str)) {\n    return str;\n  }\n  if (replaceInvisible) {\n    return str.replaceAll(InvisibleCharsRegExp, m => m === \"\\x00\" ? \"\" : \" \");\n  }\n  return str.replaceAll(\"\\x00\", \"\");\n}\nfunction binarySearchFirstItem(items, condition, start = 0) {\n  let minIndex = start;\n  let maxIndex = items.length - 1;\n  if (maxIndex < 0 || !condition(items[maxIndex])) {\n    return items.length;\n  }\n  if (condition(items[minIndex])) {\n    return minIndex;\n  }\n  while (minIndex < maxIndex) {\n    const currentIndex = minIndex + maxIndex >> 1;\n    const currentItem = items[currentIndex];\n    if (condition(currentItem)) {\n      maxIndex = currentIndex;\n    } else {\n      minIndex = currentIndex + 1;\n    }\n  }\n  return minIndex;\n}\nfunction approximateFraction(x) {\n  if (Math.floor(x) === x) {\n    return [x, 1];\n  }\n  const xinv = 1 / x;\n  const limit = 8;\n  if (xinv > limit) {\n    return [1, limit];\n  } else if (Math.floor(xinv) === xinv) {\n    return [1, xinv];\n  }\n  const x_ = x > 1 ? xinv : x;\n  let a = 0,\n    b = 1,\n    c = 1,\n    d = 1;\n  while (true) {\n    const p = a + c,\n      q = b + d;\n    if (q > limit) {\n      break;\n    }\n    if (x_ <= p / q) {\n      c = p;\n      d = q;\n    } else {\n      a = p;\n      b = q;\n    }\n  }\n  let result;\n  if (x_ - a / b < c / d - x_) {\n    result = x_ === x ? [a, b] : [b, a];\n  } else {\n    result = x_ === x ? [c, d] : [d, c];\n  }\n  return result;\n}\nfunction floorToDivide(x, div) {\n  return x - x % div;\n}\nfunction getPageSizeInches({\n  view,\n  userUnit,\n  rotate\n}) {\n  const [x1, y1, x2, y2] = view;\n  const changeOrientation = rotate % 180 !== 0;\n  const width = (x2 - x1) / 72 * userUnit;\n  const height = (y2 - y1) / 72 * userUnit;\n  return {\n    width: changeOrientation ? height : width,\n    height: changeOrientation ? width : height\n  };\n}\nfunction backtrackBeforeAllVisibleElements(index, views, top) {\n  if (index < 2) {\n    return index;\n  }\n  let elt = views[index].div;\n  let pageTop = elt.offsetTop + elt.clientTop;\n  if (pageTop >= top) {\n    elt = views[index - 1].div;\n    pageTop = elt.offsetTop + elt.clientTop;\n  }\n  for (let i = index - 2; i >= 0; --i) {\n    elt = views[i].div;\n    if (elt.offsetTop + elt.clientTop + elt.clientHeight <= pageTop) {\n      break;\n    }\n    index = i;\n  }\n  return index;\n}\nfunction getVisibleElements({\n  scrollEl,\n  views,\n  sortByVisibility = false,\n  horizontal = false,\n  rtl = false\n}) {\n  const top = scrollEl.scrollTop,\n    bottom = top + scrollEl.clientHeight;\n  const left = scrollEl.scrollLeft,\n    right = left + scrollEl.clientWidth;\n  function isElementBottomAfterViewTop(view) {\n    const element = view.div;\n    const elementBottom = element.offsetTop + element.clientTop + element.clientHeight;\n    return elementBottom > top;\n  }\n  function isElementNextAfterViewHorizontally(view) {\n    const element = view.div;\n    const elementLeft = element.offsetLeft + element.clientLeft;\n    const elementRight = elementLeft + element.clientWidth;\n    return rtl ? elementLeft < right : elementRight > left;\n  }\n  const visible = [],\n    ids = new Set(),\n    numViews = views.length;\n  let firstVisibleElementInd = binarySearchFirstItem(views, horizontal ? isElementNextAfterViewHorizontally : isElementBottomAfterViewTop);\n  if (firstVisibleElementInd > 0 && firstVisibleElementInd < numViews && !horizontal) {\n    firstVisibleElementInd = backtrackBeforeAllVisibleElements(firstVisibleElementInd, views, top);\n  }\n  let lastEdge = horizontal ? right : -1;\n  for (let i = firstVisibleElementInd; i < numViews; i++) {\n    const view = views[i],\n      element = view.div;\n    const currentWidth = element.offsetLeft + element.clientLeft;\n    const currentHeight = element.offsetTop + element.clientTop;\n    const viewWidth = element.clientWidth,\n      viewHeight = element.clientHeight;\n    const viewRight = currentWidth + viewWidth;\n    const viewBottom = currentHeight + viewHeight;\n    if (lastEdge === -1) {\n      if (viewBottom >= bottom) {\n        lastEdge = viewBottom;\n      }\n    } else if ((horizontal ? currentWidth : currentHeight) > lastEdge) {\n      break;\n    }\n    if (viewBottom <= top || currentHeight >= bottom || viewRight <= left || currentWidth >= right) {\n      continue;\n    }\n    const hiddenHeight = Math.max(0, top - currentHeight) + Math.max(0, viewBottom - bottom);\n    const hiddenWidth = Math.max(0, left - currentWidth) + Math.max(0, viewRight - right);\n    const fractionHeight = (viewHeight - hiddenHeight) / viewHeight,\n      fractionWidth = (viewWidth - hiddenWidth) / viewWidth;\n    const percent = fractionHeight * fractionWidth * 100 | 0;\n    visible.push({\n      id: view.id,\n      x: currentWidth,\n      y: currentHeight,\n      view,\n      percent,\n      widthPercent: fractionWidth * 100 | 0\n    });\n    ids.add(view.id);\n  }\n  const first = visible[0],\n    last = visible.at(-1);\n  if (sortByVisibility) {\n    visible.sort(function (a, b) {\n      const pc = a.percent - b.percent;\n      if (Math.abs(pc) > 0.001) {\n        return -pc;\n      }\n      return a.id - b.id;\n    });\n  }\n  return {\n    first,\n    last,\n    views: visible,\n    ids\n  };\n}\nfunction normalizeWheelEventDirection(evt) {\n  let delta = Math.hypot(evt.deltaX, evt.deltaY);\n  const angle = Math.atan2(evt.deltaY, evt.deltaX);\n  if (-0.25 * Math.PI < angle && angle < 0.75 * Math.PI) {\n    delta = -delta;\n  }\n  return delta;\n}\nfunction normalizeWheelEventDelta(evt) {\n  const deltaMode = evt.deltaMode;\n  let delta = normalizeWheelEventDirection(evt);\n  const MOUSE_PIXELS_PER_LINE = 30;\n  const MOUSE_LINES_PER_PAGE = 30;\n  if (deltaMode === WheelEvent.DOM_DELTA_PIXEL) {\n    delta /= MOUSE_PIXELS_PER_LINE * MOUSE_LINES_PER_PAGE;\n  } else if (deltaMode === WheelEvent.DOM_DELTA_LINE) {\n    delta /= MOUSE_LINES_PER_PAGE;\n  }\n  return delta;\n}\nfunction isValidRotation(angle) {\n  return Number.isInteger(angle) && angle % 90 === 0;\n}\nfunction isValidScrollMode(mode) {\n  return Number.isInteger(mode) && Object.values(ScrollMode).includes(mode) && mode !== ScrollMode.UNKNOWN;\n}\nfunction isValidSpreadMode(mode) {\n  return Number.isInteger(mode) && Object.values(SpreadMode).includes(mode) && mode !== SpreadMode.UNKNOWN;\n}\nfunction isPortraitOrientation(size) {\n  return size.width <= size.height;\n}\nconst animationStarted = new Promise(function (resolve) {\n  window.requestAnimationFrame(resolve);\n});\nconst docStyle = document.documentElement.style;\nfunction clamp(v, min, max) {\n  return Math.min(Math.max(v, min), max);\n}\nclass ProgressBar {\n  #classList = null;\n  #disableAutoFetchTimeout = null;\n  #percent = 0;\n  #style = null;\n  #visible = true;\n  constructor(bar) {\n    this.#classList = bar.classList;\n    this.#style = bar.style;\n  }\n  get percent() {\n    return this.#percent;\n  }\n  set percent(val) {\n    this.#percent = clamp(val, 0, 100);\n    if (isNaN(val)) {\n      this.#classList.add(\"indeterminate\");\n      return;\n    }\n    this.#classList.remove(\"indeterminate\");\n    this.#style.setProperty(\"--progressBar-percent\", `${this.#percent}%`);\n  }\n  setWidth(viewer) {\n    if (!viewer) {\n      return;\n    }\n    const container = viewer.parentNode;\n    const scrollbarWidth = container.offsetWidth - viewer.offsetWidth;\n    if (scrollbarWidth > 0) {\n      this.#style.setProperty(\"--progressBar-end-offset\", `${scrollbarWidth}px`);\n    }\n  }\n  setDisableAutoFetch(delay = 5000) {\n    if (this.#percent === 100 || isNaN(this.#percent)) {\n      return;\n    }\n    if (this.#disableAutoFetchTimeout) {\n      clearTimeout(this.#disableAutoFetchTimeout);\n    }\n    this.show();\n    this.#disableAutoFetchTimeout = setTimeout(() => {\n      this.#disableAutoFetchTimeout = null;\n      this.hide();\n    }, delay);\n  }\n  hide() {\n    if (!this.#visible) {\n      return;\n    }\n    this.#visible = false;\n    this.#classList.add(\"hidden\");\n  }\n  show() {\n    if (this.#visible) {\n      return;\n    }\n    this.#visible = true;\n    this.#classList.remove(\"hidden\");\n  }\n}\nfunction getActiveOrFocusedElement() {\n  let curRoot = document;\n  let curActiveOrFocused = curRoot.activeElement || curRoot.querySelector(\":focus\");\n  while (curActiveOrFocused?.shadowRoot) {\n    curRoot = curActiveOrFocused.shadowRoot;\n    curActiveOrFocused = curRoot.activeElement || curRoot.querySelector(\":focus\");\n  }\n  return curActiveOrFocused;\n}\nfunction apiPageLayoutToViewerModes(layout) {\n  let scrollMode = ScrollMode.VERTICAL,\n    spreadMode = SpreadMode.NONE;\n  switch (layout) {\n    case \"SinglePage\":\n      scrollMode = ScrollMode.PAGE;\n      break;\n    case \"OneColumn\":\n      break;\n    case \"TwoPageLeft\":\n      scrollMode = ScrollMode.PAGE;\n    case \"TwoColumnLeft\":\n      spreadMode = SpreadMode.ODD;\n      break;\n    case \"TwoPageRight\":\n      scrollMode = ScrollMode.PAGE;\n    case \"TwoColumnRight\":\n      spreadMode = SpreadMode.EVEN;\n      break;\n  }\n  return {\n    scrollMode,\n    spreadMode\n  };\n}\nfunction apiPageModeToSidebarView(mode) {\n  switch (mode) {\n    case \"UseNone\":\n      return SidebarView.NONE;\n    case \"UseThumbs\":\n      return SidebarView.THUMBS;\n    case \"UseOutlines\":\n      return SidebarView.OUTLINE;\n    case \"UseAttachments\":\n      return SidebarView.ATTACHMENTS;\n    case \"UseOC\":\n      return SidebarView.LAYERS;\n  }\n  return SidebarView.NONE;\n}\nfunction toggleCheckedBtn(button, toggle, view = null) {\n  button.classList.toggle(\"toggled\", toggle);\n  button.setAttribute(\"aria-checked\", toggle);\n  view?.classList.toggle(\"hidden\", !toggle);\n}\nfunction toggleExpandedBtn(button, toggle, view = null) {\n  button.classList.toggle(\"toggled\", toggle);\n  button.setAttribute(\"aria-expanded\", toggle);\n  view?.classList.toggle(\"hidden\", !toggle);\n}\nconst calcRound = function () {\n  const e = document.createElement(\"div\");\n  e.style.width = \"round(down, calc(1.6666666666666665 * 792px), 1px)\";\n  return e.style.width === \"calc(1320px)\" ? Math.fround : x => x;\n}();\n; // ./web/pdf_find_utils.js\nconst CharacterType = {\n  SPACE: 0,\n  ALPHA_LETTER: 1,\n  PUNCT: 2,\n  HAN_LETTER: 3,\n  KATAKANA_LETTER: 4,\n  HIRAGANA_LETTER: 5,\n  HALFWIDTH_KATAKANA_LETTER: 6,\n  THAI_LETTER: 7\n};\nfunction isAlphabeticalScript(charCode) {\n  return charCode < 0x2e80;\n}\nfunction isAscii(charCode) {\n  return (charCode & 0xff80) === 0;\n}\nfunction isAsciiAlpha(charCode) {\n  return charCode >= 0x61 && charCode <= 0x7a || charCode >= 0x41 && charCode <= 0x5a;\n}\nfunction isAsciiDigit(charCode) {\n  return charCode >= 0x30 && charCode <= 0x39;\n}\nfunction isAsciiSpace(charCode) {\n  return charCode === 0x20 || charCode === 0x09 || charCode === 0x0d || charCode === 0x0a;\n}\nfunction isHan(charCode) {\n  return charCode >= 0x3400 && charCode <= 0x9fff || charCode >= 0xf900 && charCode <= 0xfaff;\n}\nfunction isKatakana(charCode) {\n  return charCode >= 0x30a0 && charCode <= 0x30ff;\n}\nfunction isHiragana(charCode) {\n  return charCode >= 0x3040 && charCode <= 0x309f;\n}\nfunction isHalfwidthKatakana(charCode) {\n  return charCode >= 0xff60 && charCode <= 0xff9f;\n}\nfunction isThai(charCode) {\n  return (charCode & 0xff80) === 0x0e00;\n}\nfunction getCharacterType(charCode) {\n  if (isAlphabeticalScript(charCode)) {\n    if (isAscii(charCode)) {\n      if (isAsciiSpace(charCode)) {\n        return CharacterType.SPACE;\n      } else if (isAsciiAlpha(charCode) || isAsciiDigit(charCode) || charCode === 0x5f) {\n        return CharacterType.ALPHA_LETTER;\n      }\n      return CharacterType.PUNCT;\n    } else if (isThai(charCode)) {\n      return CharacterType.THAI_LETTER;\n    } else if (charCode === 0xa0) {\n      return CharacterType.SPACE;\n    }\n    return CharacterType.ALPHA_LETTER;\n  }\n  if (isHan(charCode)) {\n    return CharacterType.HAN_LETTER;\n  } else if (isKatakana(charCode)) {\n    return CharacterType.KATAKANA_LETTER;\n  } else if (isHiragana(charCode)) {\n    return CharacterType.HIRAGANA_LETTER;\n  } else if (isHalfwidthKatakana(charCode)) {\n    return CharacterType.HALFWIDTH_KATAKANA_LETTER;\n  }\n  return CharacterType.ALPHA_LETTER;\n}\nlet NormalizeWithNFKC;\nfunction getNormalizeWithNFKC() {\n  NormalizeWithNFKC ||= ` ¨ª¯²-µ¸-º¼-¾Ĳ-ĳĿ-ŀŉſǄ-ǌǱ-ǳʰ-ʸ˘-˝ˠ-ˤʹͺ;΄-΅·ϐ-ϖϰ-ϲϴ-ϵϹևٵ-ٸक़-य़ড়-ঢ়য়ਲ਼ਸ਼ਖ਼-ਜ਼ਫ਼ଡ଼-ଢ଼ำຳໜ-ໝ༌གྷཌྷདྷབྷཛྷཀྵჼᴬ-ᴮᴰ-ᴺᴼ-ᵍᵏ-ᵪᵸᶛ-ᶿẚ-ẛάέήίόύώΆ᾽-῁ΈΉ῍-῏ΐΊ῝-῟ΰΎ῭-`ΌΏ´-῾ - ‑‗․-… ″-‴‶-‷‼‾⁇-⁉⁗ ⁰-ⁱ⁴-₎ₐ-ₜ₨℀-℃℅-ℇ℉-ℓℕ-№ℙ-ℝ℠-™ℤΩℨK-ℭℯ-ℱℳ-ℹ℻-⅀ⅅ-ⅉ⅐-ⅿ↉∬-∭∯-∰〈-〉①-⓪⨌⩴-⩶⫝̸ⱼ-ⱽⵯ⺟⻳⼀-⿕　〶〸-〺゛-゜ゟヿㄱ-ㆎ㆒-㆟㈀-㈞㈠-㉇㉐-㉾㊀-㏿ꚜ-ꚝꝰꟲ-ꟴꟸ-ꟹꭜ-ꭟꭩ豈-嗀塚晴凞-羽蘒諸逸-都飯-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-זּטּ-לּמּנּ-סּףּ-פּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-﷼︐-︙︰-﹄﹇-﹒﹔-﹦﹨-﹫ﹰ-ﹲﹴﹶ-ﻼ！-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ￠-￦`;\n  return NormalizeWithNFKC;\n}\n; // ./web/pdf_find_controller.js\n\nconst FindState = {\n  FOUND: 0,\n  NOT_FOUND: 1,\n  WRAPPED: 2,\n  PENDING: 3\n};\nconst FIND_TIMEOUT = 250;\nconst MATCH_SCROLL_OFFSET_TOP = -50;\nconst MATCH_SCROLL_OFFSET_LEFT = -400;\nconst CHARACTERS_TO_NORMALIZE = {\n  \"\\u2010\": \"-\",\n  \"\\u2018\": \"'\",\n  \"\\u2019\": \"'\",\n  \"\\u201A\": \"'\",\n  \"\\u201B\": \"'\",\n  \"\\u201C\": '\"',\n  \"\\u201D\": '\"',\n  \"\\u201E\": '\"',\n  \"\\u201F\": '\"',\n  \"\\u00BC\": \"1/4\",\n  \"\\u00BD\": \"1/2\",\n  \"\\u00BE\": \"3/4\"\n};\nconst DIACRITICS_EXCEPTION = new Set([0x3099, 0x309a, 0x094d, 0x09cd, 0x0a4d, 0x0acd, 0x0b4d, 0x0bcd, 0x0c4d, 0x0ccd, 0x0d3b, 0x0d3c, 0x0d4d, 0x0dca, 0x0e3a, 0x0eba, 0x0f84, 0x1039, 0x103a, 0x1714, 0x1734, 0x17d2, 0x1a60, 0x1b44, 0x1baa, 0x1bab, 0x1bf2, 0x1bf3, 0x2d7f, 0xa806, 0xa82c, 0xa8c4, 0xa953, 0xa9c0, 0xaaf6, 0xabed, 0x0c56, 0x0f71, 0x0f72, 0x0f7a, 0x0f7b, 0x0f7c, 0x0f7d, 0x0f80, 0x0f74]);\nlet DIACRITICS_EXCEPTION_STR;\nconst DIACRITICS_REG_EXP = /\\p{M}+/gu;\nconst SPECIAL_CHARS_REG_EXP = /([.*+?^${}()|[\\]\\\\])|(\\p{P})|(\\s+)|(\\p{M})|(\\p{L})/gu;\nconst NOT_DIACRITIC_FROM_END_REG_EXP = /([^\\p{M}])\\p{M}*$/u;\nconst NOT_DIACRITIC_FROM_START_REG_EXP = /^\\p{M}*([^\\p{M}])/u;\nconst SYLLABLES_REG_EXP = /[\\uAC00-\\uD7AF\\uFA6C\\uFACF-\\uFAD1\\uFAD5-\\uFAD7]+/g;\nconst SYLLABLES_LENGTHS = new Map();\nconst FIRST_CHAR_SYLLABLES_REG_EXP = \"[\\\\u1100-\\\\u1112\\\\ud7a4-\\\\ud7af\\\\ud84a\\\\ud84c\\\\ud850\\\\ud854\\\\ud857\\\\ud85f]\";\nconst NFKC_CHARS_TO_NORMALIZE = new Map();\nlet noSyllablesRegExp = null;\nlet withSyllablesRegExp = null;\nfunction normalize(text) {\n  const syllablePositions = [];\n  let m;\n  while ((m = SYLLABLES_REG_EXP.exec(text)) !== null) {\n    let {\n      index\n    } = m;\n    for (const char of m[0]) {\n      let len = SYLLABLES_LENGTHS.get(char);\n      if (!len) {\n        len = char.normalize(\"NFD\").length;\n        SYLLABLES_LENGTHS.set(char, len);\n      }\n      syllablePositions.push([len, index++]);\n    }\n  }\n  let normalizationRegex;\n  if (syllablePositions.length === 0 && noSyllablesRegExp) {\n    normalizationRegex = noSyllablesRegExp;\n  } else if (syllablePositions.length > 0 && withSyllablesRegExp) {\n    normalizationRegex = withSyllablesRegExp;\n  } else {\n    const replace = Object.keys(CHARACTERS_TO_NORMALIZE).join(\"\");\n    const toNormalizeWithNFKC = getNormalizeWithNFKC();\n    const CJK = \"(?:\\\\p{Ideographic}|[\\u3040-\\u30FF])\";\n    const HKDiacritics = \"(?:\\u3099|\\u309A)\";\n    const CompoundWord = \"\\\\p{Ll}-\\\\n\\\\p{Lu}\";\n    const regexp = `([${replace}])|([${toNormalizeWithNFKC}])|(${HKDiacritics}\\\\n)|(\\\\p{M}+(?:-\\\\n)?)|(${CompoundWord})|(\\\\S-\\\\n)|(${CJK}\\\\n)|(\\\\n)`;\n    if (syllablePositions.length === 0) {\n      normalizationRegex = noSyllablesRegExp = new RegExp(regexp + \"|(\\\\u0000)\", \"gum\");\n    } else {\n      normalizationRegex = withSyllablesRegExp = new RegExp(regexp + `|(${FIRST_CHAR_SYLLABLES_REG_EXP})`, \"gum\");\n    }\n  }\n  const rawDiacriticsPositions = [];\n  while ((m = DIACRITICS_REG_EXP.exec(text)) !== null) {\n    rawDiacriticsPositions.push([m[0].length, m.index]);\n  }\n  let normalized = text.normalize(\"NFD\");\n  const positions = [[0, 0]];\n  let rawDiacriticsIndex = 0;\n  let syllableIndex = 0;\n  let shift = 0;\n  let shiftOrigin = 0;\n  let eol = 0;\n  let hasDiacritics = false;\n  normalized = normalized.replace(normalizationRegex, (match, p1, p2, p3, p4, p5, p6, p7, p8, p9, i) => {\n    i -= shiftOrigin;\n    if (p1) {\n      const replacement = CHARACTERS_TO_NORMALIZE[p1];\n      const jj = replacement.length;\n      for (let j = 1; j < jj; j++) {\n        positions.push([i - shift + j, shift - j]);\n      }\n      shift -= jj - 1;\n      return replacement;\n    }\n    if (p2) {\n      let replacement = NFKC_CHARS_TO_NORMALIZE.get(p2);\n      if (!replacement) {\n        replacement = p2.normalize(\"NFKC\");\n        NFKC_CHARS_TO_NORMALIZE.set(p2, replacement);\n      }\n      const jj = replacement.length;\n      for (let j = 1; j < jj; j++) {\n        positions.push([i - shift + j, shift - j]);\n      }\n      shift -= jj - 1;\n      return replacement;\n    }\n    if (p3) {\n      hasDiacritics = true;\n      if (i + eol === rawDiacriticsPositions[rawDiacriticsIndex]?.[1]) {\n        ++rawDiacriticsIndex;\n      } else {\n        positions.push([i - 1 - shift + 1, shift - 1]);\n        shift -= 1;\n        shiftOrigin += 1;\n      }\n      positions.push([i - shift + 1, shift]);\n      shiftOrigin += 1;\n      eol += 1;\n      return p3.charAt(0);\n    }\n    if (p4) {\n      const hasTrailingDashEOL = p4.endsWith(\"\\n\");\n      const len = hasTrailingDashEOL ? p4.length - 2 : p4.length;\n      hasDiacritics = true;\n      let jj = len;\n      if (i + eol === rawDiacriticsPositions[rawDiacriticsIndex]?.[1]) {\n        jj -= rawDiacriticsPositions[rawDiacriticsIndex][0];\n        ++rawDiacriticsIndex;\n      }\n      for (let j = 1; j <= jj; j++) {\n        positions.push([i - 1 - shift + j, shift - j]);\n      }\n      shift -= jj;\n      shiftOrigin += jj;\n      if (hasTrailingDashEOL) {\n        i += len - 1;\n        positions.push([i - shift + 1, 1 + shift]);\n        shift += 1;\n        shiftOrigin += 1;\n        eol += 1;\n        return p4.slice(0, len);\n      }\n      return p4;\n    }\n    if (p5) {\n      positions.push([i - shift + 3, 1 + shift]);\n      shift += 1;\n      shiftOrigin += 1;\n      eol += 1;\n      return p5.replace(\"\\n\", \"\");\n    }\n    if (p6) {\n      const len = p6.length - 2;\n      positions.push([i - shift + len, 1 + shift]);\n      shift += 1;\n      shiftOrigin += 1;\n      eol += 1;\n      return p6.slice(0, -2);\n    }\n    if (p7) {\n      const len = p7.length - 1;\n      positions.push([i - shift + len, shift]);\n      shiftOrigin += 1;\n      eol += 1;\n      return p7.slice(0, -1);\n    }\n    if (p8) {\n      positions.push([i - shift + 1, shift - 1]);\n      shift -= 1;\n      shiftOrigin += 1;\n      eol += 1;\n      return \" \";\n    }\n    if (i + eol === syllablePositions[syllableIndex]?.[1]) {\n      const newCharLen = syllablePositions[syllableIndex][0] - 1;\n      ++syllableIndex;\n      for (let j = 1; j <= newCharLen; j++) {\n        positions.push([i - (shift - j), shift - j]);\n      }\n      shift -= newCharLen;\n      shiftOrigin += newCharLen;\n    }\n    return p9;\n  });\n  positions.push([normalized.length, shift]);\n  return [normalized, positions, hasDiacritics];\n}\nfunction getOriginalIndex(diffs, pos, len) {\n  if (!diffs) {\n    return [pos, len];\n  }\n  const start = pos;\n  const end = pos + len - 1;\n  let i = binarySearchFirstItem(diffs, x => x[0] >= start);\n  if (diffs[i][0] > start) {\n    --i;\n  }\n  let j = binarySearchFirstItem(diffs, x => x[0] >= end, i);\n  if (diffs[j][0] > end) {\n    --j;\n  }\n  const oldStart = start + diffs[i][1];\n  const oldEnd = end + diffs[j][1];\n  const oldLen = oldEnd + 1 - oldStart;\n  return [oldStart, oldLen];\n}\nclass PDFFindController {\n  #state = null;\n  #updateMatchesCountOnProgress = true;\n  #visitedPagesCount = 0;\n  constructor({\n    linkService,\n    eventBus,\n    updateMatchesCountOnProgress = true\n  }) {\n    this._linkService = linkService;\n    this._eventBus = eventBus;\n    this.#updateMatchesCountOnProgress = updateMatchesCountOnProgress;\n    this.onIsPageVisible = null;\n    this.#reset();\n    eventBus._on(\"find\", this.#onFind.bind(this));\n    eventBus._on(\"findbarclose\", this.#onFindBarClose.bind(this));\n  }\n  get highlightMatches() {\n    return this._highlightMatches;\n  }\n  get pageMatches() {\n    return this._pageMatches;\n  }\n  get pageMatchesLength() {\n    return this._pageMatchesLength;\n  }\n  get selected() {\n    return this._selected;\n  }\n  get state() {\n    return this.#state;\n  }\n  setDocument(pdfDocument) {\n    if (this._pdfDocument) {\n      this.#reset();\n    }\n    if (!pdfDocument) {\n      return;\n    }\n    this._pdfDocument = pdfDocument;\n    this._firstPageCapability.resolve();\n  }\n  #onFind(state) {\n    if (!state) {\n      return;\n    }\n    const pdfDocument = this._pdfDocument;\n    const {\n      type\n    } = state;\n    if (this.#state === null || this.#shouldDirtyMatch(state)) {\n      this._dirtyMatch = true;\n    }\n    this.#state = state;\n    if (type !== \"highlightallchange\") {\n      this.#updateUIState(FindState.PENDING);\n    }\n    this._firstPageCapability.promise.then(() => {\n      if (!this._pdfDocument || pdfDocument && this._pdfDocument !== pdfDocument) {\n        return;\n      }\n      this.#extractText();\n      const findbarClosed = !this._highlightMatches;\n      const pendingTimeout = !!this._findTimeout;\n      if (this._findTimeout) {\n        clearTimeout(this._findTimeout);\n        this._findTimeout = null;\n      }\n      if (!type) {\n        this._findTimeout = setTimeout(() => {\n          this.#nextMatch();\n          this._findTimeout = null;\n        }, FIND_TIMEOUT);\n      } else if (this._dirtyMatch) {\n        this.#nextMatch();\n      } else if (type === \"again\") {\n        this.#nextMatch();\n        if (findbarClosed && this.#state.highlightAll) {\n          this.#updateAllPages();\n        }\n      } else if (type === \"highlightallchange\") {\n        if (pendingTimeout) {\n          this.#nextMatch();\n        } else {\n          this._highlightMatches = true;\n        }\n        this.#updateAllPages();\n      } else {\n        this.#nextMatch();\n      }\n    });\n  }\n  scrollMatchIntoView({\n    element = null,\n    selectedLeft = 0,\n    pageIndex = -1,\n    matchIndex = -1\n  }) {\n    if (!this._scrollMatches || !element) {\n      return;\n    } else if (matchIndex === -1 || matchIndex !== this._selected.matchIdx) {\n      return;\n    } else if (pageIndex === -1 || pageIndex !== this._selected.pageIdx) {\n      return;\n    }\n    this._scrollMatches = false;\n    const spot = {\n      top: MATCH_SCROLL_OFFSET_TOP,\n      left: selectedLeft + MATCH_SCROLL_OFFSET_LEFT\n    };\n    scrollIntoView(element, spot, true);\n  }\n  #reset() {\n    this._highlightMatches = false;\n    this._scrollMatches = false;\n    this._pdfDocument = null;\n    this._pageMatches = [];\n    this._pageMatchesLength = [];\n    this.#visitedPagesCount = 0;\n    this.#state = null;\n    this._selected = {\n      pageIdx: -1,\n      matchIdx: -1\n    };\n    this._offset = {\n      pageIdx: null,\n      matchIdx: null,\n      wrapped: false\n    };\n    this._extractTextPromises = [];\n    this._pageContents = [];\n    this._pageDiffs = [];\n    this._hasDiacritics = [];\n    this._matchesCountTotal = 0;\n    this._pagesToSearch = null;\n    this._pendingFindMatches = new Set();\n    this._resumePageIdx = null;\n    this._dirtyMatch = false;\n    clearTimeout(this._findTimeout);\n    this._findTimeout = null;\n    this._firstPageCapability = Promise.withResolvers();\n  }\n  get #query() {\n    const {\n      query\n    } = this.#state;\n    if (typeof query === \"string\") {\n      if (query !== this._rawQuery) {\n        this._rawQuery = query;\n        [this._normalizedQuery] = normalize(query);\n      }\n      return this._normalizedQuery;\n    }\n    return (query || []).filter(q => !!q).map(q => normalize(q)[0]);\n  }\n  #shouldDirtyMatch(state) {\n    const newQuery = state.query,\n      prevQuery = this.#state.query;\n    const newType = typeof newQuery,\n      prevType = typeof prevQuery;\n    if (newType !== prevType) {\n      return true;\n    }\n    if (newType === \"string\") {\n      if (newQuery !== prevQuery) {\n        return true;\n      }\n    } else if (JSON.stringify(newQuery) !== JSON.stringify(prevQuery)) {\n      return true;\n    }\n    switch (state.type) {\n      case \"again\":\n        const pageNumber = this._selected.pageIdx + 1;\n        const linkService = this._linkService;\n        return pageNumber >= 1 && pageNumber <= linkService.pagesCount && pageNumber !== linkService.page && !(this.onIsPageVisible?.(pageNumber) ?? true);\n      case \"highlightallchange\":\n        return false;\n    }\n    return true;\n  }\n  #isEntireWord(content, startIdx, length) {\n    let match = content.slice(0, startIdx).match(NOT_DIACRITIC_FROM_END_REG_EXP);\n    if (match) {\n      const first = content.charCodeAt(startIdx);\n      const limit = match[1].charCodeAt(0);\n      if (getCharacterType(first) === getCharacterType(limit)) {\n        return false;\n      }\n    }\n    match = content.slice(startIdx + length).match(NOT_DIACRITIC_FROM_START_REG_EXP);\n    if (match) {\n      const last = content.charCodeAt(startIdx + length - 1);\n      const limit = match[1].charCodeAt(0);\n      if (getCharacterType(last) === getCharacterType(limit)) {\n        return false;\n      }\n    }\n    return true;\n  }\n  #convertToRegExpString(query, hasDiacritics) {\n    const {\n      matchDiacritics\n    } = this.#state;\n    let isUnicode = false;\n    query = query.replaceAll(SPECIAL_CHARS_REG_EXP, (match, p1, p2, p3, p4, p5) => {\n      if (p1) {\n        return `[ ]*\\\\${p1}[ ]*`;\n      }\n      if (p2) {\n        return `[ ]*${p2}[ ]*`;\n      }\n      if (p3) {\n        return \"[ ]+\";\n      }\n      if (matchDiacritics) {\n        return p4 || p5;\n      }\n      if (p4) {\n        return DIACRITICS_EXCEPTION.has(p4.charCodeAt(0)) ? p4 : \"\";\n      }\n      if (hasDiacritics) {\n        isUnicode = true;\n        return `${p5}\\\\p{M}*`;\n      }\n      return p5;\n    });\n    const trailingSpaces = \"[ ]*\";\n    if (query.endsWith(trailingSpaces)) {\n      query = query.slice(0, query.length - trailingSpaces.length);\n    }\n    if (matchDiacritics) {\n      if (hasDiacritics) {\n        DIACRITICS_EXCEPTION_STR ||= String.fromCharCode(...DIACRITICS_EXCEPTION);\n        isUnicode = true;\n        query = `${query}(?=[${DIACRITICS_EXCEPTION_STR}]|[^\\\\p{M}]|$)`;\n      }\n    }\n    return [isUnicode, query];\n  }\n  #calculateMatch(pageIndex) {\n    const query = this.#query;\n    if (query.length === 0) {\n      return;\n    }\n    const pageContent = this._pageContents[pageIndex];\n    const matcherResult = this.match(query, pageContent, pageIndex);\n    const matches = this._pageMatches[pageIndex] = [];\n    const matchesLength = this._pageMatchesLength[pageIndex] = [];\n    const diffs = this._pageDiffs[pageIndex];\n    matcherResult?.forEach(({\n      index,\n      length\n    }) => {\n      const [matchPos, matchLen] = getOriginalIndex(diffs, index, length);\n      if (matchLen) {\n        matches.push(matchPos);\n        matchesLength.push(matchLen);\n      }\n    });\n    if (this.#state.highlightAll) {\n      this.#updatePage(pageIndex);\n    }\n    if (this._resumePageIdx === pageIndex) {\n      this._resumePageIdx = null;\n      this.#nextPageMatch();\n    }\n    const pageMatchesCount = matches.length;\n    this._matchesCountTotal += pageMatchesCount;\n    if (this.#updateMatchesCountOnProgress) {\n      if (pageMatchesCount > 0) {\n        this.#updateUIResultsCount();\n      }\n    } else if (++this.#visitedPagesCount === this._linkService.pagesCount) {\n      this.#updateUIResultsCount();\n    }\n  }\n  match(query, pageContent, pageIndex) {\n    const hasDiacritics = this._hasDiacritics[pageIndex];\n    let isUnicode = false;\n    if (typeof query === \"string\") {\n      [isUnicode, query] = this.#convertToRegExpString(query, hasDiacritics);\n    } else {\n      query = query.sort().reverse().map(q => {\n        const [isUnicodePart, queryPart] = this.#convertToRegExpString(q, hasDiacritics);\n        isUnicode ||= isUnicodePart;\n        return `(${queryPart})`;\n      }).join(\"|\");\n    }\n    if (!query) {\n      return undefined;\n    }\n    const {\n      caseSensitive,\n      entireWord\n    } = this.#state;\n    const flags = `g${isUnicode ? \"u\" : \"\"}${caseSensitive ? \"\" : \"i\"}`;\n    query = new RegExp(query, flags);\n    const matches = [];\n    let match;\n    while ((match = query.exec(pageContent)) !== null) {\n      if (entireWord && !this.#isEntireWord(pageContent, match.index, match[0].length)) {\n        continue;\n      }\n      matches.push({\n        index: match.index,\n        length: match[0].length\n      });\n    }\n    return matches;\n  }\n  #extractText() {\n    if (this._extractTextPromises.length > 0) {\n      return;\n    }\n    let deferred = Promise.resolve();\n    const textOptions = {\n      disableNormalization: true\n    };\n    for (let i = 0, ii = this._linkService.pagesCount; i < ii; i++) {\n      const {\n        promise,\n        resolve\n      } = Promise.withResolvers();\n      this._extractTextPromises[i] = promise;\n      deferred = deferred.then(() => {\n        return this._pdfDocument.getPage(i + 1).then(pdfPage => pdfPage.getTextContent(textOptions)).then(textContent => {\n          const strBuf = [];\n          for (const textItem of textContent.items) {\n            strBuf.push(textItem.str);\n            if (textItem.hasEOL) {\n              strBuf.push(\"\\n\");\n            }\n          }\n          [this._pageContents[i], this._pageDiffs[i], this._hasDiacritics[i]] = normalize(strBuf.join(\"\"));\n          resolve();\n        }, reason => {\n          console.error(`Unable to get text content for page ${i + 1}`, reason);\n          this._pageContents[i] = \"\";\n          this._pageDiffs[i] = null;\n          this._hasDiacritics[i] = false;\n          resolve();\n        });\n      });\n    }\n  }\n  #updatePage(index) {\n    if (this._scrollMatches && this._selected.pageIdx === index) {\n      this._linkService.page = index + 1;\n    }\n    this._eventBus.dispatch(\"updatetextlayermatches\", {\n      source: this,\n      pageIndex: index\n    });\n  }\n  #updateAllPages() {\n    this._eventBus.dispatch(\"updatetextlayermatches\", {\n      source: this,\n      pageIndex: -1\n    });\n  }\n  #nextMatch() {\n    const previous = this.#state.findPrevious;\n    const currentPageIndex = this._linkService.page - 1;\n    const numPages = this._linkService.pagesCount;\n    this._highlightMatches = true;\n    if (this._dirtyMatch) {\n      this._dirtyMatch = false;\n      this._selected.pageIdx = this._selected.matchIdx = -1;\n      this._offset.pageIdx = currentPageIndex;\n      this._offset.matchIdx = null;\n      this._offset.wrapped = false;\n      this._resumePageIdx = null;\n      this._pageMatches.length = 0;\n      this._pageMatchesLength.length = 0;\n      this.#visitedPagesCount = 0;\n      this._matchesCountTotal = 0;\n      this.#updateAllPages();\n      for (let i = 0; i < numPages; i++) {\n        if (this._pendingFindMatches.has(i)) {\n          continue;\n        }\n        this._pendingFindMatches.add(i);\n        this._extractTextPromises[i].then(() => {\n          this._pendingFindMatches.delete(i);\n          this.#calculateMatch(i);\n        });\n      }\n    }\n    const query = this.#query;\n    if (query.length === 0) {\n      this.#updateUIState(FindState.FOUND);\n      return;\n    }\n    if (this._resumePageIdx) {\n      return;\n    }\n    const offset = this._offset;\n    this._pagesToSearch = numPages;\n    if (offset.matchIdx !== null) {\n      const numPageMatches = this._pageMatches[offset.pageIdx].length;\n      if (!previous && offset.matchIdx + 1 < numPageMatches || previous && offset.matchIdx > 0) {\n        offset.matchIdx = previous ? offset.matchIdx - 1 : offset.matchIdx + 1;\n        this.#updateMatch(true);\n        return;\n      }\n      this.#advanceOffsetPage(previous);\n    }\n    this.#nextPageMatch();\n  }\n  #matchesReady(matches) {\n    const offset = this._offset;\n    const numMatches = matches.length;\n    const previous = this.#state.findPrevious;\n    if (numMatches) {\n      offset.matchIdx = previous ? numMatches - 1 : 0;\n      this.#updateMatch(true);\n      return true;\n    }\n    this.#advanceOffsetPage(previous);\n    if (offset.wrapped) {\n      offset.matchIdx = null;\n      if (this._pagesToSearch < 0) {\n        this.#updateMatch(false);\n        return true;\n      }\n    }\n    return false;\n  }\n  #nextPageMatch() {\n    if (this._resumePageIdx !== null) {\n      console.error(\"There can only be one pending page.\");\n    }\n    let matches = null;\n    do {\n      const pageIdx = this._offset.pageIdx;\n      matches = this._pageMatches[pageIdx];\n      if (!matches) {\n        this._resumePageIdx = pageIdx;\n        break;\n      }\n    } while (!this.#matchesReady(matches));\n  }\n  #advanceOffsetPage(previous) {\n    const offset = this._offset;\n    const numPages = this._linkService.pagesCount;\n    offset.pageIdx = previous ? offset.pageIdx - 1 : offset.pageIdx + 1;\n    offset.matchIdx = null;\n    this._pagesToSearch--;\n    if (offset.pageIdx >= numPages || offset.pageIdx < 0) {\n      offset.pageIdx = previous ? numPages - 1 : 0;\n      offset.wrapped = true;\n    }\n  }\n  #updateMatch(found = false) {\n    let state = FindState.NOT_FOUND;\n    const wrapped = this._offset.wrapped;\n    this._offset.wrapped = false;\n    if (found) {\n      const previousPage = this._selected.pageIdx;\n      this._selected.pageIdx = this._offset.pageIdx;\n      this._selected.matchIdx = this._offset.matchIdx;\n      state = wrapped ? FindState.WRAPPED : FindState.FOUND;\n      if (previousPage !== -1 && previousPage !== this._selected.pageIdx) {\n        this.#updatePage(previousPage);\n      }\n    }\n    this.#updateUIState(state, this.#state.findPrevious);\n    if (this._selected.pageIdx !== -1) {\n      this._scrollMatches = true;\n      this.#updatePage(this._selected.pageIdx);\n    }\n  }\n  #onFindBarClose(evt) {\n    const pdfDocument = this._pdfDocument;\n    this._firstPageCapability.promise.then(() => {\n      if (!this._pdfDocument || pdfDocument && this._pdfDocument !== pdfDocument) {\n        return;\n      }\n      if (this._findTimeout) {\n        clearTimeout(this._findTimeout);\n        this._findTimeout = null;\n      }\n      if (this._resumePageIdx) {\n        this._resumePageIdx = null;\n        this._dirtyMatch = true;\n      }\n      this.#updateUIState(FindState.FOUND);\n      this._highlightMatches = false;\n      this.#updateAllPages();\n    });\n  }\n  #requestMatchesCount() {\n    const {\n      pageIdx,\n      matchIdx\n    } = this._selected;\n    let current = 0,\n      total = this._matchesCountTotal;\n    if (matchIdx !== -1) {\n      for (let i = 0; i < pageIdx; i++) {\n        current += this._pageMatches[i]?.length || 0;\n      }\n      current += matchIdx + 1;\n    }\n    if (current < 1 || current > total) {\n      current = total = 0;\n    }\n    return {\n      current,\n      total\n    };\n  }\n  #updateUIResultsCount() {\n    this._eventBus.dispatch(\"updatefindmatchescount\", {\n      source: this,\n      matchesCount: this.#requestMatchesCount()\n    });\n  }\n  #updateUIState(state, previous = false) {\n    if (!this.#updateMatchesCountOnProgress && (this.#visitedPagesCount !== this._linkService.pagesCount || state === FindState.PENDING)) {\n      return;\n    }\n    this._eventBus.dispatch(\"updatefindcontrolstate\", {\n      source: this,\n      state,\n      previous,\n      entireWord: this.#state?.entireWord ?? null,\n      matchesCount: this.#requestMatchesCount(),\n      rawQuery: this.#state?.query ?? null\n    });\n  }\n}\n; // ./web/pdf_link_service.js\n\nconst DEFAULT_LINK_REL = \"noopener noreferrer nofollow\";\nconst LinkTarget = {\n  NONE: 0,\n  SELF: 1,\n  BLANK: 2,\n  PARENT: 3,\n  TOP: 4\n};\nclass PDFLinkService {\n  externalLinkEnabled = true;\n  constructor({\n    eventBus,\n    externalLinkTarget = null,\n    externalLinkRel = null,\n    ignoreDestinationZoom = false\n  } = {}) {\n    this.eventBus = eventBus;\n    this.externalLinkTarget = externalLinkTarget;\n    this.externalLinkRel = externalLinkRel;\n    this._ignoreDestinationZoom = ignoreDestinationZoom;\n    this.baseUrl = null;\n    this.pdfDocument = null;\n    this.pdfViewer = null;\n    this.pdfHistory = null;\n  }\n  setDocument(pdfDocument, baseUrl = null) {\n    this.baseUrl = baseUrl;\n    this.pdfDocument = pdfDocument;\n  }\n  setViewer(pdfViewer) {\n    this.pdfViewer = pdfViewer;\n  }\n  setHistory(pdfHistory) {\n    this.pdfHistory = pdfHistory;\n  }\n  get pagesCount() {\n    return this.pdfDocument ? this.pdfDocument.numPages : 0;\n  }\n  get page() {\n    return this.pdfDocument ? this.pdfViewer.currentPageNumber : 1;\n  }\n  set page(value) {\n    if (this.pdfDocument) {\n      this.pdfViewer.currentPageNumber = value;\n    }\n  }\n  get rotation() {\n    return this.pdfDocument ? this.pdfViewer.pagesRotation : 0;\n  }\n  set rotation(value) {\n    if (this.pdfDocument) {\n      this.pdfViewer.pagesRotation = value;\n    }\n  }\n  get isInPresentationMode() {\n    return this.pdfDocument ? this.pdfViewer.isInPresentationMode : false;\n  }\n  goToDestination(dest) {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this3.pdfDocument) {\n        return;\n      }\n      let namedDest, explicitDest, pageNumber;\n      if (typeof dest === \"string\") {\n        namedDest = dest;\n        explicitDest = yield _this3.pdfDocument.getDestination(dest);\n      } else {\n        namedDest = null;\n        explicitDest = yield dest;\n      }\n      if (!Array.isArray(explicitDest)) {\n        console.error(`goToDestination: \"${explicitDest}\" is not a valid destination array, for dest=\"${dest}\".`);\n        return;\n      }\n      const [destRef] = explicitDest;\n      if (destRef && typeof destRef === \"object\") {\n        pageNumber = _this3.pdfDocument.cachedPageNumber(destRef);\n        if (!pageNumber) {\n          try {\n            pageNumber = (yield _this3.pdfDocument.getPageIndex(destRef)) + 1;\n          } catch {\n            console.error(`goToDestination: \"${destRef}\" is not a valid page reference, for dest=\"${dest}\".`);\n            return;\n          }\n        }\n      } else if (Number.isInteger(destRef)) {\n        pageNumber = destRef + 1;\n      }\n      if (!pageNumber || pageNumber < 1 || pageNumber > _this3.pagesCount) {\n        console.error(`goToDestination: \"${pageNumber}\" is not a valid page number, for dest=\"${dest}\".`);\n        return;\n      }\n      if (_this3.pdfHistory) {\n        _this3.pdfHistory.pushCurrentPosition();\n        _this3.pdfHistory.push({\n          namedDest,\n          explicitDest,\n          pageNumber\n        });\n      }\n      _this3.pdfViewer.scrollPageIntoView({\n        pageNumber,\n        destArray: explicitDest,\n        ignoreDestinationZoom: _this3._ignoreDestinationZoom\n      });\n    })();\n  }\n  goToPage(val) {\n    if (!this.pdfDocument) {\n      return;\n    }\n    const pageNumber = typeof val === \"string\" && this.pdfViewer.pageLabelToPageNumber(val) || val | 0;\n    if (!(Number.isInteger(pageNumber) && pageNumber > 0 && pageNumber <= this.pagesCount)) {\n      console.error(`PDFLinkService.goToPage: \"${val}\" is not a valid page.`);\n      return;\n    }\n    if (this.pdfHistory) {\n      this.pdfHistory.pushCurrentPosition();\n      this.pdfHistory.pushPage(pageNumber);\n    }\n    this.pdfViewer.scrollPageIntoView({\n      pageNumber\n    });\n  }\n  addLinkAttributes(link, url, newWindow = false) {\n    if (!url || typeof url !== \"string\") {\n      throw new Error('A valid \"url\" parameter must provided.');\n    }\n    const target = newWindow ? LinkTarget.BLANK : this.externalLinkTarget,\n      rel = this.externalLinkRel;\n    if (this.externalLinkEnabled) {\n      link.href = link.title = url;\n    } else {\n      link.href = \"\";\n      link.title = `Disabled: ${url}`;\n      link.onclick = () => false;\n    }\n    let targetStr = \"\";\n    switch (target) {\n      case LinkTarget.NONE:\n        break;\n      case LinkTarget.SELF:\n        targetStr = \"_self\";\n        break;\n      case LinkTarget.BLANK:\n        targetStr = \"_blank\";\n        break;\n      case LinkTarget.PARENT:\n        targetStr = \"_parent\";\n        break;\n      case LinkTarget.TOP:\n        targetStr = \"_top\";\n        break;\n    }\n    link.target = targetStr;\n    link.rel = typeof rel === \"string\" ? rel : DEFAULT_LINK_REL;\n  }\n  getDestinationHash(dest) {\n    if (typeof dest === \"string\") {\n      if (dest.length > 0) {\n        return this.getAnchorUrl(\"#\" + escape(dest));\n      }\n    } else if (Array.isArray(dest)) {\n      const str = JSON.stringify(dest);\n      if (str.length > 0) {\n        return this.getAnchorUrl(\"#\" + escape(str));\n      }\n    }\n    return this.getAnchorUrl(\"\");\n  }\n  getAnchorUrl(anchor) {\n    return this.baseUrl ? this.baseUrl + anchor : anchor;\n  }\n  setHash(hash) {\n    if (!this.pdfDocument) {\n      return;\n    }\n    let pageNumber, dest;\n    if (hash.includes(\"=\")) {\n      const params = parseQueryString(hash);\n      if (params.has(\"search\")) {\n        const query = params.get(\"search\").replaceAll('\"', \"\"),\n          phrase = params.get(\"phrase\") === \"true\";\n        this.eventBus.dispatch(\"findfromurlhash\", {\n          source: this,\n          query: phrase ? query : query.match(/\\S+/g)\n        });\n      }\n      if (params.has(\"page\")) {\n        pageNumber = params.get(\"page\") | 0 || 1;\n      }\n      if (params.has(\"zoom\")) {\n        const zoomArgs = params.get(\"zoom\").split(\",\");\n        const zoomArg = zoomArgs[0];\n        const zoomArgNumber = parseFloat(zoomArg);\n        if (!zoomArg.includes(\"Fit\")) {\n          dest = [null, {\n            name: \"XYZ\"\n          }, zoomArgs.length > 1 ? zoomArgs[1] | 0 : null, zoomArgs.length > 2 ? zoomArgs[2] | 0 : null, zoomArgNumber ? zoomArgNumber / 100 : zoomArg];\n        } else if (zoomArg === \"Fit\" || zoomArg === \"FitB\") {\n          dest = [null, {\n            name: zoomArg\n          }];\n        } else if (zoomArg === \"FitH\" || zoomArg === \"FitBH\" || zoomArg === \"FitV\" || zoomArg === \"FitBV\") {\n          dest = [null, {\n            name: zoomArg\n          }, zoomArgs.length > 1 ? zoomArgs[1] | 0 : null];\n        } else if (zoomArg === \"FitR\") {\n          if (zoomArgs.length !== 5) {\n            console.error('PDFLinkService.setHash: Not enough parameters for \"FitR\".');\n          } else {\n            dest = [null, {\n              name: zoomArg\n            }, zoomArgs[1] | 0, zoomArgs[2] | 0, zoomArgs[3] | 0, zoomArgs[4] | 0];\n          }\n        } else {\n          console.error(`PDFLinkService.setHash: \"${zoomArg}\" is not a valid zoom value.`);\n        }\n      }\n      if (dest) {\n        this.pdfViewer.scrollPageIntoView({\n          pageNumber: pageNumber || this.page,\n          destArray: dest,\n          allowNegativeOffset: true\n        });\n      } else if (pageNumber) {\n        this.page = pageNumber;\n      }\n      if (params.has(\"pagemode\")) {\n        this.eventBus.dispatch(\"pagemode\", {\n          source: this,\n          mode: params.get(\"pagemode\")\n        });\n      }\n      if (params.has(\"nameddest\")) {\n        this.goToDestination(params.get(\"nameddest\"));\n      }\n      return;\n    }\n    dest = unescape(hash);\n    try {\n      dest = JSON.parse(dest);\n      if (!Array.isArray(dest)) {\n        dest = dest.toString();\n      }\n    } catch {}\n    if (typeof dest === \"string\" || PDFLinkService.#isValidExplicitDest(dest)) {\n      this.goToDestination(dest);\n      return;\n    }\n    console.error(`PDFLinkService.setHash: \"${unescape(hash)}\" is not a valid destination.`);\n  }\n  executeNamedAction(action) {\n    if (!this.pdfDocument) {\n      return;\n    }\n    switch (action) {\n      case \"GoBack\":\n        this.pdfHistory?.back();\n        break;\n      case \"GoForward\":\n        this.pdfHistory?.forward();\n        break;\n      case \"NextPage\":\n        this.pdfViewer.nextPage();\n        break;\n      case \"PrevPage\":\n        this.pdfViewer.previousPage();\n        break;\n      case \"LastPage\":\n        this.page = this.pagesCount;\n        break;\n      case \"FirstPage\":\n        this.page = 1;\n        break;\n      default:\n        break;\n    }\n    this.eventBus.dispatch(\"namedaction\", {\n      source: this,\n      action\n    });\n  }\n  executeSetOCGState(action) {\n    var _this4 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this4.pdfDocument) {\n        return;\n      }\n      const pdfDocument = _this4.pdfDocument,\n        optionalContentConfig = yield _this4.pdfViewer.optionalContentConfigPromise;\n      if (pdfDocument !== _this4.pdfDocument) {\n        return;\n      }\n      optionalContentConfig.setOCGState(action);\n      _this4.pdfViewer.optionalContentConfigPromise = Promise.resolve(optionalContentConfig);\n    })();\n  }\n  static #isValidExplicitDest(dest) {\n    if (!Array.isArray(dest) || dest.length < 2) {\n      return false;\n    }\n    const [page, zoom, ...args] = dest;\n    if (!(typeof page === \"object\" && Number.isInteger(page?.num) && Number.isInteger(page?.gen)) && !Number.isInteger(page)) {\n      return false;\n    }\n    if (!(typeof zoom === \"object\" && typeof zoom?.name === \"string\")) {\n      return false;\n    }\n    const argsLen = args.length;\n    let allowNull = true;\n    switch (zoom.name) {\n      case \"XYZ\":\n        if (argsLen < 2 || argsLen > 3) {\n          return false;\n        }\n        break;\n      case \"Fit\":\n      case \"FitB\":\n        return argsLen === 0;\n      case \"FitH\":\n      case \"FitBH\":\n      case \"FitV\":\n      case \"FitBV\":\n        if (argsLen > 1) {\n          return false;\n        }\n        break;\n      case \"FitR\":\n        if (argsLen !== 4) {\n          return false;\n        }\n        allowNull = false;\n        break;\n      default:\n        return false;\n    }\n    for (const arg of args) {\n      if (!(typeof arg === \"number\" || allowNull && arg === null)) {\n        return false;\n      }\n    }\n    return true;\n  }\n}\nclass SimpleLinkService extends PDFLinkService {\n  setDocument(pdfDocument, baseUrl = null) {}\n}\n; // ./web/pdfjs.js\nconst {\n  AbortException,\n  AnnotationEditorLayer,\n  AnnotationEditorParamsType,\n  AnnotationEditorType,\n  AnnotationEditorUIManager,\n  AnnotationLayer,\n  AnnotationMode,\n  build,\n  ColorPicker,\n  createValidAbsoluteUrl,\n  DOMSVGFactory,\n  DrawLayer,\n  FeatureTest,\n  fetchData,\n  getDocument,\n  getFilenameFromUrl,\n  getPdfFilenameFromUrl,\n  getXfaPageViewport,\n  GlobalWorkerOptions,\n  ImageKind,\n  InvalidPDFException,\n  isDataScheme,\n  isPdfFile,\n  MissingPDFException,\n  noContextMenu,\n  normalizeUnicode,\n  OPS,\n  OutputScale,\n  PasswordResponses,\n  PDFDataRangeTransport,\n  PDFDateString,\n  PDFWorker,\n  PermissionFlag,\n  PixelsPerInch,\n  RenderingCancelledException,\n  setLayerDimensions,\n  shadow,\n  TextLayer,\n  UnexpectedResponseException,\n  Util,\n  VerbosityLevel,\n  version,\n  XfaLayer\n} = globalThis.pdfjsLib;\n; // ./web/annotation_layer_builder.js\n\nclass AnnotationLayerBuilder {\n  #onAppend = null;\n  #eventAbortController = null;\n  constructor({\n    pdfPage,\n    linkService,\n    downloadManager,\n    annotationStorage = null,\n    imageResourcesPath = \"\",\n    renderForms = true,\n    enableScripting = false,\n    hasJSActionsPromise = null,\n    fieldObjectsPromise = null,\n    annotationCanvasMap = null,\n    accessibilityManager = null,\n    annotationEditorUIManager = null,\n    onAppend = null\n  }) {\n    this.pdfPage = pdfPage;\n    this.linkService = linkService;\n    this.downloadManager = downloadManager;\n    this.imageResourcesPath = imageResourcesPath;\n    this.renderForms = renderForms;\n    this.annotationStorage = annotationStorage;\n    this.enableScripting = enableScripting;\n    this._hasJSActionsPromise = hasJSActionsPromise || Promise.resolve(false);\n    this._fieldObjectsPromise = fieldObjectsPromise || Promise.resolve(null);\n    this._annotationCanvasMap = annotationCanvasMap;\n    this._accessibilityManager = accessibilityManager;\n    this._annotationEditorUIManager = annotationEditorUIManager;\n    this.#onAppend = onAppend;\n    this.annotationLayer = null;\n    this.div = null;\n    this._cancelled = false;\n    this._eventBus = linkService.eventBus;\n  }\n  render(viewport, options, intent = \"display\") {\n    var _this5 = this;\n    return _asyncToGenerator(function* () {\n      if (_this5.div) {\n        if (_this5._cancelled || !_this5.annotationLayer) {\n          return;\n        }\n        _this5.annotationLayer.update({\n          viewport: viewport.clone({\n            dontFlip: true\n          })\n        });\n        return;\n      }\n      const [annotations, hasJSActions, fieldObjects] = yield Promise.all([_this5.pdfPage.getAnnotations({\n        intent\n      }), _this5._hasJSActionsPromise, _this5._fieldObjectsPromise]);\n      if (_this5._cancelled) {\n        return;\n      }\n      const div = _this5.div = document.createElement(\"div\");\n      div.className = \"annotationLayer\";\n      _this5.#onAppend?.(div);\n      if (annotations.length === 0) {\n        _this5.hide();\n        return;\n      }\n      _this5.annotationLayer = new AnnotationLayer({\n        div,\n        accessibilityManager: _this5._accessibilityManager,\n        annotationCanvasMap: _this5._annotationCanvasMap,\n        annotationEditorUIManager: _this5._annotationEditorUIManager,\n        page: _this5.pdfPage,\n        viewport: viewport.clone({\n          dontFlip: true\n        }),\n        structTreeLayer: options?.structTreeLayer || null\n      });\n      yield _this5.annotationLayer.render({\n        annotations,\n        imageResourcesPath: _this5.imageResourcesPath,\n        renderForms: _this5.renderForms,\n        linkService: _this5.linkService,\n        downloadManager: _this5.downloadManager,\n        annotationStorage: _this5.annotationStorage,\n        enableScripting: _this5.enableScripting,\n        hasJSActions,\n        fieldObjects\n      });\n      if (_this5.linkService.isInPresentationMode) {\n        _this5.#updatePresentationModeState(PresentationModeState.FULLSCREEN);\n      }\n      if (!_this5.#eventAbortController) {\n        _this5.#eventAbortController = new AbortController();\n        _this5._eventBus?._on(\"presentationmodechanged\", evt => {\n          _this5.#updatePresentationModeState(evt.state);\n        }, {\n          signal: _this5.#eventAbortController.signal\n        });\n      }\n    })();\n  }\n  cancel() {\n    this._cancelled = true;\n    this.#eventAbortController?.abort();\n    this.#eventAbortController = null;\n  }\n  hide() {\n    if (!this.div) {\n      return;\n    }\n    this.div.hidden = true;\n  }\n  hasEditableAnnotations() {\n    return !!this.annotationLayer?.hasEditableAnnotations();\n  }\n  #updatePresentationModeState(state) {\n    if (!this.div) {\n      return;\n    }\n    let disableFormElements = false;\n    switch (state) {\n      case PresentationModeState.FULLSCREEN:\n        disableFormElements = true;\n        break;\n      case PresentationModeState.NORMAL:\n        break;\n      default:\n        return;\n    }\n    for (const section of this.div.childNodes) {\n      if (section.hasAttribute(\"data-internal-link\")) {\n        continue;\n      }\n      section.inert = disableFormElements;\n    }\n  }\n}\n; // ./web/download_manager.js\n\nfunction download(blobUrl, filename) {\n  const a = document.createElement(\"a\");\n  if (!a.click) {\n    throw new Error('DownloadManager: \"a.click()\" is not supported.');\n  }\n  a.href = blobUrl;\n  a.target = \"_parent\";\n  if (\"download\" in a) {\n    a.download = filename;\n  }\n  (document.body || document.documentElement).append(a);\n  a.click();\n  a.remove();\n}\nclass DownloadManager {\n  #openBlobUrls = new WeakMap();\n  downloadData(data, filename, contentType) {\n    const blobUrl = URL.createObjectURL(new Blob([data], {\n      type: contentType\n    }));\n    download(blobUrl, filename);\n  }\n  openOrDownloadData(data, filename, dest = null) {\n    const isPdfData = isPdfFile(filename);\n    const contentType = isPdfData ? \"application/pdf\" : \"\";\n    this.downloadData(data, filename, contentType);\n    return false;\n  }\n  download(data, url, filename) {\n    let blobUrl;\n    if (data) {\n      blobUrl = URL.createObjectURL(new Blob([data], {\n        type: \"application/pdf\"\n      }));\n    } else {\n      if (!createValidAbsoluteUrl(url, \"http://example.com\")) {\n        console.error(`download - not a valid URL: ${url}`);\n        return;\n      }\n      blobUrl = url + \"#pdfjs.action=download\";\n    }\n    download(blobUrl, filename);\n  }\n}\n; // ./web/event_utils.js\nconst WaitOnType = {\n  EVENT: \"event\",\n  TIMEOUT: \"timeout\"\n};\nfunction waitOnEventOrTimeout(_x) {\n  return _waitOnEventOrTimeout.apply(this, arguments);\n}\nfunction _waitOnEventOrTimeout() {\n  _waitOnEventOrTimeout = _asyncToGenerator(function* ({\n    target,\n    name,\n    delay = 0\n  }) {\n    if (typeof target !== \"object\" || !(name && typeof name === \"string\") || !(Number.isInteger(delay) && delay >= 0)) {\n      throw new Error(\"waitOnEventOrTimeout - invalid parameters.\");\n    }\n    const {\n      promise,\n      resolve\n    } = Promise.withResolvers();\n    const ac = new AbortController();\n    function handler(type) {\n      ac.abort();\n      clearTimeout(timeout);\n      resolve(type);\n    }\n    const evtMethod = target instanceof EventBus ? \"_on\" : \"addEventListener\";\n    target[evtMethod](name, handler.bind(null, WaitOnType.EVENT), {\n      signal: ac.signal\n    });\n    const timeout = setTimeout(handler.bind(null, WaitOnType.TIMEOUT), delay);\n    return promise;\n  });\n  return _waitOnEventOrTimeout.apply(this, arguments);\n}\nclass EventBus {\n  #listeners = Object.create(null);\n  on(eventName, listener, options = null) {\n    this._on(eventName, listener, {\n      external: true,\n      once: options?.once,\n      signal: options?.signal\n    });\n  }\n  off(eventName, listener, options = null) {\n    this._off(eventName, listener);\n  }\n  dispatch(eventName, data) {\n    const eventListeners = this.#listeners[eventName];\n    if (!eventListeners || eventListeners.length === 0) {\n      return;\n    }\n    let externalListeners;\n    for (const {\n      listener,\n      external,\n      once\n    } of eventListeners.slice(0)) {\n      if (once) {\n        this._off(eventName, listener);\n      }\n      if (external) {\n        (externalListeners ||= []).push(listener);\n        continue;\n      }\n      listener(data);\n    }\n    if (externalListeners) {\n      for (const listener of externalListeners) {\n        listener(data);\n      }\n      externalListeners = null;\n    }\n  }\n  _on(eventName, listener, options = null) {\n    let rmAbort = null;\n    if (options?.signal instanceof AbortSignal) {\n      const {\n        signal\n      } = options;\n      if (signal.aborted) {\n        console.error(\"Cannot use an `aborted` signal.\");\n        return;\n      }\n      const onAbort = () => this._off(eventName, listener);\n      rmAbort = () => signal.removeEventListener(\"abort\", onAbort);\n      signal.addEventListener(\"abort\", onAbort);\n    }\n    const eventListeners = this.#listeners[eventName] ||= [];\n    eventListeners.push({\n      listener,\n      external: options?.external === true,\n      once: options?.once === true,\n      rmAbort\n    });\n  }\n  _off(eventName, listener, options = null) {\n    const eventListeners = this.#listeners[eventName];\n    if (!eventListeners) {\n      return;\n    }\n    for (let i = 0, ii = eventListeners.length; i < ii; i++) {\n      const evt = eventListeners[i];\n      if (evt.listener === listener) {\n        evt.rmAbort?.();\n        eventListeners.splice(i, 1);\n        return;\n      }\n    }\n  }\n}\nclass FirefoxEventBus extends EventBus {\n  #externalServices;\n  #globalEventNames;\n  #isInAutomation;\n  constructor(globalEventNames, externalServices, isInAutomation) {\n    super();\n    this.#globalEventNames = globalEventNames;\n    this.#externalServices = externalServices;\n    this.#isInAutomation = isInAutomation;\n  }\n  dispatch(eventName, data) {\n    throw new Error(\"Not implemented: FirefoxEventBus.dispatch\");\n  }\n}\n; // ./node_modules/@fluent/bundle/esm/types.js\nclass FluentType {\n  constructor(value) {\n    this.value = value;\n  }\n  valueOf() {\n    return this.value;\n  }\n}\nclass FluentNone extends FluentType {\n  constructor(value = \"???\") {\n    super(value);\n  }\n  toString(scope) {\n    return `{${this.value}}`;\n  }\n}\nclass FluentNumber extends FluentType {\n  constructor(value, opts = {}) {\n    super(value);\n    this.opts = opts;\n  }\n  toString(scope) {\n    try {\n      const nf = scope.memoizeIntlObject(Intl.NumberFormat, this.opts);\n      return nf.format(this.value);\n    } catch (err) {\n      scope.reportError(err);\n      return this.value.toString(10);\n    }\n  }\n}\nclass FluentDateTime extends FluentType {\n  constructor(value, opts = {}) {\n    super(value);\n    this.opts = opts;\n  }\n  toString(scope) {\n    try {\n      const dtf = scope.memoizeIntlObject(Intl.DateTimeFormat, this.opts);\n      return dtf.format(this.value);\n    } catch (err) {\n      scope.reportError(err);\n      return new Date(this.value).toISOString();\n    }\n  }\n}\n; // ./node_modules/@fluent/bundle/esm/resolver.js\n\nconst MAX_PLACEABLES = 100;\nconst FSI = \"\\u2068\";\nconst PDI = \"\\u2069\";\nfunction match(scope, selector, key) {\n  if (key === selector) {\n    return true;\n  }\n  if (key instanceof FluentNumber && selector instanceof FluentNumber && key.value === selector.value) {\n    return true;\n  }\n  if (selector instanceof FluentNumber && typeof key === \"string\") {\n    let category = scope.memoizeIntlObject(Intl.PluralRules, selector.opts).select(selector.value);\n    if (key === category) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction getDefault(scope, variants, star) {\n  if (variants[star]) {\n    return resolvePattern(scope, variants[star].value);\n  }\n  scope.reportError(new RangeError(\"No default\"));\n  return new FluentNone();\n}\nfunction getArguments(scope, args) {\n  const positional = [];\n  const named = Object.create(null);\n  for (const arg of args) {\n    if (arg.type === \"narg\") {\n      named[arg.name] = resolveExpression(scope, arg.value);\n    } else {\n      positional.push(resolveExpression(scope, arg));\n    }\n  }\n  return {\n    positional,\n    named\n  };\n}\nfunction resolveExpression(scope, expr) {\n  switch (expr.type) {\n    case \"str\":\n      return expr.value;\n    case \"num\":\n      return new FluentNumber(expr.value, {\n        minimumFractionDigits: expr.precision\n      });\n    case \"var\":\n      return resolveVariableReference(scope, expr);\n    case \"mesg\":\n      return resolveMessageReference(scope, expr);\n    case \"term\":\n      return resolveTermReference(scope, expr);\n    case \"func\":\n      return resolveFunctionReference(scope, expr);\n    case \"select\":\n      return resolveSelectExpression(scope, expr);\n    default:\n      return new FluentNone();\n  }\n}\nfunction resolveVariableReference(scope, {\n  name\n}) {\n  let arg;\n  if (scope.params) {\n    if (Object.prototype.hasOwnProperty.call(scope.params, name)) {\n      arg = scope.params[name];\n    } else {\n      return new FluentNone(`$${name}`);\n    }\n  } else if (scope.args && Object.prototype.hasOwnProperty.call(scope.args, name)) {\n    arg = scope.args[name];\n  } else {\n    scope.reportError(new ReferenceError(`Unknown variable: $${name}`));\n    return new FluentNone(`$${name}`);\n  }\n  if (arg instanceof FluentType) {\n    return arg;\n  }\n  switch (typeof arg) {\n    case \"string\":\n      return arg;\n    case \"number\":\n      return new FluentNumber(arg);\n    case \"object\":\n      if (arg instanceof Date) {\n        return new FluentDateTime(arg.getTime());\n      }\n    default:\n      scope.reportError(new TypeError(`Variable type not supported: $${name}, ${typeof arg}`));\n      return new FluentNone(`$${name}`);\n  }\n}\nfunction resolveMessageReference(scope, {\n  name,\n  attr\n}) {\n  const message = scope.bundle._messages.get(name);\n  if (!message) {\n    scope.reportError(new ReferenceError(`Unknown message: ${name}`));\n    return new FluentNone(name);\n  }\n  if (attr) {\n    const attribute = message.attributes[attr];\n    if (attribute) {\n      return resolvePattern(scope, attribute);\n    }\n    scope.reportError(new ReferenceError(`Unknown attribute: ${attr}`));\n    return new FluentNone(`${name}.${attr}`);\n  }\n  if (message.value) {\n    return resolvePattern(scope, message.value);\n  }\n  scope.reportError(new ReferenceError(`No value: ${name}`));\n  return new FluentNone(name);\n}\nfunction resolveTermReference(scope, {\n  name,\n  attr,\n  args\n}) {\n  const id = `-${name}`;\n  const term = scope.bundle._terms.get(id);\n  if (!term) {\n    scope.reportError(new ReferenceError(`Unknown term: ${id}`));\n    return new FluentNone(id);\n  }\n  if (attr) {\n    const attribute = term.attributes[attr];\n    if (attribute) {\n      scope.params = getArguments(scope, args).named;\n      const resolved = resolvePattern(scope, attribute);\n      scope.params = null;\n      return resolved;\n    }\n    scope.reportError(new ReferenceError(`Unknown attribute: ${attr}`));\n    return new FluentNone(`${id}.${attr}`);\n  }\n  scope.params = getArguments(scope, args).named;\n  const resolved = resolvePattern(scope, term.value);\n  scope.params = null;\n  return resolved;\n}\nfunction resolveFunctionReference(scope, {\n  name,\n  args\n}) {\n  let func = scope.bundle._functions[name];\n  if (!func) {\n    scope.reportError(new ReferenceError(`Unknown function: ${name}()`));\n    return new FluentNone(`${name}()`);\n  }\n  if (typeof func !== \"function\") {\n    scope.reportError(new TypeError(`Function ${name}() is not callable`));\n    return new FluentNone(`${name}()`);\n  }\n  try {\n    let resolved = getArguments(scope, args);\n    return func(resolved.positional, resolved.named);\n  } catch (err) {\n    scope.reportError(err);\n    return new FluentNone(`${name}()`);\n  }\n}\nfunction resolveSelectExpression(scope, {\n  selector,\n  variants,\n  star\n}) {\n  let sel = resolveExpression(scope, selector);\n  if (sel instanceof FluentNone) {\n    return getDefault(scope, variants, star);\n  }\n  for (const variant of variants) {\n    const key = resolveExpression(scope, variant.key);\n    if (match(scope, sel, key)) {\n      return resolvePattern(scope, variant.value);\n    }\n  }\n  return getDefault(scope, variants, star);\n}\nfunction resolveComplexPattern(scope, ptn) {\n  if (scope.dirty.has(ptn)) {\n    scope.reportError(new RangeError(\"Cyclic reference\"));\n    return new FluentNone();\n  }\n  scope.dirty.add(ptn);\n  const result = [];\n  const useIsolating = scope.bundle._useIsolating && ptn.length > 1;\n  for (const elem of ptn) {\n    if (typeof elem === \"string\") {\n      result.push(scope.bundle._transform(elem));\n      continue;\n    }\n    scope.placeables++;\n    if (scope.placeables > MAX_PLACEABLES) {\n      scope.dirty.delete(ptn);\n      throw new RangeError(`Too many placeables expanded: ${scope.placeables}, ` + `max allowed is ${MAX_PLACEABLES}`);\n    }\n    if (useIsolating) {\n      result.push(FSI);\n    }\n    result.push(resolveExpression(scope, elem).toString(scope));\n    if (useIsolating) {\n      result.push(PDI);\n    }\n  }\n  scope.dirty.delete(ptn);\n  return result.join(\"\");\n}\nfunction resolvePattern(scope, value) {\n  if (typeof value === \"string\") {\n    return scope.bundle._transform(value);\n  }\n  return resolveComplexPattern(scope, value);\n}\n; // ./node_modules/@fluent/bundle/esm/scope.js\nclass Scope {\n  constructor(bundle, errors, args) {\n    this.dirty = new WeakSet();\n    this.params = null;\n    this.placeables = 0;\n    this.bundle = bundle;\n    this.errors = errors;\n    this.args = args;\n  }\n  reportError(error) {\n    if (!this.errors || !(error instanceof Error)) {\n      throw error;\n    }\n    this.errors.push(error);\n  }\n  memoizeIntlObject(ctor, opts) {\n    let cache = this.bundle._intls.get(ctor);\n    if (!cache) {\n      cache = {};\n      this.bundle._intls.set(ctor, cache);\n    }\n    let id = JSON.stringify(opts);\n    if (!cache[id]) {\n      cache[id] = new ctor(this.bundle.locales, opts);\n    }\n    return cache[id];\n  }\n}\n; // ./node_modules/@fluent/bundle/esm/builtins.js\n\nfunction values(opts, allowed) {\n  const unwrapped = Object.create(null);\n  for (const [name, opt] of Object.entries(opts)) {\n    if (allowed.includes(name)) {\n      unwrapped[name] = opt.valueOf();\n    }\n  }\n  return unwrapped;\n}\nconst NUMBER_ALLOWED = [\"unitDisplay\", \"currencyDisplay\", \"useGrouping\", \"minimumIntegerDigits\", \"minimumFractionDigits\", \"maximumFractionDigits\", \"minimumSignificantDigits\", \"maximumSignificantDigits\"];\nfunction NUMBER(args, opts) {\n  let arg = args[0];\n  if (arg instanceof FluentNone) {\n    return new FluentNone(`NUMBER(${arg.valueOf()})`);\n  }\n  if (arg instanceof FluentNumber) {\n    return new FluentNumber(arg.valueOf(), {\n      ...arg.opts,\n      ...values(opts, NUMBER_ALLOWED)\n    });\n  }\n  if (arg instanceof FluentDateTime) {\n    return new FluentNumber(arg.valueOf(), {\n      ...values(opts, NUMBER_ALLOWED)\n    });\n  }\n  throw new TypeError(\"Invalid argument to NUMBER\");\n}\nconst DATETIME_ALLOWED = [\"dateStyle\", \"timeStyle\", \"fractionalSecondDigits\", \"dayPeriod\", \"hour12\", \"weekday\", \"era\", \"year\", \"month\", \"day\", \"hour\", \"minute\", \"second\", \"timeZoneName\"];\nfunction DATETIME(args, opts) {\n  let arg = args[0];\n  if (arg instanceof FluentNone) {\n    return new FluentNone(`DATETIME(${arg.valueOf()})`);\n  }\n  if (arg instanceof FluentDateTime) {\n    return new FluentDateTime(arg.valueOf(), {\n      ...arg.opts,\n      ...values(opts, DATETIME_ALLOWED)\n    });\n  }\n  if (arg instanceof FluentNumber) {\n    return new FluentDateTime(arg.valueOf(), {\n      ...values(opts, DATETIME_ALLOWED)\n    });\n  }\n  throw new TypeError(\"Invalid argument to DATETIME\");\n}\n; // ./node_modules/@fluent/bundle/esm/memoizer.js\nconst cache = new Map();\nfunction getMemoizerForLocale(locales) {\n  const stringLocale = Array.isArray(locales) ? locales.join(\" \") : locales;\n  let memoizer = cache.get(stringLocale);\n  if (memoizer === undefined) {\n    memoizer = new Map();\n    cache.set(stringLocale, memoizer);\n  }\n  return memoizer;\n}\n; // ./node_modules/@fluent/bundle/esm/bundle.js\n\nclass FluentBundle {\n  constructor(locales, {\n    functions,\n    useIsolating = true,\n    transform = v => v\n  } = {}) {\n    this._terms = new Map();\n    this._messages = new Map();\n    this.locales = Array.isArray(locales) ? locales : [locales];\n    this._functions = {\n      NUMBER: NUMBER,\n      DATETIME: DATETIME,\n      ...functions\n    };\n    this._useIsolating = useIsolating;\n    this._transform = transform;\n    this._intls = getMemoizerForLocale(locales);\n  }\n  hasMessage(id) {\n    return this._messages.has(id);\n  }\n  getMessage(id) {\n    return this._messages.get(id);\n  }\n  addResource(res, {\n    allowOverrides = false\n  } = {}) {\n    const errors = [];\n    for (let i = 0; i < res.body.length; i++) {\n      let entry = res.body[i];\n      if (entry.id.startsWith(\"-\")) {\n        if (allowOverrides === false && this._terms.has(entry.id)) {\n          errors.push(new Error(`Attempt to override an existing term: \"${entry.id}\"`));\n          continue;\n        }\n        this._terms.set(entry.id, entry);\n      } else {\n        if (allowOverrides === false && this._messages.has(entry.id)) {\n          errors.push(new Error(`Attempt to override an existing message: \"${entry.id}\"`));\n          continue;\n        }\n        this._messages.set(entry.id, entry);\n      }\n    }\n    return errors;\n  }\n  formatPattern(pattern, args = null, errors = null) {\n    if (typeof pattern === \"string\") {\n      return this._transform(pattern);\n    }\n    let scope = new Scope(this, errors, args);\n    try {\n      let value = resolveComplexPattern(scope, pattern);\n      return value.toString(scope);\n    } catch (err) {\n      if (scope.errors && err instanceof Error) {\n        scope.errors.push(err);\n        return new FluentNone().toString(scope);\n      }\n      throw err;\n    }\n  }\n}\n; // ./node_modules/@fluent/bundle/esm/resource.js\nconst RE_MESSAGE_START = /^(-?[a-zA-Z][\\w-]*) *= */gm;\nconst RE_ATTRIBUTE_START = /\\.([a-zA-Z][\\w-]*) *= */y;\nconst RE_VARIANT_START = /\\*?\\[/y;\nconst RE_NUMBER_LITERAL = /(-?[0-9]+(?:\\.([0-9]+))?)/y;\nconst RE_IDENTIFIER = /([a-zA-Z][\\w-]*)/y;\nconst RE_REFERENCE = /([$-])?([a-zA-Z][\\w-]*)(?:\\.([a-zA-Z][\\w-]*))?/y;\nconst RE_FUNCTION_NAME = /^[A-Z][A-Z0-9_-]*$/;\nconst RE_TEXT_RUN = /([^{}\\n\\r]+)/y;\nconst RE_STRING_RUN = /([^\\\\\"\\n\\r]*)/y;\nconst RE_STRING_ESCAPE = /\\\\([\\\\\"])/y;\nconst RE_UNICODE_ESCAPE = /\\\\u([a-fA-F0-9]{4})|\\\\U([a-fA-F0-9]{6})/y;\nconst RE_LEADING_NEWLINES = /^\\n+/;\nconst RE_TRAILING_SPACES = / +$/;\nconst RE_BLANK_LINES = / *\\r?\\n/g;\nconst RE_INDENT = /( *)$/;\nconst TOKEN_BRACE_OPEN = /{\\s*/y;\nconst TOKEN_BRACE_CLOSE = /\\s*}/y;\nconst TOKEN_BRACKET_OPEN = /\\[\\s*/y;\nconst TOKEN_BRACKET_CLOSE = /\\s*] */y;\nconst TOKEN_PAREN_OPEN = /\\s*\\(\\s*/y;\nconst TOKEN_ARROW = /\\s*->\\s*/y;\nconst TOKEN_COLON = /\\s*:\\s*/y;\nconst TOKEN_COMMA = /\\s*,?\\s*/y;\nconst TOKEN_BLANK = /\\s+/y;\nclass FluentResource {\n  constructor(source) {\n    this.body = [];\n    RE_MESSAGE_START.lastIndex = 0;\n    let cursor = 0;\n    while (true) {\n      let next = RE_MESSAGE_START.exec(source);\n      if (next === null) {\n        break;\n      }\n      cursor = RE_MESSAGE_START.lastIndex;\n      try {\n        this.body.push(parseMessage(next[1]));\n      } catch (err) {\n        if (err instanceof SyntaxError) {\n          continue;\n        }\n        throw err;\n      }\n    }\n    function test(re) {\n      re.lastIndex = cursor;\n      return re.test(source);\n    }\n    function consumeChar(char, errorClass) {\n      if (source[cursor] === char) {\n        cursor++;\n        return true;\n      }\n      if (errorClass) {\n        throw new errorClass(`Expected ${char}`);\n      }\n      return false;\n    }\n    function consumeToken(re, errorClass) {\n      if (test(re)) {\n        cursor = re.lastIndex;\n        return true;\n      }\n      if (errorClass) {\n        throw new errorClass(`Expected ${re.toString()}`);\n      }\n      return false;\n    }\n    function match(re) {\n      re.lastIndex = cursor;\n      let result = re.exec(source);\n      if (result === null) {\n        throw new SyntaxError(`Expected ${re.toString()}`);\n      }\n      cursor = re.lastIndex;\n      return result;\n    }\n    function match1(re) {\n      return match(re)[1];\n    }\n    function parseMessage(id) {\n      let value = parsePattern();\n      let attributes = parseAttributes();\n      if (value === null && Object.keys(attributes).length === 0) {\n        throw new SyntaxError(\"Expected message value or attributes\");\n      }\n      return {\n        id,\n        value,\n        attributes\n      };\n    }\n    function parseAttributes() {\n      let attrs = Object.create(null);\n      while (test(RE_ATTRIBUTE_START)) {\n        let name = match1(RE_ATTRIBUTE_START);\n        let value = parsePattern();\n        if (value === null) {\n          throw new SyntaxError(\"Expected attribute value\");\n        }\n        attrs[name] = value;\n      }\n      return attrs;\n    }\n    function parsePattern() {\n      let first;\n      if (test(RE_TEXT_RUN)) {\n        first = match1(RE_TEXT_RUN);\n      }\n      if (source[cursor] === \"{\" || source[cursor] === \"}\") {\n        return parsePatternElements(first ? [first] : [], Infinity);\n      }\n      let indent = parseIndent();\n      if (indent) {\n        if (first) {\n          return parsePatternElements([first, indent], indent.length);\n        }\n        indent.value = trim(indent.value, RE_LEADING_NEWLINES);\n        return parsePatternElements([indent], indent.length);\n      }\n      if (first) {\n        return trim(first, RE_TRAILING_SPACES);\n      }\n      return null;\n    }\n    function parsePatternElements(elements = [], commonIndent) {\n      while (true) {\n        if (test(RE_TEXT_RUN)) {\n          elements.push(match1(RE_TEXT_RUN));\n          continue;\n        }\n        if (source[cursor] === \"{\") {\n          elements.push(parsePlaceable());\n          continue;\n        }\n        if (source[cursor] === \"}\") {\n          throw new SyntaxError(\"Unbalanced closing brace\");\n        }\n        let indent = parseIndent();\n        if (indent) {\n          elements.push(indent);\n          commonIndent = Math.min(commonIndent, indent.length);\n          continue;\n        }\n        break;\n      }\n      let lastIndex = elements.length - 1;\n      let lastElement = elements[lastIndex];\n      if (typeof lastElement === \"string\") {\n        elements[lastIndex] = trim(lastElement, RE_TRAILING_SPACES);\n      }\n      let baked = [];\n      for (let element of elements) {\n        if (element instanceof Indent) {\n          element = element.value.slice(0, element.value.length - commonIndent);\n        }\n        if (element) {\n          baked.push(element);\n        }\n      }\n      return baked;\n    }\n    function parsePlaceable() {\n      consumeToken(TOKEN_BRACE_OPEN, SyntaxError);\n      let selector = parseInlineExpression();\n      if (consumeToken(TOKEN_BRACE_CLOSE)) {\n        return selector;\n      }\n      if (consumeToken(TOKEN_ARROW)) {\n        let variants = parseVariants();\n        consumeToken(TOKEN_BRACE_CLOSE, SyntaxError);\n        return {\n          type: \"select\",\n          selector,\n          ...variants\n        };\n      }\n      throw new SyntaxError(\"Unclosed placeable\");\n    }\n    function parseInlineExpression() {\n      if (source[cursor] === \"{\") {\n        return parsePlaceable();\n      }\n      if (test(RE_REFERENCE)) {\n        let [, sigil, name, attr = null] = match(RE_REFERENCE);\n        if (sigil === \"$\") {\n          return {\n            type: \"var\",\n            name\n          };\n        }\n        if (consumeToken(TOKEN_PAREN_OPEN)) {\n          let args = parseArguments();\n          if (sigil === \"-\") {\n            return {\n              type: \"term\",\n              name,\n              attr,\n              args\n            };\n          }\n          if (RE_FUNCTION_NAME.test(name)) {\n            return {\n              type: \"func\",\n              name,\n              args\n            };\n          }\n          throw new SyntaxError(\"Function names must be all upper-case\");\n        }\n        if (sigil === \"-\") {\n          return {\n            type: \"term\",\n            name,\n            attr,\n            args: []\n          };\n        }\n        return {\n          type: \"mesg\",\n          name,\n          attr\n        };\n      }\n      return parseLiteral();\n    }\n    function parseArguments() {\n      let args = [];\n      while (true) {\n        switch (source[cursor]) {\n          case \")\":\n            cursor++;\n            return args;\n          case undefined:\n            throw new SyntaxError(\"Unclosed argument list\");\n        }\n        args.push(parseArgument());\n        consumeToken(TOKEN_COMMA);\n      }\n    }\n    function parseArgument() {\n      let expr = parseInlineExpression();\n      if (expr.type !== \"mesg\") {\n        return expr;\n      }\n      if (consumeToken(TOKEN_COLON)) {\n        return {\n          type: \"narg\",\n          name: expr.name,\n          value: parseLiteral()\n        };\n      }\n      return expr;\n    }\n    function parseVariants() {\n      let variants = [];\n      let count = 0;\n      let star;\n      while (test(RE_VARIANT_START)) {\n        if (consumeChar(\"*\")) {\n          star = count;\n        }\n        let key = parseVariantKey();\n        let value = parsePattern();\n        if (value === null) {\n          throw new SyntaxError(\"Expected variant value\");\n        }\n        variants[count++] = {\n          key,\n          value\n        };\n      }\n      if (count === 0) {\n        return null;\n      }\n      if (star === undefined) {\n        throw new SyntaxError(\"Expected default variant\");\n      }\n      return {\n        variants,\n        star\n      };\n    }\n    function parseVariantKey() {\n      consumeToken(TOKEN_BRACKET_OPEN, SyntaxError);\n      let key;\n      if (test(RE_NUMBER_LITERAL)) {\n        key = parseNumberLiteral();\n      } else {\n        key = {\n          type: \"str\",\n          value: match1(RE_IDENTIFIER)\n        };\n      }\n      consumeToken(TOKEN_BRACKET_CLOSE, SyntaxError);\n      return key;\n    }\n    function parseLiteral() {\n      if (test(RE_NUMBER_LITERAL)) {\n        return parseNumberLiteral();\n      }\n      if (source[cursor] === '\"') {\n        return parseStringLiteral();\n      }\n      throw new SyntaxError(\"Invalid expression\");\n    }\n    function parseNumberLiteral() {\n      let [, value, fraction = \"\"] = match(RE_NUMBER_LITERAL);\n      let precision = fraction.length;\n      return {\n        type: \"num\",\n        value: parseFloat(value),\n        precision\n      };\n    }\n    function parseStringLiteral() {\n      consumeChar('\"', SyntaxError);\n      let value = \"\";\n      while (true) {\n        value += match1(RE_STRING_RUN);\n        if (source[cursor] === \"\\\\\") {\n          value += parseEscapeSequence();\n          continue;\n        }\n        if (consumeChar('\"')) {\n          return {\n            type: \"str\",\n            value\n          };\n        }\n        throw new SyntaxError(\"Unclosed string literal\");\n      }\n    }\n    function parseEscapeSequence() {\n      if (test(RE_STRING_ESCAPE)) {\n        return match1(RE_STRING_ESCAPE);\n      }\n      if (test(RE_UNICODE_ESCAPE)) {\n        let [, codepoint4, codepoint6] = match(RE_UNICODE_ESCAPE);\n        let codepoint = parseInt(codepoint4 || codepoint6, 16);\n        return codepoint <= 0xd7ff || 0xe000 <= codepoint ? String.fromCodePoint(codepoint) : \"�\";\n      }\n      throw new SyntaxError(\"Unknown escape sequence\");\n    }\n    function parseIndent() {\n      let start = cursor;\n      consumeToken(TOKEN_BLANK);\n      switch (source[cursor]) {\n        case \".\":\n        case \"[\":\n        case \"*\":\n        case \"}\":\n        case undefined:\n          return false;\n        case \"{\":\n          return makeIndent(source.slice(start, cursor));\n      }\n      if (source[cursor - 1] === \" \") {\n        return makeIndent(source.slice(start, cursor));\n      }\n      return false;\n    }\n    function trim(text, re) {\n      return text.replace(re, \"\");\n    }\n    function makeIndent(blank) {\n      let value = blank.replace(RE_BLANK_LINES, \"\\n\");\n      let length = RE_INDENT.exec(blank)[1].length;\n      return new Indent(value, length);\n    }\n  }\n}\nclass Indent {\n  constructor(value, length) {\n    this.value = value;\n    this.length = length;\n  }\n}\n; // ./node_modules/@fluent/bundle/esm/index.js\n\n; // ./node_modules/@fluent/dom/esm/overlay.js\nconst reOverlay = /<|&#?\\w+;/;\nconst TEXT_LEVEL_ELEMENTS = {\n  \"http://www.w3.org/1999/xhtml\": [\"em\", \"strong\", \"small\", \"s\", \"cite\", \"q\", \"dfn\", \"abbr\", \"data\", \"time\", \"code\", \"var\", \"samp\", \"kbd\", \"sub\", \"sup\", \"i\", \"b\", \"u\", \"mark\", \"bdi\", \"bdo\", \"span\", \"br\", \"wbr\"]\n};\nconst LOCALIZABLE_ATTRIBUTES = {\n  \"http://www.w3.org/1999/xhtml\": {\n    global: [\"title\", \"aria-label\", \"aria-valuetext\"],\n    a: [\"download\"],\n    area: [\"download\", \"alt\"],\n    input: [\"alt\", \"placeholder\"],\n    menuitem: [\"label\"],\n    menu: [\"label\"],\n    optgroup: [\"label\"],\n    option: [\"label\"],\n    track: [\"label\"],\n    img: [\"alt\"],\n    textarea: [\"placeholder\"],\n    th: [\"abbr\"]\n  },\n  \"http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul\": {\n    global: [\"accesskey\", \"aria-label\", \"aria-valuetext\", \"label\", \"title\", \"tooltiptext\"],\n    description: [\"value\"],\n    key: [\"key\", \"keycode\"],\n    label: [\"value\"],\n    textbox: [\"placeholder\", \"value\"]\n  }\n};\nfunction translateElement(element, translation) {\n  const {\n    value\n  } = translation;\n  if (typeof value === \"string\") {\n    if (element.localName === \"title\" && element.namespaceURI === \"http://www.w3.org/1999/xhtml\") {\n      element.textContent = value;\n    } else if (!reOverlay.test(value)) {\n      element.textContent = value;\n    } else {\n      const templateElement = element.ownerDocument.createElementNS(\"http://www.w3.org/1999/xhtml\", \"template\");\n      templateElement.innerHTML = value;\n      overlayChildNodes(templateElement.content, element);\n    }\n  }\n  overlayAttributes(translation, element);\n}\nfunction overlayChildNodes(fromFragment, toElement) {\n  for (const childNode of fromFragment.childNodes) {\n    if (childNode.nodeType === childNode.TEXT_NODE) {\n      continue;\n    }\n    if (childNode.hasAttribute(\"data-l10n-name\")) {\n      const sanitized = getNodeForNamedElement(toElement, childNode);\n      fromFragment.replaceChild(sanitized, childNode);\n      continue;\n    }\n    if (isElementAllowed(childNode)) {\n      const sanitized = createSanitizedElement(childNode);\n      fromFragment.replaceChild(sanitized, childNode);\n      continue;\n    }\n    console.warn(`An element of forbidden type \"${childNode.localName}\" was found in ` + \"the translation. Only safe text-level elements and elements with \" + \"data-l10n-name are allowed.\");\n    fromFragment.replaceChild(createTextNodeFromTextContent(childNode), childNode);\n  }\n  toElement.textContent = \"\";\n  toElement.appendChild(fromFragment);\n}\nfunction hasAttribute(attributes, name) {\n  if (!attributes) {\n    return false;\n  }\n  for (let attr of attributes) {\n    if (attr.name === name) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction overlayAttributes(fromElement, toElement) {\n  const explicitlyAllowed = toElement.hasAttribute(\"data-l10n-attrs\") ? toElement.getAttribute(\"data-l10n-attrs\").split(\",\").map(i => i.trim()) : null;\n  for (const attr of Array.from(toElement.attributes)) {\n    if (isAttrNameLocalizable(attr.name, toElement, explicitlyAllowed) && !hasAttribute(fromElement.attributes, attr.name)) {\n      toElement.removeAttribute(attr.name);\n    }\n  }\n  if (!fromElement.attributes) {\n    return;\n  }\n  for (const attr of Array.from(fromElement.attributes)) {\n    if (isAttrNameLocalizable(attr.name, toElement, explicitlyAllowed) && toElement.getAttribute(attr.name) !== attr.value) {\n      toElement.setAttribute(attr.name, attr.value);\n    }\n  }\n}\nfunction getNodeForNamedElement(sourceElement, translatedChild) {\n  const childName = translatedChild.getAttribute(\"data-l10n-name\");\n  const sourceChild = sourceElement.querySelector(`[data-l10n-name=\"${childName}\"]`);\n  if (!sourceChild) {\n    console.warn(`An element named \"${childName}\" wasn't found in the source.`);\n    return createTextNodeFromTextContent(translatedChild);\n  }\n  if (sourceChild.localName !== translatedChild.localName) {\n    console.warn(`An element named \"${childName}\" was found in the translation ` + `but its type ${translatedChild.localName} didn't match the ` + `element found in the source (${sourceChild.localName}).`);\n    return createTextNodeFromTextContent(translatedChild);\n  }\n  sourceElement.removeChild(sourceChild);\n  const clone = sourceChild.cloneNode(false);\n  return shallowPopulateUsing(translatedChild, clone);\n}\nfunction createSanitizedElement(element) {\n  const clone = element.ownerDocument.createElement(element.localName);\n  return shallowPopulateUsing(element, clone);\n}\nfunction createTextNodeFromTextContent(element) {\n  return element.ownerDocument.createTextNode(element.textContent);\n}\nfunction isElementAllowed(element) {\n  const allowed = TEXT_LEVEL_ELEMENTS[element.namespaceURI];\n  return allowed && allowed.includes(element.localName);\n}\nfunction isAttrNameLocalizable(name, element, explicitlyAllowed = null) {\n  if (explicitlyAllowed && explicitlyAllowed.includes(name)) {\n    return true;\n  }\n  const allowed = LOCALIZABLE_ATTRIBUTES[element.namespaceURI];\n  if (!allowed) {\n    return false;\n  }\n  const attrName = name.toLowerCase();\n  const elemName = element.localName;\n  if (allowed.global.includes(attrName)) {\n    return true;\n  }\n  if (!allowed[elemName]) {\n    return false;\n  }\n  if (allowed[elemName].includes(attrName)) {\n    return true;\n  }\n  if (element.namespaceURI === \"http://www.w3.org/1999/xhtml\" && elemName === \"input\" && attrName === \"value\") {\n    const type = element.type.toLowerCase();\n    if (type === \"submit\" || type === \"button\" || type === \"reset\") {\n      return true;\n    }\n  }\n  return false;\n}\nfunction shallowPopulateUsing(fromElement, toElement) {\n  toElement.textContent = fromElement.textContent;\n  overlayAttributes(fromElement, toElement);\n  return toElement;\n}\n; // ./node_modules/cached-iterable/src/cached_iterable.mjs\nclass CachedIterable extends Array {\n  static from(iterable) {\n    if (iterable instanceof this) {\n      return iterable;\n    }\n    return new this(iterable);\n  }\n}\n; // ./node_modules/cached-iterable/src/cached_sync_iterable.mjs\n\nclass CachedSyncIterable extends CachedIterable {\n  constructor(iterable) {\n    super();\n    if (Symbol.iterator in Object(iterable)) {\n      this.iterator = iterable[Symbol.iterator]();\n    } else {\n      throw new TypeError(\"Argument must implement the iteration protocol.\");\n    }\n  }\n  [Symbol.iterator]() {\n    const cached = this;\n    let cur = 0;\n    return {\n      next() {\n        if (cached.length <= cur) {\n          cached.push(cached.iterator.next());\n        }\n        return cached[cur++];\n      }\n    };\n  }\n  touchNext(count = 1) {\n    let idx = 0;\n    while (idx++ < count) {\n      const last = this[this.length - 1];\n      if (last && last.done) {\n        break;\n      }\n      this.push(this.iterator.next());\n    }\n    return this[this.length - 1];\n  }\n}\n; // ./node_modules/cached-iterable/src/cached_async_iterable.mjs\n\nclass CachedAsyncIterable extends CachedIterable {\n  constructor(iterable) {\n    super();\n    if (Symbol.asyncIterator in Object(iterable)) {\n      this.iterator = iterable[Symbol.asyncIterator]();\n    } else if (Symbol.iterator in Object(iterable)) {\n      this.iterator = iterable[Symbol.iterator]();\n    } else {\n      throw new TypeError(\"Argument must implement the iteration protocol.\");\n    }\n  }\n  [Symbol.asyncIterator]() {\n    const cached = this;\n    let cur = 0;\n    return {\n      next() {\n        return _asyncToGenerator(function* () {\n          if (cached.length <= cur) {\n            cached.push(cached.iterator.next());\n          }\n          return cached[cur++];\n        })();\n      }\n    };\n  }\n  touchNext(count = 1) {\n    var _this6 = this;\n    return _asyncToGenerator(function* () {\n      let idx = 0;\n      while (idx++ < count) {\n        const last = _this6[_this6.length - 1];\n        if (last && (yield last).done) {\n          break;\n        }\n        _this6.push(_this6.iterator.next());\n      }\n      return _this6[_this6.length - 1];\n    })();\n  }\n}\n; // ./node_modules/cached-iterable/src/index.mjs\n\n; // ./node_modules/@fluent/dom/esm/localization.js\n\nclass Localization {\n  constructor(resourceIds = [], generateBundles) {\n    this.resourceIds = resourceIds;\n    this.generateBundles = generateBundles;\n    this.onChange(true);\n  }\n  addResourceIds(resourceIds, eager = false) {\n    this.resourceIds.push(...resourceIds);\n    this.onChange(eager);\n    return this.resourceIds.length;\n  }\n  removeResourceIds(resourceIds) {\n    this.resourceIds = this.resourceIds.filter(r => !resourceIds.includes(r));\n    this.onChange();\n    return this.resourceIds.length;\n  }\n  formatWithFallback(keys, method) {\n    var _this7 = this;\n    return _asyncToGenerator(function* () {\n      const translations = [];\n      let hasAtLeastOneBundle = false;\n      var _iteratorAbruptCompletion = false;\n      var _didIteratorError = false;\n      var _iteratorError;\n      try {\n        for (var _iterator = _asyncIterator(_this7.bundles), _step; _iteratorAbruptCompletion = !(_step = yield _iterator.next()).done; _iteratorAbruptCompletion = false) {\n          const bundle = _step.value;\n          {\n            hasAtLeastOneBundle = true;\n            const missingIds = keysFromBundle(method, bundle, keys, translations);\n            if (missingIds.size === 0) {\n              break;\n            }\n            if (typeof console !== \"undefined\") {\n              const locale = bundle.locales[0];\n              const ids = Array.from(missingIds).join(\", \");\n              console.warn(`[fluent] Missing translations in ${locale}: ${ids}`);\n            }\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (_iteratorAbruptCompletion && _iterator.return != null) {\n            yield _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n      if (!hasAtLeastOneBundle && typeof console !== \"undefined\") {\n        console.warn(`[fluent] Request for keys failed because no resource bundles got generated.\n  keys: ${JSON.stringify(keys)}.\n  resourceIds: ${JSON.stringify(_this7.resourceIds)}.`);\n      }\n      return translations;\n    })();\n  }\n  formatMessages(keys) {\n    return this.formatWithFallback(keys, messageFromBundle);\n  }\n  formatValues(keys) {\n    return this.formatWithFallback(keys, valueFromBundle);\n  }\n  formatValue(id, args) {\n    var _this8 = this;\n    return _asyncToGenerator(function* () {\n      const [val] = yield _this8.formatValues([{\n        id,\n        args\n      }]);\n      return val;\n    })();\n  }\n  handleEvent() {\n    this.onChange();\n  }\n  onChange(eager = false) {\n    this.bundles = CachedAsyncIterable.from(this.generateBundles(this.resourceIds));\n    if (eager) {\n      this.bundles.touchNext(2);\n    }\n  }\n}\nfunction valueFromBundle(bundle, errors, message, args) {\n  if (message.value) {\n    return bundle.formatPattern(message.value, args, errors);\n  }\n  return null;\n}\nfunction messageFromBundle(bundle, errors, message, args) {\n  const formatted = {\n    value: null,\n    attributes: null\n  };\n  if (message.value) {\n    formatted.value = bundle.formatPattern(message.value, args, errors);\n  }\n  let attrNames = Object.keys(message.attributes);\n  if (attrNames.length > 0) {\n    formatted.attributes = new Array(attrNames.length);\n    for (let [i, name] of attrNames.entries()) {\n      let value = bundle.formatPattern(message.attributes[name], args, errors);\n      formatted.attributes[i] = {\n        name,\n        value\n      };\n    }\n  }\n  return formatted;\n}\nfunction keysFromBundle(method, bundle, keys, translations) {\n  const messageErrors = [];\n  const missingIds = new Set();\n  keys.forEach(({\n    id,\n    args\n  }, i) => {\n    if (translations[i] !== undefined) {\n      return;\n    }\n    let message = bundle.getMessage(id);\n    if (message) {\n      messageErrors.length = 0;\n      translations[i] = method(bundle, messageErrors, message, args);\n      if (messageErrors.length > 0 && typeof console !== \"undefined\") {\n        const locale = bundle.locales[0];\n        const errors = messageErrors.join(\", \");\n        console.warn(`[fluent][resolver] errors in ${locale}/${id}: ${errors}.`);\n      }\n    } else {\n      missingIds.add(id);\n    }\n  });\n  return missingIds;\n}\n; // ./node_modules/@fluent/dom/esm/dom_localization.js\n\nconst L10NID_ATTR_NAME = \"data-l10n-id\";\nconst L10NARGS_ATTR_NAME = \"data-l10n-args\";\nconst L10N_ELEMENT_QUERY = `[${L10NID_ATTR_NAME}]`;\nclass DOMLocalization extends Localization {\n  constructor(resourceIds, generateBundles) {\n    super(resourceIds, generateBundles);\n    this.roots = new Set();\n    this.pendingrAF = null;\n    this.pendingElements = new Set();\n    this.windowElement = null;\n    this.mutationObserver = null;\n    this.observerConfig = {\n      attributes: true,\n      characterData: false,\n      childList: true,\n      subtree: true,\n      attributeFilter: [L10NID_ATTR_NAME, L10NARGS_ATTR_NAME]\n    };\n  }\n  onChange(eager = false) {\n    super.onChange(eager);\n    if (this.roots) {\n      this.translateRoots();\n    }\n  }\n  setAttributes(element, id, args) {\n    element.setAttribute(L10NID_ATTR_NAME, id);\n    if (args) {\n      element.setAttribute(L10NARGS_ATTR_NAME, JSON.stringify(args));\n    } else {\n      element.removeAttribute(L10NARGS_ATTR_NAME);\n    }\n    return element;\n  }\n  getAttributes(element) {\n    return {\n      id: element.getAttribute(L10NID_ATTR_NAME),\n      args: JSON.parse(element.getAttribute(L10NARGS_ATTR_NAME) || null)\n    };\n  }\n  connectRoot(newRoot) {\n    for (const root of this.roots) {\n      if (root === newRoot || root.contains(newRoot) || newRoot.contains(root)) {\n        throw new Error(\"Cannot add a root that overlaps with existing root.\");\n      }\n    }\n    if (this.windowElement) {\n      if (this.windowElement !== newRoot.ownerDocument.defaultView) {\n        throw new Error(`Cannot connect a root:\n          DOMLocalization already has a root from a different window.`);\n      }\n    } else {\n      this.windowElement = newRoot.ownerDocument.defaultView;\n      this.mutationObserver = new this.windowElement.MutationObserver(mutations => this.translateMutations(mutations));\n    }\n    this.roots.add(newRoot);\n    this.mutationObserver.observe(newRoot, this.observerConfig);\n  }\n  disconnectRoot(root) {\n    this.roots.delete(root);\n    this.pauseObserving();\n    if (this.roots.size === 0) {\n      this.mutationObserver = null;\n      if (this.windowElement && this.pendingrAF) {\n        this.windowElement.cancelAnimationFrame(this.pendingrAF);\n      }\n      this.windowElement = null;\n      this.pendingrAF = null;\n      this.pendingElements.clear();\n      return true;\n    }\n    this.resumeObserving();\n    return false;\n  }\n  translateRoots() {\n    const roots = Array.from(this.roots);\n    return Promise.all(roots.map(root => this.translateFragment(root)));\n  }\n  pauseObserving() {\n    if (!this.mutationObserver) {\n      return;\n    }\n    this.translateMutations(this.mutationObserver.takeRecords());\n    this.mutationObserver.disconnect();\n  }\n  resumeObserving() {\n    if (!this.mutationObserver) {\n      return;\n    }\n    for (const root of this.roots) {\n      this.mutationObserver.observe(root, this.observerConfig);\n    }\n  }\n  translateMutations(mutations) {\n    for (const mutation of mutations) {\n      switch (mutation.type) {\n        case \"attributes\":\n          if (mutation.target.hasAttribute(\"data-l10n-id\")) {\n            this.pendingElements.add(mutation.target);\n          }\n          break;\n        case \"childList\":\n          for (const addedNode of mutation.addedNodes) {\n            if (addedNode.nodeType === addedNode.ELEMENT_NODE) {\n              if (addedNode.childElementCount) {\n                for (const element of this.getTranslatables(addedNode)) {\n                  this.pendingElements.add(element);\n                }\n              } else if (addedNode.hasAttribute(L10NID_ATTR_NAME)) {\n                this.pendingElements.add(addedNode);\n              }\n            }\n          }\n          break;\n      }\n    }\n    if (this.pendingElements.size > 0) {\n      if (this.pendingrAF === null) {\n        this.pendingrAF = this.windowElement.requestAnimationFrame(() => {\n          this.translateElements(Array.from(this.pendingElements));\n          this.pendingElements.clear();\n          this.pendingrAF = null;\n        });\n      }\n    }\n  }\n  translateFragment(frag) {\n    return this.translateElements(this.getTranslatables(frag));\n  }\n  translateElements(elements) {\n    var _this9 = this;\n    return _asyncToGenerator(function* () {\n      if (!elements.length) {\n        return undefined;\n      }\n      const keys = elements.map(_this9.getKeysForElement);\n      const translations = yield _this9.formatMessages(keys);\n      return _this9.applyTranslations(elements, translations);\n    })();\n  }\n  applyTranslations(elements, translations) {\n    this.pauseObserving();\n    for (let i = 0; i < elements.length; i++) {\n      if (translations[i] !== undefined) {\n        translateElement(elements[i], translations[i]);\n      }\n    }\n    this.resumeObserving();\n  }\n  getTranslatables(element) {\n    const nodes = Array.from(element.querySelectorAll(L10N_ELEMENT_QUERY));\n    if (typeof element.hasAttribute === \"function\" && element.hasAttribute(L10NID_ATTR_NAME)) {\n      nodes.push(element);\n    }\n    return nodes;\n  }\n  getKeysForElement(element) {\n    return {\n      id: element.getAttribute(L10NID_ATTR_NAME),\n      args: JSON.parse(element.getAttribute(L10NARGS_ATTR_NAME) || null)\n    };\n  }\n}\n; // ./node_modules/@fluent/dom/esm/index.js\n\n; // ./web/l10n.js\nclass L10n {\n  #dir;\n  #elements;\n  #lang;\n  #l10n;\n  constructor({\n    lang,\n    isRTL\n  }, l10n = null) {\n    this.#lang = L10n.#fixupLangCode(lang);\n    this.#l10n = l10n;\n    this.#dir = isRTL ?? L10n.#isRTL(this.#lang) ? \"rtl\" : \"ltr\";\n  }\n  _setL10n(l10n) {\n    this.#l10n = l10n;\n  }\n  getLanguage() {\n    return this.#lang;\n  }\n  getDirection() {\n    return this.#dir;\n  }\n  get(ids, args = null, fallback) {\n    var _this10 = this;\n    return _asyncToGenerator(function* () {\n      if (Array.isArray(ids)) {\n        ids = ids.map(id => ({\n          id\n        }));\n        const messages = yield _this10.#l10n.formatMessages(ids);\n        return messages.map(message => message.value);\n      }\n      const messages = yield _this10.#l10n.formatMessages([{\n        id: ids,\n        args\n      }]);\n      return messages[0]?.value || fallback;\n    })();\n  }\n  translate(element) {\n    var _this11 = this;\n    return _asyncToGenerator(function* () {\n      (_this11.#elements ||= new Set()).add(element);\n      try {\n        _this11.#l10n.connectRoot(element);\n        yield _this11.#l10n.translateRoots();\n      } catch {}\n    })();\n  }\n  translateOnce(element) {\n    var _this12 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        yield _this12.#l10n.translateElements([element]);\n      } catch (ex) {\n        console.error(`translateOnce: \"${ex}\".`);\n      }\n    })();\n  }\n  destroy() {\n    var _this13 = this;\n    return _asyncToGenerator(function* () {\n      if (_this13.#elements) {\n        for (const element of _this13.#elements) {\n          _this13.#l10n.disconnectRoot(element);\n        }\n        _this13.#elements.clear();\n        _this13.#elements = null;\n      }\n      _this13.#l10n.pauseObserving();\n    })();\n  }\n  pause() {\n    this.#l10n.pauseObserving();\n  }\n  resume() {\n    this.#l10n.resumeObserving();\n  }\n  static #fixupLangCode(langCode) {\n    langCode = langCode?.toLowerCase() || \"en-us\";\n    const PARTIAL_LANG_CODES = {\n      en: \"en-us\",\n      es: \"es-es\",\n      fy: \"fy-nl\",\n      ga: \"ga-ie\",\n      gu: \"gu-in\",\n      hi: \"hi-in\",\n      hy: \"hy-am\",\n      nb: \"nb-no\",\n      ne: \"ne-np\",\n      nn: \"nn-no\",\n      pa: \"pa-in\",\n      pt: \"pt-pt\",\n      sv: \"sv-se\",\n      zh: \"zh-cn\"\n    };\n    return PARTIAL_LANG_CODES[langCode] || langCode;\n  }\n  static #isRTL(lang) {\n    const shortCode = lang.split(\"-\", 1)[0];\n    return [\"ar\", \"he\", \"fa\", \"ps\", \"ur\"].includes(shortCode);\n  }\n}\nconst GenericL10n = null;\n; // ./web/genericl10n.js\n\nfunction createBundle(lang, text) {\n  const resource = new FluentResource(text);\n  const bundle = new FluentBundle(lang);\n  const errors = bundle.addResource(resource);\n  if (errors.length) {\n    console.error(\"L10n errors\", errors);\n  }\n  return bundle;\n}\nclass genericl10n_GenericL10n extends L10n {\n  constructor(lang) {\n    super({\n      lang\n    });\n    const generateBundles = !lang ? genericl10n_GenericL10n.#generateBundlesFallback.bind(genericl10n_GenericL10n, this.getLanguage()) : genericl10n_GenericL10n.#generateBundles.bind(genericl10n_GenericL10n, \"en-us\", this.getLanguage());\n    this._setL10n(new DOMLocalization([], generateBundles));\n  }\n  static #generateBundles(defaultLang, baseLang) {\n    var _this = this;\n    return _wrapAsyncGenerator(function* () {\n      const {\n        baseURL,\n        paths\n      } = yield _awaitAsyncGenerator(_this.#getPaths());\n      const langs = [baseLang];\n      if (defaultLang !== baseLang) {\n        const shortLang = baseLang.split(\"-\", 1)[0];\n        if (shortLang !== baseLang) {\n          langs.push(shortLang);\n        }\n        langs.push(defaultLang);\n      }\n      for (const lang of langs) {\n        const bundle = yield _awaitAsyncGenerator(_this.#createBundle(lang, baseURL, paths));\n        if (bundle) {\n          yield bundle;\n        } else if (lang === \"en-us\") {\n          yield _this.#createBundleFallback(lang);\n        }\n      }\n    })();\n  }\n  static #createBundle(lang, baseURL, paths) {\n    return _asyncToGenerator(function* () {\n      const path = paths[lang];\n      if (!path) {\n        return null;\n      }\n      const url = new URL(path, baseURL);\n      const text = yield fetchData(url, \"text\");\n      return createBundle(lang, text);\n    })();\n  }\n  static #getPaths() {\n    return _asyncToGenerator(function* () {\n      try {\n        const {\n          href\n        } = document.querySelector(`link[type=\"application/l10n\"]`);\n        const paths = yield fetchData(href, \"json\");\n        return {\n          baseURL: href.replace(/[^/]*$/, \"\") || \"./\",\n          paths\n        };\n      } catch {}\n      return {\n        baseURL: \"./\",\n        paths: Object.create(null)\n      };\n    })();\n  }\n  static #generateBundlesFallback(lang) {\n    var _this2 = this;\n    return _wrapAsyncGenerator(function* () {\n      yield _this2.#createBundleFallback(lang);\n    })();\n  }\n  static #createBundleFallback(lang) {\n    return _asyncToGenerator(function* () {\n      const text = \"pdfjs-previous-button =\\n    .title = Previous Page\\npdfjs-previous-button-label = Previous\\npdfjs-next-button =\\n    .title = Next Page\\npdfjs-next-button-label = Next\\npdfjs-page-input =\\n    .title = Page\\npdfjs-of-pages = of { $pagesCount }\\npdfjs-page-of-pages = ({ $pageNumber } of { $pagesCount })\\npdfjs-zoom-out-button =\\n    .title = Zoom Out\\npdfjs-zoom-out-button-label = Zoom Out\\npdfjs-zoom-in-button =\\n    .title = Zoom In\\npdfjs-zoom-in-button-label = Zoom In\\npdfjs-zoom-select =\\n    .title = Zoom\\npdfjs-presentation-mode-button =\\n    .title = Switch to Presentation Mode\\npdfjs-presentation-mode-button-label = Presentation Mode\\npdfjs-open-file-button =\\n    .title = Open File\\npdfjs-open-file-button-label = Open\\npdfjs-print-button =\\n    .title = Print\\npdfjs-print-button-label = Print\\npdfjs-save-button =\\n    .title = Save\\npdfjs-save-button-label = Save\\npdfjs-download-button =\\n    .title = Download\\npdfjs-download-button-label = Download\\npdfjs-bookmark-button =\\n    .title = Current Page (View URL from Current Page)\\npdfjs-bookmark-button-label = Current Page\\npdfjs-tools-button =\\n    .title = Tools\\npdfjs-tools-button-label = Tools\\npdfjs-first-page-button =\\n    .title = Go to First Page\\npdfjs-first-page-button-label = Go to First Page\\npdfjs-last-page-button =\\n    .title = Go to Last Page\\npdfjs-last-page-button-label = Go to Last Page\\npdfjs-page-rotate-cw-button =\\n    .title = Rotate Clockwise\\npdfjs-page-rotate-cw-button-label = Rotate Clockwise\\npdfjs-page-rotate-ccw-button =\\n    .title = Rotate Counterclockwise\\npdfjs-page-rotate-ccw-button-label = Rotate Counterclockwise\\npdfjs-cursor-text-select-tool-button =\\n    .title = Enable Text Selection Tool\\npdfjs-cursor-text-select-tool-button-label = Text Selection Tool\\npdfjs-cursor-hand-tool-button =\\n    .title = Enable Hand Tool\\npdfjs-cursor-hand-tool-button-label = Hand Tool\\npdfjs-scroll-page-button =\\n    .title = Use Page Scrolling\\npdfjs-scroll-page-button-label = Page Scrolling\\npdfjs-scroll-vertical-button =\\n    .title = Use Vertical Scrolling\\npdfjs-scroll-vertical-button-label = Vertical Scrolling\\npdfjs-scroll-horizontal-button =\\n    .title = Use Horizontal Scrolling\\npdfjs-scroll-horizontal-button-label = Horizontal Scrolling\\npdfjs-scroll-wrapped-button =\\n    .title = Use Wrapped Scrolling\\npdfjs-scroll-wrapped-button-label = Wrapped Scrolling\\npdfjs-spread-none-button =\\n    .title = Do not join page spreads\\npdfjs-spread-none-button-label = No Spreads\\npdfjs-spread-odd-button =\\n    .title = Join page spreads starting with odd-numbered pages\\npdfjs-spread-odd-button-label = Odd Spreads\\npdfjs-spread-even-button =\\n    .title = Join page spreads starting with even-numbered pages\\npdfjs-spread-even-button-label = Even Spreads\\npdfjs-document-properties-button =\\n    .title = Document Properties\\u2026\\npdfjs-document-properties-button-label = Document Properties\\u2026\\npdfjs-document-properties-file-name = File name:\\npdfjs-document-properties-file-size = File size:\\npdfjs-document-properties-size-kb = { NUMBER($kb, maximumSignificantDigits: 3) } KB ({ $b } bytes)\\npdfjs-document-properties-size-mb = { NUMBER($mb, maximumSignificantDigits: 3) } MB ({ $b } bytes)\\npdfjs-document-properties-title = Title:\\npdfjs-document-properties-author = Author:\\npdfjs-document-properties-subject = Subject:\\npdfjs-document-properties-keywords = Keywords:\\npdfjs-document-properties-creation-date = Creation Date:\\npdfjs-document-properties-modification-date = Modification Date:\\npdfjs-document-properties-date-time-string = { DATETIME($dateObj, dateStyle: \\\"short\\\", timeStyle: \\\"medium\\\") }\\npdfjs-document-properties-creator = Creator:\\npdfjs-document-properties-producer = PDF Producer:\\npdfjs-document-properties-version = PDF Version:\\npdfjs-document-properties-page-count = Page Count:\\npdfjs-document-properties-page-size = Page Size:\\npdfjs-document-properties-page-size-unit-inches = in\\npdfjs-document-properties-page-size-unit-millimeters = mm\\npdfjs-document-properties-page-size-orientation-portrait = portrait\\npdfjs-document-properties-page-size-orientation-landscape = landscape\\npdfjs-document-properties-page-size-name-a-three = A3\\npdfjs-document-properties-page-size-name-a-four = A4\\npdfjs-document-properties-page-size-name-letter = Letter\\npdfjs-document-properties-page-size-name-legal = Legal\\npdfjs-document-properties-page-size-dimension-string = { $width } \\xD7 { $height } { $unit } ({ $orientation })\\npdfjs-document-properties-page-size-dimension-name-string = { $width } \\xD7 { $height } { $unit } ({ $name }, { $orientation })\\npdfjs-document-properties-linearized = Fast Web View:\\npdfjs-document-properties-linearized-yes = Yes\\npdfjs-document-properties-linearized-no = No\\npdfjs-document-properties-close-button = Close\\npdfjs-print-progress-message = Preparing document for printing\\u2026\\npdfjs-print-progress-percent = { $progress }%\\npdfjs-print-progress-close-button = Cancel\\npdfjs-printing-not-supported = Warning: Printing is not fully supported by this browser.\\npdfjs-printing-not-ready = Warning: The PDF is not fully loaded for printing.\\npdfjs-toggle-sidebar-button =\\n    .title = Toggle Sidebar\\npdfjs-toggle-sidebar-notification-button =\\n    .title = Toggle Sidebar (document contains outline/attachments/layers)\\npdfjs-toggle-sidebar-button-label = Toggle Sidebar\\npdfjs-document-outline-button =\\n    .title = Show Document Outline (double-click to expand/collapse all items)\\npdfjs-document-outline-button-label = Document Outline\\npdfjs-attachments-button =\\n    .title = Show Attachments\\npdfjs-attachments-button-label = Attachments\\npdfjs-layers-button =\\n    .title = Show Layers (double-click to reset all layers to the default state)\\npdfjs-layers-button-label = Layers\\npdfjs-thumbs-button =\\n    .title = Show Thumbnails\\npdfjs-thumbs-button-label = Thumbnails\\npdfjs-current-outline-item-button =\\n    .title = Find Current Outline Item\\npdfjs-current-outline-item-button-label = Current Outline Item\\npdfjs-findbar-button =\\n    .title = Find in Document\\npdfjs-findbar-button-label = Find\\npdfjs-additional-layers = Additional Layers\\npdfjs-thumb-page-title =\\n    .title = Page { $page }\\npdfjs-thumb-page-canvas =\\n    .aria-label = Thumbnail of Page { $page }\\npdfjs-find-input =\\n    .title = Find\\n    .placeholder = Find in document\\u2026\\npdfjs-find-previous-button =\\n    .title = Find the previous occurrence of the phrase\\npdfjs-find-previous-button-label = Previous\\npdfjs-find-next-button =\\n    .title = Find the next occurrence of the phrase\\npdfjs-find-next-button-label = Next\\npdfjs-find-highlight-checkbox = Highlight All\\npdfjs-find-match-case-checkbox-label = Match Case\\npdfjs-find-match-diacritics-checkbox-label = Match Diacritics\\npdfjs-find-entire-word-checkbox-label = Whole Words\\npdfjs-find-reached-top = Reached top of document, continued from bottom\\npdfjs-find-reached-bottom = Reached end of document, continued from top\\npdfjs-find-match-count =\\n    { $total ->\\n        [one] { $current } of { $total } match\\n       *[other] { $current } of { $total } matches\\n    }\\npdfjs-find-match-count-limit =\\n    { $limit ->\\n        [one] More than { $limit } match\\n       *[other] More than { $limit } matches\\n    }\\npdfjs-find-not-found = Phrase not found\\npdfjs-page-scale-width = Page Width\\npdfjs-page-scale-fit = Page Fit\\npdfjs-page-scale-auto = Automatic Zoom\\npdfjs-page-scale-actual = Actual Size\\npdfjs-page-scale-percent = { $scale }%\\npdfjs-page-landmark =\\n    .aria-label = Page { $page }\\npdfjs-loading-error = An error occurred while loading the PDF.\\npdfjs-invalid-file-error = Invalid or corrupted PDF file.\\npdfjs-missing-file-error = Missing PDF file.\\npdfjs-unexpected-response-error = Unexpected server response.\\npdfjs-rendering-error = An error occurred while rendering the page.\\npdfjs-annotation-date-time-string = { DATETIME($dateObj, dateStyle: \\\"short\\\", timeStyle: \\\"medium\\\") }\\npdfjs-text-annotation-type =\\n    .alt = [{ $type } Annotation]\\npdfjs-password-label = Enter the password to open this PDF file.\\npdfjs-password-invalid = Invalid password. Please try again.\\npdfjs-password-ok-button = OK\\npdfjs-password-cancel-button = Cancel\\npdfjs-web-fonts-disabled = Web fonts are disabled: unable to use embedded PDF fonts.\\npdfjs-editor-free-text-button =\\n    .title = Text\\npdfjs-editor-free-text-button-label = Text\\npdfjs-editor-ink-button =\\n    .title = Draw\\npdfjs-editor-ink-button-label = Draw\\npdfjs-editor-stamp-button =\\n    .title = Add or edit images\\npdfjs-editor-stamp-button-label = Add or edit images\\npdfjs-editor-highlight-button =\\n    .title = Highlight\\npdfjs-editor-highlight-button-label = Highlight\\npdfjs-highlight-floating-button1 =\\n    .title = Highlight\\n    .aria-label = Highlight\\npdfjs-highlight-floating-button-label = Highlight\\npdfjs-editor-remove-ink-button =\\n    .title = Remove drawing\\npdfjs-editor-remove-freetext-button =\\n    .title = Remove text\\npdfjs-editor-remove-stamp-button =\\n    .title = Remove image\\npdfjs-editor-remove-highlight-button =\\n    .title = Remove highlight\\npdfjs-editor-free-text-color-input = Color\\npdfjs-editor-free-text-size-input = Size\\npdfjs-editor-ink-color-input = Color\\npdfjs-editor-ink-thickness-input = Thickness\\npdfjs-editor-ink-opacity-input = Opacity\\npdfjs-editor-stamp-add-image-button =\\n    .title = Add image\\npdfjs-editor-stamp-add-image-button-label = Add image\\npdfjs-editor-free-highlight-thickness-input = Thickness\\npdfjs-editor-free-highlight-thickness-title =\\n    .title = Change thickness when highlighting items other than text\\npdfjs-free-text2 =\\n    .aria-label = Text Editor\\n    .default-content = Start typing\\u2026\\npdfjs-ink =\\n    .aria-label = Draw Editor\\npdfjs-ink-canvas =\\n    .aria-label = User-created image\\npdfjs-editor-alt-text-button =\\n    .aria-label = Alt text\\npdfjs-editor-alt-text-button-label = Alt text\\npdfjs-editor-alt-text-edit-button =\\n    .aria-label = Edit alt text\\npdfjs-editor-alt-text-dialog-label = Choose an option\\npdfjs-editor-alt-text-dialog-description = Alt text (alternative text) helps when people can\\u2019t see the image or when it doesn\\u2019t load.\\npdfjs-editor-alt-text-add-description-label = Add a description\\npdfjs-editor-alt-text-add-description-description = Aim for 1-2 sentences that describe the subject, setting, or actions.\\npdfjs-editor-alt-text-mark-decorative-label = Mark as decorative\\npdfjs-editor-alt-text-mark-decorative-description = This is used for ornamental images, like borders or watermarks.\\npdfjs-editor-alt-text-cancel-button = Cancel\\npdfjs-editor-alt-text-save-button = Save\\npdfjs-editor-alt-text-decorative-tooltip = Marked as decorative\\npdfjs-editor-alt-text-textarea =\\n    .placeholder = For example, \\u201CA young man sits down at a table to eat a meal\\u201D\\npdfjs-editor-resizer-top-left =\\n    .aria-label = Top left corner \\u2014 resize\\npdfjs-editor-resizer-top-middle =\\n    .aria-label = Top middle \\u2014 resize\\npdfjs-editor-resizer-top-right =\\n    .aria-label = Top right corner \\u2014 resize\\npdfjs-editor-resizer-middle-right =\\n    .aria-label = Middle right \\u2014 resize\\npdfjs-editor-resizer-bottom-right =\\n    .aria-label = Bottom right corner \\u2014 resize\\npdfjs-editor-resizer-bottom-middle =\\n    .aria-label = Bottom middle \\u2014 resize\\npdfjs-editor-resizer-bottom-left =\\n    .aria-label = Bottom left corner \\u2014 resize\\npdfjs-editor-resizer-middle-left =\\n    .aria-label = Middle left \\u2014 resize\\npdfjs-editor-highlight-colorpicker-label = Highlight color\\npdfjs-editor-colorpicker-button =\\n    .title = Change color\\npdfjs-editor-colorpicker-dropdown =\\n    .aria-label = Color choices\\npdfjs-editor-colorpicker-yellow =\\n    .title = Yellow\\npdfjs-editor-colorpicker-green =\\n    .title = Green\\npdfjs-editor-colorpicker-blue =\\n    .title = Blue\\npdfjs-editor-colorpicker-pink =\\n    .title = Pink\\npdfjs-editor-colorpicker-red =\\n    .title = Red\\npdfjs-editor-highlight-show-all-button-label = Show all\\npdfjs-editor-highlight-show-all-button =\\n    .title = Show all\\npdfjs-editor-new-alt-text-dialog-edit-label = Edit alt text (image description)\\npdfjs-editor-new-alt-text-dialog-add-label = Add alt text (image description)\\npdfjs-editor-new-alt-text-textarea =\\n    .placeholder = Write your description here\\u2026\\npdfjs-editor-new-alt-text-description = Short description for people who can\\u2019t see the image or when the image doesn\\u2019t load.\\npdfjs-editor-new-alt-text-disclaimer1 = This alt text was created automatically and may be inaccurate.\\npdfjs-editor-new-alt-text-disclaimer-learn-more-url = Learn more\\npdfjs-editor-new-alt-text-create-automatically-button-label = Create alt text automatically\\npdfjs-editor-new-alt-text-not-now-button = Not now\\npdfjs-editor-new-alt-text-error-title = Couldn\\u2019t create alt text automatically\\npdfjs-editor-new-alt-text-error-description = Please write your own alt text or try again later.\\npdfjs-editor-new-alt-text-error-close-button = Close\\npdfjs-editor-new-alt-text-ai-model-downloading-progress = Downloading alt text AI model ({ $downloadedSize } of { $totalSize } MB)\\n    .aria-valuetext = Downloading alt text AI model ({ $downloadedSize } of { $totalSize } MB)\\npdfjs-editor-new-alt-text-added-button =\\n    .aria-label = Alt text added\\npdfjs-editor-new-alt-text-added-button-label = Alt text added\\npdfjs-editor-new-alt-text-missing-button =\\n    .aria-label = Missing alt text\\npdfjs-editor-new-alt-text-missing-button-label = Missing alt text\\npdfjs-editor-new-alt-text-to-review-button =\\n    .aria-label = Review alt text\\npdfjs-editor-new-alt-text-to-review-button-label = Review alt text\\npdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer = Created automatically: { $generatedAltText }\\npdfjs-image-alt-text-settings-button =\\n    .title = Image alt text settings\\npdfjs-image-alt-text-settings-button-label = Image alt text settings\\npdfjs-editor-alt-text-settings-dialog-label = Image alt text settings\\npdfjs-editor-alt-text-settings-automatic-title = Automatic alt text\\npdfjs-editor-alt-text-settings-create-model-button-label = Create alt text automatically\\npdfjs-editor-alt-text-settings-create-model-description = Suggests descriptions to help people who can\\u2019t see the image or when the image doesn\\u2019t load.\\npdfjs-editor-alt-text-settings-download-model-label = Alt text AI model ({ $totalSize } MB)\\npdfjs-editor-alt-text-settings-ai-model-description = Runs locally on your device so your data stays private. Required for automatic alt text.\\npdfjs-editor-alt-text-settings-delete-model-button = Delete\\npdfjs-editor-alt-text-settings-download-model-button = Download\\npdfjs-editor-alt-text-settings-downloading-model-button = Downloading\\u2026\\npdfjs-editor-alt-text-settings-editor-title = Alt text editor\\npdfjs-editor-alt-text-settings-show-dialog-button-label = Show alt text editor right away when adding an image\\npdfjs-editor-alt-text-settings-show-dialog-description = Helps you make sure all your images have alt text.\\npdfjs-editor-alt-text-settings-close-button = Close\";\n      return createBundle(lang, text);\n    })();\n  }\n}\n; // ./web/pdf_history.js\n\nconst HASH_CHANGE_TIMEOUT = 1000;\nconst POSITION_UPDATED_THRESHOLD = 50;\nconst UPDATE_VIEWAREA_TIMEOUT = 1000;\nfunction getCurrentHash() {\n  return document.location.hash;\n}\nclass PDFHistory {\n  #eventAbortController = null;\n  constructor({\n    linkService,\n    eventBus\n  }) {\n    this.linkService = linkService;\n    this.eventBus = eventBus;\n    this._initialized = false;\n    this._fingerprint = \"\";\n    this.reset();\n    this.eventBus._on(\"pagesinit\", () => {\n      this._isPagesLoaded = false;\n      this.eventBus._on(\"pagesloaded\", evt => {\n        this._isPagesLoaded = !!evt.pagesCount;\n      }, {\n        once: true\n      });\n    });\n  }\n  initialize({\n    fingerprint,\n    resetHistory = false,\n    updateUrl = false\n  }) {\n    if (!fingerprint || typeof fingerprint !== \"string\") {\n      console.error('PDFHistory.initialize: The \"fingerprint\" must be a non-empty string.');\n      return;\n    }\n    if (this._initialized) {\n      this.reset();\n    }\n    const reInitialized = this._fingerprint !== \"\" && this._fingerprint !== fingerprint;\n    this._fingerprint = fingerprint;\n    this._updateUrl = updateUrl === true;\n    this._initialized = true;\n    this.#bindEvents();\n    const state = window.history.state;\n    this._popStateInProgress = false;\n    this._blockHashChange = 0;\n    this._currentHash = getCurrentHash();\n    this._numPositionUpdates = 0;\n    this._uid = this._maxUid = 0;\n    this._destination = null;\n    this._position = null;\n    if (!this.#isValidState(state, true) || resetHistory) {\n      const {\n        hash,\n        page,\n        rotation\n      } = this.#parseCurrentHash(true);\n      if (!hash || reInitialized || resetHistory) {\n        this.#pushOrReplaceState(null, true);\n        return;\n      }\n      this.#pushOrReplaceState({\n        hash,\n        page,\n        rotation\n      }, true);\n      return;\n    }\n    const destination = state.destination;\n    this.#updateInternalState(destination, state.uid, true);\n    if (destination.rotation !== undefined) {\n      this._initialRotation = destination.rotation;\n    }\n    if (destination.dest) {\n      this._initialBookmark = JSON.stringify(destination.dest);\n      this._destination.page = null;\n    } else if (destination.hash) {\n      this._initialBookmark = destination.hash;\n    } else if (destination.page) {\n      this._initialBookmark = `page=${destination.page}`;\n    }\n  }\n  reset() {\n    if (this._initialized) {\n      this.#pageHide();\n      this._initialized = false;\n      this.#unbindEvents();\n    }\n    if (this._updateViewareaTimeout) {\n      clearTimeout(this._updateViewareaTimeout);\n      this._updateViewareaTimeout = null;\n    }\n    this._initialBookmark = null;\n    this._initialRotation = null;\n  }\n  push({\n    namedDest = null,\n    explicitDest,\n    pageNumber\n  }) {\n    if (!this._initialized) {\n      return;\n    }\n    if (namedDest && typeof namedDest !== \"string\") {\n      console.error(\"PDFHistory.push: \" + `\"${namedDest}\" is not a valid namedDest parameter.`);\n      return;\n    } else if (!Array.isArray(explicitDest)) {\n      console.error(\"PDFHistory.push: \" + `\"${explicitDest}\" is not a valid explicitDest parameter.`);\n      return;\n    } else if (!this.#isValidPage(pageNumber)) {\n      if (pageNumber !== null || this._destination) {\n        console.error(\"PDFHistory.push: \" + `\"${pageNumber}\" is not a valid pageNumber parameter.`);\n        return;\n      }\n    }\n    const hash = namedDest || JSON.stringify(explicitDest);\n    if (!hash) {\n      return;\n    }\n    let forceReplace = false;\n    if (this._destination && (isDestHashesEqual(this._destination.hash, hash) || isDestArraysEqual(this._destination.dest, explicitDest))) {\n      if (this._destination.page) {\n        return;\n      }\n      forceReplace = true;\n    }\n    if (this._popStateInProgress && !forceReplace) {\n      return;\n    }\n    this.#pushOrReplaceState({\n      dest: explicitDest,\n      hash,\n      page: pageNumber,\n      rotation: this.linkService.rotation\n    }, forceReplace);\n    if (!this._popStateInProgress) {\n      this._popStateInProgress = true;\n      Promise.resolve().then(() => {\n        this._popStateInProgress = false;\n      });\n    }\n  }\n  pushPage(pageNumber) {\n    if (!this._initialized) {\n      return;\n    }\n    if (!this.#isValidPage(pageNumber)) {\n      console.error(`PDFHistory.pushPage: \"${pageNumber}\" is not a valid page number.`);\n      return;\n    }\n    if (this._destination?.page === pageNumber) {\n      return;\n    }\n    if (this._popStateInProgress) {\n      return;\n    }\n    this.#pushOrReplaceState({\n      dest: null,\n      hash: `page=${pageNumber}`,\n      page: pageNumber,\n      rotation: this.linkService.rotation\n    });\n    if (!this._popStateInProgress) {\n      this._popStateInProgress = true;\n      Promise.resolve().then(() => {\n        this._popStateInProgress = false;\n      });\n    }\n  }\n  pushCurrentPosition() {\n    if (!this._initialized || this._popStateInProgress) {\n      return;\n    }\n    this.#tryPushCurrentPosition();\n  }\n  back() {\n    if (!this._initialized || this._popStateInProgress) {\n      return;\n    }\n    const state = window.history.state;\n    if (this.#isValidState(state) && state.uid > 0) {\n      window.history.back();\n    }\n  }\n  forward() {\n    if (!this._initialized || this._popStateInProgress) {\n      return;\n    }\n    const state = window.history.state;\n    if (this.#isValidState(state) && state.uid < this._maxUid) {\n      window.history.forward();\n    }\n  }\n  get popStateInProgress() {\n    return this._initialized && (this._popStateInProgress || this._blockHashChange > 0);\n  }\n  get initialBookmark() {\n    return this._initialized ? this._initialBookmark : null;\n  }\n  get initialRotation() {\n    return this._initialized ? this._initialRotation : null;\n  }\n  #pushOrReplaceState(destination, forceReplace = false) {\n    const shouldReplace = forceReplace || !this._destination;\n    const newState = {\n      fingerprint: this._fingerprint,\n      uid: shouldReplace ? this._uid : this._uid + 1,\n      destination\n    };\n    this.#updateInternalState(destination, newState.uid);\n    let newUrl;\n    if (this._updateUrl && destination?.hash) {\n      const baseUrl = document.location.href.split(\"#\", 1)[0];\n      if (!baseUrl.startsWith(\"file://\")) {\n        newUrl = `${baseUrl}#${destination.hash}`;\n      }\n    }\n    if (shouldReplace) {\n      window.history.replaceState(newState, \"\", newUrl);\n    } else {\n      window.history.pushState(newState, \"\", newUrl);\n    }\n  }\n  #tryPushCurrentPosition(temporary = false) {\n    if (!this._position) {\n      return;\n    }\n    let position = this._position;\n    if (temporary) {\n      position = Object.assign(Object.create(null), this._position);\n      position.temporary = true;\n    }\n    if (!this._destination) {\n      this.#pushOrReplaceState(position);\n      return;\n    }\n    if (this._destination.temporary) {\n      this.#pushOrReplaceState(position, true);\n      return;\n    }\n    if (this._destination.hash === position.hash) {\n      return;\n    }\n    if (!this._destination.page && (POSITION_UPDATED_THRESHOLD <= 0 || this._numPositionUpdates <= POSITION_UPDATED_THRESHOLD)) {\n      return;\n    }\n    let forceReplace = false;\n    if (this._destination.page >= position.first && this._destination.page <= position.page) {\n      if (this._destination.dest !== undefined || !this._destination.first) {\n        return;\n      }\n      forceReplace = true;\n    }\n    this.#pushOrReplaceState(position, forceReplace);\n  }\n  #isValidPage(val) {\n    return Number.isInteger(val) && val > 0 && val <= this.linkService.pagesCount;\n  }\n  #isValidState(state, checkReload = false) {\n    if (!state) {\n      return false;\n    }\n    if (state.fingerprint !== this._fingerprint) {\n      if (checkReload) {\n        if (typeof state.fingerprint !== \"string\" || state.fingerprint.length !== this._fingerprint.length) {\n          return false;\n        }\n        const [perfEntry] = performance.getEntriesByType(\"navigation\");\n        if (perfEntry?.type !== \"reload\") {\n          return false;\n        }\n      } else {\n        return false;\n      }\n    }\n    if (!Number.isInteger(state.uid) || state.uid < 0) {\n      return false;\n    }\n    if (state.destination === null || typeof state.destination !== \"object\") {\n      return false;\n    }\n    return true;\n  }\n  #updateInternalState(destination, uid, removeTemporary = false) {\n    if (this._updateViewareaTimeout) {\n      clearTimeout(this._updateViewareaTimeout);\n      this._updateViewareaTimeout = null;\n    }\n    if (removeTemporary && destination?.temporary) {\n      delete destination.temporary;\n    }\n    this._destination = destination;\n    this._uid = uid;\n    this._maxUid = Math.max(this._maxUid, uid);\n    this._numPositionUpdates = 0;\n  }\n  #parseCurrentHash(checkNameddest = false) {\n    const hash = unescape(getCurrentHash()).substring(1);\n    const params = parseQueryString(hash);\n    const nameddest = params.get(\"nameddest\") || \"\";\n    let page = params.get(\"page\") | 0;\n    if (!this.#isValidPage(page) || checkNameddest && nameddest.length > 0) {\n      page = null;\n    }\n    return {\n      hash,\n      page,\n      rotation: this.linkService.rotation\n    };\n  }\n  #updateViewarea({\n    location\n  }) {\n    if (this._updateViewareaTimeout) {\n      clearTimeout(this._updateViewareaTimeout);\n      this._updateViewareaTimeout = null;\n    }\n    this._position = {\n      hash: location.pdfOpenParams.substring(1),\n      page: this.linkService.page,\n      first: location.pageNumber,\n      rotation: location.rotation\n    };\n    if (this._popStateInProgress) {\n      return;\n    }\n    if (POSITION_UPDATED_THRESHOLD > 0 && this._isPagesLoaded && this._destination && !this._destination.page) {\n      this._numPositionUpdates++;\n    }\n    if (UPDATE_VIEWAREA_TIMEOUT > 0) {\n      this._updateViewareaTimeout = setTimeout(() => {\n        if (!this._popStateInProgress) {\n          this.#tryPushCurrentPosition(true);\n        }\n        this._updateViewareaTimeout = null;\n      }, UPDATE_VIEWAREA_TIMEOUT);\n    }\n  }\n  #popState({\n    state\n  }) {\n    const newHash = getCurrentHash(),\n      hashChanged = this._currentHash !== newHash;\n    this._currentHash = newHash;\n    if (!state) {\n      this._uid++;\n      const {\n        hash,\n        page,\n        rotation\n      } = this.#parseCurrentHash();\n      this.#pushOrReplaceState({\n        hash,\n        page,\n        rotation\n      }, true);\n      return;\n    }\n    if (!this.#isValidState(state)) {\n      return;\n    }\n    this._popStateInProgress = true;\n    if (hashChanged) {\n      this._blockHashChange++;\n      waitOnEventOrTimeout({\n        target: window,\n        name: \"hashchange\",\n        delay: HASH_CHANGE_TIMEOUT\n      }).then(() => {\n        this._blockHashChange--;\n      });\n    }\n    const destination = state.destination;\n    this.#updateInternalState(destination, state.uid, true);\n    if (isValidRotation(destination.rotation)) {\n      this.linkService.rotation = destination.rotation;\n    }\n    if (destination.dest) {\n      this.linkService.goToDestination(destination.dest);\n    } else if (destination.hash) {\n      this.linkService.setHash(destination.hash);\n    } else if (destination.page) {\n      this.linkService.page = destination.page;\n    }\n    Promise.resolve().then(() => {\n      this._popStateInProgress = false;\n    });\n  }\n  #pageHide() {\n    if (!this._destination || this._destination.temporary) {\n      this.#tryPushCurrentPosition();\n    }\n  }\n  #bindEvents() {\n    if (this.#eventAbortController) {\n      return;\n    }\n    this.#eventAbortController = new AbortController();\n    const {\n      signal\n    } = this.#eventAbortController;\n    this.eventBus._on(\"updateviewarea\", this.#updateViewarea.bind(this), {\n      signal\n    });\n    window.addEventListener(\"popstate\", this.#popState.bind(this), {\n      signal\n    });\n    window.addEventListener(\"pagehide\", this.#pageHide.bind(this), {\n      signal\n    });\n  }\n  #unbindEvents() {\n    this.#eventAbortController?.abort();\n    this.#eventAbortController = null;\n  }\n}\nfunction isDestHashesEqual(destHash, pushHash) {\n  if (typeof destHash !== \"string\" || typeof pushHash !== \"string\") {\n    return false;\n  }\n  if (destHash === pushHash) {\n    return true;\n  }\n  const nameddest = parseQueryString(destHash).get(\"nameddest\");\n  if (nameddest === pushHash) {\n    return true;\n  }\n  return false;\n}\nfunction isDestArraysEqual(firstDest, secondDest) {\n  function isEntryEqual(first, second) {\n    if (typeof first !== typeof second) {\n      return false;\n    }\n    if (Array.isArray(first) || Array.isArray(second)) {\n      return false;\n    }\n    if (first !== null && typeof first === \"object\" && second !== null) {\n      if (Object.keys(first).length !== Object.keys(second).length) {\n        return false;\n      }\n      for (const key in first) {\n        if (!isEntryEqual(first[key], second[key])) {\n          return false;\n        }\n      }\n      return true;\n    }\n    return first === second || Number.isNaN(first) && Number.isNaN(second);\n  }\n  if (!(Array.isArray(firstDest) && Array.isArray(secondDest))) {\n    return false;\n  }\n  if (firstDest.length !== secondDest.length) {\n    return false;\n  }\n  for (let i = 0, ii = firstDest.length; i < ii; i++) {\n    if (!isEntryEqual(firstDest[i], secondDest[i])) {\n      return false;\n    }\n  }\n  return true;\n}\n; // ./web/annotation_editor_layer_builder.js\n\nclass AnnotationEditorLayerBuilder {\n  #annotationLayer = null;\n  #drawLayer = null;\n  #onAppend = null;\n  #structTreeLayer = null;\n  #textLayer = null;\n  #uiManager;\n  constructor(options) {\n    this.pdfPage = options.pdfPage;\n    this.accessibilityManager = options.accessibilityManager;\n    this.l10n = options.l10n;\n    this.l10n ||= new genericl10n_GenericL10n();\n    this.annotationEditorLayer = null;\n    this.div = null;\n    this._cancelled = false;\n    this.#uiManager = options.uiManager;\n    this.#annotationLayer = options.annotationLayer || null;\n    this.#textLayer = options.textLayer || null;\n    this.#drawLayer = options.drawLayer || null;\n    this.#onAppend = options.onAppend || null;\n    this.#structTreeLayer = options.structTreeLayer || null;\n  }\n  render(viewport, intent = \"display\") {\n    var _this14 = this;\n    return _asyncToGenerator(function* () {\n      if (intent !== \"display\") {\n        return;\n      }\n      if (_this14._cancelled) {\n        return;\n      }\n      const clonedViewport = viewport.clone({\n        dontFlip: true\n      });\n      if (_this14.div) {\n        _this14.annotationEditorLayer.update({\n          viewport: clonedViewport\n        });\n        _this14.show();\n        return;\n      }\n      const div = _this14.div = document.createElement(\"div\");\n      div.className = \"annotationEditorLayer\";\n      div.hidden = true;\n      div.dir = _this14.#uiManager.direction;\n      _this14.#onAppend?.(div);\n      _this14.annotationEditorLayer = new AnnotationEditorLayer({\n        uiManager: _this14.#uiManager,\n        div,\n        structTreeLayer: _this14.#structTreeLayer,\n        accessibilityManager: _this14.accessibilityManager,\n        pageIndex: _this14.pdfPage.pageNumber - 1,\n        l10n: _this14.l10n,\n        viewport: clonedViewport,\n        annotationLayer: _this14.#annotationLayer,\n        textLayer: _this14.#textLayer,\n        drawLayer: _this14.#drawLayer\n      });\n      const parameters = {\n        viewport: clonedViewport,\n        div,\n        annotations: null,\n        intent\n      };\n      _this14.annotationEditorLayer.render(parameters);\n      _this14.show();\n    })();\n  }\n  cancel() {\n    this._cancelled = true;\n    if (!this.div) {\n      return;\n    }\n    this.annotationEditorLayer.destroy();\n  }\n  hide() {\n    if (!this.div) {\n      return;\n    }\n    this.div.hidden = true;\n  }\n  show() {\n    if (!this.div || this.annotationEditorLayer.isInvisible) {\n      return;\n    }\n    this.div.hidden = false;\n  }\n}\n; // ./web/app_options.js\n{\n  var compatParams = new Map();\n  const userAgent = navigator.userAgent || \"\";\n  const platform = navigator.platform || \"\";\n  const maxTouchPoints = navigator.maxTouchPoints || 1;\n  const isAndroid = /Android/.test(userAgent);\n  const isIOS = /\\b(iPad|iPhone|iPod)(?=;)/.test(userAgent) || platform === \"MacIntel\" && maxTouchPoints > 1;\n  (function () {\n    if (isIOS || isAndroid) {\n      compatParams.set(\"maxCanvasPixels\", 5242880);\n    }\n  })();\n  (function () {\n    if (isAndroid) {\n      compatParams.set(\"useSystemFonts\", false);\n    }\n  })();\n}\nconst OptionKind = {\n  BROWSER: 0x01,\n  VIEWER: 0x02,\n  API: 0x04,\n  WORKER: 0x08,\n  EVENT_DISPATCH: 0x10,\n  PREFERENCE: 0x80\n};\nconst Type = {\n  BOOLEAN: 0x01,\n  NUMBER: 0x02,\n  OBJECT: 0x04,\n  STRING: 0x08,\n  UNDEFINED: 0x10\n};\nconst defaultOptions = {\n  allowedGlobalEvents: {\n    value: null,\n    kind: OptionKind.BROWSER\n  },\n  canvasMaxAreaInBytes: {\n    value: -1,\n    kind: OptionKind.BROWSER + OptionKind.API\n  },\n  isInAutomation: {\n    value: false,\n    kind: OptionKind.BROWSER\n  },\n  localeProperties: {\n    value: {\n      lang: navigator.language || \"en-US\"\n    },\n    kind: OptionKind.BROWSER\n  },\n  nimbusDataStr: {\n    value: \"\",\n    kind: OptionKind.BROWSER\n  },\n  supportsCaretBrowsingMode: {\n    value: false,\n    kind: OptionKind.BROWSER\n  },\n  supportsDocumentFonts: {\n    value: true,\n    kind: OptionKind.BROWSER\n  },\n  supportsIntegratedFind: {\n    value: false,\n    kind: OptionKind.BROWSER\n  },\n  supportsMouseWheelZoomCtrlKey: {\n    value: true,\n    kind: OptionKind.BROWSER\n  },\n  supportsMouseWheelZoomMetaKey: {\n    value: true,\n    kind: OptionKind.BROWSER\n  },\n  supportsPinchToZoom: {\n    value: true,\n    kind: OptionKind.BROWSER\n  },\n  toolbarDensity: {\n    value: 0,\n    kind: OptionKind.BROWSER + OptionKind.EVENT_DISPATCH\n  },\n  altTextLearnMoreUrl: {\n    value: \"\",\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  annotationEditorMode: {\n    value: 0,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  annotationMode: {\n    value: 2,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  cursorToolOnLoad: {\n    value: 0,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  debuggerSrc: {\n    value: \"./debugger.mjs\",\n    kind: OptionKind.VIEWER\n  },\n  defaultZoomDelay: {\n    value: 400,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  defaultZoomValue: {\n    value: \"\",\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  disableHistory: {\n    value: false,\n    kind: OptionKind.VIEWER\n  },\n  disablePageLabels: {\n    value: false,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  enableAltText: {\n    value: false,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  enableAltTextModelDownload: {\n    value: true,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE + OptionKind.EVENT_DISPATCH\n  },\n  enableGuessAltText: {\n    value: true,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE + OptionKind.EVENT_DISPATCH\n  },\n  enableHighlightFloatingButton: {\n    value: false,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  enableNewAltTextWhenAddingImage: {\n    value: true,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  enablePermissions: {\n    value: false,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  enablePrintAutoRotate: {\n    value: true,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  enableScripting: {\n    value: true,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  enableUpdatedAddImage: {\n    value: false,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  externalLinkRel: {\n    value: \"noopener noreferrer nofollow\",\n    kind: OptionKind.VIEWER\n  },\n  externalLinkTarget: {\n    value: 0,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  highlightEditorColors: {\n    value: \"yellow=#FFFF98,green=#53FFBC,blue=#80EBFF,pink=#FFCBE6,red=#FF4F5F\",\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  historyUpdateUrl: {\n    value: false,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  ignoreDestinationZoom: {\n    value: false,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  imageResourcesPath: {\n    value: \"./images/\",\n    kind: OptionKind.VIEWER\n  },\n  maxCanvasPixels: {\n    value: 2 ** 25,\n    kind: OptionKind.VIEWER\n  },\n  forcePageColors: {\n    value: false,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  pageColorsBackground: {\n    value: \"Canvas\",\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  pageColorsForeground: {\n    value: \"CanvasText\",\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  pdfBugEnabled: {\n    value: false,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  printResolution: {\n    value: 150,\n    kind: OptionKind.VIEWER\n  },\n  sidebarViewOnLoad: {\n    value: -1,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  scrollModeOnLoad: {\n    value: -1,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  spreadModeOnLoad: {\n    value: -1,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  textLayerMode: {\n    value: 1,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  viewOnLoad: {\n    value: 0,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  cMapPacked: {\n    value: true,\n    kind: OptionKind.API\n  },\n  cMapUrl: {\n    value: \"../web/cmaps/\",\n    kind: OptionKind.API\n  },\n  disableAutoFetch: {\n    value: false,\n    kind: OptionKind.API + OptionKind.PREFERENCE\n  },\n  disableFontFace: {\n    value: false,\n    kind: OptionKind.API + OptionKind.PREFERENCE\n  },\n  disableRange: {\n    value: false,\n    kind: OptionKind.API + OptionKind.PREFERENCE\n  },\n  disableStream: {\n    value: false,\n    kind: OptionKind.API + OptionKind.PREFERENCE\n  },\n  docBaseUrl: {\n    value: \"\",\n    kind: OptionKind.API\n  },\n  enableHWA: {\n    value: true,\n    kind: OptionKind.API + OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  enableXfa: {\n    value: true,\n    kind: OptionKind.API + OptionKind.PREFERENCE\n  },\n  fontExtraProperties: {\n    value: false,\n    kind: OptionKind.API\n  },\n  isEvalSupported: {\n    value: true,\n    kind: OptionKind.API\n  },\n  isOffscreenCanvasSupported: {\n    value: true,\n    kind: OptionKind.API\n  },\n  maxImageSize: {\n    value: -1,\n    kind: OptionKind.API\n  },\n  pdfBug: {\n    value: false,\n    kind: OptionKind.API\n  },\n  standardFontDataUrl: {\n    value: \"../web/standard_fonts/\",\n    kind: OptionKind.API\n  },\n  useSystemFonts: {\n    value: undefined,\n    kind: OptionKind.API,\n    type: Type.BOOLEAN + Type.UNDEFINED\n  },\n  verbosity: {\n    value: 1,\n    kind: OptionKind.API\n  },\n  workerPort: {\n    value: null,\n    kind: OptionKind.WORKER\n  },\n  workerSrc: {\n    value: \"../build/pdf.worker.mjs\",\n    kind: OptionKind.WORKER\n  }\n};\n{\n  defaultOptions.defaultUrl = {\n    value: \"compressed.tracemonkey-pldi-09.pdf\",\n    kind: OptionKind.VIEWER\n  };\n  defaultOptions.sandboxBundleSrc = {\n    value: \"../build/pdf.sandbox.mjs\",\n    kind: OptionKind.VIEWER\n  };\n  defaultOptions.viewerCssTheme = {\n    value: 0,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  };\n  defaultOptions.enableFakeMLManager = {\n    value: true,\n    kind: OptionKind.VIEWER\n  };\n}\n{\n  defaultOptions.disablePreferences = {\n    value: false,\n    kind: OptionKind.VIEWER\n  };\n}\nclass AppOptions {\n  static eventBus;\n  static #opts = new Map();\n  static {\n    for (const name in defaultOptions) {\n      this.#opts.set(name, defaultOptions[name].value);\n    }\n    for (const [name, value] of compatParams) {\n      this.#opts.set(name, value);\n    }\n    this._hasInvokedSet = false;\n    this._checkDisablePreferences = () => {\n      if (this.get(\"disablePreferences\")) {\n        return true;\n      }\n      if (this._hasInvokedSet) {\n        console.warn(\"The Preferences may override manually set AppOptions; \" + 'please use the \"disablePreferences\"-option to prevent that.');\n      }\n      return false;\n    };\n  }\n  static get(name) {\n    return this.#opts.get(name);\n  }\n  static getAll(kind = null, defaultOnly = false) {\n    const options = Object.create(null);\n    for (const name in defaultOptions) {\n      const defaultOpt = defaultOptions[name];\n      if (kind && !(kind & defaultOpt.kind)) {\n        continue;\n      }\n      options[name] = !defaultOnly ? this.#opts.get(name) : defaultOpt.value;\n    }\n    return options;\n  }\n  static set(name, value) {\n    this.setAll({\n      [name]: value\n    });\n  }\n  static setAll(options, prefs = false) {\n    this._hasInvokedSet ||= true;\n    let events;\n    for (const name in options) {\n      const defaultOpt = defaultOptions[name],\n        userOpt = options[name];\n      if (!defaultOpt || !(typeof userOpt === typeof defaultOpt.value || Type[(typeof userOpt).toUpperCase()] & defaultOpt.type)) {\n        continue;\n      }\n      const {\n        kind\n      } = defaultOpt;\n      if (prefs && !(kind & OptionKind.BROWSER || kind & OptionKind.PREFERENCE)) {\n        continue;\n      }\n      if (this.eventBus && kind & OptionKind.EVENT_DISPATCH) {\n        (events ||= new Map()).set(name, userOpt);\n      }\n      this.#opts.set(name, userOpt);\n    }\n    if (events) {\n      for (const [name, value] of events) {\n        this.eventBus.dispatch(name.toLowerCase(), {\n          source: this,\n          value\n        });\n      }\n    }\n  }\n}\n; // ./web/draw_layer_builder.js\n\nclass DrawLayerBuilder {\n  #drawLayer = null;\n  constructor(options) {\n    this.pageIndex = options.pageIndex;\n  }\n  render(intent = \"display\") {\n    var _this15 = this;\n    return _asyncToGenerator(function* () {\n      if (intent !== \"display\" || _this15.#drawLayer || _this15._cancelled) {\n        return;\n      }\n      _this15.#drawLayer = new DrawLayer({\n        pageIndex: _this15.pageIndex\n      });\n    })();\n  }\n  cancel() {\n    this._cancelled = true;\n    if (!this.#drawLayer) {\n      return;\n    }\n    this.#drawLayer.destroy();\n    this.#drawLayer = null;\n  }\n  setParent(parent) {\n    this.#drawLayer?.setParent(parent);\n  }\n  getDrawLayer() {\n    return this.#drawLayer;\n  }\n}\n; // ./web/struct_tree_layer_builder.js\n\nconst PDF_ROLE_TO_HTML_ROLE = {\n  Document: null,\n  DocumentFragment: null,\n  Part: \"group\",\n  Sect: \"group\",\n  Div: \"group\",\n  Aside: \"note\",\n  NonStruct: \"none\",\n  P: null,\n  H: \"heading\",\n  Title: null,\n  FENote: \"note\",\n  Sub: \"group\",\n  Lbl: null,\n  Span: null,\n  Em: null,\n  Strong: null,\n  Link: \"link\",\n  Annot: \"note\",\n  Form: \"form\",\n  Ruby: null,\n  RB: null,\n  RT: null,\n  RP: null,\n  Warichu: null,\n  WT: null,\n  WP: null,\n  L: \"list\",\n  LI: \"listitem\",\n  LBody: null,\n  Table: \"table\",\n  TR: \"row\",\n  TH: \"columnheader\",\n  TD: \"cell\",\n  THead: \"columnheader\",\n  TBody: null,\n  TFoot: null,\n  Caption: null,\n  Figure: \"figure\",\n  Formula: null,\n  Artifact: null\n};\nconst HEADING_PATTERN = /^H(\\d+)$/;\nclass StructTreeLayerBuilder {\n  #promise;\n  #treeDom = null;\n  #treePromise;\n  #elementAttributes = new Map();\n  #rawDims;\n  #elementsToAddToTextLayer = null;\n  constructor(pdfPage, rawDims) {\n    this.#promise = pdfPage.getStructTree();\n    this.#rawDims = rawDims;\n  }\n  render() {\n    var _this16 = this;\n    return _asyncToGenerator(function* () {\n      if (_this16.#treePromise) {\n        return _this16.#treePromise;\n      }\n      const {\n        promise,\n        resolve,\n        reject\n      } = Promise.withResolvers();\n      _this16.#treePromise = promise;\n      try {\n        _this16.#treeDom = _this16.#walk(yield _this16.#promise);\n      } catch (ex) {\n        reject(ex);\n      }\n      _this16.#promise = null;\n      _this16.#treeDom?.classList.add(\"structTree\");\n      resolve(_this16.#treeDom);\n      return promise;\n    })();\n  }\n  getAriaAttributes(annotationId) {\n    var _this17 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        yield _this17.render();\n        return _this17.#elementAttributes.get(annotationId);\n      } catch {}\n      return null;\n    })();\n  }\n  hide() {\n    if (this.#treeDom && !this.#treeDom.hidden) {\n      this.#treeDom.hidden = true;\n    }\n  }\n  show() {\n    if (this.#treeDom?.hidden) {\n      this.#treeDom.hidden = false;\n    }\n  }\n  #setAttributes(structElement, htmlElement) {\n    const {\n      alt,\n      id,\n      lang\n    } = structElement;\n    if (alt !== undefined) {\n      let added = false;\n      const label = removeNullCharacters(alt);\n      for (const child of structElement.children) {\n        if (child.type === \"annotation\") {\n          let attrs = this.#elementAttributes.get(child.id);\n          if (!attrs) {\n            attrs = new Map();\n            this.#elementAttributes.set(child.id, attrs);\n          }\n          attrs.set(\"aria-label\", label);\n          added = true;\n        }\n      }\n      if (!added) {\n        htmlElement.setAttribute(\"aria-label\", label);\n      }\n    }\n    if (id !== undefined) {\n      htmlElement.setAttribute(\"aria-owns\", id);\n    }\n    if (lang !== undefined) {\n      htmlElement.setAttribute(\"lang\", removeNullCharacters(lang, true));\n    }\n  }\n  #addImageInTextLayer(node, element) {\n    const {\n      alt,\n      bbox,\n      children\n    } = node;\n    const child = children?.[0];\n    if (!this.#rawDims || !alt || !bbox || child?.type !== \"content\") {\n      return false;\n    }\n    const {\n      id\n    } = child;\n    if (!id) {\n      return false;\n    }\n    element.setAttribute(\"aria-owns\", id);\n    const img = document.createElement(\"span\");\n    (this.#elementsToAddToTextLayer ||= new Map()).set(id, img);\n    img.setAttribute(\"role\", \"img\");\n    img.setAttribute(\"aria-label\", removeNullCharacters(alt));\n    const {\n      pageHeight,\n      pageX,\n      pageY\n    } = this.#rawDims;\n    const calc = \"calc(var(--scale-factor)*\";\n    const {\n      style\n    } = img;\n    style.width = `${calc}${bbox[2] - bbox[0]}px)`;\n    style.height = `${calc}${bbox[3] - bbox[1]}px)`;\n    style.left = `${calc}${bbox[0] - pageX}px)`;\n    style.top = `${calc}${pageHeight - bbox[3] + pageY}px)`;\n    return true;\n  }\n  addElementsToTextLayer() {\n    if (!this.#elementsToAddToTextLayer) {\n      return;\n    }\n    for (const [id, img] of this.#elementsToAddToTextLayer) {\n      document.getElementById(id)?.append(img);\n    }\n    this.#elementsToAddToTextLayer.clear();\n    this.#elementsToAddToTextLayer = null;\n  }\n  #walk(node) {\n    if (!node) {\n      return null;\n    }\n    const element = document.createElement(\"span\");\n    if (\"role\" in node) {\n      const {\n        role\n      } = node;\n      const match = role.match(HEADING_PATTERN);\n      if (match) {\n        element.setAttribute(\"role\", \"heading\");\n        element.setAttribute(\"aria-level\", match[1]);\n      } else if (PDF_ROLE_TO_HTML_ROLE[role]) {\n        element.setAttribute(\"role\", PDF_ROLE_TO_HTML_ROLE[role]);\n      }\n      if (role === \"Figure\" && this.#addImageInTextLayer(node, element)) {\n        return element;\n      }\n    }\n    this.#setAttributes(node, element);\n    if (node.children) {\n      if (node.children.length === 1 && \"id\" in node.children[0]) {\n        this.#setAttributes(node.children[0], element);\n      } else {\n        for (const kid of node.children) {\n          element.append(this.#walk(kid));\n        }\n      }\n    }\n    return element;\n  }\n}\n; // ./web/text_accessibility.js\n\nclass TextAccessibilityManager {\n  #enabled = false;\n  #textChildren = null;\n  #textNodes = new Map();\n  #waitingElements = new Map();\n  setTextMapping(textDivs) {\n    this.#textChildren = textDivs;\n  }\n  static #compareElementPositions(e1, e2) {\n    const rect1 = e1.getBoundingClientRect();\n    const rect2 = e2.getBoundingClientRect();\n    if (rect1.width === 0 && rect1.height === 0) {\n      return +1;\n    }\n    if (rect2.width === 0 && rect2.height === 0) {\n      return -1;\n    }\n    const top1 = rect1.y;\n    const bot1 = rect1.y + rect1.height;\n    const mid1 = rect1.y + rect1.height / 2;\n    const top2 = rect2.y;\n    const bot2 = rect2.y + rect2.height;\n    const mid2 = rect2.y + rect2.height / 2;\n    if (mid1 <= top2 && mid2 >= bot1) {\n      return -1;\n    }\n    if (mid2 <= top1 && mid1 >= bot2) {\n      return +1;\n    }\n    const centerX1 = rect1.x + rect1.width / 2;\n    const centerX2 = rect2.x + rect2.width / 2;\n    return centerX1 - centerX2;\n  }\n  enable() {\n    if (this.#enabled) {\n      throw new Error(\"TextAccessibilityManager is already enabled.\");\n    }\n    if (!this.#textChildren) {\n      throw new Error(\"Text divs and strings have not been set.\");\n    }\n    this.#enabled = true;\n    this.#textChildren = this.#textChildren.slice();\n    this.#textChildren.sort(TextAccessibilityManager.#compareElementPositions);\n    if (this.#textNodes.size > 0) {\n      const textChildren = this.#textChildren;\n      for (const [id, nodeIndex] of this.#textNodes) {\n        const element = document.getElementById(id);\n        if (!element) {\n          this.#textNodes.delete(id);\n          continue;\n        }\n        this.#addIdToAriaOwns(id, textChildren[nodeIndex]);\n      }\n    }\n    for (const [element, isRemovable] of this.#waitingElements) {\n      this.addPointerInTextLayer(element, isRemovable);\n    }\n    this.#waitingElements.clear();\n  }\n  disable() {\n    if (!this.#enabled) {\n      return;\n    }\n    this.#waitingElements.clear();\n    this.#textChildren = null;\n    this.#enabled = false;\n  }\n  removePointerInTextLayer(element) {\n    if (!this.#enabled) {\n      this.#waitingElements.delete(element);\n      return;\n    }\n    const children = this.#textChildren;\n    if (!children || children.length === 0) {\n      return;\n    }\n    const {\n      id\n    } = element;\n    const nodeIndex = this.#textNodes.get(id);\n    if (nodeIndex === undefined) {\n      return;\n    }\n    const node = children[nodeIndex];\n    this.#textNodes.delete(id);\n    let owns = node.getAttribute(\"aria-owns\");\n    if (owns?.includes(id)) {\n      owns = owns.split(\" \").filter(x => x !== id).join(\" \");\n      if (owns) {\n        node.setAttribute(\"aria-owns\", owns);\n      } else {\n        node.removeAttribute(\"aria-owns\");\n        node.setAttribute(\"role\", \"presentation\");\n      }\n    }\n  }\n  #addIdToAriaOwns(id, node) {\n    const owns = node.getAttribute(\"aria-owns\");\n    if (!owns?.includes(id)) {\n      node.setAttribute(\"aria-owns\", owns ? `${owns} ${id}` : id);\n    }\n    node.removeAttribute(\"role\");\n  }\n  addPointerInTextLayer(element, isRemovable) {\n    const {\n      id\n    } = element;\n    if (!id) {\n      return null;\n    }\n    if (!this.#enabled) {\n      this.#waitingElements.set(element, isRemovable);\n      return null;\n    }\n    if (isRemovable) {\n      this.removePointerInTextLayer(element);\n    }\n    const children = this.#textChildren;\n    if (!children || children.length === 0) {\n      return null;\n    }\n    const index = binarySearchFirstItem(children, node => TextAccessibilityManager.#compareElementPositions(element, node) < 0);\n    const nodeIndex = Math.max(0, index - 1);\n    const child = children[nodeIndex];\n    this.#addIdToAriaOwns(id, child);\n    this.#textNodes.set(id, nodeIndex);\n    const parent = child.parentNode;\n    return parent?.classList.contains(\"markedContent\") ? parent.id : null;\n  }\n  moveElementInDOM(container, element, contentElement, isRemovable) {\n    const id = this.addPointerInTextLayer(contentElement, isRemovable);\n    if (!container.hasChildNodes()) {\n      container.append(element);\n      return id;\n    }\n    const children = Array.from(container.childNodes).filter(node => node !== element);\n    if (children.length === 0) {\n      return id;\n    }\n    const elementToCompare = contentElement || element;\n    const index = binarySearchFirstItem(children, node => TextAccessibilityManager.#compareElementPositions(elementToCompare, node) < 0);\n    if (index === 0) {\n      children[0].before(element);\n    } else {\n      children[index - 1].after(element);\n    }\n    return id;\n  }\n}\n; // ./web/text_highlighter.js\nclass TextHighlighter {\n  #eventAbortController = null;\n  constructor({\n    findController,\n    eventBus,\n    pageIndex\n  }) {\n    this.findController = findController;\n    this.matches = [];\n    this.eventBus = eventBus;\n    this.pageIdx = pageIndex;\n    this.textDivs = null;\n    this.textContentItemsStr = null;\n    this.enabled = false;\n  }\n  setTextMapping(divs, texts) {\n    this.textDivs = divs;\n    this.textContentItemsStr = texts;\n  }\n  enable() {\n    if (!this.textDivs || !this.textContentItemsStr) {\n      throw new Error(\"Text divs and strings have not been set.\");\n    }\n    if (this.enabled) {\n      throw new Error(\"TextHighlighter is already enabled.\");\n    }\n    this.enabled = true;\n    if (!this.#eventAbortController) {\n      this.#eventAbortController = new AbortController();\n      this.eventBus._on(\"updatetextlayermatches\", evt => {\n        if (evt.pageIndex === this.pageIdx || evt.pageIndex === -1) {\n          this._updateMatches();\n        }\n      }, {\n        signal: this.#eventAbortController.signal\n      });\n    }\n    this._updateMatches();\n  }\n  disable() {\n    if (!this.enabled) {\n      return;\n    }\n    this.enabled = false;\n    this.#eventAbortController?.abort();\n    this.#eventAbortController = null;\n    this._updateMatches(true);\n  }\n  _convertMatches(matches, matchesLength) {\n    if (!matches) {\n      return [];\n    }\n    const {\n      textContentItemsStr\n    } = this;\n    let i = 0,\n      iIndex = 0;\n    const end = textContentItemsStr.length - 1;\n    const result = [];\n    for (let m = 0, mm = matches.length; m < mm; m++) {\n      let matchIdx = matches[m];\n      while (i !== end && matchIdx >= iIndex + textContentItemsStr[i].length) {\n        iIndex += textContentItemsStr[i].length;\n        i++;\n      }\n      if (i === textContentItemsStr.length) {\n        console.error(\"Could not find a matching mapping\");\n      }\n      const match = {\n        begin: {\n          divIdx: i,\n          offset: matchIdx - iIndex\n        }\n      };\n      matchIdx += matchesLength[m];\n      while (i !== end && matchIdx > iIndex + textContentItemsStr[i].length) {\n        iIndex += textContentItemsStr[i].length;\n        i++;\n      }\n      match.end = {\n        divIdx: i,\n        offset: matchIdx - iIndex\n      };\n      result.push(match);\n    }\n    return result;\n  }\n  _renderMatches(matches) {\n    if (matches.length === 0) {\n      return;\n    }\n    const {\n      findController,\n      pageIdx\n    } = this;\n    const {\n      textContentItemsStr,\n      textDivs\n    } = this;\n    const isSelectedPage = pageIdx === findController.selected.pageIdx;\n    const selectedMatchIdx = findController.selected.matchIdx;\n    const highlightAll = findController.state.highlightAll;\n    let prevEnd = null;\n    const infinity = {\n      divIdx: -1,\n      offset: undefined\n    };\n    function beginText(begin, className) {\n      const divIdx = begin.divIdx;\n      textDivs[divIdx].textContent = \"\";\n      return appendTextToDiv(divIdx, 0, begin.offset, className);\n    }\n    function appendTextToDiv(divIdx, fromOffset, toOffset, className) {\n      let div = textDivs[divIdx];\n      if (div.nodeType === Node.TEXT_NODE) {\n        const span = document.createElement(\"span\");\n        div.before(span);\n        span.append(div);\n        textDivs[divIdx] = span;\n        div = span;\n      }\n      const content = textContentItemsStr[divIdx].substring(fromOffset, toOffset);\n      const node = document.createTextNode(content);\n      if (className) {\n        const span = document.createElement(\"span\");\n        span.className = `${className} appended`;\n        span.append(node);\n        div.append(span);\n        return className.includes(\"selected\") ? span.offsetLeft : 0;\n      }\n      div.append(node);\n      return 0;\n    }\n    let i0 = selectedMatchIdx,\n      i1 = i0 + 1;\n    if (highlightAll) {\n      i0 = 0;\n      i1 = matches.length;\n    } else if (!isSelectedPage) {\n      return;\n    }\n    let lastDivIdx = -1;\n    let lastOffset = -1;\n    for (let i = i0; i < i1; i++) {\n      const match = matches[i];\n      const begin = match.begin;\n      if (begin.divIdx === lastDivIdx && begin.offset === lastOffset) {\n        continue;\n      }\n      lastDivIdx = begin.divIdx;\n      lastOffset = begin.offset;\n      const end = match.end;\n      const isSelected = isSelectedPage && i === selectedMatchIdx;\n      const highlightSuffix = isSelected ? \" selected\" : \"\";\n      let selectedLeft = 0;\n      if (!prevEnd || begin.divIdx !== prevEnd.divIdx) {\n        if (prevEnd !== null) {\n          appendTextToDiv(prevEnd.divIdx, prevEnd.offset, infinity.offset);\n        }\n        beginText(begin);\n      } else {\n        appendTextToDiv(prevEnd.divIdx, prevEnd.offset, begin.offset);\n      }\n      if (begin.divIdx === end.divIdx) {\n        selectedLeft = appendTextToDiv(begin.divIdx, begin.offset, end.offset, \"highlight\" + highlightSuffix);\n      } else {\n        selectedLeft = appendTextToDiv(begin.divIdx, begin.offset, infinity.offset, \"highlight begin\" + highlightSuffix);\n        for (let n0 = begin.divIdx + 1, n1 = end.divIdx; n0 < n1; n0++) {\n          textDivs[n0].className = \"highlight middle\" + highlightSuffix;\n        }\n        beginText(end, \"highlight end\" + highlightSuffix);\n      }\n      prevEnd = end;\n      if (isSelected) {\n        findController.scrollMatchIntoView({\n          element: textDivs[begin.divIdx],\n          selectedLeft,\n          pageIndex: pageIdx,\n          matchIndex: selectedMatchIdx\n        });\n      }\n    }\n    if (prevEnd) {\n      appendTextToDiv(prevEnd.divIdx, prevEnd.offset, infinity.offset);\n    }\n  }\n  _updateMatches(reset = false) {\n    if (!this.enabled && !reset) {\n      return;\n    }\n    const {\n      findController,\n      matches,\n      pageIdx\n    } = this;\n    const {\n      textContentItemsStr,\n      textDivs\n    } = this;\n    let clearedUntilDivIdx = -1;\n    for (const match of matches) {\n      const begin = Math.max(clearedUntilDivIdx, match.begin.divIdx);\n      for (let n = begin, end = match.end.divIdx; n <= end; n++) {\n        const div = textDivs[n];\n        div.textContent = textContentItemsStr[n];\n        div.className = \"\";\n      }\n      clearedUntilDivIdx = match.end.divIdx + 1;\n    }\n    if (!findController?.highlightMatches || reset) {\n      return;\n    }\n    const pageMatches = findController.pageMatches[pageIdx] || null;\n    const pageMatchesLength = findController.pageMatchesLength[pageIdx] || null;\n    this.matches = this._convertMatches(pageMatches, pageMatchesLength);\n    this._renderMatches(this.matches);\n  }\n}\n; // ./web/text_layer_builder.js\n\nclass TextLayerBuilder {\n  #enablePermissions = false;\n  #onAppend = null;\n  #renderingDone = false;\n  #textLayer = null;\n  static #textLayers = new Map();\n  static #selectionChangeAbortController = null;\n  constructor({\n    pdfPage,\n    highlighter = null,\n    accessibilityManager = null,\n    enablePermissions = false,\n    onAppend = null\n  }) {\n    this.pdfPage = pdfPage;\n    this.highlighter = highlighter;\n    this.accessibilityManager = accessibilityManager;\n    this.#enablePermissions = enablePermissions === true;\n    this.#onAppend = onAppend;\n    this.div = document.createElement(\"div\");\n    this.div.tabIndex = 0;\n    this.div.className = \"textLayer\";\n  }\n  render(viewport, textContentParams = null) {\n    var _this18 = this;\n    return _asyncToGenerator(function* () {\n      if (_this18.#renderingDone && _this18.#textLayer) {\n        _this18.#textLayer.update({\n          viewport,\n          onBefore: _this18.hide.bind(_this18)\n        });\n        _this18.show();\n        return;\n      }\n      _this18.cancel();\n      _this18.#textLayer = new TextLayer({\n        textContentSource: _this18.pdfPage.streamTextContent(textContentParams || {\n          includeMarkedContent: true,\n          disableNormalization: true\n        }),\n        container: _this18.div,\n        viewport\n      });\n      const {\n        textDivs,\n        textContentItemsStr\n      } = _this18.#textLayer;\n      _this18.highlighter?.setTextMapping(textDivs, textContentItemsStr);\n      _this18.accessibilityManager?.setTextMapping(textDivs);\n      yield _this18.#textLayer.render();\n      _this18.#renderingDone = true;\n      const endOfContent = document.createElement(\"div\");\n      endOfContent.className = \"endOfContent\";\n      _this18.div.append(endOfContent);\n      _this18.#bindMouse(endOfContent);\n      _this18.#onAppend?.(_this18.div);\n      _this18.highlighter?.enable();\n      _this18.accessibilityManager?.enable();\n    })();\n  }\n  hide() {\n    if (!this.div.hidden && this.#renderingDone) {\n      this.highlighter?.disable();\n      this.div.hidden = true;\n    }\n  }\n  show() {\n    if (this.div.hidden && this.#renderingDone) {\n      this.div.hidden = false;\n      this.highlighter?.enable();\n    }\n  }\n  cancel() {\n    this.#textLayer?.cancel();\n    this.#textLayer = null;\n    this.highlighter?.disable();\n    this.accessibilityManager?.disable();\n    TextLayerBuilder.#removeGlobalSelectionListener(this.div);\n  }\n  #bindMouse(end) {\n    const {\n      div\n    } = this;\n    div.addEventListener(\"mousedown\", () => {\n      div.classList.add(\"selecting\");\n    });\n    div.addEventListener(\"copy\", event => {\n      if (!this.#enablePermissions) {\n        const selection = document.getSelection();\n        event.clipboardData.setData(\"text/plain\", removeNullCharacters(normalizeUnicode(selection.toString())));\n      }\n      event.preventDefault();\n      event.stopPropagation();\n    });\n    TextLayerBuilder.#textLayers.set(div, end);\n    TextLayerBuilder.#enableGlobalSelectionListener();\n  }\n  static #removeGlobalSelectionListener(textLayerDiv) {\n    this.#textLayers.delete(textLayerDiv);\n    if (this.#textLayers.size === 0) {\n      this.#selectionChangeAbortController?.abort();\n      this.#selectionChangeAbortController = null;\n    }\n  }\n  static #enableGlobalSelectionListener() {\n    if (this.#selectionChangeAbortController) {\n      return;\n    }\n    this.#selectionChangeAbortController = new AbortController();\n    const {\n      signal\n    } = this.#selectionChangeAbortController;\n    const reset = (end, textLayer) => {\n      textLayer.append(end);\n      end.style.width = \"\";\n      end.style.height = \"\";\n      textLayer.classList.remove(\"selecting\");\n    };\n    let isPointerDown = false;\n    document.addEventListener(\"pointerdown\", () => {\n      isPointerDown = true;\n    }, {\n      signal\n    });\n    document.addEventListener(\"pointerup\", () => {\n      isPointerDown = false;\n      this.#textLayers.forEach(reset);\n    }, {\n      signal\n    });\n    window.addEventListener(\"blur\", () => {\n      isPointerDown = false;\n      this.#textLayers.forEach(reset);\n    }, {\n      signal\n    });\n    document.addEventListener(\"keyup\", () => {\n      if (!isPointerDown) {\n        this.#textLayers.forEach(reset);\n      }\n    }, {\n      signal\n    });\n    var isFirefox, prevRange;\n    document.addEventListener(\"selectionchange\", () => {\n      const selection = document.getSelection();\n      if (selection.rangeCount === 0) {\n        this.#textLayers.forEach(reset);\n        return;\n      }\n      const activeTextLayers = new Set();\n      for (let i = 0; i < selection.rangeCount; i++) {\n        const range = selection.getRangeAt(i);\n        for (const textLayerDiv of this.#textLayers.keys()) {\n          if (!activeTextLayers.has(textLayerDiv) && range.intersectsNode(textLayerDiv)) {\n            activeTextLayers.add(textLayerDiv);\n          }\n        }\n      }\n      for (const [textLayerDiv, endDiv] of this.#textLayers) {\n        if (activeTextLayers.has(textLayerDiv)) {\n          textLayerDiv.classList.add(\"selecting\");\n        } else {\n          reset(endDiv, textLayerDiv);\n        }\n      }\n      isFirefox ??= getComputedStyle(this.#textLayers.values().next().value).getPropertyValue(\"-moz-user-select\") === \"none\";\n      if (isFirefox) {\n        return;\n      }\n      const range = selection.getRangeAt(0);\n      const modifyStart = prevRange && (range.compareBoundaryPoints(Range.END_TO_END, prevRange) === 0 || range.compareBoundaryPoints(Range.START_TO_END, prevRange) === 0);\n      let anchor = modifyStart ? range.startContainer : range.endContainer;\n      if (anchor.nodeType === Node.TEXT_NODE) {\n        anchor = anchor.parentNode;\n      }\n      const parentTextLayer = anchor.parentElement?.closest(\".textLayer\");\n      const endDiv = this.#textLayers.get(parentTextLayer);\n      if (endDiv) {\n        endDiv.style.width = parentTextLayer.style.width;\n        endDiv.style.height = parentTextLayer.style.height;\n        anchor.parentElement.insertBefore(endDiv, modifyStart ? anchor : anchor.nextSibling);\n      }\n      prevRange = range.cloneRange();\n    }, {\n      signal\n    });\n  }\n}\n; // ./web/xfa_layer_builder.js\n\nclass XfaLayerBuilder {\n  constructor({\n    pdfPage,\n    annotationStorage = null,\n    linkService,\n    xfaHtml = null\n  }) {\n    this.pdfPage = pdfPage;\n    this.annotationStorage = annotationStorage;\n    this.linkService = linkService;\n    this.xfaHtml = xfaHtml;\n    this.div = null;\n    this._cancelled = false;\n  }\n  render(viewport, intent = \"display\") {\n    var _this19 = this;\n    return _asyncToGenerator(function* () {\n      if (intent === \"print\") {\n        const parameters = {\n          viewport: viewport.clone({\n            dontFlip: true\n          }),\n          div: _this19.div,\n          xfaHtml: _this19.xfaHtml,\n          annotationStorage: _this19.annotationStorage,\n          linkService: _this19.linkService,\n          intent\n        };\n        _this19.div = document.createElement(\"div\");\n        parameters.div = _this19.div;\n        return XfaLayer.render(parameters);\n      }\n      const xfaHtml = yield _this19.pdfPage.getXfa();\n      if (_this19._cancelled || !xfaHtml) {\n        return {\n          textDivs: []\n        };\n      }\n      const parameters = {\n        viewport: viewport.clone({\n          dontFlip: true\n        }),\n        div: _this19.div,\n        xfaHtml,\n        annotationStorage: _this19.annotationStorage,\n        linkService: _this19.linkService,\n        intent\n      };\n      if (_this19.div) {\n        return XfaLayer.update(parameters);\n      }\n      _this19.div = document.createElement(\"div\");\n      parameters.div = _this19.div;\n      return XfaLayer.render(parameters);\n    })();\n  }\n  cancel() {\n    this._cancelled = true;\n  }\n  hide() {\n    if (!this.div) {\n      return;\n    }\n    this.div.hidden = true;\n  }\n}\n; // ./web/pdf_page_view.js\n\nconst DEFAULT_LAYER_PROPERTIES = {\n  annotationEditorUIManager: null,\n  annotationStorage: null,\n  downloadManager: null,\n  enableScripting: false,\n  fieldObjectsPromise: null,\n  findController: null,\n  hasJSActionsPromise: null,\n  get linkService() {\n    return new SimpleLinkService();\n  }\n};\nconst LAYERS_ORDER = new Map([[\"canvasWrapper\", 0], [\"textLayer\", 1], [\"annotationLayer\", 2], [\"annotationEditorLayer\", 3], [\"xfaLayer\", 3]]);\nclass PDFPageView {\n  #annotationMode = AnnotationMode.ENABLE_FORMS;\n  #enableHWA = false;\n  #hasRestrictedScaling = false;\n  #isEditing = false;\n  #layerProperties = null;\n  #loadingId = null;\n  #previousRotation = null;\n  #scaleRoundX = 1;\n  #scaleRoundY = 1;\n  #renderError = null;\n  #renderingState = RenderingStates.INITIAL;\n  #textLayerMode = TextLayerMode.ENABLE;\n  #useThumbnailCanvas = {\n    directDrawing: true,\n    initialOptionalContent: true,\n    regularAnnotations: true\n  };\n  #viewportMap = new WeakMap();\n  #layers = [null, null, null, null];\n  constructor(options) {\n    const container = options.container;\n    const defaultViewport = options.defaultViewport;\n    this.id = options.id;\n    this.renderingId = \"page\" + this.id;\n    this.#layerProperties = options.layerProperties || DEFAULT_LAYER_PROPERTIES;\n    this.pdfPage = null;\n    this.pageLabel = null;\n    this.rotation = 0;\n    this.scale = options.scale || DEFAULT_SCALE;\n    this.viewport = defaultViewport;\n    this.pdfPageRotate = defaultViewport.rotation;\n    this._optionalContentConfigPromise = options.optionalContentConfigPromise || null;\n    this.#textLayerMode = options.textLayerMode ?? TextLayerMode.ENABLE;\n    this.#annotationMode = options.annotationMode ?? AnnotationMode.ENABLE_FORMS;\n    this.imageResourcesPath = options.imageResourcesPath || \"\";\n    this.maxCanvasPixels = options.maxCanvasPixels ?? AppOptions.get(\"maxCanvasPixels\");\n    this.pageColors = options.pageColors || null;\n    this.#enableHWA = options.enableHWA || false;\n    this.eventBus = options.eventBus;\n    this.renderingQueue = options.renderingQueue;\n    this.l10n = options.l10n;\n    this.l10n ||= new genericl10n_GenericL10n();\n    this.renderTask = null;\n    this.resume = null;\n    this._isStandalone = !this.renderingQueue?.hasViewer();\n    this._container = container;\n    this._annotationCanvasMap = null;\n    this.annotationLayer = null;\n    this.annotationEditorLayer = null;\n    this.textLayer = null;\n    this.zoomLayer = null;\n    this.xfaLayer = null;\n    this.structTreeLayer = null;\n    this.drawLayer = null;\n    const div = document.createElement(\"div\");\n    div.className = \"page\";\n    div.setAttribute(\"data-page-number\", this.id);\n    div.setAttribute(\"role\", \"region\");\n    div.setAttribute(\"data-l10n-id\", \"pdfjs-page-landmark\");\n    div.setAttribute(\"data-l10n-args\", JSON.stringify({\n      page: this.id\n    }));\n    this.div = div;\n    this.#setDimensions();\n    container?.append(div);\n    if (this._isStandalone) {\n      container?.style.setProperty(\"--scale-factor\", this.scale * PixelsPerInch.PDF_TO_CSS_UNITS);\n      if (this.pageColors?.background) {\n        container?.style.setProperty(\"--page-bg-color\", this.pageColors.background);\n      }\n      const {\n        optionalContentConfigPromise\n      } = options;\n      if (optionalContentConfigPromise) {\n        optionalContentConfigPromise.then(optionalContentConfig => {\n          if (optionalContentConfigPromise !== this._optionalContentConfigPromise) {\n            return;\n          }\n          this.#useThumbnailCanvas.initialOptionalContent = optionalContentConfig.hasInitialVisibility;\n        });\n      }\n      if (!options.l10n) {\n        this.l10n.translate(this.div);\n      }\n    }\n  }\n  #addLayer(div, name) {\n    const pos = LAYERS_ORDER.get(name);\n    const oldDiv = this.#layers[pos];\n    this.#layers[pos] = div;\n    if (oldDiv) {\n      oldDiv.replaceWith(div);\n      return;\n    }\n    for (let i = pos - 1; i >= 0; i--) {\n      const layer = this.#layers[i];\n      if (layer) {\n        layer.after(div);\n        return;\n      }\n    }\n    this.div.prepend(div);\n  }\n  get renderingState() {\n    return this.#renderingState;\n  }\n  set renderingState(state) {\n    if (state === this.#renderingState) {\n      return;\n    }\n    this.#renderingState = state;\n    if (this.#loadingId) {\n      clearTimeout(this.#loadingId);\n      this.#loadingId = null;\n    }\n    switch (state) {\n      case RenderingStates.PAUSED:\n        this.div.classList.remove(\"loading\");\n        break;\n      case RenderingStates.RUNNING:\n        this.div.classList.add(\"loadingIcon\");\n        this.#loadingId = setTimeout(() => {\n          this.div.classList.add(\"loading\");\n          this.#loadingId = null;\n        }, 0);\n        break;\n      case RenderingStates.INITIAL:\n      case RenderingStates.FINISHED:\n        this.div.classList.remove(\"loadingIcon\", \"loading\");\n        break;\n    }\n  }\n  #setDimensions() {\n    const {\n      viewport\n    } = this;\n    if (this.pdfPage) {\n      if (this.#previousRotation === viewport.rotation) {\n        return;\n      }\n      this.#previousRotation = viewport.rotation;\n    }\n    setLayerDimensions(this.div, viewport, true, false);\n  }\n  setPdfPage(pdfPage) {\n    if (this._isStandalone && (this.pageColors?.foreground === \"CanvasText\" || this.pageColors?.background === \"Canvas\")) {\n      this._container?.style.setProperty(\"--hcm-highlight-filter\", pdfPage.filterFactory.addHighlightHCMFilter(\"highlight\", \"CanvasText\", \"Canvas\", \"HighlightText\", \"Highlight\"));\n      this._container?.style.setProperty(\"--hcm-highlight-selected-filter\", pdfPage.filterFactory.addHighlightHCMFilter(\"highlight_selected\", \"CanvasText\", \"Canvas\", \"HighlightText\", \"Highlight\"));\n    }\n    this.pdfPage = pdfPage;\n    this.pdfPageRotate = pdfPage.rotate;\n    const totalRotation = (this.rotation + this.pdfPageRotate) % 360;\n    this.viewport = pdfPage.getViewport({\n      scale: this.scale * PixelsPerInch.PDF_TO_CSS_UNITS,\n      rotation: totalRotation\n    });\n    this.#setDimensions();\n    this.reset();\n  }\n  destroy() {\n    this.reset();\n    this.pdfPage?.cleanup();\n  }\n  hasEditableAnnotations() {\n    return !!this.annotationLayer?.hasEditableAnnotations();\n  }\n  get _textHighlighter() {\n    return shadow(this, \"_textHighlighter\", new TextHighlighter({\n      pageIndex: this.id - 1,\n      eventBus: this.eventBus,\n      findController: this.#layerProperties.findController\n    }));\n  }\n  #dispatchLayerRendered(name, error) {\n    this.eventBus.dispatch(name, {\n      source: this,\n      pageNumber: this.id,\n      error\n    });\n  }\n  #renderAnnotationLayer() {\n    var _this20 = this;\n    return _asyncToGenerator(function* () {\n      let error = null;\n      try {\n        yield _this20.annotationLayer.render(_this20.viewport, {\n          structTreeLayer: _this20.structTreeLayer\n        }, \"display\");\n      } catch (ex) {\n        console.error(`#renderAnnotationLayer: \"${ex}\".`);\n        error = ex;\n      } finally {\n        _this20.#dispatchLayerRendered(\"annotationlayerrendered\", error);\n      }\n    })();\n  }\n  #renderAnnotationEditorLayer() {\n    var _this21 = this;\n    return _asyncToGenerator(function* () {\n      let error = null;\n      try {\n        yield _this21.annotationEditorLayer.render(_this21.viewport, \"display\");\n      } catch (ex) {\n        console.error(`#renderAnnotationEditorLayer: \"${ex}\".`);\n        error = ex;\n      } finally {\n        _this21.#dispatchLayerRendered(\"annotationeditorlayerrendered\", error);\n      }\n    })();\n  }\n  #renderDrawLayer() {\n    var _this22 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        yield _this22.drawLayer.render(\"display\");\n      } catch (ex) {\n        console.error(`#renderDrawLayer: \"${ex}\".`);\n      }\n    })();\n  }\n  #renderXfaLayer() {\n    var _this23 = this;\n    return _asyncToGenerator(function* () {\n      let error = null;\n      try {\n        const result = yield _this23.xfaLayer.render(_this23.viewport, \"display\");\n        if (result?.textDivs && _this23._textHighlighter) {\n          _this23.#buildXfaTextContentItems(result.textDivs);\n        }\n      } catch (ex) {\n        console.error(`#renderXfaLayer: \"${ex}\".`);\n        error = ex;\n      } finally {\n        if (_this23.xfaLayer?.div) {\n          _this23.l10n.pause();\n          _this23.#addLayer(_this23.xfaLayer.div, \"xfaLayer\");\n          _this23.l10n.resume();\n        }\n        _this23.#dispatchLayerRendered(\"xfalayerrendered\", error);\n      }\n    })();\n  }\n  #renderTextLayer() {\n    var _this24 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this24.textLayer) {\n        return;\n      }\n      let error = null;\n      try {\n        yield _this24.textLayer.render(_this24.viewport);\n      } catch (ex) {\n        if (ex instanceof AbortException) {\n          return;\n        }\n        console.error(`#renderTextLayer: \"${ex}\".`);\n        error = ex;\n      }\n      _this24.#dispatchLayerRendered(\"textlayerrendered\", error);\n      _this24.#renderStructTreeLayer();\n    })();\n  }\n  #renderStructTreeLayer() {\n    var _this25 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this25.textLayer) {\n        return;\n      }\n      const treeDom = yield _this25.structTreeLayer?.render();\n      if (treeDom) {\n        _this25.l10n.pause();\n        _this25.structTreeLayer?.addElementsToTextLayer();\n        if (_this25.canvas && treeDom.parentNode !== _this25.canvas) {\n          _this25.canvas.append(treeDom);\n        }\n        _this25.l10n.resume();\n      }\n      _this25.structTreeLayer?.show();\n    })();\n  }\n  #buildXfaTextContentItems(textDivs) {\n    var _this26 = this;\n    return _asyncToGenerator(function* () {\n      const text = yield _this26.pdfPage.getTextContent();\n      const items = [];\n      for (const item of text.items) {\n        items.push(item.str);\n      }\n      _this26._textHighlighter.setTextMapping(textDivs, items);\n      _this26._textHighlighter.enable();\n    })();\n  }\n  _resetZoomLayer(removeFromDOM = false) {\n    if (!this.zoomLayer) {\n      return;\n    }\n    const zoomLayerCanvas = this.zoomLayer.firstChild;\n    this.#viewportMap.delete(zoomLayerCanvas);\n    zoomLayerCanvas.width = 0;\n    zoomLayerCanvas.height = 0;\n    if (removeFromDOM) {\n      this.zoomLayer.remove();\n    }\n    this.zoomLayer = null;\n  }\n  reset({\n    keepZoomLayer = false,\n    keepAnnotationLayer = false,\n    keepAnnotationEditorLayer = false,\n    keepXfaLayer = false,\n    keepTextLayer = false\n  } = {}) {\n    this.cancelRendering({\n      keepAnnotationLayer,\n      keepAnnotationEditorLayer,\n      keepXfaLayer,\n      keepTextLayer\n    });\n    this.renderingState = RenderingStates.INITIAL;\n    const div = this.div;\n    const childNodes = div.childNodes,\n      zoomLayerNode = keepZoomLayer && this.zoomLayer || null,\n      annotationLayerNode = keepAnnotationLayer && this.annotationLayer?.div || null,\n      annotationEditorLayerNode = keepAnnotationEditorLayer && this.annotationEditorLayer?.div || null,\n      xfaLayerNode = keepXfaLayer && this.xfaLayer?.div || null,\n      textLayerNode = keepTextLayer && this.textLayer?.div || null;\n    for (let i = childNodes.length - 1; i >= 0; i--) {\n      const node = childNodes[i];\n      switch (node) {\n        case zoomLayerNode:\n        case annotationLayerNode:\n        case annotationEditorLayerNode:\n        case xfaLayerNode:\n        case textLayerNode:\n          continue;\n      }\n      node.remove();\n      const layerIndex = this.#layers.indexOf(node);\n      if (layerIndex >= 0) {\n        this.#layers[layerIndex] = null;\n      }\n    }\n    div.removeAttribute(\"data-loaded\");\n    if (annotationLayerNode) {\n      this.annotationLayer.hide();\n    }\n    if (annotationEditorLayerNode) {\n      this.annotationEditorLayer.hide();\n    }\n    if (xfaLayerNode) {\n      this.xfaLayer.hide();\n    }\n    if (textLayerNode) {\n      this.textLayer.hide();\n    }\n    this.structTreeLayer?.hide();\n    if (!zoomLayerNode) {\n      if (this.canvas) {\n        this.#viewportMap.delete(this.canvas);\n        this.canvas.width = 0;\n        this.canvas.height = 0;\n        delete this.canvas;\n      }\n      this._resetZoomLayer();\n    }\n  }\n  toggleEditingMode(isEditing) {\n    if (!this.hasEditableAnnotations()) {\n      return;\n    }\n    this.#isEditing = isEditing;\n    this.reset({\n      keepZoomLayer: true,\n      keepAnnotationLayer: true,\n      keepAnnotationEditorLayer: true,\n      keepXfaLayer: true,\n      keepTextLayer: true\n    });\n  }\n  update({\n    scale = 0,\n    rotation = null,\n    optionalContentConfigPromise = null,\n    drawingDelay = -1\n  }) {\n    this.scale = scale || this.scale;\n    if (typeof rotation === \"number\") {\n      this.rotation = rotation;\n    }\n    if (optionalContentConfigPromise instanceof Promise) {\n      this._optionalContentConfigPromise = optionalContentConfigPromise;\n      optionalContentConfigPromise.then(optionalContentConfig => {\n        if (optionalContentConfigPromise !== this._optionalContentConfigPromise) {\n          return;\n        }\n        this.#useThumbnailCanvas.initialOptionalContent = optionalContentConfig.hasInitialVisibility;\n      });\n    }\n    this.#useThumbnailCanvas.directDrawing = true;\n    const totalRotation = (this.rotation + this.pdfPageRotate) % 360;\n    this.viewport = this.viewport.clone({\n      scale: this.scale * PixelsPerInch.PDF_TO_CSS_UNITS,\n      rotation: totalRotation\n    });\n    this.#setDimensions();\n    if (this._isStandalone) {\n      this._container?.style.setProperty(\"--scale-factor\", this.viewport.scale);\n    }\n    if (this.canvas) {\n      let onlyCssZoom = false;\n      if (this.#hasRestrictedScaling) {\n        if (this.maxCanvasPixels === 0) {\n          onlyCssZoom = true;\n        } else if (this.maxCanvasPixels > 0) {\n          const {\n            width,\n            height\n          } = this.viewport;\n          const {\n            sx,\n            sy\n          } = this.outputScale;\n          onlyCssZoom = (Math.floor(width) * sx | 0) * (Math.floor(height) * sy | 0) > this.maxCanvasPixels;\n        }\n      }\n      const postponeDrawing = drawingDelay >= 0 && drawingDelay < 1000;\n      if (postponeDrawing || onlyCssZoom) {\n        if (postponeDrawing && !onlyCssZoom && this.renderingState !== RenderingStates.FINISHED) {\n          this.cancelRendering({\n            keepZoomLayer: true,\n            keepAnnotationLayer: true,\n            keepAnnotationEditorLayer: true,\n            keepXfaLayer: true,\n            keepTextLayer: true,\n            cancelExtraDelay: drawingDelay\n          });\n          this.renderingState = RenderingStates.FINISHED;\n          this.#useThumbnailCanvas.directDrawing = false;\n        }\n        this.cssTransform({\n          target: this.canvas,\n          redrawAnnotationLayer: true,\n          redrawAnnotationEditorLayer: true,\n          redrawXfaLayer: true,\n          redrawTextLayer: !postponeDrawing,\n          hideTextLayer: postponeDrawing\n        });\n        if (postponeDrawing) {\n          return;\n        }\n        this.eventBus.dispatch(\"pagerendered\", {\n          source: this,\n          pageNumber: this.id,\n          cssTransform: true,\n          timestamp: performance.now(),\n          error: this.#renderError\n        });\n        return;\n      }\n      if (!this.zoomLayer && !this.canvas.hidden) {\n        this.zoomLayer = this.canvas.parentNode;\n        this.zoomLayer.style.position = \"absolute\";\n      }\n    }\n    if (this.zoomLayer) {\n      this.cssTransform({\n        target: this.zoomLayer.firstChild\n      });\n    }\n    this.reset({\n      keepZoomLayer: true,\n      keepAnnotationLayer: true,\n      keepAnnotationEditorLayer: true,\n      keepXfaLayer: true,\n      keepTextLayer: true\n    });\n  }\n  cancelRendering({\n    keepAnnotationLayer = false,\n    keepAnnotationEditorLayer = false,\n    keepXfaLayer = false,\n    keepTextLayer = false,\n    cancelExtraDelay = 0\n  } = {}) {\n    if (this.renderTask) {\n      this.renderTask.cancel(cancelExtraDelay);\n      this.renderTask = null;\n    }\n    this.resume = null;\n    if (this.textLayer && (!keepTextLayer || !this.textLayer.div)) {\n      this.textLayer.cancel();\n      this.textLayer = null;\n    }\n    if (this.annotationLayer && (!keepAnnotationLayer || !this.annotationLayer.div)) {\n      this.annotationLayer.cancel();\n      this.annotationLayer = null;\n      this._annotationCanvasMap = null;\n    }\n    if (this.structTreeLayer && !this.textLayer) {\n      this.structTreeLayer = null;\n    }\n    if (this.annotationEditorLayer && (!keepAnnotationEditorLayer || !this.annotationEditorLayer.div)) {\n      if (this.drawLayer) {\n        this.drawLayer.cancel();\n        this.drawLayer = null;\n      }\n      this.annotationEditorLayer.cancel();\n      this.annotationEditorLayer = null;\n    }\n    if (this.xfaLayer && (!keepXfaLayer || !this.xfaLayer.div)) {\n      this.xfaLayer.cancel();\n      this.xfaLayer = null;\n      this._textHighlighter?.disable();\n    }\n  }\n  cssTransform({\n    target,\n    redrawAnnotationLayer = false,\n    redrawAnnotationEditorLayer = false,\n    redrawXfaLayer = false,\n    redrawTextLayer = false,\n    hideTextLayer = false\n  }) {\n    if (!target.hasAttribute(\"zooming\")) {\n      target.setAttribute(\"zooming\", true);\n      const {\n        style\n      } = target;\n      style.width = style.height = \"\";\n    }\n    const originalViewport = this.#viewportMap.get(target);\n    if (this.viewport !== originalViewport) {\n      const relativeRotation = this.viewport.rotation - originalViewport.rotation;\n      const absRotation = Math.abs(relativeRotation);\n      let scaleX = 1,\n        scaleY = 1;\n      if (absRotation === 90 || absRotation === 270) {\n        const {\n          width,\n          height\n        } = this.viewport;\n        scaleX = height / width;\n        scaleY = width / height;\n      }\n      target.style.transform = `rotate(${relativeRotation}deg) scale(${scaleX}, ${scaleY})`;\n    }\n    if (redrawAnnotationLayer && this.annotationLayer) {\n      this.#renderAnnotationLayer();\n    }\n    if (redrawAnnotationEditorLayer && this.annotationEditorLayer) {\n      if (this.drawLayer) {\n        this.#renderDrawLayer();\n      }\n      this.#renderAnnotationEditorLayer();\n    }\n    if (redrawXfaLayer && this.xfaLayer) {\n      this.#renderXfaLayer();\n    }\n    if (this.textLayer) {\n      if (hideTextLayer) {\n        this.textLayer.hide();\n        this.structTreeLayer?.hide();\n      } else if (redrawTextLayer) {\n        this.#renderTextLayer();\n      }\n    }\n  }\n  get width() {\n    return this.viewport.width;\n  }\n  get height() {\n    return this.viewport.height;\n  }\n  getPagePoint(x, y) {\n    return this.viewport.convertToPdfPoint(x, y);\n  }\n  #finishRenderTask(renderTask, error = null) {\n    var _this27 = this;\n    return _asyncToGenerator(function* () {\n      if (renderTask === _this27.renderTask) {\n        _this27.renderTask = null;\n      }\n      if (error instanceof RenderingCancelledException) {\n        _this27.#renderError = null;\n        return;\n      }\n      _this27.#renderError = error;\n      _this27.renderingState = RenderingStates.FINISHED;\n      _this27._resetZoomLayer(true);\n      _this27.#useThumbnailCanvas.regularAnnotations = !renderTask.separateAnnots;\n      _this27.eventBus.dispatch(\"pagerendered\", {\n        source: _this27,\n        pageNumber: _this27.id,\n        cssTransform: false,\n        timestamp: performance.now(),\n        error: _this27.#renderError\n      });\n      if (error) {\n        throw error;\n      }\n    })();\n  }\n  draw() {\n    var _this28 = this;\n    return _asyncToGenerator(function* () {\n      if (_this28.renderingState !== RenderingStates.INITIAL) {\n        console.error(\"Must be in new state before drawing\");\n        _this28.reset();\n      }\n      const {\n        div,\n        l10n,\n        pageColors,\n        pdfPage,\n        viewport\n      } = _this28;\n      if (!pdfPage) {\n        _this28.renderingState = RenderingStates.FINISHED;\n        throw new Error(\"pdfPage is not loaded\");\n      }\n      _this28.renderingState = RenderingStates.RUNNING;\n      const canvasWrapper = document.createElement(\"div\");\n      canvasWrapper.classList.add(\"canvasWrapper\");\n      _this28.#addLayer(canvasWrapper, \"canvasWrapper\");\n      if (!_this28.textLayer && _this28.#textLayerMode !== TextLayerMode.DISABLE && !pdfPage.isPureXfa) {\n        _this28._accessibilityManager ||= new TextAccessibilityManager();\n        _this28.textLayer = new TextLayerBuilder({\n          pdfPage,\n          highlighter: _this28._textHighlighter,\n          accessibilityManager: _this28._accessibilityManager,\n          enablePermissions: _this28.#textLayerMode === TextLayerMode.ENABLE_PERMISSIONS,\n          onAppend: textLayerDiv => {\n            _this28.l10n.pause();\n            _this28.#addLayer(textLayerDiv, \"textLayer\");\n            _this28.l10n.resume();\n          }\n        });\n      }\n      if (!_this28.annotationLayer && _this28.#annotationMode !== AnnotationMode.DISABLE) {\n        const {\n          annotationStorage,\n          annotationEditorUIManager,\n          downloadManager,\n          enableScripting,\n          fieldObjectsPromise,\n          hasJSActionsPromise,\n          linkService\n        } = _this28.#layerProperties;\n        _this28._annotationCanvasMap ||= new Map();\n        _this28.annotationLayer = new AnnotationLayerBuilder({\n          pdfPage,\n          annotationStorage,\n          imageResourcesPath: _this28.imageResourcesPath,\n          renderForms: _this28.#annotationMode === AnnotationMode.ENABLE_FORMS,\n          linkService,\n          downloadManager,\n          enableScripting,\n          hasJSActionsPromise,\n          fieldObjectsPromise,\n          annotationCanvasMap: _this28._annotationCanvasMap,\n          accessibilityManager: _this28._accessibilityManager,\n          annotationEditorUIManager,\n          onAppend: annotationLayerDiv => {\n            _this28.#addLayer(annotationLayerDiv, \"annotationLayer\");\n          }\n        });\n      }\n      const renderContinueCallback = cont => {\n        showCanvas?.(false);\n        if (_this28.renderingQueue && !_this28.renderingQueue.isHighestPriority(_this28)) {\n          _this28.renderingState = RenderingStates.PAUSED;\n          _this28.resume = () => {\n            _this28.renderingState = RenderingStates.RUNNING;\n            cont();\n          };\n          return;\n        }\n        cont();\n      };\n      const {\n        width,\n        height\n      } = viewport;\n      const canvas = document.createElement(\"canvas\");\n      canvas.setAttribute(\"role\", \"presentation\");\n      canvas.hidden = true;\n      const hasHCM = !!(pageColors?.background && pageColors?.foreground);\n      let showCanvas = isLastShow => {\n        if (!hasHCM || isLastShow) {\n          canvas.hidden = false;\n          showCanvas = null;\n        }\n      };\n      canvasWrapper.append(canvas);\n      _this28.canvas = canvas;\n      const ctx = canvas.getContext(\"2d\", {\n        alpha: false,\n        willReadFrequently: !_this28.#enableHWA\n      });\n      const outputScale = _this28.outputScale = new OutputScale();\n      if (_this28.maxCanvasPixels === 0) {\n        const invScale = 1 / _this28.scale;\n        outputScale.sx *= invScale;\n        outputScale.sy *= invScale;\n        _this28.#hasRestrictedScaling = true;\n      } else if (_this28.maxCanvasPixels > 0) {\n        const pixelsInViewport = width * height;\n        const maxScale = Math.sqrt(_this28.maxCanvasPixels / pixelsInViewport);\n        if (outputScale.sx > maxScale || outputScale.sy > maxScale) {\n          outputScale.sx = maxScale;\n          outputScale.sy = maxScale;\n          _this28.#hasRestrictedScaling = true;\n        } else {\n          _this28.#hasRestrictedScaling = false;\n        }\n      }\n      const sfx = approximateFraction(outputScale.sx);\n      const sfy = approximateFraction(outputScale.sy);\n      const canvasWidth = canvas.width = floorToDivide(calcRound(width * outputScale.sx), sfx[0]);\n      const canvasHeight = canvas.height = floorToDivide(calcRound(height * outputScale.sy), sfy[0]);\n      const pageWidth = floorToDivide(calcRound(width), sfx[1]);\n      const pageHeight = floorToDivide(calcRound(height), sfy[1]);\n      outputScale.sx = canvasWidth / pageWidth;\n      outputScale.sy = canvasHeight / pageHeight;\n      if (_this28.#scaleRoundX !== sfx[1]) {\n        div.style.setProperty(\"--scale-round-x\", `${sfx[1]}px`);\n        _this28.#scaleRoundX = sfx[1];\n      }\n      if (_this28.#scaleRoundY !== sfy[1]) {\n        div.style.setProperty(\"--scale-round-y\", `${sfy[1]}px`);\n        _this28.#scaleRoundY = sfy[1];\n      }\n      _this28.#viewportMap.set(canvas, viewport);\n      const transform = outputScale.scaled ? [outputScale.sx, 0, 0, outputScale.sy, 0, 0] : null;\n      const renderContext = {\n        canvasContext: ctx,\n        transform,\n        viewport,\n        annotationMode: _this28.#annotationMode,\n        optionalContentConfigPromise: _this28._optionalContentConfigPromise,\n        annotationCanvasMap: _this28._annotationCanvasMap,\n        pageColors,\n        isEditing: _this28.#isEditing\n      };\n      const renderTask = _this28.renderTask = pdfPage.render(renderContext);\n      renderTask.onContinue = renderContinueCallback;\n      const resultPromise = renderTask.promise.then( /*#__PURE__*/_asyncToGenerator(function* () {\n        showCanvas?.(true);\n        yield _this28.#finishRenderTask(renderTask);\n        _this28.structTreeLayer ||= new StructTreeLayerBuilder(pdfPage, viewport.rawDims);\n        _this28.#renderTextLayer();\n        if (_this28.annotationLayer) {\n          yield _this28.#renderAnnotationLayer();\n        }\n        const {\n          annotationEditorUIManager\n        } = _this28.#layerProperties;\n        if (!annotationEditorUIManager) {\n          return;\n        }\n        _this28.drawLayer ||= new DrawLayerBuilder({\n          pageIndex: _this28.id\n        });\n        yield _this28.#renderDrawLayer();\n        _this28.drawLayer.setParent(canvasWrapper);\n        _this28.annotationEditorLayer ||= new AnnotationEditorLayerBuilder({\n          uiManager: annotationEditorUIManager,\n          pdfPage,\n          l10n,\n          structTreeLayer: _this28.structTreeLayer,\n          accessibilityManager: _this28._accessibilityManager,\n          annotationLayer: _this28.annotationLayer?.annotationLayer,\n          textLayer: _this28.textLayer,\n          drawLayer: _this28.drawLayer.getDrawLayer(),\n          onAppend: annotationEditorLayerDiv => {\n            _this28.#addLayer(annotationEditorLayerDiv, \"annotationEditorLayer\");\n          }\n        });\n        _this28.#renderAnnotationEditorLayer();\n      }), error => {\n        if (!(error instanceof RenderingCancelledException)) {\n          showCanvas?.(true);\n        }\n        return _this28.#finishRenderTask(renderTask, error);\n      });\n      if (pdfPage.isPureXfa) {\n        if (!_this28.xfaLayer) {\n          const {\n            annotationStorage,\n            linkService\n          } = _this28.#layerProperties;\n          _this28.xfaLayer = new XfaLayerBuilder({\n            pdfPage,\n            annotationStorage,\n            linkService\n          });\n        }\n        _this28.#renderXfaLayer();\n      }\n      div.setAttribute(\"data-loaded\", true);\n      _this28.eventBus.dispatch(\"pagerender\", {\n        source: _this28,\n        pageNumber: _this28.id\n      });\n      return resultPromise;\n    })();\n  }\n  setPageLabel(label) {\n    this.pageLabel = typeof label === \"string\" ? label : null;\n    this.div.setAttribute(\"data-l10n-args\", JSON.stringify({\n      page: this.pageLabel ?? this.id\n    }));\n    if (this.pageLabel !== null) {\n      this.div.setAttribute(\"data-page-label\", this.pageLabel);\n    } else {\n      this.div.removeAttribute(\"data-page-label\");\n    }\n  }\n  get thumbnailCanvas() {\n    const {\n      directDrawing,\n      initialOptionalContent,\n      regularAnnotations\n    } = this.#useThumbnailCanvas;\n    return directDrawing && initialOptionalContent && regularAnnotations ? this.canvas : null;\n  }\n}\n; // ./web/generic_scripting.js\nfunction docProperties(_x2) {\n  return _docProperties.apply(this, arguments);\n}\nfunction _docProperties() {\n  _docProperties = _asyncToGenerator(function* (pdfDocument) {\n    const url = \"\",\n      baseUrl = url.split(\"#\", 1)[0];\n    let {\n      info,\n      metadata,\n      contentDispositionFilename,\n      contentLength\n    } = yield pdfDocument.getMetadata();\n    if (!contentLength) {\n      const {\n        length\n      } = yield pdfDocument.getDownloadInfo();\n      contentLength = length;\n    }\n    return {\n      ...info,\n      baseURL: baseUrl,\n      filesize: contentLength,\n      filename: contentDispositionFilename || getPdfFilenameFromUrl(url),\n      metadata: metadata?.getRaw(),\n      authors: metadata?.get(\"dc:creator\"),\n      numPages: pdfDocument.numPages,\n      URL: url\n    };\n  });\n  return _docProperties.apply(this, arguments);\n}\nclass GenericScripting {\n  constructor(sandboxBundleSrc) {\n    this._ready = new Promise((resolve, reject) => {\n      const sandbox = import( /*webpackIgnore: true*/sandboxBundleSrc);\n      sandbox.then(pdfjsSandbox => {\n        resolve(pdfjsSandbox.QuickJSSandbox());\n      }).catch(reject);\n    });\n  }\n  createSandbox(data) {\n    var _this29 = this;\n    return _asyncToGenerator(function* () {\n      const sandbox = yield _this29._ready;\n      sandbox.create(data);\n    })();\n  }\n  dispatchEventInSandbox(event) {\n    var _this30 = this;\n    return _asyncToGenerator(function* () {\n      const sandbox = yield _this30._ready;\n      setTimeout(() => sandbox.dispatchEvent(event), 0);\n    })();\n  }\n  destroySandbox() {\n    var _this31 = this;\n    return _asyncToGenerator(function* () {\n      const sandbox = yield _this31._ready;\n      sandbox.nukeSandbox();\n    })();\n  }\n}\n; // ./web/pdf_scripting_manager.js\n\nclass PDFScriptingManager {\n  #closeCapability = null;\n  #destroyCapability = null;\n  #docProperties = null;\n  #eventAbortController = null;\n  #eventBus = null;\n  #externalServices = null;\n  #pdfDocument = null;\n  #pdfViewer = null;\n  #ready = false;\n  #scripting = null;\n  #willPrintCapability = null;\n  constructor({\n    eventBus,\n    externalServices = null,\n    docProperties = null\n  }) {\n    this.#eventBus = eventBus;\n    this.#externalServices = externalServices;\n    this.#docProperties = docProperties;\n  }\n  setViewer(pdfViewer) {\n    this.#pdfViewer = pdfViewer;\n  }\n  setDocument(pdfDocument) {\n    var _this32 = this;\n    return _asyncToGenerator(function* () {\n      if (_this32.#pdfDocument) {\n        yield _this32.#destroyScripting();\n      }\n      _this32.#pdfDocument = pdfDocument;\n      if (!pdfDocument) {\n        return;\n      }\n      const [objects, calculationOrder, docActions] = yield Promise.all([pdfDocument.getFieldObjects(), pdfDocument.getCalculationOrderIds(), pdfDocument.getJSActions()]);\n      if (!objects && !docActions) {\n        yield _this32.#destroyScripting();\n        return;\n      }\n      if (pdfDocument !== _this32.#pdfDocument) {\n        return;\n      }\n      try {\n        _this32.#scripting = _this32.#initScripting();\n      } catch (error) {\n        console.error(`setDocument: \"${error.message}\".`);\n        yield _this32.#destroyScripting();\n        return;\n      }\n      const eventBus = _this32.#eventBus;\n      _this32.#eventAbortController = new AbortController();\n      const {\n        signal\n      } = _this32.#eventAbortController;\n      eventBus._on(\"updatefromsandbox\", event => {\n        if (event?.source === window) {\n          _this32.#updateFromSandbox(event.detail);\n        }\n      }, {\n        signal\n      });\n      eventBus._on(\"dispatcheventinsandbox\", event => {\n        _this32.#scripting?.dispatchEventInSandbox(event.detail);\n      }, {\n        signal\n      });\n      eventBus._on(\"pagechanging\", ({\n        pageNumber,\n        previous\n      }) => {\n        if (pageNumber === previous) {\n          return;\n        }\n        _this32.#dispatchPageClose(previous);\n        _this32.#dispatchPageOpen(pageNumber);\n      }, {\n        signal\n      });\n      eventBus._on(\"pagerendered\", ({\n        pageNumber\n      }) => {\n        if (!_this32._pageOpenPending.has(pageNumber)) {\n          return;\n        }\n        if (pageNumber !== _this32.#pdfViewer.currentPageNumber) {\n          return;\n        }\n        _this32.#dispatchPageOpen(pageNumber);\n      }, {\n        signal\n      });\n      eventBus._on(\"pagesdestroy\", /*#__PURE__*/_asyncToGenerator(function* () {\n        yield _this32.#dispatchPageClose(_this32.#pdfViewer.currentPageNumber);\n        yield _this32.#scripting?.dispatchEventInSandbox({\n          id: \"doc\",\n          name: \"WillClose\"\n        });\n        _this32.#closeCapability?.resolve();\n      }), {\n        signal\n      });\n      try {\n        const docProperties = yield _this32.#docProperties(pdfDocument);\n        if (pdfDocument !== _this32.#pdfDocument) {\n          return;\n        }\n        yield _this32.#scripting.createSandbox({\n          objects,\n          calculationOrder,\n          appInfo: {\n            platform: navigator.platform,\n            language: navigator.language\n          },\n          docInfo: {\n            ...docProperties,\n            actions: docActions\n          }\n        });\n        eventBus.dispatch(\"sandboxcreated\", {\n          source: _this32\n        });\n      } catch (error) {\n        console.error(`setDocument: \"${error.message}\".`);\n        yield _this32.#destroyScripting();\n        return;\n      }\n      yield _this32.#scripting?.dispatchEventInSandbox({\n        id: \"doc\",\n        name: \"Open\"\n      });\n      yield _this32.#dispatchPageOpen(_this32.#pdfViewer.currentPageNumber, true);\n      Promise.resolve().then(() => {\n        if (pdfDocument === _this32.#pdfDocument) {\n          _this32.#ready = true;\n        }\n      });\n    })();\n  }\n  dispatchWillSave() {\n    var _this33 = this;\n    return _asyncToGenerator(function* () {\n      return _this33.#scripting?.dispatchEventInSandbox({\n        id: \"doc\",\n        name: \"WillSave\"\n      });\n    })();\n  }\n  dispatchDidSave() {\n    var _this34 = this;\n    return _asyncToGenerator(function* () {\n      return _this34.#scripting?.dispatchEventInSandbox({\n        id: \"doc\",\n        name: \"DidSave\"\n      });\n    })();\n  }\n  dispatchWillPrint() {\n    var _this35 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this35.#scripting) {\n        return;\n      }\n      yield _this35.#willPrintCapability?.promise;\n      _this35.#willPrintCapability = Promise.withResolvers();\n      try {\n        yield _this35.#scripting.dispatchEventInSandbox({\n          id: \"doc\",\n          name: \"WillPrint\"\n        });\n      } catch (ex) {\n        _this35.#willPrintCapability.resolve();\n        _this35.#willPrintCapability = null;\n        throw ex;\n      }\n      yield _this35.#willPrintCapability.promise;\n    })();\n  }\n  dispatchDidPrint() {\n    var _this36 = this;\n    return _asyncToGenerator(function* () {\n      return _this36.#scripting?.dispatchEventInSandbox({\n        id: \"doc\",\n        name: \"DidPrint\"\n      });\n    })();\n  }\n  get destroyPromise() {\n    return this.#destroyCapability?.promise || null;\n  }\n  get ready() {\n    return this.#ready;\n  }\n  get _pageOpenPending() {\n    return shadow(this, \"_pageOpenPending\", new Set());\n  }\n  get _visitedPages() {\n    return shadow(this, \"_visitedPages\", new Map());\n  }\n  #updateFromSandbox(detail) {\n    var _this37 = this;\n    return _asyncToGenerator(function* () {\n      const pdfViewer = _this37.#pdfViewer;\n      const isInPresentationMode = pdfViewer.isInPresentationMode || pdfViewer.isChangingPresentationMode;\n      const {\n        id,\n        siblings,\n        command,\n        value\n      } = detail;\n      if (!id) {\n        switch (command) {\n          case \"clear\":\n            console.clear();\n            break;\n          case \"error\":\n            console.error(value);\n            break;\n          case \"layout\":\n            if (!isInPresentationMode) {\n              const modes = apiPageLayoutToViewerModes(value);\n              pdfViewer.spreadMode = modes.spreadMode;\n            }\n            break;\n          case \"page-num\":\n            pdfViewer.currentPageNumber = value + 1;\n            break;\n          case \"print\":\n            yield pdfViewer.pagesPromise;\n            _this37.#eventBus.dispatch(\"print\", {\n              source: _this37\n            });\n            break;\n          case \"println\":\n            console.log(value);\n            break;\n          case \"zoom\":\n            if (!isInPresentationMode) {\n              pdfViewer.currentScaleValue = value;\n            }\n            break;\n          case \"SaveAs\":\n            _this37.#eventBus.dispatch(\"download\", {\n              source: _this37\n            });\n            break;\n          case \"FirstPage\":\n            pdfViewer.currentPageNumber = 1;\n            break;\n          case \"LastPage\":\n            pdfViewer.currentPageNumber = pdfViewer.pagesCount;\n            break;\n          case \"NextPage\":\n            pdfViewer.nextPage();\n            break;\n          case \"PrevPage\":\n            pdfViewer.previousPage();\n            break;\n          case \"ZoomViewIn\":\n            if (!isInPresentationMode) {\n              pdfViewer.increaseScale();\n            }\n            break;\n          case \"ZoomViewOut\":\n            if (!isInPresentationMode) {\n              pdfViewer.decreaseScale();\n            }\n            break;\n          case \"WillPrintFinished\":\n            _this37.#willPrintCapability?.resolve();\n            _this37.#willPrintCapability = null;\n            break;\n        }\n        return;\n      }\n      if (isInPresentationMode && detail.focus) {\n        return;\n      }\n      delete detail.id;\n      delete detail.siblings;\n      const ids = siblings ? [id, ...siblings] : [id];\n      for (const elementId of ids) {\n        const element = document.querySelector(`[data-element-id=\"${elementId}\"]`);\n        if (element) {\n          element.dispatchEvent(new CustomEvent(\"updatefromsandbox\", {\n            detail\n          }));\n        } else {\n          _this37.#pdfDocument?.annotationStorage.setValue(elementId, detail);\n        }\n      }\n    })();\n  }\n  #dispatchPageOpen(pageNumber, initialize = false) {\n    var _this38 = this;\n    return _asyncToGenerator(function* () {\n      const pdfDocument = _this38.#pdfDocument,\n        visitedPages = _this38._visitedPages;\n      if (initialize) {\n        _this38.#closeCapability = Promise.withResolvers();\n      }\n      if (!_this38.#closeCapability) {\n        return;\n      }\n      const pageView = _this38.#pdfViewer.getPageView(pageNumber - 1);\n      if (pageView?.renderingState !== RenderingStates.FINISHED) {\n        _this38._pageOpenPending.add(pageNumber);\n        return;\n      }\n      _this38._pageOpenPending.delete(pageNumber);\n      const actionsPromise = _asyncToGenerator(function* () {\n        const actions = yield !visitedPages.has(pageNumber) ? pageView.pdfPage?.getJSActions() : null;\n        if (pdfDocument !== _this38.#pdfDocument) {\n          return;\n        }\n        yield _this38.#scripting?.dispatchEventInSandbox({\n          id: \"page\",\n          name: \"PageOpen\",\n          pageNumber,\n          actions\n        });\n      })();\n      visitedPages.set(pageNumber, actionsPromise);\n    })();\n  }\n  #dispatchPageClose(pageNumber) {\n    var _this39 = this;\n    return _asyncToGenerator(function* () {\n      const pdfDocument = _this39.#pdfDocument,\n        visitedPages = _this39._visitedPages;\n      if (!_this39.#closeCapability) {\n        return;\n      }\n      if (_this39._pageOpenPending.has(pageNumber)) {\n        return;\n      }\n      const actionsPromise = visitedPages.get(pageNumber);\n      if (!actionsPromise) {\n        return;\n      }\n      visitedPages.set(pageNumber, null);\n      yield actionsPromise;\n      if (pdfDocument !== _this39.#pdfDocument) {\n        return;\n      }\n      yield _this39.#scripting?.dispatchEventInSandbox({\n        id: \"page\",\n        name: \"PageClose\",\n        pageNumber\n      });\n    })();\n  }\n  #initScripting() {\n    this.#destroyCapability = Promise.withResolvers();\n    if (this.#scripting) {\n      throw new Error(\"#initScripting: Scripting already exists.\");\n    }\n    return this.#externalServices.createScripting();\n  }\n  #destroyScripting() {\n    var _this40 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this40.#scripting) {\n        _this40.#pdfDocument = null;\n        _this40.#destroyCapability?.resolve();\n        return;\n      }\n      if (_this40.#closeCapability) {\n        yield Promise.race([_this40.#closeCapability.promise, new Promise(resolve => {\n          setTimeout(resolve, 1000);\n        })]).catch(() => {});\n        _this40.#closeCapability = null;\n      }\n      _this40.#pdfDocument = null;\n      try {\n        yield _this40.#scripting.destroySandbox();\n      } catch {}\n      _this40.#willPrintCapability?.reject(new Error(\"Scripting destroyed.\"));\n      _this40.#willPrintCapability = null;\n      _this40.#eventAbortController?.abort();\n      _this40.#eventAbortController = null;\n      _this40._pageOpenPending.clear();\n      _this40._visitedPages.clear();\n      _this40.#scripting = null;\n      _this40.#ready = false;\n      _this40.#destroyCapability?.resolve();\n    })();\n  }\n}\n; // ./web/pdf_scripting_manager.component.js\n\nclass PDFScriptingManagerComponents extends PDFScriptingManager {\n  constructor(options) {\n    if (!options.externalServices) {\n      window.addEventListener(\"updatefromsandbox\", event => {\n        options.eventBus.dispatch(\"updatefromsandbox\", {\n          source: window,\n          detail: event.detail\n        });\n      });\n    }\n    options.externalServices ||= {\n      createScripting: () => new GenericScripting(options.sandboxBundleSrc)\n    };\n    options.docProperties ||= pdfDocument => docProperties(pdfDocument);\n    super(options);\n  }\n}\n; // ./web/pdf_rendering_queue.js\n\nconst CLEANUP_TIMEOUT = 30000;\nclass PDFRenderingQueue {\n  constructor() {\n    this.pdfViewer = null;\n    this.pdfThumbnailViewer = null;\n    this.onIdle = null;\n    this.highestPriorityPage = null;\n    this.idleTimeout = null;\n    this.printing = false;\n    this.isThumbnailViewEnabled = false;\n    Object.defineProperty(this, \"hasViewer\", {\n      value: () => !!this.pdfViewer\n    });\n  }\n  setViewer(pdfViewer) {\n    this.pdfViewer = pdfViewer;\n  }\n  setThumbnailViewer(pdfThumbnailViewer) {\n    this.pdfThumbnailViewer = pdfThumbnailViewer;\n  }\n  isHighestPriority(view) {\n    return this.highestPriorityPage === view.renderingId;\n  }\n  renderHighestPriority(currentlyVisiblePages) {\n    if (this.idleTimeout) {\n      clearTimeout(this.idleTimeout);\n      this.idleTimeout = null;\n    }\n    if (this.pdfViewer.forceRendering(currentlyVisiblePages)) {\n      return;\n    }\n    if (this.isThumbnailViewEnabled && this.pdfThumbnailViewer?.forceRendering()) {\n      return;\n    }\n    if (this.printing) {\n      return;\n    }\n    if (this.onIdle) {\n      this.idleTimeout = setTimeout(this.onIdle.bind(this), CLEANUP_TIMEOUT);\n    }\n  }\n  getHighestPriority(visible, views, scrolledDown, preRenderExtra = false) {\n    const visibleViews = visible.views,\n      numVisible = visibleViews.length;\n    if (numVisible === 0) {\n      return null;\n    }\n    for (let i = 0; i < numVisible; i++) {\n      const view = visibleViews[i].view;\n      if (!this.isViewFinished(view)) {\n        return view;\n      }\n    }\n    const firstId = visible.first.id,\n      lastId = visible.last.id;\n    if (lastId - firstId + 1 > numVisible) {\n      const visibleIds = visible.ids;\n      for (let i = 1, ii = lastId - firstId; i < ii; i++) {\n        const holeId = scrolledDown ? firstId + i : lastId - i;\n        if (visibleIds.has(holeId)) {\n          continue;\n        }\n        const holeView = views[holeId - 1];\n        if (!this.isViewFinished(holeView)) {\n          return holeView;\n        }\n      }\n    }\n    let preRenderIndex = scrolledDown ? lastId : firstId - 2;\n    let preRenderView = views[preRenderIndex];\n    if (preRenderView && !this.isViewFinished(preRenderView)) {\n      return preRenderView;\n    }\n    if (preRenderExtra) {\n      preRenderIndex += scrolledDown ? 1 : -1;\n      preRenderView = views[preRenderIndex];\n      if (preRenderView && !this.isViewFinished(preRenderView)) {\n        return preRenderView;\n      }\n    }\n    return null;\n  }\n  isViewFinished(view) {\n    return view.renderingState === RenderingStates.FINISHED;\n  }\n  renderView(view) {\n    switch (view.renderingState) {\n      case RenderingStates.FINISHED:\n        return false;\n      case RenderingStates.PAUSED:\n        this.highestPriorityPage = view.renderingId;\n        view.resume();\n        break;\n      case RenderingStates.RUNNING:\n        this.highestPriorityPage = view.renderingId;\n        break;\n      case RenderingStates.INITIAL:\n        this.highestPriorityPage = view.renderingId;\n        view.draw().finally(() => {\n          this.renderHighestPriority();\n        }).catch(reason => {\n          if (reason instanceof RenderingCancelledException) {\n            return;\n          }\n          console.error(`renderView: \"${reason}\"`);\n        });\n        break;\n    }\n    return true;\n  }\n}\n; // ./web/pdf_viewer.js\n\nconst DEFAULT_CACHE_SIZE = 10;\nconst PagesCountLimit = {\n  FORCE_SCROLL_MODE_PAGE: 10000,\n  FORCE_LAZY_PAGE_INIT: 5000,\n  PAUSE_EAGER_PAGE_INIT: 250\n};\nfunction isValidAnnotationEditorMode(mode) {\n  return Object.values(AnnotationEditorType).includes(mode) && mode !== AnnotationEditorType.DISABLE;\n}\nclass PDFPageViewBuffer {\n  #buf = new Set();\n  #size = 0;\n  constructor(size) {\n    this.#size = size;\n  }\n  push(view) {\n    const buf = this.#buf;\n    if (buf.has(view)) {\n      buf.delete(view);\n    }\n    buf.add(view);\n    if (buf.size > this.#size) {\n      this.#destroyFirstView();\n    }\n  }\n  resize(newSize, idsToKeep = null) {\n    this.#size = newSize;\n    const buf = this.#buf;\n    if (idsToKeep) {\n      const ii = buf.size;\n      let i = 1;\n      for (const view of buf) {\n        if (idsToKeep.has(view.id)) {\n          buf.delete(view);\n          buf.add(view);\n        }\n        if (++i > ii) {\n          break;\n        }\n      }\n    }\n    while (buf.size > this.#size) {\n      this.#destroyFirstView();\n    }\n  }\n  has(view) {\n    return this.#buf.has(view);\n  }\n  [Symbol.iterator]() {\n    return this.#buf.keys();\n  }\n  #destroyFirstView() {\n    const firstView = this.#buf.keys().next().value;\n    firstView?.destroy();\n    this.#buf.delete(firstView);\n  }\n}\nclass PDFViewer {\n  #buffer = null;\n  #altTextManager = null;\n  #annotationEditorHighlightColors = null;\n  #annotationEditorMode = AnnotationEditorType.NONE;\n  #annotationEditorUIManager = null;\n  #annotationMode = AnnotationMode.ENABLE_FORMS;\n  #containerTopLeft = null;\n  #enableHWA = false;\n  #enableHighlightFloatingButton = false;\n  #enablePermissions = false;\n  #enableUpdatedAddImage = false;\n  #enableNewAltTextWhenAddingImage = false;\n  #eventAbortController = null;\n  #mlManager = null;\n  #switchAnnotationEditorModeAC = null;\n  #switchAnnotationEditorModeTimeoutId = null;\n  #getAllTextInProgress = false;\n  #hiddenCopyElement = null;\n  #interruptCopyCondition = false;\n  #previousContainerHeight = 0;\n  #resizeObserver = new ResizeObserver(this.#resizeObserverCallback.bind(this));\n  #scrollModePageState = null;\n  #scaleTimeoutId = null;\n  #textLayerMode = TextLayerMode.ENABLE;\n  constructor(options) {\n    const viewerVersion = \"4.8.69\";\n    if (version !== viewerVersion) {\n      throw new Error(`The API version \"${version}\" does not match the Viewer version \"${viewerVersion}\".`);\n    }\n    this.container = options.container;\n    this.viewer = options.viewer || options.container.firstElementChild;\n    if (this.container?.tagName !== \"DIV\" || this.viewer?.tagName !== \"DIV\") {\n      throw new Error(\"Invalid `container` and/or `viewer` option.\");\n    }\n    if (this.container.offsetParent && getComputedStyle(this.container).position !== \"absolute\") {\n      throw new Error(\"The `container` must be absolutely positioned.\");\n    }\n    this.#resizeObserver.observe(this.container);\n    this.eventBus = options.eventBus;\n    this.linkService = options.linkService || new SimpleLinkService();\n    this.downloadManager = options.downloadManager || null;\n    this.findController = options.findController || null;\n    this.#altTextManager = options.altTextManager || null;\n    if (this.findController) {\n      this.findController.onIsPageVisible = pageNumber => this._getVisiblePages().ids.has(pageNumber);\n    }\n    this._scriptingManager = options.scriptingManager || null;\n    this.#textLayerMode = options.textLayerMode ?? TextLayerMode.ENABLE;\n    this.#annotationMode = options.annotationMode ?? AnnotationMode.ENABLE_FORMS;\n    this.#annotationEditorMode = options.annotationEditorMode ?? AnnotationEditorType.NONE;\n    this.#annotationEditorHighlightColors = options.annotationEditorHighlightColors || null;\n    this.#enableHighlightFloatingButton = options.enableHighlightFloatingButton === true;\n    this.#enableUpdatedAddImage = options.enableUpdatedAddImage === true;\n    this.#enableNewAltTextWhenAddingImage = options.enableNewAltTextWhenAddingImage === true;\n    this.imageResourcesPath = options.imageResourcesPath || \"\";\n    this.enablePrintAutoRotate = options.enablePrintAutoRotate || false;\n    this.removePageBorders = options.removePageBorders || false;\n    this.maxCanvasPixels = options.maxCanvasPixels;\n    this.l10n = options.l10n;\n    this.l10n ||= new genericl10n_GenericL10n();\n    this.#enablePermissions = options.enablePermissions || false;\n    this.pageColors = options.pageColors || null;\n    this.#mlManager = options.mlManager || null;\n    this.#enableHWA = options.enableHWA || false;\n    this.defaultRenderingQueue = !options.renderingQueue;\n    if (this.defaultRenderingQueue) {\n      this.renderingQueue = new PDFRenderingQueue();\n      this.renderingQueue.setViewer(this);\n    } else {\n      this.renderingQueue = options.renderingQueue;\n    }\n    const {\n      abortSignal\n    } = options;\n    abortSignal?.addEventListener(\"abort\", () => {\n      this.#resizeObserver.disconnect();\n      this.#resizeObserver = null;\n    }, {\n      once: true\n    });\n    this.scroll = watchScroll(this.container, this._scrollUpdate.bind(this), abortSignal);\n    this.presentationModeState = PresentationModeState.UNKNOWN;\n    this._resetView();\n    if (this.removePageBorders) {\n      this.viewer.classList.add(\"removePageBorders\");\n    }\n    this.#updateContainerHeightCss();\n    this.eventBus._on(\"thumbnailrendered\", ({\n      pageNumber,\n      pdfPage\n    }) => {\n      const pageView = this._pages[pageNumber - 1];\n      if (!this.#buffer.has(pageView)) {\n        pdfPage?.cleanup();\n      }\n    });\n    if (!options.l10n) {\n      this.l10n.translate(this.container);\n    }\n  }\n  get pagesCount() {\n    return this._pages.length;\n  }\n  getPageView(index) {\n    return this._pages[index];\n  }\n  getCachedPageViews() {\n    return new Set(this.#buffer);\n  }\n  get pageViewsReady() {\n    return this._pages.every(pageView => pageView?.pdfPage);\n  }\n  get renderForms() {\n    return this.#annotationMode === AnnotationMode.ENABLE_FORMS;\n  }\n  get enableScripting() {\n    return !!this._scriptingManager;\n  }\n  get currentPageNumber() {\n    return this._currentPageNumber;\n  }\n  set currentPageNumber(val) {\n    if (!Number.isInteger(val)) {\n      throw new Error(\"Invalid page number.\");\n    }\n    if (!this.pdfDocument) {\n      return;\n    }\n    if (!this._setCurrentPageNumber(val, true)) {\n      console.error(`currentPageNumber: \"${val}\" is not a valid page.`);\n    }\n  }\n  _setCurrentPageNumber(val, resetCurrentPageView = false) {\n    if (this._currentPageNumber === val) {\n      if (resetCurrentPageView) {\n        this.#resetCurrentPageView();\n      }\n      return true;\n    }\n    if (!(0 < val && val <= this.pagesCount)) {\n      return false;\n    }\n    const previous = this._currentPageNumber;\n    this._currentPageNumber = val;\n    this.eventBus.dispatch(\"pagechanging\", {\n      source: this,\n      pageNumber: val,\n      pageLabel: this._pageLabels?.[val - 1] ?? null,\n      previous\n    });\n    if (resetCurrentPageView) {\n      this.#resetCurrentPageView();\n    }\n    return true;\n  }\n  get currentPageLabel() {\n    return this._pageLabels?.[this._currentPageNumber - 1] ?? null;\n  }\n  set currentPageLabel(val) {\n    if (!this.pdfDocument) {\n      return;\n    }\n    let page = val | 0;\n    if (this._pageLabels) {\n      const i = this._pageLabels.indexOf(val);\n      if (i >= 0) {\n        page = i + 1;\n      }\n    }\n    if (!this._setCurrentPageNumber(page, true)) {\n      console.error(`currentPageLabel: \"${val}\" is not a valid page.`);\n    }\n  }\n  get currentScale() {\n    return this._currentScale !== UNKNOWN_SCALE ? this._currentScale : DEFAULT_SCALE;\n  }\n  set currentScale(val) {\n    if (isNaN(val)) {\n      throw new Error(\"Invalid numeric scale.\");\n    }\n    if (!this.pdfDocument) {\n      return;\n    }\n    this.#setScale(val, {\n      noScroll: false\n    });\n  }\n  get currentScaleValue() {\n    return this._currentScaleValue;\n  }\n  set currentScaleValue(val) {\n    if (!this.pdfDocument) {\n      return;\n    }\n    this.#setScale(val, {\n      noScroll: false\n    });\n  }\n  get pagesRotation() {\n    return this._pagesRotation;\n  }\n  set pagesRotation(rotation) {\n    if (!isValidRotation(rotation)) {\n      throw new Error(\"Invalid pages rotation angle.\");\n    }\n    if (!this.pdfDocument) {\n      return;\n    }\n    rotation %= 360;\n    if (rotation < 0) {\n      rotation += 360;\n    }\n    if (this._pagesRotation === rotation) {\n      return;\n    }\n    this._pagesRotation = rotation;\n    const pageNumber = this._currentPageNumber;\n    this.refresh(true, {\n      rotation\n    });\n    if (this._currentScaleValue) {\n      this.#setScale(this._currentScaleValue, {\n        noScroll: true\n      });\n    }\n    this.eventBus.dispatch(\"rotationchanging\", {\n      source: this,\n      pagesRotation: rotation,\n      pageNumber\n    });\n    if (this.defaultRenderingQueue) {\n      this.update();\n    }\n  }\n  get firstPagePromise() {\n    return this.pdfDocument ? this._firstPageCapability.promise : null;\n  }\n  get onePageRendered() {\n    return this.pdfDocument ? this._onePageRenderedCapability.promise : null;\n  }\n  get pagesPromise() {\n    return this.pdfDocument ? this._pagesCapability.promise : null;\n  }\n  get _layerProperties() {\n    const self = this;\n    return shadow(this, \"_layerProperties\", {\n      get annotationEditorUIManager() {\n        return self.#annotationEditorUIManager;\n      },\n      get annotationStorage() {\n        return self.pdfDocument?.annotationStorage;\n      },\n      get downloadManager() {\n        return self.downloadManager;\n      },\n      get enableScripting() {\n        return !!self._scriptingManager;\n      },\n      get fieldObjectsPromise() {\n        return self.pdfDocument?.getFieldObjects();\n      },\n      get findController() {\n        return self.findController;\n      },\n      get hasJSActionsPromise() {\n        return self.pdfDocument?.hasJSActions();\n      },\n      get linkService() {\n        return self.linkService;\n      }\n    });\n  }\n  #initializePermissions(permissions) {\n    const params = {\n      annotationEditorMode: this.#annotationEditorMode,\n      annotationMode: this.#annotationMode,\n      textLayerMode: this.#textLayerMode\n    };\n    if (!permissions) {\n      return params;\n    }\n    if (!permissions.includes(PermissionFlag.COPY) && this.#textLayerMode === TextLayerMode.ENABLE) {\n      params.textLayerMode = TextLayerMode.ENABLE_PERMISSIONS;\n    }\n    if (!permissions.includes(PermissionFlag.MODIFY_CONTENTS)) {\n      params.annotationEditorMode = AnnotationEditorType.DISABLE;\n    }\n    if (!permissions.includes(PermissionFlag.MODIFY_ANNOTATIONS) && !permissions.includes(PermissionFlag.FILL_INTERACTIVE_FORMS) && this.#annotationMode === AnnotationMode.ENABLE_FORMS) {\n      params.annotationMode = AnnotationMode.ENABLE;\n    }\n    return params;\n  }\n  #onePageRenderedOrForceFetch(signal) {\n    var _this41 = this;\n    return _asyncToGenerator(function* () {\n      if (document.visibilityState === \"hidden\" || !_this41.container.offsetParent || _this41._getVisiblePages().views.length === 0) {\n        return;\n      }\n      const hiddenCapability = Promise.withResolvers(),\n        ac = new AbortController();\n      document.addEventListener(\"visibilitychange\", () => {\n        if (document.visibilityState === \"hidden\") {\n          hiddenCapability.resolve();\n        }\n      }, {\n        signal: typeof AbortSignal.any === \"function\" ? AbortSignal.any([signal, ac.signal]) : signal\n      });\n      yield Promise.race([_this41._onePageRenderedCapability.promise, hiddenCapability.promise]);\n      ac.abort();\n    })();\n  }\n  getAllText() {\n    var _this42 = this;\n    return _asyncToGenerator(function* () {\n      const texts = [];\n      const buffer = [];\n      for (let pageNum = 1, pagesCount = _this42.pdfDocument.numPages; pageNum <= pagesCount; ++pageNum) {\n        if (_this42.#interruptCopyCondition) {\n          return null;\n        }\n        buffer.length = 0;\n        const page = yield _this42.pdfDocument.getPage(pageNum);\n        const {\n          items\n        } = yield page.getTextContent();\n        for (const item of items) {\n          if (item.str) {\n            buffer.push(item.str);\n          }\n          if (item.hasEOL) {\n            buffer.push(\"\\n\");\n          }\n        }\n        texts.push(removeNullCharacters(buffer.join(\"\")));\n      }\n      return texts.join(\"\\n\");\n    })();\n  }\n  #copyCallback(textLayerMode, event) {\n    const selection = document.getSelection();\n    const {\n      focusNode,\n      anchorNode\n    } = selection;\n    if (anchorNode && focusNode && selection.containsNode(this.#hiddenCopyElement)) {\n      if (this.#getAllTextInProgress || textLayerMode === TextLayerMode.ENABLE_PERMISSIONS) {\n        event.preventDefault();\n        event.stopPropagation();\n        return;\n      }\n      this.#getAllTextInProgress = true;\n      const {\n        classList\n      } = this.viewer;\n      classList.add(\"copyAll\");\n      const ac = new AbortController();\n      window.addEventListener(\"keydown\", ev => this.#interruptCopyCondition = ev.key === \"Escape\", {\n        signal: ac.signal\n      });\n      this.getAllText().then( /*#__PURE__*/function () {\n        var _ref4 = _asyncToGenerator(function* (text) {\n          if (text !== null) {\n            yield navigator.clipboard.writeText(text);\n          }\n        });\n        return function (_x3) {\n          return _ref4.apply(this, arguments);\n        };\n      }()).catch(reason => {\n        console.warn(`Something goes wrong when extracting the text: ${reason.message}`);\n      }).finally(() => {\n        this.#getAllTextInProgress = false;\n        this.#interruptCopyCondition = false;\n        ac.abort();\n        classList.remove(\"copyAll\");\n      });\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  }\n  setDocument(pdfDocument) {\n    var _this43 = this;\n    if (this.pdfDocument) {\n      this.eventBus.dispatch(\"pagesdestroy\", {\n        source: this\n      });\n      this._cancelRendering();\n      this._resetView();\n      this.findController?.setDocument(null);\n      this._scriptingManager?.setDocument(null);\n      this.#annotationEditorUIManager?.destroy();\n      this.#annotationEditorUIManager = null;\n    }\n    this.pdfDocument = pdfDocument;\n    if (!pdfDocument) {\n      return;\n    }\n    const pagesCount = pdfDocument.numPages;\n    const firstPagePromise = pdfDocument.getPage(1);\n    const optionalContentConfigPromise = pdfDocument.getOptionalContentConfig({\n      intent: \"display\"\n    });\n    const permissionsPromise = this.#enablePermissions ? pdfDocument.getPermissions() : Promise.resolve();\n    const {\n      eventBus,\n      pageColors,\n      viewer\n    } = this;\n    this.#eventAbortController = new AbortController();\n    const {\n      signal\n    } = this.#eventAbortController;\n    if (pagesCount > PagesCountLimit.FORCE_SCROLL_MODE_PAGE) {\n      console.warn(\"Forcing PAGE-scrolling for performance reasons, given the length of the document.\");\n      const mode = this._scrollMode = ScrollMode.PAGE;\n      eventBus.dispatch(\"scrollmodechanged\", {\n        source: this,\n        mode\n      });\n    }\n    this._pagesCapability.promise.then(() => {\n      eventBus.dispatch(\"pagesloaded\", {\n        source: this,\n        pagesCount\n      });\n    }, () => {});\n    const onBeforeDraw = evt => {\n      const pageView = this._pages[evt.pageNumber - 1];\n      if (!pageView) {\n        return;\n      }\n      this.#buffer.push(pageView);\n    };\n    eventBus._on(\"pagerender\", onBeforeDraw, {\n      signal\n    });\n    const onAfterDraw = evt => {\n      if (evt.cssTransform) {\n        return;\n      }\n      this._onePageRenderedCapability.resolve({\n        timestamp: evt.timestamp\n      });\n      eventBus._off(\"pagerendered\", onAfterDraw);\n    };\n    eventBus._on(\"pagerendered\", onAfterDraw, {\n      signal\n    });\n    Promise.all([firstPagePromise, permissionsPromise]).then(([firstPdfPage, permissions]) => {\n      if (pdfDocument !== this.pdfDocument) {\n        return;\n      }\n      this._firstPageCapability.resolve(firstPdfPage);\n      this._optionalContentConfigPromise = optionalContentConfigPromise;\n      const {\n        annotationEditorMode,\n        annotationMode,\n        textLayerMode\n      } = this.#initializePermissions(permissions);\n      if (textLayerMode !== TextLayerMode.DISABLE) {\n        const element = this.#hiddenCopyElement = document.createElement(\"div\");\n        element.id = \"hiddenCopyElement\";\n        viewer.before(element);\n      }\n      if (typeof AbortSignal.any === \"function\" && annotationEditorMode !== AnnotationEditorType.DISABLE) {\n        const mode = annotationEditorMode;\n        if (pdfDocument.isPureXfa) {\n          console.warn(\"Warning: XFA-editing is not implemented.\");\n        } else if (isValidAnnotationEditorMode(mode)) {\n          this.#annotationEditorUIManager = new AnnotationEditorUIManager(this.container, viewer, this.#altTextManager, eventBus, pdfDocument, pageColors, this.#annotationEditorHighlightColors, this.#enableHighlightFloatingButton, this.#enableUpdatedAddImage, this.#enableNewAltTextWhenAddingImage, this.#mlManager);\n          eventBus.dispatch(\"annotationeditoruimanager\", {\n            source: this,\n            uiManager: this.#annotationEditorUIManager\n          });\n          if (mode !== AnnotationEditorType.NONE) {\n            if (mode === AnnotationEditorType.STAMP) {\n              this.#mlManager?.loadModel(\"altText\");\n            }\n            this.#annotationEditorUIManager.updateMode(mode);\n          }\n        } else {\n          console.error(`Invalid AnnotationEditor mode: ${mode}`);\n        }\n      }\n      const viewerElement = this._scrollMode === ScrollMode.PAGE ? null : viewer;\n      const scale = this.currentScale;\n      const viewport = firstPdfPage.getViewport({\n        scale: scale * PixelsPerInch.PDF_TO_CSS_UNITS\n      });\n      viewer.style.setProperty(\"--scale-factor\", viewport.scale);\n      if (pageColors?.background) {\n        viewer.style.setProperty(\"--page-bg-color\", pageColors.background);\n      }\n      if (pageColors?.foreground === \"CanvasText\" || pageColors?.background === \"Canvas\") {\n        viewer.style.setProperty(\"--hcm-highlight-filter\", pdfDocument.filterFactory.addHighlightHCMFilter(\"highlight\", \"CanvasText\", \"Canvas\", \"HighlightText\", \"Highlight\"));\n        viewer.style.setProperty(\"--hcm-highlight-selected-filter\", pdfDocument.filterFactory.addHighlightHCMFilter(\"highlight_selected\", \"CanvasText\", \"Canvas\", \"HighlightText\", \"ButtonText\"));\n      }\n      for (let pageNum = 1; pageNum <= pagesCount; ++pageNum) {\n        const pageView = new PDFPageView({\n          container: viewerElement,\n          eventBus,\n          id: pageNum,\n          scale,\n          defaultViewport: viewport.clone(),\n          optionalContentConfigPromise,\n          renderingQueue: this.renderingQueue,\n          textLayerMode,\n          annotationMode,\n          imageResourcesPath: this.imageResourcesPath,\n          maxCanvasPixels: this.maxCanvasPixels,\n          pageColors,\n          l10n: this.l10n,\n          layerProperties: this._layerProperties,\n          enableHWA: this.#enableHWA\n        });\n        this._pages.push(pageView);\n      }\n      this._pages[0]?.setPdfPage(firstPdfPage);\n      if (this._scrollMode === ScrollMode.PAGE) {\n        this.#ensurePageViewVisible();\n      } else if (this._spreadMode !== SpreadMode.NONE) {\n        this._updateSpreadMode();\n      }\n      this.#onePageRenderedOrForceFetch(signal).then( /*#__PURE__*/_asyncToGenerator(function* () {\n        if (pdfDocument !== _this43.pdfDocument) {\n          return;\n        }\n        _this43.findController?.setDocument(pdfDocument);\n        _this43._scriptingManager?.setDocument(pdfDocument);\n        if (_this43.#hiddenCopyElement) {\n          document.addEventListener(\"copy\", _this43.#copyCallback.bind(_this43, textLayerMode), {\n            signal\n          });\n        }\n        if (_this43.#annotationEditorUIManager) {\n          eventBus.dispatch(\"annotationeditormodechanged\", {\n            source: _this43,\n            mode: _this43.#annotationEditorMode\n          });\n        }\n        if (pdfDocument.loadingParams.disableAutoFetch || pagesCount > PagesCountLimit.FORCE_LAZY_PAGE_INIT) {\n          _this43._pagesCapability.resolve();\n          return;\n        }\n        let getPagesLeft = pagesCount - 1;\n        if (getPagesLeft <= 0) {\n          _this43._pagesCapability.resolve();\n          return;\n        }\n        for (let pageNum = 2; pageNum <= pagesCount; ++pageNum) {\n          const promise = pdfDocument.getPage(pageNum).then(pdfPage => {\n            const pageView = _this43._pages[pageNum - 1];\n            if (!pageView.pdfPage) {\n              pageView.setPdfPage(pdfPage);\n            }\n            if (--getPagesLeft === 0) {\n              _this43._pagesCapability.resolve();\n            }\n          }, reason => {\n            console.error(`Unable to get page ${pageNum} to initialize viewer`, reason);\n            if (--getPagesLeft === 0) {\n              _this43._pagesCapability.resolve();\n            }\n          });\n          if (pageNum % PagesCountLimit.PAUSE_EAGER_PAGE_INIT === 0) {\n            yield promise;\n          }\n        }\n      }));\n      eventBus.dispatch(\"pagesinit\", {\n        source: this\n      });\n      pdfDocument.getMetadata().then(({\n        info\n      }) => {\n        if (pdfDocument !== this.pdfDocument) {\n          return;\n        }\n        if (info.Language) {\n          viewer.lang = info.Language;\n        }\n      });\n      if (this.defaultRenderingQueue) {\n        this.update();\n      }\n    }).catch(reason => {\n      console.error(\"Unable to initialize viewer\", reason);\n      this._pagesCapability.reject(reason);\n    });\n  }\n  setPageLabels(labels) {\n    if (!this.pdfDocument) {\n      return;\n    }\n    if (!labels) {\n      this._pageLabels = null;\n    } else if (!(Array.isArray(labels) && this.pdfDocument.numPages === labels.length)) {\n      this._pageLabels = null;\n      console.error(`setPageLabels: Invalid page labels.`);\n    } else {\n      this._pageLabels = labels;\n    }\n    for (let i = 0, ii = this._pages.length; i < ii; i++) {\n      this._pages[i].setPageLabel(this._pageLabels?.[i] ?? null);\n    }\n  }\n  _resetView() {\n    this._pages = [];\n    this._currentPageNumber = 1;\n    this._currentScale = UNKNOWN_SCALE;\n    this._currentScaleValue = null;\n    this._pageLabels = null;\n    this.#buffer = new PDFPageViewBuffer(DEFAULT_CACHE_SIZE);\n    this._location = null;\n    this._pagesRotation = 0;\n    this._optionalContentConfigPromise = null;\n    this._firstPageCapability = Promise.withResolvers();\n    this._onePageRenderedCapability = Promise.withResolvers();\n    this._pagesCapability = Promise.withResolvers();\n    this._scrollMode = ScrollMode.VERTICAL;\n    this._previousScrollMode = ScrollMode.UNKNOWN;\n    this._spreadMode = SpreadMode.NONE;\n    this.#scrollModePageState = {\n      previousPageNumber: 1,\n      scrollDown: true,\n      pages: []\n    };\n    this.#eventAbortController?.abort();\n    this.#eventAbortController = null;\n    this.viewer.textContent = \"\";\n    this._updateScrollMode();\n    this.viewer.removeAttribute(\"lang\");\n    this.#hiddenCopyElement?.remove();\n    this.#hiddenCopyElement = null;\n    this.#cleanupSwitchAnnotationEditorMode();\n  }\n  #ensurePageViewVisible() {\n    if (this._scrollMode !== ScrollMode.PAGE) {\n      throw new Error(\"#ensurePageViewVisible: Invalid scrollMode value.\");\n    }\n    const pageNumber = this._currentPageNumber,\n      state = this.#scrollModePageState,\n      viewer = this.viewer;\n    viewer.textContent = \"\";\n    state.pages.length = 0;\n    if (this._spreadMode === SpreadMode.NONE && !this.isInPresentationMode) {\n      const pageView = this._pages[pageNumber - 1];\n      viewer.append(pageView.div);\n      state.pages.push(pageView);\n    } else {\n      const pageIndexSet = new Set(),\n        parity = this._spreadMode - 1;\n      if (parity === -1) {\n        pageIndexSet.add(pageNumber - 1);\n      } else if (pageNumber % 2 !== parity) {\n        pageIndexSet.add(pageNumber - 1);\n        pageIndexSet.add(pageNumber);\n      } else {\n        pageIndexSet.add(pageNumber - 2);\n        pageIndexSet.add(pageNumber - 1);\n      }\n      const spread = document.createElement(\"div\");\n      spread.className = \"spread\";\n      if (this.isInPresentationMode) {\n        const dummyPage = document.createElement(\"div\");\n        dummyPage.className = \"dummyPage\";\n        spread.append(dummyPage);\n      }\n      for (const i of pageIndexSet) {\n        const pageView = this._pages[i];\n        if (!pageView) {\n          continue;\n        }\n        spread.append(pageView.div);\n        state.pages.push(pageView);\n      }\n      viewer.append(spread);\n    }\n    state.scrollDown = pageNumber >= state.previousPageNumber;\n    state.previousPageNumber = pageNumber;\n  }\n  _scrollUpdate() {\n    if (this.pagesCount === 0) {\n      return;\n    }\n    this.update();\n  }\n  #scrollIntoView(pageView, pageSpot = null) {\n    const {\n      div,\n      id\n    } = pageView;\n    if (this._currentPageNumber !== id) {\n      this._setCurrentPageNumber(id);\n    }\n    if (this._scrollMode === ScrollMode.PAGE) {\n      this.#ensurePageViewVisible();\n      this.update();\n    }\n    if (!pageSpot && !this.isInPresentationMode) {\n      const left = div.offsetLeft + div.clientLeft,\n        right = left + div.clientWidth;\n      const {\n        scrollLeft,\n        clientWidth\n      } = this.container;\n      if (this._scrollMode === ScrollMode.HORIZONTAL || left < scrollLeft || right > scrollLeft + clientWidth) {\n        pageSpot = {\n          left: 0,\n          top: 0\n        };\n      }\n    }\n    scrollIntoView(div, pageSpot);\n    if (!this._currentScaleValue && this._location) {\n      this._location = null;\n    }\n  }\n  #isSameScale(newScale) {\n    return newScale === this._currentScale || Math.abs(newScale - this._currentScale) < 1e-15;\n  }\n  #setScaleUpdatePages(newScale, newValue, {\n    noScroll = false,\n    preset = false,\n    drawingDelay = -1,\n    origin = null\n  }) {\n    this._currentScaleValue = newValue.toString();\n    if (this.#isSameScale(newScale)) {\n      if (preset) {\n        this.eventBus.dispatch(\"scalechanging\", {\n          source: this,\n          scale: newScale,\n          presetValue: newValue\n        });\n      }\n      return;\n    }\n    this.viewer.style.setProperty(\"--scale-factor\", newScale * PixelsPerInch.PDF_TO_CSS_UNITS);\n    const postponeDrawing = drawingDelay >= 0 && drawingDelay < 1000;\n    this.refresh(true, {\n      scale: newScale,\n      drawingDelay: postponeDrawing ? drawingDelay : -1\n    });\n    if (postponeDrawing) {\n      this.#scaleTimeoutId = setTimeout(() => {\n        this.#scaleTimeoutId = null;\n        this.refresh();\n      }, drawingDelay);\n    }\n    const previousScale = this._currentScale;\n    this._currentScale = newScale;\n    if (!noScroll) {\n      let page = this._currentPageNumber,\n        dest;\n      if (this._location && !(this.isInPresentationMode || this.isChangingPresentationMode)) {\n        page = this._location.pageNumber;\n        dest = [null, {\n          name: \"XYZ\"\n        }, this._location.left, this._location.top, null];\n      }\n      this.scrollPageIntoView({\n        pageNumber: page,\n        destArray: dest,\n        allowNegativeOffset: true\n      });\n      if (Array.isArray(origin)) {\n        const scaleDiff = newScale / previousScale - 1;\n        const [top, left] = this.containerTopLeft;\n        this.container.scrollLeft += (origin[0] - left) * scaleDiff;\n        this.container.scrollTop += (origin[1] - top) * scaleDiff;\n      }\n    }\n    this.eventBus.dispatch(\"scalechanging\", {\n      source: this,\n      scale: newScale,\n      presetValue: preset ? newValue : undefined\n    });\n    if (this.defaultRenderingQueue) {\n      this.update();\n    }\n  }\n  get #pageWidthScaleFactor() {\n    if (this._spreadMode !== SpreadMode.NONE && this._scrollMode !== ScrollMode.HORIZONTAL) {\n      return 2;\n    }\n    return 1;\n  }\n  #setScale(value, options) {\n    let scale = parseFloat(value);\n    if (scale > 0) {\n      options.preset = false;\n      this.#setScaleUpdatePages(scale, value, options);\n    } else {\n      const currentPage = this._pages[this._currentPageNumber - 1];\n      if (!currentPage) {\n        return;\n      }\n      let hPadding = SCROLLBAR_PADDING,\n        vPadding = VERTICAL_PADDING;\n      if (this.isInPresentationMode) {\n        hPadding = vPadding = 4;\n        if (this._spreadMode !== SpreadMode.NONE) {\n          hPadding *= 2;\n        }\n      } else if (this.removePageBorders) {\n        hPadding = vPadding = 0;\n      } else if (this._scrollMode === ScrollMode.HORIZONTAL) {\n        [hPadding, vPadding] = [vPadding, hPadding];\n      }\n      const pageWidthScale = (this.container.clientWidth - hPadding) / currentPage.width * currentPage.scale / this.#pageWidthScaleFactor;\n      const pageHeightScale = (this.container.clientHeight - vPadding) / currentPage.height * currentPage.scale;\n      switch (value) {\n        case \"page-actual\":\n          scale = 1;\n          break;\n        case \"page-width\":\n          scale = pageWidthScale;\n          break;\n        case \"page-height\":\n          scale = pageHeightScale;\n          break;\n        case \"page-fit\":\n          scale = Math.min(pageWidthScale, pageHeightScale);\n          break;\n        case \"auto\":\n          const horizontalScale = isPortraitOrientation(currentPage) ? pageWidthScale : Math.min(pageHeightScale, pageWidthScale);\n          scale = Math.min(MAX_AUTO_SCALE, horizontalScale);\n          break;\n        default:\n          console.error(`#setScale: \"${value}\" is an unknown zoom value.`);\n          return;\n      }\n      options.preset = true;\n      this.#setScaleUpdatePages(scale, value, options);\n    }\n  }\n  #resetCurrentPageView() {\n    const pageView = this._pages[this._currentPageNumber - 1];\n    if (this.isInPresentationMode) {\n      this.#setScale(this._currentScaleValue, {\n        noScroll: true\n      });\n    }\n    this.#scrollIntoView(pageView);\n  }\n  pageLabelToPageNumber(label) {\n    if (!this._pageLabels) {\n      return null;\n    }\n    const i = this._pageLabels.indexOf(label);\n    if (i < 0) {\n      return null;\n    }\n    return i + 1;\n  }\n  scrollPageIntoView({\n    pageNumber,\n    destArray = null,\n    allowNegativeOffset = false,\n    ignoreDestinationZoom = false\n  }) {\n    if (!this.pdfDocument) {\n      return;\n    }\n    const pageView = Number.isInteger(pageNumber) && this._pages[pageNumber - 1];\n    if (!pageView) {\n      console.error(`scrollPageIntoView: \"${pageNumber}\" is not a valid pageNumber parameter.`);\n      return;\n    }\n    if (this.isInPresentationMode || !destArray) {\n      this._setCurrentPageNumber(pageNumber, true);\n      return;\n    }\n    let x = 0,\n      y = 0;\n    let width = 0,\n      height = 0,\n      widthScale,\n      heightScale;\n    const changeOrientation = pageView.rotation % 180 !== 0;\n    const pageWidth = (changeOrientation ? pageView.height : pageView.width) / pageView.scale / PixelsPerInch.PDF_TO_CSS_UNITS;\n    const pageHeight = (changeOrientation ? pageView.width : pageView.height) / pageView.scale / PixelsPerInch.PDF_TO_CSS_UNITS;\n    let scale = 0;\n    switch (destArray[1].name) {\n      case \"XYZ\":\n        x = destArray[2];\n        y = destArray[3];\n        scale = destArray[4];\n        x = x !== null ? x : 0;\n        y = y !== null ? y : pageHeight;\n        break;\n      case \"Fit\":\n      case \"FitB\":\n        scale = \"page-fit\";\n        break;\n      case \"FitH\":\n      case \"FitBH\":\n        y = destArray[2];\n        scale = \"page-width\";\n        if (y === null && this._location) {\n          x = this._location.left;\n          y = this._location.top;\n        } else if (typeof y !== \"number\" || y < 0) {\n          y = pageHeight;\n        }\n        break;\n      case \"FitV\":\n      case \"FitBV\":\n        x = destArray[2];\n        width = pageWidth;\n        height = pageHeight;\n        scale = \"page-height\";\n        break;\n      case \"FitR\":\n        x = destArray[2];\n        y = destArray[3];\n        width = destArray[4] - x;\n        height = destArray[5] - y;\n        let hPadding = SCROLLBAR_PADDING,\n          vPadding = VERTICAL_PADDING;\n        if (this.removePageBorders) {\n          hPadding = vPadding = 0;\n        }\n        widthScale = (this.container.clientWidth - hPadding) / width / PixelsPerInch.PDF_TO_CSS_UNITS;\n        heightScale = (this.container.clientHeight - vPadding) / height / PixelsPerInch.PDF_TO_CSS_UNITS;\n        scale = Math.min(Math.abs(widthScale), Math.abs(heightScale));\n        break;\n      default:\n        console.error(`scrollPageIntoView: \"${destArray[1].name}\" is not a valid destination type.`);\n        return;\n    }\n    if (!ignoreDestinationZoom) {\n      if (scale && scale !== this._currentScale) {\n        this.currentScaleValue = scale;\n      } else if (this._currentScale === UNKNOWN_SCALE) {\n        this.currentScaleValue = DEFAULT_SCALE_VALUE;\n      }\n    }\n    if (scale === \"page-fit\" && !destArray[4]) {\n      this.#scrollIntoView(pageView);\n      return;\n    }\n    const boundingRect = [pageView.viewport.convertToViewportPoint(x, y), pageView.viewport.convertToViewportPoint(x + width, y + height)];\n    let left = Math.min(boundingRect[0][0], boundingRect[1][0]);\n    let top = Math.min(boundingRect[0][1], boundingRect[1][1]);\n    if (!allowNegativeOffset) {\n      left = Math.max(left, 0);\n      top = Math.max(top, 0);\n    }\n    this.#scrollIntoView(pageView, {\n      left,\n      top\n    });\n  }\n  _updateLocation(firstPage) {\n    const currentScale = this._currentScale;\n    const currentScaleValue = this._currentScaleValue;\n    const normalizedScaleValue = parseFloat(currentScaleValue) === currentScale ? Math.round(currentScale * 10000) / 100 : currentScaleValue;\n    const pageNumber = firstPage.id;\n    const currentPageView = this._pages[pageNumber - 1];\n    const container = this.container;\n    const topLeft = currentPageView.getPagePoint(container.scrollLeft - firstPage.x, container.scrollTop - firstPage.y);\n    const intLeft = Math.round(topLeft[0]);\n    const intTop = Math.round(topLeft[1]);\n    let pdfOpenParams = `#page=${pageNumber}`;\n    if (!this.isInPresentationMode) {\n      pdfOpenParams += `&zoom=${normalizedScaleValue},${intLeft},${intTop}`;\n    }\n    this._location = {\n      pageNumber,\n      scale: normalizedScaleValue,\n      top: intTop,\n      left: intLeft,\n      rotation: this._pagesRotation,\n      pdfOpenParams\n    };\n  }\n  update() {\n    const visible = this._getVisiblePages();\n    const visiblePages = visible.views,\n      numVisiblePages = visiblePages.length;\n    if (numVisiblePages === 0) {\n      return;\n    }\n    const newCacheSize = Math.max(DEFAULT_CACHE_SIZE, 2 * numVisiblePages + 1);\n    this.#buffer.resize(newCacheSize, visible.ids);\n    this.renderingQueue.renderHighestPriority(visible);\n    const isSimpleLayout = this._spreadMode === SpreadMode.NONE && (this._scrollMode === ScrollMode.PAGE || this._scrollMode === ScrollMode.VERTICAL);\n    const currentId = this._currentPageNumber;\n    let stillFullyVisible = false;\n    for (const page of visiblePages) {\n      if (page.percent < 100) {\n        break;\n      }\n      if (page.id === currentId && isSimpleLayout) {\n        stillFullyVisible = true;\n        break;\n      }\n    }\n    this._setCurrentPageNumber(stillFullyVisible ? currentId : visiblePages[0].id);\n    this._updateLocation(visible.first);\n    this.eventBus.dispatch(\"updateviewarea\", {\n      source: this,\n      location: this._location\n    });\n  }\n  #switchToEditAnnotationMode() {\n    const visible = this._getVisiblePages();\n    const pagesToRefresh = [];\n    const {\n      ids,\n      views\n    } = visible;\n    for (const page of views) {\n      const {\n        view\n      } = page;\n      if (!view.hasEditableAnnotations()) {\n        ids.delete(view.id);\n        continue;\n      }\n      pagesToRefresh.push(page);\n    }\n    if (pagesToRefresh.length === 0) {\n      return null;\n    }\n    this.renderingQueue.renderHighestPriority({\n      first: pagesToRefresh[0],\n      last: pagesToRefresh.at(-1),\n      views: pagesToRefresh,\n      ids\n    });\n    return ids;\n  }\n  containsElement(element) {\n    return this.container.contains(element);\n  }\n  focus() {\n    this.container.focus();\n  }\n  get _isContainerRtl() {\n    return getComputedStyle(this.container).direction === \"rtl\";\n  }\n  get isInPresentationMode() {\n    return this.presentationModeState === PresentationModeState.FULLSCREEN;\n  }\n  get isChangingPresentationMode() {\n    return this.presentationModeState === PresentationModeState.CHANGING;\n  }\n  get isHorizontalScrollbarEnabled() {\n    return this.isInPresentationMode ? false : this.container.scrollWidth > this.container.clientWidth;\n  }\n  get isVerticalScrollbarEnabled() {\n    return this.isInPresentationMode ? false : this.container.scrollHeight > this.container.clientHeight;\n  }\n  _getVisiblePages() {\n    const views = this._scrollMode === ScrollMode.PAGE ? this.#scrollModePageState.pages : this._pages,\n      horizontal = this._scrollMode === ScrollMode.HORIZONTAL,\n      rtl = horizontal && this._isContainerRtl;\n    return getVisibleElements({\n      scrollEl: this.container,\n      views,\n      sortByVisibility: true,\n      horizontal,\n      rtl\n    });\n  }\n  cleanup() {\n    for (const pageView of this._pages) {\n      if (pageView.renderingState !== RenderingStates.FINISHED) {\n        pageView.reset();\n      }\n    }\n  }\n  _cancelRendering() {\n    for (const pageView of this._pages) {\n      pageView.cancelRendering();\n    }\n  }\n  #ensurePdfPageLoaded(pageView) {\n    var _this44 = this;\n    return _asyncToGenerator(function* () {\n      if (pageView.pdfPage) {\n        return pageView.pdfPage;\n      }\n      try {\n        const pdfPage = yield _this44.pdfDocument.getPage(pageView.id);\n        if (!pageView.pdfPage) {\n          pageView.setPdfPage(pdfPage);\n        }\n        return pdfPage;\n      } catch (reason) {\n        console.error(\"Unable to get page for page view\", reason);\n        return null;\n      }\n    })();\n  }\n  #getScrollAhead(visible) {\n    if (visible.first?.id === 1) {\n      return true;\n    } else if (visible.last?.id === this.pagesCount) {\n      return false;\n    }\n    switch (this._scrollMode) {\n      case ScrollMode.PAGE:\n        return this.#scrollModePageState.scrollDown;\n      case ScrollMode.HORIZONTAL:\n        return this.scroll.right;\n    }\n    return this.scroll.down;\n  }\n  forceRendering(currentlyVisiblePages) {\n    const visiblePages = currentlyVisiblePages || this._getVisiblePages();\n    const scrollAhead = this.#getScrollAhead(visiblePages);\n    const preRenderExtra = this._spreadMode !== SpreadMode.NONE && this._scrollMode !== ScrollMode.HORIZONTAL;\n    const pageView = this.renderingQueue.getHighestPriority(visiblePages, this._pages, scrollAhead, preRenderExtra);\n    if (pageView) {\n      this.#ensurePdfPageLoaded(pageView).then(() => {\n        this.renderingQueue.renderView(pageView);\n      });\n      return true;\n    }\n    return false;\n  }\n  get hasEqualPageSizes() {\n    const firstPageView = this._pages[0];\n    for (let i = 1, ii = this._pages.length; i < ii; ++i) {\n      const pageView = this._pages[i];\n      if (pageView.width !== firstPageView.width || pageView.height !== firstPageView.height) {\n        return false;\n      }\n    }\n    return true;\n  }\n  getPagesOverview() {\n    let initialOrientation;\n    return this._pages.map(pageView => {\n      const viewport = pageView.pdfPage.getViewport({\n        scale: 1\n      });\n      const orientation = isPortraitOrientation(viewport);\n      if (initialOrientation === undefined) {\n        initialOrientation = orientation;\n      } else if (this.enablePrintAutoRotate && orientation !== initialOrientation) {\n        return {\n          width: viewport.height,\n          height: viewport.width,\n          rotation: (viewport.rotation - 90) % 360\n        };\n      }\n      return {\n        width: viewport.width,\n        height: viewport.height,\n        rotation: viewport.rotation\n      };\n    });\n  }\n  get optionalContentConfigPromise() {\n    if (!this.pdfDocument) {\n      return Promise.resolve(null);\n    }\n    if (!this._optionalContentConfigPromise) {\n      console.error(\"optionalContentConfigPromise: Not initialized yet.\");\n      return this.pdfDocument.getOptionalContentConfig({\n        intent: \"display\"\n      });\n    }\n    return this._optionalContentConfigPromise;\n  }\n  set optionalContentConfigPromise(promise) {\n    if (!(promise instanceof Promise)) {\n      throw new Error(`Invalid optionalContentConfigPromise: ${promise}`);\n    }\n    if (!this.pdfDocument) {\n      return;\n    }\n    if (!this._optionalContentConfigPromise) {\n      return;\n    }\n    this._optionalContentConfigPromise = promise;\n    this.refresh(false, {\n      optionalContentConfigPromise: promise\n    });\n    this.eventBus.dispatch(\"optionalcontentconfigchanged\", {\n      source: this,\n      promise\n    });\n  }\n  get scrollMode() {\n    return this._scrollMode;\n  }\n  set scrollMode(mode) {\n    if (this._scrollMode === mode) {\n      return;\n    }\n    if (!isValidScrollMode(mode)) {\n      throw new Error(`Invalid scroll mode: ${mode}`);\n    }\n    if (this.pagesCount > PagesCountLimit.FORCE_SCROLL_MODE_PAGE) {\n      return;\n    }\n    this._previousScrollMode = this._scrollMode;\n    this._scrollMode = mode;\n    this.eventBus.dispatch(\"scrollmodechanged\", {\n      source: this,\n      mode\n    });\n    this._updateScrollMode(this._currentPageNumber);\n  }\n  _updateScrollMode(pageNumber = null) {\n    const scrollMode = this._scrollMode,\n      viewer = this.viewer;\n    viewer.classList.toggle(\"scrollHorizontal\", scrollMode === ScrollMode.HORIZONTAL);\n    viewer.classList.toggle(\"scrollWrapped\", scrollMode === ScrollMode.WRAPPED);\n    if (!this.pdfDocument || !pageNumber) {\n      return;\n    }\n    if (scrollMode === ScrollMode.PAGE) {\n      this.#ensurePageViewVisible();\n    } else if (this._previousScrollMode === ScrollMode.PAGE) {\n      this._updateSpreadMode();\n    }\n    if (this._currentScaleValue && isNaN(this._currentScaleValue)) {\n      this.#setScale(this._currentScaleValue, {\n        noScroll: true\n      });\n    }\n    this._setCurrentPageNumber(pageNumber, true);\n    this.update();\n  }\n  get spreadMode() {\n    return this._spreadMode;\n  }\n  set spreadMode(mode) {\n    if (this._spreadMode === mode) {\n      return;\n    }\n    if (!isValidSpreadMode(mode)) {\n      throw new Error(`Invalid spread mode: ${mode}`);\n    }\n    this._spreadMode = mode;\n    this.eventBus.dispatch(\"spreadmodechanged\", {\n      source: this,\n      mode\n    });\n    this._updateSpreadMode(this._currentPageNumber);\n  }\n  _updateSpreadMode(pageNumber = null) {\n    if (!this.pdfDocument) {\n      return;\n    }\n    const viewer = this.viewer,\n      pages = this._pages;\n    if (this._scrollMode === ScrollMode.PAGE) {\n      this.#ensurePageViewVisible();\n    } else {\n      viewer.textContent = \"\";\n      if (this._spreadMode === SpreadMode.NONE) {\n        for (const pageView of this._pages) {\n          viewer.append(pageView.div);\n        }\n      } else {\n        const parity = this._spreadMode - 1;\n        let spread = null;\n        for (let i = 0, ii = pages.length; i < ii; ++i) {\n          if (spread === null) {\n            spread = document.createElement(\"div\");\n            spread.className = \"spread\";\n            viewer.append(spread);\n          } else if (i % 2 === parity) {\n            spread = spread.cloneNode(false);\n            viewer.append(spread);\n          }\n          spread.append(pages[i].div);\n        }\n      }\n    }\n    if (!pageNumber) {\n      return;\n    }\n    if (this._currentScaleValue && isNaN(this._currentScaleValue)) {\n      this.#setScale(this._currentScaleValue, {\n        noScroll: true\n      });\n    }\n    this._setCurrentPageNumber(pageNumber, true);\n    this.update();\n  }\n  _getPageAdvance(currentPageNumber, previous = false) {\n    switch (this._scrollMode) {\n      case ScrollMode.WRAPPED:\n        {\n          const {\n              views\n            } = this._getVisiblePages(),\n            pageLayout = new Map();\n          for (const {\n            id,\n            y,\n            percent,\n            widthPercent\n          } of views) {\n            if (percent === 0 || widthPercent < 100) {\n              continue;\n            }\n            let yArray = pageLayout.get(y);\n            if (!yArray) {\n              pageLayout.set(y, yArray ||= []);\n            }\n            yArray.push(id);\n          }\n          for (const yArray of pageLayout.values()) {\n            const currentIndex = yArray.indexOf(currentPageNumber);\n            if (currentIndex === -1) {\n              continue;\n            }\n            const numPages = yArray.length;\n            if (numPages === 1) {\n              break;\n            }\n            if (previous) {\n              for (let i = currentIndex - 1, ii = 0; i >= ii; i--) {\n                const currentId = yArray[i],\n                  expectedId = yArray[i + 1] - 1;\n                if (currentId < expectedId) {\n                  return currentPageNumber - expectedId;\n                }\n              }\n            } else {\n              for (let i = currentIndex + 1, ii = numPages; i < ii; i++) {\n                const currentId = yArray[i],\n                  expectedId = yArray[i - 1] + 1;\n                if (currentId > expectedId) {\n                  return expectedId - currentPageNumber;\n                }\n              }\n            }\n            if (previous) {\n              const firstId = yArray[0];\n              if (firstId < currentPageNumber) {\n                return currentPageNumber - firstId + 1;\n              }\n            } else {\n              const lastId = yArray[numPages - 1];\n              if (lastId > currentPageNumber) {\n                return lastId - currentPageNumber + 1;\n              }\n            }\n            break;\n          }\n          break;\n        }\n      case ScrollMode.HORIZONTAL:\n        {\n          break;\n        }\n      case ScrollMode.PAGE:\n      case ScrollMode.VERTICAL:\n        {\n          if (this._spreadMode === SpreadMode.NONE) {\n            break;\n          }\n          const parity = this._spreadMode - 1;\n          if (previous && currentPageNumber % 2 !== parity) {\n            break;\n          } else if (!previous && currentPageNumber % 2 === parity) {\n            break;\n          }\n          const {\n              views\n            } = this._getVisiblePages(),\n            expectedId = previous ? currentPageNumber - 1 : currentPageNumber + 1;\n          for (const {\n            id,\n            percent,\n            widthPercent\n          } of views) {\n            if (id !== expectedId) {\n              continue;\n            }\n            if (percent > 0 && widthPercent === 100) {\n              return 2;\n            }\n            break;\n          }\n          break;\n        }\n    }\n    return 1;\n  }\n  nextPage() {\n    const currentPageNumber = this._currentPageNumber,\n      pagesCount = this.pagesCount;\n    if (currentPageNumber >= pagesCount) {\n      return false;\n    }\n    const advance = this._getPageAdvance(currentPageNumber, false) || 1;\n    this.currentPageNumber = Math.min(currentPageNumber + advance, pagesCount);\n    return true;\n  }\n  previousPage() {\n    const currentPageNumber = this._currentPageNumber;\n    if (currentPageNumber <= 1) {\n      return false;\n    }\n    const advance = this._getPageAdvance(currentPageNumber, true) || 1;\n    this.currentPageNumber = Math.max(currentPageNumber - advance, 1);\n    return true;\n  }\n  updateScale({\n    drawingDelay,\n    scaleFactor = null,\n    steps = null,\n    origin\n  }) {\n    if (steps === null && scaleFactor === null) {\n      throw new Error(\"Invalid updateScale options: either `steps` or `scaleFactor` must be provided.\");\n    }\n    if (!this.pdfDocument) {\n      return;\n    }\n    let newScale = this._currentScale;\n    if (scaleFactor > 0 && scaleFactor !== 1) {\n      newScale = Math.round(newScale * scaleFactor * 100) / 100;\n    } else if (steps) {\n      const delta = steps > 0 ? DEFAULT_SCALE_DELTA : 1 / DEFAULT_SCALE_DELTA;\n      const round = steps > 0 ? Math.ceil : Math.floor;\n      steps = Math.abs(steps);\n      do {\n        newScale = round((newScale * delta).toFixed(2) * 10) / 10;\n      } while (--steps > 0);\n    }\n    newScale = Math.max(MIN_SCALE, Math.min(MAX_SCALE, newScale));\n    this.#setScale(newScale, {\n      noScroll: false,\n      drawingDelay,\n      origin\n    });\n  }\n  increaseScale(options = {}) {\n    this.updateScale({\n      ...options,\n      steps: options.steps ?? 1\n    });\n  }\n  decreaseScale(options = {}) {\n    this.updateScale({\n      ...options,\n      steps: -(options.steps ?? 1)\n    });\n  }\n  #updateContainerHeightCss(height = this.container.clientHeight) {\n    if (height !== this.#previousContainerHeight) {\n      this.#previousContainerHeight = height;\n      docStyle.setProperty(\"--viewer-container-height\", `${height}px`);\n    }\n  }\n  #resizeObserverCallback(entries) {\n    for (const entry of entries) {\n      if (entry.target === this.container) {\n        this.#updateContainerHeightCss(Math.floor(entry.borderBoxSize[0].blockSize));\n        this.#containerTopLeft = null;\n        break;\n      }\n    }\n  }\n  get containerTopLeft() {\n    return this.#containerTopLeft ||= [this.container.offsetTop, this.container.offsetLeft];\n  }\n  #cleanupSwitchAnnotationEditorMode() {\n    this.#switchAnnotationEditorModeAC?.abort();\n    this.#switchAnnotationEditorModeAC = null;\n    if (this.#switchAnnotationEditorModeTimeoutId !== null) {\n      clearTimeout(this.#switchAnnotationEditorModeTimeoutId);\n      this.#switchAnnotationEditorModeTimeoutId = null;\n    }\n  }\n  get annotationEditorMode() {\n    return this.#annotationEditorUIManager ? this.#annotationEditorMode : AnnotationEditorType.DISABLE;\n  }\n  set annotationEditorMode({\n    mode,\n    editId = null,\n    isFromKeyboard = false\n  }) {\n    if (!this.#annotationEditorUIManager) {\n      throw new Error(`The AnnotationEditor is not enabled.`);\n    }\n    if (this.#annotationEditorMode === mode) {\n      return;\n    }\n    if (!isValidAnnotationEditorMode(mode)) {\n      throw new Error(`Invalid AnnotationEditor mode: ${mode}`);\n    }\n    if (!this.pdfDocument) {\n      return;\n    }\n    if (mode === AnnotationEditorType.STAMP) {\n      this.#mlManager?.loadModel(\"altText\");\n    }\n    const {\n      eventBus\n    } = this;\n    const updater = () => {\n      this.#cleanupSwitchAnnotationEditorMode();\n      this.#annotationEditorMode = mode;\n      this.#annotationEditorUIManager.updateMode(mode, editId, isFromKeyboard);\n      eventBus.dispatch(\"annotationeditormodechanged\", {\n        source: this,\n        mode\n      });\n    };\n    if (mode === AnnotationEditorType.NONE || this.#annotationEditorMode === AnnotationEditorType.NONE) {\n      const isEditing = mode !== AnnotationEditorType.NONE;\n      if (!isEditing) {\n        this.pdfDocument.annotationStorage.resetModifiedIds();\n      }\n      for (const pageView of this._pages) {\n        pageView.toggleEditingMode(isEditing);\n      }\n      const idsToRefresh = this.#switchToEditAnnotationMode();\n      if (isEditing && idsToRefresh) {\n        this.#cleanupSwitchAnnotationEditorMode();\n        this.#switchAnnotationEditorModeAC = new AbortController();\n        const signal = AbortSignal.any([this.#eventAbortController.signal, this.#switchAnnotationEditorModeAC.signal]);\n        eventBus._on(\"pagerendered\", ({\n          pageNumber\n        }) => {\n          idsToRefresh.delete(pageNumber);\n          if (idsToRefresh.size === 0) {\n            this.#switchAnnotationEditorModeTimeoutId = setTimeout(updater, 0);\n          }\n        }, {\n          signal\n        });\n        return;\n      }\n    }\n    updater();\n  }\n  refresh(noUpdate = false, updateArgs = Object.create(null)) {\n    if (!this.pdfDocument) {\n      return;\n    }\n    for (const pageView of this._pages) {\n      pageView.update(updateArgs);\n    }\n    if (this.#scaleTimeoutId !== null) {\n      clearTimeout(this.#scaleTimeoutId);\n      this.#scaleTimeoutId = null;\n    }\n    if (!noUpdate) {\n      this.update();\n    }\n  }\n}\n; // ./web/pdf_single_page_viewer.js\n\nclass PDFSinglePageViewer extends PDFViewer {\n  _resetView() {\n    super._resetView();\n    this._scrollMode = ScrollMode.PAGE;\n    this._spreadMode = SpreadMode.NONE;\n  }\n  set scrollMode(mode) {}\n  _updateScrollMode() {}\n  set spreadMode(mode) {}\n  _updateSpreadMode() {}\n}\n; // ./web/pdf_viewer.component.js\n\nconst pdfjsVersion = \"4.8.69\";\nconst pdfjsBuild = \"3634dab10\";\nvar __webpack_exports__AnnotationLayerBuilder = __webpack_exports__.AnnotationLayerBuilder;\nvar __webpack_exports__DownloadManager = __webpack_exports__.DownloadManager;\nvar __webpack_exports__EventBus = __webpack_exports__.EventBus;\nvar __webpack_exports__FindState = __webpack_exports__.FindState;\nvar __webpack_exports__GenericL10n = __webpack_exports__.GenericL10n;\nvar __webpack_exports__LinkTarget = __webpack_exports__.LinkTarget;\nvar __webpack_exports__PDFFindController = __webpack_exports__.PDFFindController;\nvar __webpack_exports__PDFHistory = __webpack_exports__.PDFHistory;\nvar __webpack_exports__PDFLinkService = __webpack_exports__.PDFLinkService;\nvar __webpack_exports__PDFPageView = __webpack_exports__.PDFPageView;\nvar __webpack_exports__PDFScriptingManager = __webpack_exports__.PDFScriptingManager;\nvar __webpack_exports__PDFSinglePageViewer = __webpack_exports__.PDFSinglePageViewer;\nvar __webpack_exports__PDFViewer = __webpack_exports__.PDFViewer;\nvar __webpack_exports__ProgressBar = __webpack_exports__.ProgressBar;\nvar __webpack_exports__RenderingStates = __webpack_exports__.RenderingStates;\nvar __webpack_exports__ScrollMode = __webpack_exports__.ScrollMode;\nvar __webpack_exports__SimpleLinkService = __webpack_exports__.SimpleLinkService;\nvar __webpack_exports__SpreadMode = __webpack_exports__.SpreadMode;\nvar __webpack_exports__StructTreeLayerBuilder = __webpack_exports__.StructTreeLayerBuilder;\nvar __webpack_exports__TextLayerBuilder = __webpack_exports__.TextLayerBuilder;\nvar __webpack_exports__XfaLayerBuilder = __webpack_exports__.XfaLayerBuilder;\nvar __webpack_exports__parseQueryString = __webpack_exports__.parseQueryString;\nexport { __webpack_exports__AnnotationLayerBuilder as AnnotationLayerBuilder, __webpack_exports__DownloadManager as DownloadManager, __webpack_exports__EventBus as EventBus, __webpack_exports__FindState as FindState, __webpack_exports__GenericL10n as GenericL10n, __webpack_exports__LinkTarget as LinkTarget, __webpack_exports__PDFFindController as PDFFindController, __webpack_exports__PDFHistory as PDFHistory, __webpack_exports__PDFLinkService as PDFLinkService, __webpack_exports__PDFPageView as PDFPageView, __webpack_exports__PDFScriptingManager as PDFScriptingManager, __webpack_exports__PDFSinglePageViewer as PDFSinglePageViewer, __webpack_exports__PDFViewer as PDFViewer, __webpack_exports__ProgressBar as ProgressBar, __webpack_exports__RenderingStates as RenderingStates, __webpack_exports__ScrollMode as ScrollMode, __webpack_exports__SimpleLinkService as SimpleLinkService, __webpack_exports__SpreadMode as SpreadMode, __webpack_exports__StructTreeLayerBuilder as StructTreeLayerBuilder, __webpack_exports__TextLayerBuilder as TextLayerBuilder, __webpack_exports__XfaLayerBuilder as XfaLayerBuilder, __webpack_exports__parseQueryString as parseQueryString };","map":{"version":3,"names":["__webpack_require__","d","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","__webpack_exports__","globalThis","pdfjsViewer","AnnotationLayerBuilder","DownloadManager","EventBus","FindState","GenericL10n","genericl10n_GenericL10n","LinkTarget","PDFFindController","PDFHistory","PDFLinkService","PDFPageView","PDFScriptingManager","PDFScriptingManagerComponents","PDFSinglePageViewer","PDFViewer","ProgressBar","RenderingStates","ScrollMode","SimpleLinkService","SpreadMode","StructTreeLayerBuilder","TextLayerBuilder","XfaLayerBuilder","parseQueryString","DEFAULT_SCALE_VALUE","DEFAULT_SCALE","DEFAULT_SCALE_DELTA","MIN_SCALE","MAX_SCALE","UNKNOWN_SCALE","MAX_AUTO_SCALE","SCROLLBAR_PADDING","VERTICAL_PADDING","INITIAL","RUNNING","PAUSED","FINISHED","PresentationModeState","UNKNOWN","NORMAL","CHANGING","FULLSCREEN","SidebarView","NONE","THUMBS","OUTLINE","ATTACHMENTS","LAYERS","TextLayerMode","DISABLE","ENABLE","ENABLE_PERMISSIONS","VERTICAL","HORIZONTAL","WRAPPED","PAGE","ODD","EVEN","CursorTool","SELECT","HAND","ZOOM","AutoPrintRegExp","scrollIntoView","element","spot","scrollMatches","parent","offsetParent","console","error","offsetY","offsetTop","clientTop","offsetX","offsetLeft","clientLeft","clientHeight","scrollHeight","clientWidth","scrollWidth","classList","contains","getComputedStyle","overflow","top","undefined","left","scrollLeft","scrollTop","watchScroll","viewAreaElement","callback","abortSignal","debounceScroll","evt","rAF","window","requestAnimationFrame","viewAreaElementScrolled","currentX","lastX","state","right","currentY","lastY","down","_eventHandler","addEventListener","useCapture","signal","cancelAnimationFrame","once","query","params","Map","value","URLSearchParams","set","toLowerCase","InvisibleCharsRegExp","removeNullCharacters","str","replaceInvisible","test","replaceAll","m","binarySearchFirstItem","items","condition","start","minIndex","maxIndex","length","currentIndex","currentItem","approximateFraction","x","Math","floor","xinv","limit","x_","a","b","c","p","q","result","floorToDivide","div","getPageSizeInches","view","userUnit","rotate","x1","y1","x2","y2","changeOrientation","width","height","backtrackBeforeAllVisibleElements","index","views","elt","pageTop","i","getVisibleElements","scrollEl","sortByVisibility","horizontal","rtl","bottom","isElementBottomAfterViewTop","elementBottom","isElementNextAfterViewHorizontally","elementLeft","elementRight","visible","ids","Set","numViews","firstVisibleElementInd","lastEdge","currentWidth","currentHeight","viewWidth","viewHeight","viewRight","viewBottom","hiddenHeight","max","hiddenWidth","fractionHeight","fractionWidth","percent","push","id","y","widthPercent","add","first","last","at","sort","pc","abs","normalizeWheelEventDirection","delta","hypot","deltaX","deltaY","angle","atan2","PI","normalizeWheelEventDelta","deltaMode","MOUSE_PIXELS_PER_LINE","MOUSE_LINES_PER_PAGE","WheelEvent","DOM_DELTA_PIXEL","DOM_DELTA_LINE","isValidRotation","Number","isInteger","isValidScrollMode","mode","values","includes","isValidSpreadMode","isPortraitOrientation","size","animationStarted","Promise","resolve","docStyle","document","documentElement","style","clamp","v","min","disableAutoFetchTimeout","constructor","bar","val","isNaN","remove","setProperty","setWidth","viewer","container","parentNode","scrollbarWidth","offsetWidth","setDisableAutoFetch","delay","clearTimeout","show","setTimeout","hide","getActiveOrFocusedElement","curRoot","curActiveOrFocused","activeElement","querySelector","shadowRoot","apiPageLayoutToViewerModes","layout","scrollMode","spreadMode","apiPageModeToSidebarView","toggleCheckedBtn","button","toggle","setAttribute","toggleExpandedBtn","calcRound","e","createElement","fround","CharacterType","SPACE","ALPHA_LETTER","PUNCT","HAN_LETTER","KATAKANA_LETTER","HIRAGANA_LETTER","HALFWIDTH_KATAKANA_LETTER","THAI_LETTER","isAlphabeticalScript","charCode","isAscii","isAsciiAlpha","isAsciiDigit","isAsciiSpace","isHan","isKatakana","isHiragana","isHalfwidthKatakana","isThai","getCharacterType","NormalizeWithNFKC","getNormalizeWithNFKC","FOUND","NOT_FOUND","PENDING","FIND_TIMEOUT","MATCH_SCROLL_OFFSET_TOP","MATCH_SCROLL_OFFSET_LEFT","CHARACTERS_TO_NORMALIZE","DIACRITICS_EXCEPTION","DIACRITICS_EXCEPTION_STR","DIACRITICS_REG_EXP","SPECIAL_CHARS_REG_EXP","NOT_DIACRITIC_FROM_END_REG_EXP","NOT_DIACRITIC_FROM_START_REG_EXP","SYLLABLES_REG_EXP","SYLLABLES_LENGTHS","FIRST_CHAR_SYLLABLES_REG_EXP","NFKC_CHARS_TO_NORMALIZE","noSyllablesRegExp","withSyllablesRegExp","normalize","text","syllablePositions","exec","char","len","normalizationRegex","replace","keys","join","toNormalizeWithNFKC","CJK","HKDiacritics","CompoundWord","regexp","RegExp","rawDiacriticsPositions","normalized","positions","rawDiacriticsIndex","syllableIndex","shift","shiftOrigin","eol","hasDiacritics","match","p1","p2","p3","p4","p5","p6","p7","p8","p9","replacement","jj","j","charAt","hasTrailingDashEOL","endsWith","slice","newCharLen","getOriginalIndex","diffs","pos","end","oldStart","oldEnd","oldLen","updateMatchesCountOnProgress","visitedPagesCount","linkService","eventBus","_linkService","_eventBus","onIsPageVisible","reset","_on","onFind","bind","onFindBarClose","highlightMatches","_highlightMatches","pageMatches","_pageMatches","pageMatchesLength","_pageMatchesLength","selected","_selected","setDocument","pdfDocument","_pdfDocument","_firstPageCapability","#onFind","type","shouldDirtyMatch","_dirtyMatch","updateUIState","promise","then","extractText","findbarClosed","pendingTimeout","_findTimeout","nextMatch","highlightAll","updateAllPages","scrollMatchIntoView","selectedLeft","pageIndex","matchIndex","_scrollMatches","matchIdx","pageIdx","#reset","_offset","wrapped","_extractTextPromises","_pageContents","_pageDiffs","_hasDiacritics","_matchesCountTotal","_pagesToSearch","_pendingFindMatches","_resumePageIdx","withResolvers","#query","_rawQuery","_normalizedQuery","filter","map","#shouldDirtyMatch","newQuery","prevQuery","newType","prevType","JSON","stringify","pageNumber","pagesCount","page","isEntireWord","#isEntireWord","content","startIdx","charCodeAt","convertToRegExpString","#convertToRegExpString","matchDiacritics","isUnicode","has","trailingSpaces","String","fromCharCode","calculateMatch","#calculateMatch","pageContent","matcherResult","matches","matchesLength","forEach","matchPos","matchLen","updatePage","nextPageMatch","pageMatchesCount","updateUIResultsCount","reverse","isUnicodePart","queryPart","caseSensitive","entireWord","flags","#extractText","deferred","textOptions","disableNormalization","ii","getPage","pdfPage","getTextContent","textContent","strBuf","textItem","hasEOL","reason","#updatePage","dispatch","source","#updateAllPages","#nextMatch","previous","findPrevious","currentPageIndex","numPages","delete","offset","numPageMatches","updateMatch","advanceOffsetPage","matchesReady","#matchesReady","numMatches","#nextPageMatch","#advanceOffsetPage","#updateMatch","found","previousPage","#onFindBarClose","requestMatchesCount","#requestMatchesCount","current","total","#updateUIResultsCount","matchesCount","#updateUIState","rawQuery","DEFAULT_LINK_REL","SELF","BLANK","PARENT","TOP","externalLinkEnabled","externalLinkTarget","externalLinkRel","ignoreDestinationZoom","_ignoreDestinationZoom","baseUrl","pdfViewer","pdfHistory","setViewer","setHistory","currentPageNumber","rotation","pagesRotation","isInPresentationMode","goToDestination","dest","_this3","_asyncToGenerator","namedDest","explicitDest","getDestination","Array","isArray","destRef","cachedPageNumber","getPageIndex","pushCurrentPosition","scrollPageIntoView","destArray","goToPage","pageLabelToPageNumber","pushPage","addLinkAttributes","link","url","newWindow","Error","target","rel","href","title","onclick","targetStr","getDestinationHash","getAnchorUrl","escape","anchor","setHash","hash","phrase","zoomArgs","split","zoomArg","zoomArgNumber","parseFloat","name","allowNegativeOffset","unescape","parse","toString","isValidExplicitDest","executeNamedAction","action","back","forward","nextPage","executeSetOCGState","_this4","optionalContentConfig","optionalContentConfigPromise","setOCGState","#isValidExplicitDest","zoom","args","num","gen","argsLen","allowNull","arg","AbortException","AnnotationEditorLayer","AnnotationEditorParamsType","AnnotationEditorType","AnnotationEditorUIManager","AnnotationLayer","AnnotationMode","build","ColorPicker","createValidAbsoluteUrl","DOMSVGFactory","DrawLayer","FeatureTest","fetchData","getDocument","getFilenameFromUrl","getPdfFilenameFromUrl","getXfaPageViewport","GlobalWorkerOptions","ImageKind","InvalidPDFException","isDataScheme","isPdfFile","MissingPDFException","noContextMenu","normalizeUnicode","OPS","OutputScale","PasswordResponses","PDFDataRangeTransport","PDFDateString","PDFWorker","PermissionFlag","PixelsPerInch","RenderingCancelledException","setLayerDimensions","shadow","TextLayer","UnexpectedResponseException","Util","VerbosityLevel","version","XfaLayer","pdfjsLib","onAppend","eventAbortController","downloadManager","annotationStorage","imageResourcesPath","renderForms","enableScripting","hasJSActionsPromise","fieldObjectsPromise","annotationCanvasMap","accessibilityManager","annotationEditorUIManager","_hasJSActionsPromise","_fieldObjectsPromise","_annotationCanvasMap","_accessibilityManager","_annotationEditorUIManager","annotationLayer","_cancelled","render","viewport","options","intent","_this5","update","clone","dontFlip","annotations","hasJSActions","fieldObjects","all","getAnnotations","className","structTreeLayer","updatePresentationModeState","AbortController","cancel","abort","hidden","hasEditableAnnotations","#updatePresentationModeState","disableFormElements","section","childNodes","hasAttribute","inert","download","blobUrl","filename","click","body","append","openBlobUrls","WeakMap","downloadData","data","contentType","URL","createObjectURL","Blob","openOrDownloadData","isPdfData","WaitOnType","EVENT","TIMEOUT","waitOnEventOrTimeout","_x","_waitOnEventOrTimeout","apply","arguments","ac","handler","timeout","evtMethod","listeners","create","on","eventName","listener","external","off","_off","eventListeners","externalListeners","rmAbort","AbortSignal","aborted","onAbort","removeEventListener","splice","FirefoxEventBus","externalServices","globalEventNames","isInAutomation","FluentType","valueOf","FluentNone","scope","FluentNumber","opts","nf","memoizeIntlObject","Intl","NumberFormat","format","err","reportError","FluentDateTime","dtf","DateTimeFormat","Date","toISOString","MAX_PLACEABLES","FSI","PDI","selector","category","PluralRules","select","getDefault","variants","star","resolvePattern","RangeError","getArguments","positional","named","resolveExpression","expr","minimumFractionDigits","precision","resolveVariableReference","resolveMessageReference","resolveTermReference","resolveFunctionReference","resolveSelectExpression","ReferenceError","getTime","TypeError","attr","message","bundle","_messages","attribute","attributes","term","_terms","resolved","func","_functions","sel","variant","resolveComplexPattern","ptn","dirty","useIsolating","_useIsolating","elem","_transform","placeables","Scope","errors","WeakSet","ctor","cache","_intls","locales","allowed","unwrapped","opt","entries","NUMBER_ALLOWED","NUMBER","DATETIME_ALLOWED","DATETIME","getMemoizerForLocale","stringLocale","memoizer","FluentBundle","functions","transform","hasMessage","getMessage","addResource","res","allowOverrides","entry","startsWith","formatPattern","pattern","RE_MESSAGE_START","RE_ATTRIBUTE_START","RE_VARIANT_START","RE_NUMBER_LITERAL","RE_IDENTIFIER","RE_REFERENCE","RE_FUNCTION_NAME","RE_TEXT_RUN","RE_STRING_RUN","RE_STRING_ESCAPE","RE_UNICODE_ESCAPE","RE_LEADING_NEWLINES","RE_TRAILING_SPACES","RE_BLANK_LINES","RE_INDENT","TOKEN_BRACE_OPEN","TOKEN_BRACE_CLOSE","TOKEN_BRACKET_OPEN","TOKEN_BRACKET_CLOSE","TOKEN_PAREN_OPEN","TOKEN_ARROW","TOKEN_COLON","TOKEN_COMMA","TOKEN_BLANK","FluentResource","lastIndex","cursor","next","parseMessage","SyntaxError","re","consumeChar","errorClass","consumeToken","match1","parsePattern","parseAttributes","attrs","parsePatternElements","Infinity","indent","parseIndent","trim","elements","commonIndent","parsePlaceable","lastElement","baked","Indent","parseInlineExpression","parseVariants","sigil","parseArguments","parseLiteral","parseArgument","count","parseVariantKey","parseNumberLiteral","parseStringLiteral","fraction","parseEscapeSequence","codepoint4","codepoint6","codepoint","parseInt","fromCodePoint","makeIndent","blank","reOverlay","TEXT_LEVEL_ELEMENTS","LOCALIZABLE_ATTRIBUTES","global","area","input","menuitem","menu","optgroup","option","track","img","textarea","th","description","label","textbox","translateElement","translation","localName","namespaceURI","templateElement","ownerDocument","createElementNS","innerHTML","overlayChildNodes","overlayAttributes","fromFragment","toElement","childNode","nodeType","TEXT_NODE","sanitized","getNodeForNamedElement","replaceChild","isElementAllowed","createSanitizedElement","warn","createTextNodeFromTextContent","appendChild","fromElement","explicitlyAllowed","getAttribute","from","isAttrNameLocalizable","removeAttribute","sourceElement","translatedChild","childName","sourceChild","removeChild","cloneNode","shallowPopulateUsing","createTextNode","attrName","elemName","CachedIterable","iterable","CachedSyncIterable","Symbol","iterator","cached","cur","touchNext","idx","done","CachedAsyncIterable","asyncIterator","_this6","Localization","resourceIds","generateBundles","onChange","addResourceIds","eager","removeResourceIds","r","formatWithFallback","method","_this7","translations","hasAtLeastOneBundle","_iteratorAbruptCompletion","_didIteratorError","_iteratorError","_iterator","_asyncIterator","bundles","_step","missingIds","keysFromBundle","locale","return","formatMessages","messageFromBundle","formatValues","valueFromBundle","formatValue","_this8","handleEvent","formatted","attrNames","messageErrors","L10NID_ATTR_NAME","L10NARGS_ATTR_NAME","L10N_ELEMENT_QUERY","DOMLocalization","roots","pendingrAF","pendingElements","windowElement","mutationObserver","observerConfig","characterData","childList","subtree","attributeFilter","translateRoots","setAttributes","getAttributes","connectRoot","newRoot","root","defaultView","MutationObserver","mutations","translateMutations","observe","disconnectRoot","pauseObserving","clear","resumeObserving","translateFragment","takeRecords","disconnect","mutation","addedNode","addedNodes","ELEMENT_NODE","childElementCount","getTranslatables","translateElements","frag","_this9","getKeysForElement","applyTranslations","nodes","querySelectorAll","L10n","dir","lang","l10n","isRTL","fixupLangCode","_setL10n","getLanguage","getDirection","fallback","_this10","messages","translate","_this11","translateOnce","_this12","ex","destroy","_this13","pause","resume","#fixupLangCode","langCode","PARTIAL_LANG_CODES","en","es","fy","ga","gu","hi","hy","nb","ne","nn","pa","pt","sv","zh","#isRTL","shortCode","createBundle","resource","generateBundlesFallback","#generateBundles","defaultLang","baseLang","_this","_wrapAsyncGenerator","baseURL","paths","_awaitAsyncGenerator","getPaths","langs","shortLang","createBundleFallback","#createBundle","path","#getPaths","#generateBundlesFallback","_this2","#createBundleFallback","HASH_CHANGE_TIMEOUT","POSITION_UPDATED_THRESHOLD","UPDATE_VIEWAREA_TIMEOUT","getCurrentHash","location","_initialized","_fingerprint","_isPagesLoaded","initialize","fingerprint","resetHistory","updateUrl","reInitialized","_updateUrl","bindEvents","history","_popStateInProgress","_blockHashChange","_currentHash","_numPositionUpdates","_uid","_maxUid","_destination","_position","isValidState","parseCurrentHash","pushOrReplaceState","destination","updateInternalState","uid","_initialRotation","_initialBookmark","pageHide","unbindEvents","_updateViewareaTimeout","isValidPage","forceReplace","isDestHashesEqual","isDestArraysEqual","tryPushCurrentPosition","popStateInProgress","initialBookmark","initialRotation","#pushOrReplaceState","shouldReplace","newState","newUrl","replaceState","pushState","#tryPushCurrentPosition","temporary","position","assign","#isValidPage","#isValidState","checkReload","perfEntry","performance","getEntriesByType","#updateInternalState","removeTemporary","#parseCurrentHash","checkNameddest","substring","nameddest","updateViewarea","#updateViewarea","pdfOpenParams","popState","#popState","newHash","hashChanged","#pageHide","#bindEvents","#unbindEvents","destHash","pushHash","firstDest","secondDest","isEntryEqual","second","AnnotationEditorLayerBuilder","drawLayer","textLayer","uiManager","annotationEditorLayer","_this14","clonedViewport","direction","parameters","isInvisible","compatParams","userAgent","navigator","platform","maxTouchPoints","isAndroid","isIOS","OptionKind","BROWSER","VIEWER","API","WORKER","EVENT_DISPATCH","PREFERENCE","Type","BOOLEAN","OBJECT","STRING","UNDEFINED","defaultOptions","allowedGlobalEvents","kind","canvasMaxAreaInBytes","localeProperties","language","nimbusDataStr","supportsCaretBrowsingMode","supportsDocumentFonts","supportsIntegratedFind","supportsMouseWheelZoomCtrlKey","supportsMouseWheelZoomMetaKey","supportsPinchToZoom","toolbarDensity","altTextLearnMoreUrl","annotationEditorMode","annotationMode","cursorToolOnLoad","debuggerSrc","defaultZoomDelay","defaultZoomValue","disableHistory","disablePageLabels","enableAltText","enableAltTextModelDownload","enableGuessAltText","enableHighlightFloatingButton","enableNewAltTextWhenAddingImage","enablePermissions","enablePrintAutoRotate","enableUpdatedAddImage","highlightEditorColors","historyUpdateUrl","maxCanvasPixels","forcePageColors","pageColorsBackground","pageColorsForeground","pdfBugEnabled","printResolution","sidebarViewOnLoad","scrollModeOnLoad","spreadModeOnLoad","textLayerMode","viewOnLoad","cMapPacked","cMapUrl","disableAutoFetch","disableFontFace","disableRange","disableStream","docBaseUrl","enableHWA","enableXfa","fontExtraProperties","isEvalSupported","isOffscreenCanvasSupported","maxImageSize","pdfBug","standardFontDataUrl","useSystemFonts","verbosity","workerPort","workerSrc","defaultUrl","sandboxBundleSrc","viewerCssTheme","enableFakeMLManager","disablePreferences","AppOptions","_hasInvokedSet","_checkDisablePreferences","getAll","defaultOnly","defaultOpt","setAll","prefs","events","userOpt","toUpperCase","DrawLayerBuilder","_this15","setParent","getDrawLayer","PDF_ROLE_TO_HTML_ROLE","Document","DocumentFragment","Part","Sect","Div","Aside","NonStruct","P","H","Title","FENote","Sub","Lbl","Span","Em","Strong","Link","Annot","Form","Ruby","RB","RT","RP","Warichu","WT","WP","L","LI","LBody","Table","TR","TH","TD","THead","TBody","TFoot","Caption","Figure","Formula","Artifact","HEADING_PATTERN","treeDom","treePromise","elementAttributes","rawDims","elementsToAddToTextLayer","getStructTree","_this16","reject","walk","getAriaAttributes","annotationId","_this17","#setAttributes","structElement","htmlElement","alt","added","child","children","addImageInTextLayer","#addImageInTextLayer","node","bbox","pageHeight","pageX","pageY","calc","addElementsToTextLayer","getElementById","#walk","role","kid","TextAccessibilityManager","enabled","textChildren","textNodes","waitingElements","setTextMapping","textDivs","compareElementPositions","#compareElementPositions","e1","e2","rect1","getBoundingClientRect","rect2","top1","bot1","mid1","top2","bot2","mid2","centerX1","centerX2","enable","nodeIndex","addIdToAriaOwns","isRemovable","addPointerInTextLayer","disable","removePointerInTextLayer","owns","#addIdToAriaOwns","moveElementInDOM","contentElement","hasChildNodes","elementToCompare","before","after","TextHighlighter","findController","textContentItemsStr","divs","texts","_updateMatches","_convertMatches","iIndex","mm","begin","divIdx","_renderMatches","isSelectedPage","selectedMatchIdx","prevEnd","infinity","beginText","appendTextToDiv","fromOffset","toOffset","Node","span","i0","i1","lastDivIdx","lastOffset","isSelected","highlightSuffix","n0","n1","clearedUntilDivIdx","n","renderingDone","textLayers","selectionChangeAbortController","highlighter","tabIndex","textContentParams","_this18","onBefore","textContentSource","streamTextContent","includeMarkedContent","endOfContent","bindMouse","removeGlobalSelectionListener","#bindMouse","event","selection","getSelection","clipboardData","setData","preventDefault","stopPropagation","enableGlobalSelectionListener","#removeGlobalSelectionListener","textLayerDiv","#enableGlobalSelectionListener","isPointerDown","isFirefox","prevRange","rangeCount","activeTextLayers","range","getRangeAt","intersectsNode","endDiv","getPropertyValue","modifyStart","compareBoundaryPoints","Range","END_TO_END","START_TO_END","startContainer","endContainer","parentTextLayer","parentElement","closest","insertBefore","nextSibling","cloneRange","xfaHtml","_this19","getXfa","DEFAULT_LAYER_PROPERTIES","LAYERS_ORDER","ENABLE_FORMS","hasRestrictedScaling","isEditing","layerProperties","loadingId","previousRotation","scaleRoundX","scaleRoundY","renderError","renderingState","useThumbnailCanvas","directDrawing","initialOptionalContent","regularAnnotations","viewportMap","layers","defaultViewport","renderingId","pageLabel","scale","pdfPageRotate","_optionalContentConfigPromise","pageColors","renderingQueue","renderTask","_isStandalone","hasViewer","_container","zoomLayer","xfaLayer","setDimensions","PDF_TO_CSS_UNITS","background","hasInitialVisibility","addLayer","#addLayer","oldDiv","replaceWith","layer","prepend","#setDimensions","setPdfPage","foreground","filterFactory","addHighlightHCMFilter","totalRotation","getViewport","cleanup","_textHighlighter","dispatchLayerRendered","#dispatchLayerRendered","renderAnnotationLayer","#renderAnnotationLayer","_this20","renderAnnotationEditorLayer","#renderAnnotationEditorLayer","_this21","renderDrawLayer","#renderDrawLayer","_this22","renderXfaLayer","#renderXfaLayer","_this23","buildXfaTextContentItems","renderTextLayer","#renderTextLayer","_this24","renderStructTreeLayer","#renderStructTreeLayer","_this25","canvas","#buildXfaTextContentItems","_this26","item","_resetZoomLayer","removeFromDOM","zoomLayerCanvas","firstChild","keepZoomLayer","keepAnnotationLayer","keepAnnotationEditorLayer","keepXfaLayer","keepTextLayer","cancelRendering","zoomLayerNode","annotationLayerNode","annotationEditorLayerNode","xfaLayerNode","textLayerNode","layerIndex","indexOf","toggleEditingMode","drawingDelay","onlyCssZoom","sx","sy","outputScale","postponeDrawing","cancelExtraDelay","cssTransform","redrawAnnotationLayer","redrawAnnotationEditorLayer","redrawXfaLayer","redrawTextLayer","hideTextLayer","timestamp","now","originalViewport","relativeRotation","absRotation","scaleX","scaleY","getPagePoint","convertToPdfPoint","finishRenderTask","#finishRenderTask","_this27","separateAnnots","draw","_this28","canvasWrapper","isPureXfa","annotationLayerDiv","renderContinueCallback","cont","showCanvas","isHighestPriority","hasHCM","isLastShow","ctx","getContext","alpha","willReadFrequently","invScale","pixelsInViewport","maxScale","sqrt","sfx","sfy","canvasWidth","canvasHeight","pageWidth","scaled","renderContext","canvasContext","onContinue","resultPromise","annotationEditorLayerDiv","setPageLabel","thumbnailCanvas","docProperties","_x2","_docProperties","info","metadata","contentDispositionFilename","contentLength","getMetadata","getDownloadInfo","filesize","getRaw","authors","GenericScripting","_ready","sandbox","pdfjsSandbox","QuickJSSandbox","catch","createSandbox","_this29","dispatchEventInSandbox","_this30","dispatchEvent","destroySandbox","_this31","nukeSandbox","closeCapability","destroyCapability","ready","scripting","willPrintCapability","_this32","destroyScripting","objects","calculationOrder","docActions","getFieldObjects","getCalculationOrderIds","getJSActions","initScripting","updateFromSandbox","detail","dispatchPageClose","dispatchPageOpen","_pageOpenPending","appInfo","docInfo","actions","dispatchWillSave","_this33","dispatchDidSave","_this34","dispatchWillPrint","_this35","dispatchDidPrint","_this36","destroyPromise","_visitedPages","#updateFromSandbox","_this37","isChangingPresentationMode","siblings","command","modes","pagesPromise","log","currentScaleValue","increaseScale","decreaseScale","focus","elementId","CustomEvent","setValue","#dispatchPageOpen","_this38","visitedPages","pageView","getPageView","actionsPromise","#dispatchPageClose","_this39","#initScripting","createScripting","#destroyScripting","_this40","race","CLEANUP_TIMEOUT","PDFRenderingQueue","pdfThumbnailViewer","onIdle","highestPriorityPage","idleTimeout","printing","isThumbnailViewEnabled","setThumbnailViewer","renderHighestPriority","currentlyVisiblePages","forceRendering","getHighestPriority","scrolledDown","preRenderExtra","visibleViews","numVisible","isViewFinished","firstId","lastId","visibleIds","holeId","holeView","preRenderIndex","preRenderView","renderView","finally","DEFAULT_CACHE_SIZE","PagesCountLimit","FORCE_SCROLL_MODE_PAGE","FORCE_LAZY_PAGE_INIT","PAUSE_EAGER_PAGE_INIT","isValidAnnotationEditorMode","PDFPageViewBuffer","buf","destroyFirstView","resize","newSize","idsToKeep","#destroyFirstView","firstView","buffer","altTextManager","annotationEditorHighlightColors","containerTopLeft","mlManager","switchAnnotationEditorModeAC","switchAnnotationEditorModeTimeoutId","getAllTextInProgress","hiddenCopyElement","interruptCopyCondition","previousContainerHeight","resizeObserver","ResizeObserver","resizeObserverCallback","scrollModePageState","scaleTimeoutId","viewerVersion","firstElementChild","tagName","_getVisiblePages","_scriptingManager","scriptingManager","removePageBorders","defaultRenderingQueue","scroll","_scrollUpdate","presentationModeState","_resetView","updateContainerHeightCss","_pages","getCachedPageViews","pageViewsReady","every","_currentPageNumber","_setCurrentPageNumber","resetCurrentPageView","_pageLabels","currentPageLabel","currentScale","_currentScale","setScale","noScroll","_currentScaleValue","_pagesRotation","refresh","firstPagePromise","onePageRendered","_onePageRenderedCapability","_pagesCapability","_layerProperties","self","initializePermissions","#initializePermissions","permissions","COPY","MODIFY_CONTENTS","MODIFY_ANNOTATIONS","FILL_INTERACTIVE_FORMS","onePageRenderedOrForceFetch","#onePageRenderedOrForceFetch","_this41","visibilityState","hiddenCapability","any","getAllText","_this42","pageNum","copyCallback","#copyCallback","focusNode","anchorNode","containsNode","ev","_ref4","clipboard","writeText","_x3","_this43","_cancelRendering","getOptionalContentConfig","permissionsPromise","getPermissions","_scrollMode","onBeforeDraw","onAfterDraw","firstPdfPage","STAMP","loadModel","updateMode","viewerElement","ensurePageViewVisible","_spreadMode","_updateSpreadMode","loadingParams","getPagesLeft","Language","setPageLabels","labels","_location","_previousScrollMode","previousPageNumber","scrollDown","pages","_updateScrollMode","cleanupSwitchAnnotationEditorMode","#ensurePageViewVisible","pageIndexSet","parity","spread","dummyPage","#scrollIntoView","pageSpot","isSameScale","#isSameScale","newScale","setScaleUpdatePages","#setScaleUpdatePages","newValue","preset","origin","presetValue","previousScale","scaleDiff","pageWidthScaleFactor","#pageWidthScaleFactor","#setScale","currentPage","hPadding","vPadding","pageWidthScale","pageHeightScale","horizontalScale","#resetCurrentPageView","widthScale","heightScale","boundingRect","convertToViewportPoint","_updateLocation","firstPage","normalizedScaleValue","round","currentPageView","topLeft","intLeft","intTop","visiblePages","numVisiblePages","newCacheSize","isSimpleLayout","currentId","stillFullyVisible","switchToEditAnnotationMode","#switchToEditAnnotationMode","pagesToRefresh","containsElement","_isContainerRtl","isHorizontalScrollbarEnabled","isVerticalScrollbarEnabled","ensurePdfPageLoaded","#ensurePdfPageLoaded","_this44","getScrollAhead","#getScrollAhead","scrollAhead","hasEqualPageSizes","firstPageView","getPagesOverview","initialOrientation","orientation","_getPageAdvance","pageLayout","yArray","expectedId","advance","updateScale","scaleFactor","steps","ceil","toFixed","#updateContainerHeightCss","#resizeObserverCallback","borderBoxSize","blockSize","#cleanupSwitchAnnotationEditorMode","editId","isFromKeyboard","updater","resetModifiedIds","idsToRefresh","noUpdate","updateArgs","pdfjsVersion","pdfjsBuild","__webpack_exports__AnnotationLayerBuilder","__webpack_exports__DownloadManager","__webpack_exports__EventBus","__webpack_exports__FindState","__webpack_exports__GenericL10n","__webpack_exports__LinkTarget","__webpack_exports__PDFFindController","__webpack_exports__PDFHistory","__webpack_exports__PDFLinkService","__webpack_exports__PDFPageView","__webpack_exports__PDFScriptingManager","__webpack_exports__PDFSinglePageViewer","__webpack_exports__PDFViewer","__webpack_exports__ProgressBar","__webpack_exports__RenderingStates","__webpack_exports__ScrollMode","__webpack_exports__SimpleLinkService","__webpack_exports__SpreadMode","__webpack_exports__StructTreeLayerBuilder","__webpack_exports__TextLayerBuilder","__webpack_exports__XfaLayerBuilder","__webpack_exports__parseQueryString"],"sources":["/home/robin/Desktop/Github/Robin-Portfolio/node_modules/pdfjs-dist/web/pdf_viewer.mjs"],"sourcesContent":["/**\n * @licstart The following is the entire license notice for the\n * JavaScript code in this page\n *\n * Copyright 2024 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * @licend The above is the entire license notice for the\n * JavaScript code in this page\n */\n\n/******/ // The require scope\n/******/ var __webpack_require__ = {};\n/******/ \n/************************************************************************/\n/******/ /* webpack/runtime/define property getters */\n/******/ (() => {\n/******/ \t// define getter functions for harmony exports\n/******/ \t__webpack_require__.d = (exports, definition) => {\n/******/ \t\tfor(var key in definition) {\n/******/ \t\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n/******/ \t\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n/******/ \t\t\t}\n/******/ \t\t}\n/******/ \t};\n/******/ })();\n/******/ \n/******/ /* webpack/runtime/hasOwnProperty shorthand */\n/******/ (() => {\n/******/ \t__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))\n/******/ })();\n/******/ \n/************************************************************************/\nvar __webpack_exports__ = globalThis.pdfjsViewer = {};\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  AnnotationLayerBuilder: () => (/* reexport */ AnnotationLayerBuilder),\n  DownloadManager: () => (/* reexport */ DownloadManager),\n  EventBus: () => (/* reexport */ EventBus),\n  FindState: () => (/* reexport */ FindState),\n  GenericL10n: () => (/* reexport */ genericl10n_GenericL10n),\n  LinkTarget: () => (/* reexport */ LinkTarget),\n  PDFFindController: () => (/* reexport */ PDFFindController),\n  PDFHistory: () => (/* reexport */ PDFHistory),\n  PDFLinkService: () => (/* reexport */ PDFLinkService),\n  PDFPageView: () => (/* reexport */ PDFPageView),\n  PDFScriptingManager: () => (/* reexport */ PDFScriptingManagerComponents),\n  PDFSinglePageViewer: () => (/* reexport */ PDFSinglePageViewer),\n  PDFViewer: () => (/* reexport */ PDFViewer),\n  ProgressBar: () => (/* reexport */ ProgressBar),\n  RenderingStates: () => (/* reexport */ RenderingStates),\n  ScrollMode: () => (/* reexport */ ScrollMode),\n  SimpleLinkService: () => (/* reexport */ SimpleLinkService),\n  SpreadMode: () => (/* reexport */ SpreadMode),\n  StructTreeLayerBuilder: () => (/* reexport */ StructTreeLayerBuilder),\n  TextLayerBuilder: () => (/* reexport */ TextLayerBuilder),\n  XfaLayerBuilder: () => (/* reexport */ XfaLayerBuilder),\n  parseQueryString: () => (/* reexport */ parseQueryString)\n});\n\n;// ./web/ui_utils.js\nconst DEFAULT_SCALE_VALUE = \"auto\";\nconst DEFAULT_SCALE = 1.0;\nconst DEFAULT_SCALE_DELTA = 1.1;\nconst MIN_SCALE = 0.1;\nconst MAX_SCALE = 10.0;\nconst UNKNOWN_SCALE = 0;\nconst MAX_AUTO_SCALE = 1.25;\nconst SCROLLBAR_PADDING = 40;\nconst VERTICAL_PADDING = 5;\nconst RenderingStates = {\n  INITIAL: 0,\n  RUNNING: 1,\n  PAUSED: 2,\n  FINISHED: 3\n};\nconst PresentationModeState = {\n  UNKNOWN: 0,\n  NORMAL: 1,\n  CHANGING: 2,\n  FULLSCREEN: 3\n};\nconst SidebarView = {\n  UNKNOWN: -1,\n  NONE: 0,\n  THUMBS: 1,\n  OUTLINE: 2,\n  ATTACHMENTS: 3,\n  LAYERS: 4\n};\nconst TextLayerMode = {\n  DISABLE: 0,\n  ENABLE: 1,\n  ENABLE_PERMISSIONS: 2\n};\nconst ScrollMode = {\n  UNKNOWN: -1,\n  VERTICAL: 0,\n  HORIZONTAL: 1,\n  WRAPPED: 2,\n  PAGE: 3\n};\nconst SpreadMode = {\n  UNKNOWN: -1,\n  NONE: 0,\n  ODD: 1,\n  EVEN: 2\n};\nconst CursorTool = {\n  SELECT: 0,\n  HAND: 1,\n  ZOOM: 2\n};\nconst AutoPrintRegExp = /\\bprint\\s*\\(/;\nfunction scrollIntoView(element, spot, scrollMatches = false) {\n  let parent = element.offsetParent;\n  if (!parent) {\n    console.error(\"offsetParent is not set -- cannot scroll\");\n    return;\n  }\n  let offsetY = element.offsetTop + element.clientTop;\n  let offsetX = element.offsetLeft + element.clientLeft;\n  while (parent.clientHeight === parent.scrollHeight && parent.clientWidth === parent.scrollWidth || scrollMatches && (parent.classList.contains(\"markedContent\") || getComputedStyle(parent).overflow === \"hidden\")) {\n    offsetY += parent.offsetTop;\n    offsetX += parent.offsetLeft;\n    parent = parent.offsetParent;\n    if (!parent) {\n      return;\n    }\n  }\n  if (spot) {\n    if (spot.top !== undefined) {\n      offsetY += spot.top;\n    }\n    if (spot.left !== undefined) {\n      offsetX += spot.left;\n      parent.scrollLeft = offsetX;\n    }\n  }\n  parent.scrollTop = offsetY;\n}\nfunction watchScroll(viewAreaElement, callback, abortSignal = undefined) {\n  const debounceScroll = function (evt) {\n    if (rAF) {\n      return;\n    }\n    rAF = window.requestAnimationFrame(function viewAreaElementScrolled() {\n      rAF = null;\n      const currentX = viewAreaElement.scrollLeft;\n      const lastX = state.lastX;\n      if (currentX !== lastX) {\n        state.right = currentX > lastX;\n      }\n      state.lastX = currentX;\n      const currentY = viewAreaElement.scrollTop;\n      const lastY = state.lastY;\n      if (currentY !== lastY) {\n        state.down = currentY > lastY;\n      }\n      state.lastY = currentY;\n      callback(state);\n    });\n  };\n  const state = {\n    right: true,\n    down: true,\n    lastX: viewAreaElement.scrollLeft,\n    lastY: viewAreaElement.scrollTop,\n    _eventHandler: debounceScroll\n  };\n  let rAF = null;\n  viewAreaElement.addEventListener(\"scroll\", debounceScroll, {\n    useCapture: true,\n    signal: abortSignal\n  });\n  abortSignal?.addEventListener(\"abort\", () => window.cancelAnimationFrame(rAF), {\n    once: true\n  });\n  return state;\n}\nfunction parseQueryString(query) {\n  const params = new Map();\n  for (const [key, value] of new URLSearchParams(query)) {\n    params.set(key.toLowerCase(), value);\n  }\n  return params;\n}\nconst InvisibleCharsRegExp = /[\\x00-\\x1F]/g;\nfunction removeNullCharacters(str, replaceInvisible = false) {\n  if (!InvisibleCharsRegExp.test(str)) {\n    return str;\n  }\n  if (replaceInvisible) {\n    return str.replaceAll(InvisibleCharsRegExp, m => m === \"\\x00\" ? \"\" : \" \");\n  }\n  return str.replaceAll(\"\\x00\", \"\");\n}\nfunction binarySearchFirstItem(items, condition, start = 0) {\n  let minIndex = start;\n  let maxIndex = items.length - 1;\n  if (maxIndex < 0 || !condition(items[maxIndex])) {\n    return items.length;\n  }\n  if (condition(items[minIndex])) {\n    return minIndex;\n  }\n  while (minIndex < maxIndex) {\n    const currentIndex = minIndex + maxIndex >> 1;\n    const currentItem = items[currentIndex];\n    if (condition(currentItem)) {\n      maxIndex = currentIndex;\n    } else {\n      minIndex = currentIndex + 1;\n    }\n  }\n  return minIndex;\n}\nfunction approximateFraction(x) {\n  if (Math.floor(x) === x) {\n    return [x, 1];\n  }\n  const xinv = 1 / x;\n  const limit = 8;\n  if (xinv > limit) {\n    return [1, limit];\n  } else if (Math.floor(xinv) === xinv) {\n    return [1, xinv];\n  }\n  const x_ = x > 1 ? xinv : x;\n  let a = 0,\n    b = 1,\n    c = 1,\n    d = 1;\n  while (true) {\n    const p = a + c,\n      q = b + d;\n    if (q > limit) {\n      break;\n    }\n    if (x_ <= p / q) {\n      c = p;\n      d = q;\n    } else {\n      a = p;\n      b = q;\n    }\n  }\n  let result;\n  if (x_ - a / b < c / d - x_) {\n    result = x_ === x ? [a, b] : [b, a];\n  } else {\n    result = x_ === x ? [c, d] : [d, c];\n  }\n  return result;\n}\nfunction floorToDivide(x, div) {\n  return x - x % div;\n}\nfunction getPageSizeInches({\n  view,\n  userUnit,\n  rotate\n}) {\n  const [x1, y1, x2, y2] = view;\n  const changeOrientation = rotate % 180 !== 0;\n  const width = (x2 - x1) / 72 * userUnit;\n  const height = (y2 - y1) / 72 * userUnit;\n  return {\n    width: changeOrientation ? height : width,\n    height: changeOrientation ? width : height\n  };\n}\nfunction backtrackBeforeAllVisibleElements(index, views, top) {\n  if (index < 2) {\n    return index;\n  }\n  let elt = views[index].div;\n  let pageTop = elt.offsetTop + elt.clientTop;\n  if (pageTop >= top) {\n    elt = views[index - 1].div;\n    pageTop = elt.offsetTop + elt.clientTop;\n  }\n  for (let i = index - 2; i >= 0; --i) {\n    elt = views[i].div;\n    if (elt.offsetTop + elt.clientTop + elt.clientHeight <= pageTop) {\n      break;\n    }\n    index = i;\n  }\n  return index;\n}\nfunction getVisibleElements({\n  scrollEl,\n  views,\n  sortByVisibility = false,\n  horizontal = false,\n  rtl = false\n}) {\n  const top = scrollEl.scrollTop,\n    bottom = top + scrollEl.clientHeight;\n  const left = scrollEl.scrollLeft,\n    right = left + scrollEl.clientWidth;\n  function isElementBottomAfterViewTop(view) {\n    const element = view.div;\n    const elementBottom = element.offsetTop + element.clientTop + element.clientHeight;\n    return elementBottom > top;\n  }\n  function isElementNextAfterViewHorizontally(view) {\n    const element = view.div;\n    const elementLeft = element.offsetLeft + element.clientLeft;\n    const elementRight = elementLeft + element.clientWidth;\n    return rtl ? elementLeft < right : elementRight > left;\n  }\n  const visible = [],\n    ids = new Set(),\n    numViews = views.length;\n  let firstVisibleElementInd = binarySearchFirstItem(views, horizontal ? isElementNextAfterViewHorizontally : isElementBottomAfterViewTop);\n  if (firstVisibleElementInd > 0 && firstVisibleElementInd < numViews && !horizontal) {\n    firstVisibleElementInd = backtrackBeforeAllVisibleElements(firstVisibleElementInd, views, top);\n  }\n  let lastEdge = horizontal ? right : -1;\n  for (let i = firstVisibleElementInd; i < numViews; i++) {\n    const view = views[i],\n      element = view.div;\n    const currentWidth = element.offsetLeft + element.clientLeft;\n    const currentHeight = element.offsetTop + element.clientTop;\n    const viewWidth = element.clientWidth,\n      viewHeight = element.clientHeight;\n    const viewRight = currentWidth + viewWidth;\n    const viewBottom = currentHeight + viewHeight;\n    if (lastEdge === -1) {\n      if (viewBottom >= bottom) {\n        lastEdge = viewBottom;\n      }\n    } else if ((horizontal ? currentWidth : currentHeight) > lastEdge) {\n      break;\n    }\n    if (viewBottom <= top || currentHeight >= bottom || viewRight <= left || currentWidth >= right) {\n      continue;\n    }\n    const hiddenHeight = Math.max(0, top - currentHeight) + Math.max(0, viewBottom - bottom);\n    const hiddenWidth = Math.max(0, left - currentWidth) + Math.max(0, viewRight - right);\n    const fractionHeight = (viewHeight - hiddenHeight) / viewHeight,\n      fractionWidth = (viewWidth - hiddenWidth) / viewWidth;\n    const percent = fractionHeight * fractionWidth * 100 | 0;\n    visible.push({\n      id: view.id,\n      x: currentWidth,\n      y: currentHeight,\n      view,\n      percent,\n      widthPercent: fractionWidth * 100 | 0\n    });\n    ids.add(view.id);\n  }\n  const first = visible[0],\n    last = visible.at(-1);\n  if (sortByVisibility) {\n    visible.sort(function (a, b) {\n      const pc = a.percent - b.percent;\n      if (Math.abs(pc) > 0.001) {\n        return -pc;\n      }\n      return a.id - b.id;\n    });\n  }\n  return {\n    first,\n    last,\n    views: visible,\n    ids\n  };\n}\nfunction normalizeWheelEventDirection(evt) {\n  let delta = Math.hypot(evt.deltaX, evt.deltaY);\n  const angle = Math.atan2(evt.deltaY, evt.deltaX);\n  if (-0.25 * Math.PI < angle && angle < 0.75 * Math.PI) {\n    delta = -delta;\n  }\n  return delta;\n}\nfunction normalizeWheelEventDelta(evt) {\n  const deltaMode = evt.deltaMode;\n  let delta = normalizeWheelEventDirection(evt);\n  const MOUSE_PIXELS_PER_LINE = 30;\n  const MOUSE_LINES_PER_PAGE = 30;\n  if (deltaMode === WheelEvent.DOM_DELTA_PIXEL) {\n    delta /= MOUSE_PIXELS_PER_LINE * MOUSE_LINES_PER_PAGE;\n  } else if (deltaMode === WheelEvent.DOM_DELTA_LINE) {\n    delta /= MOUSE_LINES_PER_PAGE;\n  }\n  return delta;\n}\nfunction isValidRotation(angle) {\n  return Number.isInteger(angle) && angle % 90 === 0;\n}\nfunction isValidScrollMode(mode) {\n  return Number.isInteger(mode) && Object.values(ScrollMode).includes(mode) && mode !== ScrollMode.UNKNOWN;\n}\nfunction isValidSpreadMode(mode) {\n  return Number.isInteger(mode) && Object.values(SpreadMode).includes(mode) && mode !== SpreadMode.UNKNOWN;\n}\nfunction isPortraitOrientation(size) {\n  return size.width <= size.height;\n}\nconst animationStarted = new Promise(function (resolve) {\n  window.requestAnimationFrame(resolve);\n});\nconst docStyle = document.documentElement.style;\nfunction clamp(v, min, max) {\n  return Math.min(Math.max(v, min), max);\n}\nclass ProgressBar {\n  #classList = null;\n  #disableAutoFetchTimeout = null;\n  #percent = 0;\n  #style = null;\n  #visible = true;\n  constructor(bar) {\n    this.#classList = bar.classList;\n    this.#style = bar.style;\n  }\n  get percent() {\n    return this.#percent;\n  }\n  set percent(val) {\n    this.#percent = clamp(val, 0, 100);\n    if (isNaN(val)) {\n      this.#classList.add(\"indeterminate\");\n      return;\n    }\n    this.#classList.remove(\"indeterminate\");\n    this.#style.setProperty(\"--progressBar-percent\", `${this.#percent}%`);\n  }\n  setWidth(viewer) {\n    if (!viewer) {\n      return;\n    }\n    const container = viewer.parentNode;\n    const scrollbarWidth = container.offsetWidth - viewer.offsetWidth;\n    if (scrollbarWidth > 0) {\n      this.#style.setProperty(\"--progressBar-end-offset\", `${scrollbarWidth}px`);\n    }\n  }\n  setDisableAutoFetch(delay = 5000) {\n    if (this.#percent === 100 || isNaN(this.#percent)) {\n      return;\n    }\n    if (this.#disableAutoFetchTimeout) {\n      clearTimeout(this.#disableAutoFetchTimeout);\n    }\n    this.show();\n    this.#disableAutoFetchTimeout = setTimeout(() => {\n      this.#disableAutoFetchTimeout = null;\n      this.hide();\n    }, delay);\n  }\n  hide() {\n    if (!this.#visible) {\n      return;\n    }\n    this.#visible = false;\n    this.#classList.add(\"hidden\");\n  }\n  show() {\n    if (this.#visible) {\n      return;\n    }\n    this.#visible = true;\n    this.#classList.remove(\"hidden\");\n  }\n}\nfunction getActiveOrFocusedElement() {\n  let curRoot = document;\n  let curActiveOrFocused = curRoot.activeElement || curRoot.querySelector(\":focus\");\n  while (curActiveOrFocused?.shadowRoot) {\n    curRoot = curActiveOrFocused.shadowRoot;\n    curActiveOrFocused = curRoot.activeElement || curRoot.querySelector(\":focus\");\n  }\n  return curActiveOrFocused;\n}\nfunction apiPageLayoutToViewerModes(layout) {\n  let scrollMode = ScrollMode.VERTICAL,\n    spreadMode = SpreadMode.NONE;\n  switch (layout) {\n    case \"SinglePage\":\n      scrollMode = ScrollMode.PAGE;\n      break;\n    case \"OneColumn\":\n      break;\n    case \"TwoPageLeft\":\n      scrollMode = ScrollMode.PAGE;\n    case \"TwoColumnLeft\":\n      spreadMode = SpreadMode.ODD;\n      break;\n    case \"TwoPageRight\":\n      scrollMode = ScrollMode.PAGE;\n    case \"TwoColumnRight\":\n      spreadMode = SpreadMode.EVEN;\n      break;\n  }\n  return {\n    scrollMode,\n    spreadMode\n  };\n}\nfunction apiPageModeToSidebarView(mode) {\n  switch (mode) {\n    case \"UseNone\":\n      return SidebarView.NONE;\n    case \"UseThumbs\":\n      return SidebarView.THUMBS;\n    case \"UseOutlines\":\n      return SidebarView.OUTLINE;\n    case \"UseAttachments\":\n      return SidebarView.ATTACHMENTS;\n    case \"UseOC\":\n      return SidebarView.LAYERS;\n  }\n  return SidebarView.NONE;\n}\nfunction toggleCheckedBtn(button, toggle, view = null) {\n  button.classList.toggle(\"toggled\", toggle);\n  button.setAttribute(\"aria-checked\", toggle);\n  view?.classList.toggle(\"hidden\", !toggle);\n}\nfunction toggleExpandedBtn(button, toggle, view = null) {\n  button.classList.toggle(\"toggled\", toggle);\n  button.setAttribute(\"aria-expanded\", toggle);\n  view?.classList.toggle(\"hidden\", !toggle);\n}\nconst calcRound = function () {\n  const e = document.createElement(\"div\");\n  e.style.width = \"round(down, calc(1.6666666666666665 * 792px), 1px)\";\n  return e.style.width === \"calc(1320px)\" ? Math.fround : x => x;\n}();\n\n;// ./web/pdf_find_utils.js\nconst CharacterType = {\n  SPACE: 0,\n  ALPHA_LETTER: 1,\n  PUNCT: 2,\n  HAN_LETTER: 3,\n  KATAKANA_LETTER: 4,\n  HIRAGANA_LETTER: 5,\n  HALFWIDTH_KATAKANA_LETTER: 6,\n  THAI_LETTER: 7\n};\nfunction isAlphabeticalScript(charCode) {\n  return charCode < 0x2e80;\n}\nfunction isAscii(charCode) {\n  return (charCode & 0xff80) === 0;\n}\nfunction isAsciiAlpha(charCode) {\n  return charCode >= 0x61 && charCode <= 0x7a || charCode >= 0x41 && charCode <= 0x5a;\n}\nfunction isAsciiDigit(charCode) {\n  return charCode >= 0x30 && charCode <= 0x39;\n}\nfunction isAsciiSpace(charCode) {\n  return charCode === 0x20 || charCode === 0x09 || charCode === 0x0d || charCode === 0x0a;\n}\nfunction isHan(charCode) {\n  return charCode >= 0x3400 && charCode <= 0x9fff || charCode >= 0xf900 && charCode <= 0xfaff;\n}\nfunction isKatakana(charCode) {\n  return charCode >= 0x30a0 && charCode <= 0x30ff;\n}\nfunction isHiragana(charCode) {\n  return charCode >= 0x3040 && charCode <= 0x309f;\n}\nfunction isHalfwidthKatakana(charCode) {\n  return charCode >= 0xff60 && charCode <= 0xff9f;\n}\nfunction isThai(charCode) {\n  return (charCode & 0xff80) === 0x0e00;\n}\nfunction getCharacterType(charCode) {\n  if (isAlphabeticalScript(charCode)) {\n    if (isAscii(charCode)) {\n      if (isAsciiSpace(charCode)) {\n        return CharacterType.SPACE;\n      } else if (isAsciiAlpha(charCode) || isAsciiDigit(charCode) || charCode === 0x5f) {\n        return CharacterType.ALPHA_LETTER;\n      }\n      return CharacterType.PUNCT;\n    } else if (isThai(charCode)) {\n      return CharacterType.THAI_LETTER;\n    } else if (charCode === 0xa0) {\n      return CharacterType.SPACE;\n    }\n    return CharacterType.ALPHA_LETTER;\n  }\n  if (isHan(charCode)) {\n    return CharacterType.HAN_LETTER;\n  } else if (isKatakana(charCode)) {\n    return CharacterType.KATAKANA_LETTER;\n  } else if (isHiragana(charCode)) {\n    return CharacterType.HIRAGANA_LETTER;\n  } else if (isHalfwidthKatakana(charCode)) {\n    return CharacterType.HALFWIDTH_KATAKANA_LETTER;\n  }\n  return CharacterType.ALPHA_LETTER;\n}\nlet NormalizeWithNFKC;\nfunction getNormalizeWithNFKC() {\n  NormalizeWithNFKC ||= ` ¨ª¯²-µ¸-º¼-¾Ĳ-ĳĿ-ŀŉſǄ-ǌǱ-ǳʰ-ʸ˘-˝ˠ-ˤʹͺ;΄-΅·ϐ-ϖϰ-ϲϴ-ϵϹևٵ-ٸक़-य़ড়-ঢ়য়ਲ਼ਸ਼ਖ਼-ਜ਼ਫ਼ଡ଼-ଢ଼ำຳໜ-ໝ༌གྷཌྷདྷབྷཛྷཀྵჼᴬ-ᴮᴰ-ᴺᴼ-ᵍᵏ-ᵪᵸᶛ-ᶿẚ-ẛάέήίόύώΆ᾽-῁ΈΉ῍-῏ΐΊ῝-῟ΰΎ῭-`ΌΏ´-῾ - ‑‗․-… ″-‴‶-‷‼‾⁇-⁉⁗ ⁰-ⁱ⁴-₎ₐ-ₜ₨℀-℃℅-ℇ℉-ℓℕ-№ℙ-ℝ℠-™ℤΩℨK-ℭℯ-ℱℳ-ℹ℻-⅀ⅅ-ⅉ⅐-ⅿ↉∬-∭∯-∰〈-〉①-⓪⨌⩴-⩶⫝̸ⱼ-ⱽⵯ⺟⻳⼀-⿕　〶〸-〺゛-゜ゟヿㄱ-ㆎ㆒-㆟㈀-㈞㈠-㉇㉐-㉾㊀-㏿ꚜ-ꚝꝰꟲ-ꟴꟸ-ꟹꭜ-ꭟꭩ豈-嗀塚晴凞-羽蘒諸逸-都飯-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-זּטּ-לּמּנּ-סּףּ-פּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-﷼︐-︙︰-﹄﹇-﹒﹔-﹦﹨-﹫ﹰ-ﹲﹴﹶ-ﻼ！-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ￠-￦`;\n  return NormalizeWithNFKC;\n}\n\n;// ./web/pdf_find_controller.js\n\n\nconst FindState = {\n  FOUND: 0,\n  NOT_FOUND: 1,\n  WRAPPED: 2,\n  PENDING: 3\n};\nconst FIND_TIMEOUT = 250;\nconst MATCH_SCROLL_OFFSET_TOP = -50;\nconst MATCH_SCROLL_OFFSET_LEFT = -400;\nconst CHARACTERS_TO_NORMALIZE = {\n  \"\\u2010\": \"-\",\n  \"\\u2018\": \"'\",\n  \"\\u2019\": \"'\",\n  \"\\u201A\": \"'\",\n  \"\\u201B\": \"'\",\n  \"\\u201C\": '\"',\n  \"\\u201D\": '\"',\n  \"\\u201E\": '\"',\n  \"\\u201F\": '\"',\n  \"\\u00BC\": \"1/4\",\n  \"\\u00BD\": \"1/2\",\n  \"\\u00BE\": \"3/4\"\n};\nconst DIACRITICS_EXCEPTION = new Set([0x3099, 0x309a, 0x094d, 0x09cd, 0x0a4d, 0x0acd, 0x0b4d, 0x0bcd, 0x0c4d, 0x0ccd, 0x0d3b, 0x0d3c, 0x0d4d, 0x0dca, 0x0e3a, 0x0eba, 0x0f84, 0x1039, 0x103a, 0x1714, 0x1734, 0x17d2, 0x1a60, 0x1b44, 0x1baa, 0x1bab, 0x1bf2, 0x1bf3, 0x2d7f, 0xa806, 0xa82c, 0xa8c4, 0xa953, 0xa9c0, 0xaaf6, 0xabed, 0x0c56, 0x0f71, 0x0f72, 0x0f7a, 0x0f7b, 0x0f7c, 0x0f7d, 0x0f80, 0x0f74]);\nlet DIACRITICS_EXCEPTION_STR;\nconst DIACRITICS_REG_EXP = /\\p{M}+/gu;\nconst SPECIAL_CHARS_REG_EXP = /([.*+?^${}()|[\\]\\\\])|(\\p{P})|(\\s+)|(\\p{M})|(\\p{L})/gu;\nconst NOT_DIACRITIC_FROM_END_REG_EXP = /([^\\p{M}])\\p{M}*$/u;\nconst NOT_DIACRITIC_FROM_START_REG_EXP = /^\\p{M}*([^\\p{M}])/u;\nconst SYLLABLES_REG_EXP = /[\\uAC00-\\uD7AF\\uFA6C\\uFACF-\\uFAD1\\uFAD5-\\uFAD7]+/g;\nconst SYLLABLES_LENGTHS = new Map();\nconst FIRST_CHAR_SYLLABLES_REG_EXP = \"[\\\\u1100-\\\\u1112\\\\ud7a4-\\\\ud7af\\\\ud84a\\\\ud84c\\\\ud850\\\\ud854\\\\ud857\\\\ud85f]\";\nconst NFKC_CHARS_TO_NORMALIZE = new Map();\nlet noSyllablesRegExp = null;\nlet withSyllablesRegExp = null;\nfunction normalize(text) {\n  const syllablePositions = [];\n  let m;\n  while ((m = SYLLABLES_REG_EXP.exec(text)) !== null) {\n    let {\n      index\n    } = m;\n    for (const char of m[0]) {\n      let len = SYLLABLES_LENGTHS.get(char);\n      if (!len) {\n        len = char.normalize(\"NFD\").length;\n        SYLLABLES_LENGTHS.set(char, len);\n      }\n      syllablePositions.push([len, index++]);\n    }\n  }\n  let normalizationRegex;\n  if (syllablePositions.length === 0 && noSyllablesRegExp) {\n    normalizationRegex = noSyllablesRegExp;\n  } else if (syllablePositions.length > 0 && withSyllablesRegExp) {\n    normalizationRegex = withSyllablesRegExp;\n  } else {\n    const replace = Object.keys(CHARACTERS_TO_NORMALIZE).join(\"\");\n    const toNormalizeWithNFKC = getNormalizeWithNFKC();\n    const CJK = \"(?:\\\\p{Ideographic}|[\\u3040-\\u30FF])\";\n    const HKDiacritics = \"(?:\\u3099|\\u309A)\";\n    const CompoundWord = \"\\\\p{Ll}-\\\\n\\\\p{Lu}\";\n    const regexp = `([${replace}])|([${toNormalizeWithNFKC}])|(${HKDiacritics}\\\\n)|(\\\\p{M}+(?:-\\\\n)?)|(${CompoundWord})|(\\\\S-\\\\n)|(${CJK}\\\\n)|(\\\\n)`;\n    if (syllablePositions.length === 0) {\n      normalizationRegex = noSyllablesRegExp = new RegExp(regexp + \"|(\\\\u0000)\", \"gum\");\n    } else {\n      normalizationRegex = withSyllablesRegExp = new RegExp(regexp + `|(${FIRST_CHAR_SYLLABLES_REG_EXP})`, \"gum\");\n    }\n  }\n  const rawDiacriticsPositions = [];\n  while ((m = DIACRITICS_REG_EXP.exec(text)) !== null) {\n    rawDiacriticsPositions.push([m[0].length, m.index]);\n  }\n  let normalized = text.normalize(\"NFD\");\n  const positions = [[0, 0]];\n  let rawDiacriticsIndex = 0;\n  let syllableIndex = 0;\n  let shift = 0;\n  let shiftOrigin = 0;\n  let eol = 0;\n  let hasDiacritics = false;\n  normalized = normalized.replace(normalizationRegex, (match, p1, p2, p3, p4, p5, p6, p7, p8, p9, i) => {\n    i -= shiftOrigin;\n    if (p1) {\n      const replacement = CHARACTERS_TO_NORMALIZE[p1];\n      const jj = replacement.length;\n      for (let j = 1; j < jj; j++) {\n        positions.push([i - shift + j, shift - j]);\n      }\n      shift -= jj - 1;\n      return replacement;\n    }\n    if (p2) {\n      let replacement = NFKC_CHARS_TO_NORMALIZE.get(p2);\n      if (!replacement) {\n        replacement = p2.normalize(\"NFKC\");\n        NFKC_CHARS_TO_NORMALIZE.set(p2, replacement);\n      }\n      const jj = replacement.length;\n      for (let j = 1; j < jj; j++) {\n        positions.push([i - shift + j, shift - j]);\n      }\n      shift -= jj - 1;\n      return replacement;\n    }\n    if (p3) {\n      hasDiacritics = true;\n      if (i + eol === rawDiacriticsPositions[rawDiacriticsIndex]?.[1]) {\n        ++rawDiacriticsIndex;\n      } else {\n        positions.push([i - 1 - shift + 1, shift - 1]);\n        shift -= 1;\n        shiftOrigin += 1;\n      }\n      positions.push([i - shift + 1, shift]);\n      shiftOrigin += 1;\n      eol += 1;\n      return p3.charAt(0);\n    }\n    if (p4) {\n      const hasTrailingDashEOL = p4.endsWith(\"\\n\");\n      const len = hasTrailingDashEOL ? p4.length - 2 : p4.length;\n      hasDiacritics = true;\n      let jj = len;\n      if (i + eol === rawDiacriticsPositions[rawDiacriticsIndex]?.[1]) {\n        jj -= rawDiacriticsPositions[rawDiacriticsIndex][0];\n        ++rawDiacriticsIndex;\n      }\n      for (let j = 1; j <= jj; j++) {\n        positions.push([i - 1 - shift + j, shift - j]);\n      }\n      shift -= jj;\n      shiftOrigin += jj;\n      if (hasTrailingDashEOL) {\n        i += len - 1;\n        positions.push([i - shift + 1, 1 + shift]);\n        shift += 1;\n        shiftOrigin += 1;\n        eol += 1;\n        return p4.slice(0, len);\n      }\n      return p4;\n    }\n    if (p5) {\n      positions.push([i - shift + 3, 1 + shift]);\n      shift += 1;\n      shiftOrigin += 1;\n      eol += 1;\n      return p5.replace(\"\\n\", \"\");\n    }\n    if (p6) {\n      const len = p6.length - 2;\n      positions.push([i - shift + len, 1 + shift]);\n      shift += 1;\n      shiftOrigin += 1;\n      eol += 1;\n      return p6.slice(0, -2);\n    }\n    if (p7) {\n      const len = p7.length - 1;\n      positions.push([i - shift + len, shift]);\n      shiftOrigin += 1;\n      eol += 1;\n      return p7.slice(0, -1);\n    }\n    if (p8) {\n      positions.push([i - shift + 1, shift - 1]);\n      shift -= 1;\n      shiftOrigin += 1;\n      eol += 1;\n      return \" \";\n    }\n    if (i + eol === syllablePositions[syllableIndex]?.[1]) {\n      const newCharLen = syllablePositions[syllableIndex][0] - 1;\n      ++syllableIndex;\n      for (let j = 1; j <= newCharLen; j++) {\n        positions.push([i - (shift - j), shift - j]);\n      }\n      shift -= newCharLen;\n      shiftOrigin += newCharLen;\n    }\n    return p9;\n  });\n  positions.push([normalized.length, shift]);\n  return [normalized, positions, hasDiacritics];\n}\nfunction getOriginalIndex(diffs, pos, len) {\n  if (!diffs) {\n    return [pos, len];\n  }\n  const start = pos;\n  const end = pos + len - 1;\n  let i = binarySearchFirstItem(diffs, x => x[0] >= start);\n  if (diffs[i][0] > start) {\n    --i;\n  }\n  let j = binarySearchFirstItem(diffs, x => x[0] >= end, i);\n  if (diffs[j][0] > end) {\n    --j;\n  }\n  const oldStart = start + diffs[i][1];\n  const oldEnd = end + diffs[j][1];\n  const oldLen = oldEnd + 1 - oldStart;\n  return [oldStart, oldLen];\n}\nclass PDFFindController {\n  #state = null;\n  #updateMatchesCountOnProgress = true;\n  #visitedPagesCount = 0;\n  constructor({\n    linkService,\n    eventBus,\n    updateMatchesCountOnProgress = true\n  }) {\n    this._linkService = linkService;\n    this._eventBus = eventBus;\n    this.#updateMatchesCountOnProgress = updateMatchesCountOnProgress;\n    this.onIsPageVisible = null;\n    this.#reset();\n    eventBus._on(\"find\", this.#onFind.bind(this));\n    eventBus._on(\"findbarclose\", this.#onFindBarClose.bind(this));\n  }\n  get highlightMatches() {\n    return this._highlightMatches;\n  }\n  get pageMatches() {\n    return this._pageMatches;\n  }\n  get pageMatchesLength() {\n    return this._pageMatchesLength;\n  }\n  get selected() {\n    return this._selected;\n  }\n  get state() {\n    return this.#state;\n  }\n  setDocument(pdfDocument) {\n    if (this._pdfDocument) {\n      this.#reset();\n    }\n    if (!pdfDocument) {\n      return;\n    }\n    this._pdfDocument = pdfDocument;\n    this._firstPageCapability.resolve();\n  }\n  #onFind(state) {\n    if (!state) {\n      return;\n    }\n    const pdfDocument = this._pdfDocument;\n    const {\n      type\n    } = state;\n    if (this.#state === null || this.#shouldDirtyMatch(state)) {\n      this._dirtyMatch = true;\n    }\n    this.#state = state;\n    if (type !== \"highlightallchange\") {\n      this.#updateUIState(FindState.PENDING);\n    }\n    this._firstPageCapability.promise.then(() => {\n      if (!this._pdfDocument || pdfDocument && this._pdfDocument !== pdfDocument) {\n        return;\n      }\n      this.#extractText();\n      const findbarClosed = !this._highlightMatches;\n      const pendingTimeout = !!this._findTimeout;\n      if (this._findTimeout) {\n        clearTimeout(this._findTimeout);\n        this._findTimeout = null;\n      }\n      if (!type) {\n        this._findTimeout = setTimeout(() => {\n          this.#nextMatch();\n          this._findTimeout = null;\n        }, FIND_TIMEOUT);\n      } else if (this._dirtyMatch) {\n        this.#nextMatch();\n      } else if (type === \"again\") {\n        this.#nextMatch();\n        if (findbarClosed && this.#state.highlightAll) {\n          this.#updateAllPages();\n        }\n      } else if (type === \"highlightallchange\") {\n        if (pendingTimeout) {\n          this.#nextMatch();\n        } else {\n          this._highlightMatches = true;\n        }\n        this.#updateAllPages();\n      } else {\n        this.#nextMatch();\n      }\n    });\n  }\n  scrollMatchIntoView({\n    element = null,\n    selectedLeft = 0,\n    pageIndex = -1,\n    matchIndex = -1\n  }) {\n    if (!this._scrollMatches || !element) {\n      return;\n    } else if (matchIndex === -1 || matchIndex !== this._selected.matchIdx) {\n      return;\n    } else if (pageIndex === -1 || pageIndex !== this._selected.pageIdx) {\n      return;\n    }\n    this._scrollMatches = false;\n    const spot = {\n      top: MATCH_SCROLL_OFFSET_TOP,\n      left: selectedLeft + MATCH_SCROLL_OFFSET_LEFT\n    };\n    scrollIntoView(element, spot, true);\n  }\n  #reset() {\n    this._highlightMatches = false;\n    this._scrollMatches = false;\n    this._pdfDocument = null;\n    this._pageMatches = [];\n    this._pageMatchesLength = [];\n    this.#visitedPagesCount = 0;\n    this.#state = null;\n    this._selected = {\n      pageIdx: -1,\n      matchIdx: -1\n    };\n    this._offset = {\n      pageIdx: null,\n      matchIdx: null,\n      wrapped: false\n    };\n    this._extractTextPromises = [];\n    this._pageContents = [];\n    this._pageDiffs = [];\n    this._hasDiacritics = [];\n    this._matchesCountTotal = 0;\n    this._pagesToSearch = null;\n    this._pendingFindMatches = new Set();\n    this._resumePageIdx = null;\n    this._dirtyMatch = false;\n    clearTimeout(this._findTimeout);\n    this._findTimeout = null;\n    this._firstPageCapability = Promise.withResolvers();\n  }\n  get #query() {\n    const {\n      query\n    } = this.#state;\n    if (typeof query === \"string\") {\n      if (query !== this._rawQuery) {\n        this._rawQuery = query;\n        [this._normalizedQuery] = normalize(query);\n      }\n      return this._normalizedQuery;\n    }\n    return (query || []).filter(q => !!q).map(q => normalize(q)[0]);\n  }\n  #shouldDirtyMatch(state) {\n    const newQuery = state.query,\n      prevQuery = this.#state.query;\n    const newType = typeof newQuery,\n      prevType = typeof prevQuery;\n    if (newType !== prevType) {\n      return true;\n    }\n    if (newType === \"string\") {\n      if (newQuery !== prevQuery) {\n        return true;\n      }\n    } else if (JSON.stringify(newQuery) !== JSON.stringify(prevQuery)) {\n      return true;\n    }\n    switch (state.type) {\n      case \"again\":\n        const pageNumber = this._selected.pageIdx + 1;\n        const linkService = this._linkService;\n        return pageNumber >= 1 && pageNumber <= linkService.pagesCount && pageNumber !== linkService.page && !(this.onIsPageVisible?.(pageNumber) ?? true);\n      case \"highlightallchange\":\n        return false;\n    }\n    return true;\n  }\n  #isEntireWord(content, startIdx, length) {\n    let match = content.slice(0, startIdx).match(NOT_DIACRITIC_FROM_END_REG_EXP);\n    if (match) {\n      const first = content.charCodeAt(startIdx);\n      const limit = match[1].charCodeAt(0);\n      if (getCharacterType(first) === getCharacterType(limit)) {\n        return false;\n      }\n    }\n    match = content.slice(startIdx + length).match(NOT_DIACRITIC_FROM_START_REG_EXP);\n    if (match) {\n      const last = content.charCodeAt(startIdx + length - 1);\n      const limit = match[1].charCodeAt(0);\n      if (getCharacterType(last) === getCharacterType(limit)) {\n        return false;\n      }\n    }\n    return true;\n  }\n  #convertToRegExpString(query, hasDiacritics) {\n    const {\n      matchDiacritics\n    } = this.#state;\n    let isUnicode = false;\n    query = query.replaceAll(SPECIAL_CHARS_REG_EXP, (match, p1, p2, p3, p4, p5) => {\n      if (p1) {\n        return `[ ]*\\\\${p1}[ ]*`;\n      }\n      if (p2) {\n        return `[ ]*${p2}[ ]*`;\n      }\n      if (p3) {\n        return \"[ ]+\";\n      }\n      if (matchDiacritics) {\n        return p4 || p5;\n      }\n      if (p4) {\n        return DIACRITICS_EXCEPTION.has(p4.charCodeAt(0)) ? p4 : \"\";\n      }\n      if (hasDiacritics) {\n        isUnicode = true;\n        return `${p5}\\\\p{M}*`;\n      }\n      return p5;\n    });\n    const trailingSpaces = \"[ ]*\";\n    if (query.endsWith(trailingSpaces)) {\n      query = query.slice(0, query.length - trailingSpaces.length);\n    }\n    if (matchDiacritics) {\n      if (hasDiacritics) {\n        DIACRITICS_EXCEPTION_STR ||= String.fromCharCode(...DIACRITICS_EXCEPTION);\n        isUnicode = true;\n        query = `${query}(?=[${DIACRITICS_EXCEPTION_STR}]|[^\\\\p{M}]|$)`;\n      }\n    }\n    return [isUnicode, query];\n  }\n  #calculateMatch(pageIndex) {\n    const query = this.#query;\n    if (query.length === 0) {\n      return;\n    }\n    const pageContent = this._pageContents[pageIndex];\n    const matcherResult = this.match(query, pageContent, pageIndex);\n    const matches = this._pageMatches[pageIndex] = [];\n    const matchesLength = this._pageMatchesLength[pageIndex] = [];\n    const diffs = this._pageDiffs[pageIndex];\n    matcherResult?.forEach(({\n      index,\n      length\n    }) => {\n      const [matchPos, matchLen] = getOriginalIndex(diffs, index, length);\n      if (matchLen) {\n        matches.push(matchPos);\n        matchesLength.push(matchLen);\n      }\n    });\n    if (this.#state.highlightAll) {\n      this.#updatePage(pageIndex);\n    }\n    if (this._resumePageIdx === pageIndex) {\n      this._resumePageIdx = null;\n      this.#nextPageMatch();\n    }\n    const pageMatchesCount = matches.length;\n    this._matchesCountTotal += pageMatchesCount;\n    if (this.#updateMatchesCountOnProgress) {\n      if (pageMatchesCount > 0) {\n        this.#updateUIResultsCount();\n      }\n    } else if (++this.#visitedPagesCount === this._linkService.pagesCount) {\n      this.#updateUIResultsCount();\n    }\n  }\n  match(query, pageContent, pageIndex) {\n    const hasDiacritics = this._hasDiacritics[pageIndex];\n    let isUnicode = false;\n    if (typeof query === \"string\") {\n      [isUnicode, query] = this.#convertToRegExpString(query, hasDiacritics);\n    } else {\n      query = query.sort().reverse().map(q => {\n        const [isUnicodePart, queryPart] = this.#convertToRegExpString(q, hasDiacritics);\n        isUnicode ||= isUnicodePart;\n        return `(${queryPart})`;\n      }).join(\"|\");\n    }\n    if (!query) {\n      return undefined;\n    }\n    const {\n      caseSensitive,\n      entireWord\n    } = this.#state;\n    const flags = `g${isUnicode ? \"u\" : \"\"}${caseSensitive ? \"\" : \"i\"}`;\n    query = new RegExp(query, flags);\n    const matches = [];\n    let match;\n    while ((match = query.exec(pageContent)) !== null) {\n      if (entireWord && !this.#isEntireWord(pageContent, match.index, match[0].length)) {\n        continue;\n      }\n      matches.push({\n        index: match.index,\n        length: match[0].length\n      });\n    }\n    return matches;\n  }\n  #extractText() {\n    if (this._extractTextPromises.length > 0) {\n      return;\n    }\n    let deferred = Promise.resolve();\n    const textOptions = {\n      disableNormalization: true\n    };\n    for (let i = 0, ii = this._linkService.pagesCount; i < ii; i++) {\n      const {\n        promise,\n        resolve\n      } = Promise.withResolvers();\n      this._extractTextPromises[i] = promise;\n      deferred = deferred.then(() => {\n        return this._pdfDocument.getPage(i + 1).then(pdfPage => pdfPage.getTextContent(textOptions)).then(textContent => {\n          const strBuf = [];\n          for (const textItem of textContent.items) {\n            strBuf.push(textItem.str);\n            if (textItem.hasEOL) {\n              strBuf.push(\"\\n\");\n            }\n          }\n          [this._pageContents[i], this._pageDiffs[i], this._hasDiacritics[i]] = normalize(strBuf.join(\"\"));\n          resolve();\n        }, reason => {\n          console.error(`Unable to get text content for page ${i + 1}`, reason);\n          this._pageContents[i] = \"\";\n          this._pageDiffs[i] = null;\n          this._hasDiacritics[i] = false;\n          resolve();\n        });\n      });\n    }\n  }\n  #updatePage(index) {\n    if (this._scrollMatches && this._selected.pageIdx === index) {\n      this._linkService.page = index + 1;\n    }\n    this._eventBus.dispatch(\"updatetextlayermatches\", {\n      source: this,\n      pageIndex: index\n    });\n  }\n  #updateAllPages() {\n    this._eventBus.dispatch(\"updatetextlayermatches\", {\n      source: this,\n      pageIndex: -1\n    });\n  }\n  #nextMatch() {\n    const previous = this.#state.findPrevious;\n    const currentPageIndex = this._linkService.page - 1;\n    const numPages = this._linkService.pagesCount;\n    this._highlightMatches = true;\n    if (this._dirtyMatch) {\n      this._dirtyMatch = false;\n      this._selected.pageIdx = this._selected.matchIdx = -1;\n      this._offset.pageIdx = currentPageIndex;\n      this._offset.matchIdx = null;\n      this._offset.wrapped = false;\n      this._resumePageIdx = null;\n      this._pageMatches.length = 0;\n      this._pageMatchesLength.length = 0;\n      this.#visitedPagesCount = 0;\n      this._matchesCountTotal = 0;\n      this.#updateAllPages();\n      for (let i = 0; i < numPages; i++) {\n        if (this._pendingFindMatches.has(i)) {\n          continue;\n        }\n        this._pendingFindMatches.add(i);\n        this._extractTextPromises[i].then(() => {\n          this._pendingFindMatches.delete(i);\n          this.#calculateMatch(i);\n        });\n      }\n    }\n    const query = this.#query;\n    if (query.length === 0) {\n      this.#updateUIState(FindState.FOUND);\n      return;\n    }\n    if (this._resumePageIdx) {\n      return;\n    }\n    const offset = this._offset;\n    this._pagesToSearch = numPages;\n    if (offset.matchIdx !== null) {\n      const numPageMatches = this._pageMatches[offset.pageIdx].length;\n      if (!previous && offset.matchIdx + 1 < numPageMatches || previous && offset.matchIdx > 0) {\n        offset.matchIdx = previous ? offset.matchIdx - 1 : offset.matchIdx + 1;\n        this.#updateMatch(true);\n        return;\n      }\n      this.#advanceOffsetPage(previous);\n    }\n    this.#nextPageMatch();\n  }\n  #matchesReady(matches) {\n    const offset = this._offset;\n    const numMatches = matches.length;\n    const previous = this.#state.findPrevious;\n    if (numMatches) {\n      offset.matchIdx = previous ? numMatches - 1 : 0;\n      this.#updateMatch(true);\n      return true;\n    }\n    this.#advanceOffsetPage(previous);\n    if (offset.wrapped) {\n      offset.matchIdx = null;\n      if (this._pagesToSearch < 0) {\n        this.#updateMatch(false);\n        return true;\n      }\n    }\n    return false;\n  }\n  #nextPageMatch() {\n    if (this._resumePageIdx !== null) {\n      console.error(\"There can only be one pending page.\");\n    }\n    let matches = null;\n    do {\n      const pageIdx = this._offset.pageIdx;\n      matches = this._pageMatches[pageIdx];\n      if (!matches) {\n        this._resumePageIdx = pageIdx;\n        break;\n      }\n    } while (!this.#matchesReady(matches));\n  }\n  #advanceOffsetPage(previous) {\n    const offset = this._offset;\n    const numPages = this._linkService.pagesCount;\n    offset.pageIdx = previous ? offset.pageIdx - 1 : offset.pageIdx + 1;\n    offset.matchIdx = null;\n    this._pagesToSearch--;\n    if (offset.pageIdx >= numPages || offset.pageIdx < 0) {\n      offset.pageIdx = previous ? numPages - 1 : 0;\n      offset.wrapped = true;\n    }\n  }\n  #updateMatch(found = false) {\n    let state = FindState.NOT_FOUND;\n    const wrapped = this._offset.wrapped;\n    this._offset.wrapped = false;\n    if (found) {\n      const previousPage = this._selected.pageIdx;\n      this._selected.pageIdx = this._offset.pageIdx;\n      this._selected.matchIdx = this._offset.matchIdx;\n      state = wrapped ? FindState.WRAPPED : FindState.FOUND;\n      if (previousPage !== -1 && previousPage !== this._selected.pageIdx) {\n        this.#updatePage(previousPage);\n      }\n    }\n    this.#updateUIState(state, this.#state.findPrevious);\n    if (this._selected.pageIdx !== -1) {\n      this._scrollMatches = true;\n      this.#updatePage(this._selected.pageIdx);\n    }\n  }\n  #onFindBarClose(evt) {\n    const pdfDocument = this._pdfDocument;\n    this._firstPageCapability.promise.then(() => {\n      if (!this._pdfDocument || pdfDocument && this._pdfDocument !== pdfDocument) {\n        return;\n      }\n      if (this._findTimeout) {\n        clearTimeout(this._findTimeout);\n        this._findTimeout = null;\n      }\n      if (this._resumePageIdx) {\n        this._resumePageIdx = null;\n        this._dirtyMatch = true;\n      }\n      this.#updateUIState(FindState.FOUND);\n      this._highlightMatches = false;\n      this.#updateAllPages();\n    });\n  }\n  #requestMatchesCount() {\n    const {\n      pageIdx,\n      matchIdx\n    } = this._selected;\n    let current = 0,\n      total = this._matchesCountTotal;\n    if (matchIdx !== -1) {\n      for (let i = 0; i < pageIdx; i++) {\n        current += this._pageMatches[i]?.length || 0;\n      }\n      current += matchIdx + 1;\n    }\n    if (current < 1 || current > total) {\n      current = total = 0;\n    }\n    return {\n      current,\n      total\n    };\n  }\n  #updateUIResultsCount() {\n    this._eventBus.dispatch(\"updatefindmatchescount\", {\n      source: this,\n      matchesCount: this.#requestMatchesCount()\n    });\n  }\n  #updateUIState(state, previous = false) {\n    if (!this.#updateMatchesCountOnProgress && (this.#visitedPagesCount !== this._linkService.pagesCount || state === FindState.PENDING)) {\n      return;\n    }\n    this._eventBus.dispatch(\"updatefindcontrolstate\", {\n      source: this,\n      state,\n      previous,\n      entireWord: this.#state?.entireWord ?? null,\n      matchesCount: this.#requestMatchesCount(),\n      rawQuery: this.#state?.query ?? null\n    });\n  }\n}\n\n;// ./web/pdf_link_service.js\n\nconst DEFAULT_LINK_REL = \"noopener noreferrer nofollow\";\nconst LinkTarget = {\n  NONE: 0,\n  SELF: 1,\n  BLANK: 2,\n  PARENT: 3,\n  TOP: 4\n};\nclass PDFLinkService {\n  externalLinkEnabled = true;\n  constructor({\n    eventBus,\n    externalLinkTarget = null,\n    externalLinkRel = null,\n    ignoreDestinationZoom = false\n  } = {}) {\n    this.eventBus = eventBus;\n    this.externalLinkTarget = externalLinkTarget;\n    this.externalLinkRel = externalLinkRel;\n    this._ignoreDestinationZoom = ignoreDestinationZoom;\n    this.baseUrl = null;\n    this.pdfDocument = null;\n    this.pdfViewer = null;\n    this.pdfHistory = null;\n  }\n  setDocument(pdfDocument, baseUrl = null) {\n    this.baseUrl = baseUrl;\n    this.pdfDocument = pdfDocument;\n  }\n  setViewer(pdfViewer) {\n    this.pdfViewer = pdfViewer;\n  }\n  setHistory(pdfHistory) {\n    this.pdfHistory = pdfHistory;\n  }\n  get pagesCount() {\n    return this.pdfDocument ? this.pdfDocument.numPages : 0;\n  }\n  get page() {\n    return this.pdfDocument ? this.pdfViewer.currentPageNumber : 1;\n  }\n  set page(value) {\n    if (this.pdfDocument) {\n      this.pdfViewer.currentPageNumber = value;\n    }\n  }\n  get rotation() {\n    return this.pdfDocument ? this.pdfViewer.pagesRotation : 0;\n  }\n  set rotation(value) {\n    if (this.pdfDocument) {\n      this.pdfViewer.pagesRotation = value;\n    }\n  }\n  get isInPresentationMode() {\n    return this.pdfDocument ? this.pdfViewer.isInPresentationMode : false;\n  }\n  async goToDestination(dest) {\n    if (!this.pdfDocument) {\n      return;\n    }\n    let namedDest, explicitDest, pageNumber;\n    if (typeof dest === \"string\") {\n      namedDest = dest;\n      explicitDest = await this.pdfDocument.getDestination(dest);\n    } else {\n      namedDest = null;\n      explicitDest = await dest;\n    }\n    if (!Array.isArray(explicitDest)) {\n      console.error(`goToDestination: \"${explicitDest}\" is not a valid destination array, for dest=\"${dest}\".`);\n      return;\n    }\n    const [destRef] = explicitDest;\n    if (destRef && typeof destRef === \"object\") {\n      pageNumber = this.pdfDocument.cachedPageNumber(destRef);\n      if (!pageNumber) {\n        try {\n          pageNumber = (await this.pdfDocument.getPageIndex(destRef)) + 1;\n        } catch {\n          console.error(`goToDestination: \"${destRef}\" is not a valid page reference, for dest=\"${dest}\".`);\n          return;\n        }\n      }\n    } else if (Number.isInteger(destRef)) {\n      pageNumber = destRef + 1;\n    }\n    if (!pageNumber || pageNumber < 1 || pageNumber > this.pagesCount) {\n      console.error(`goToDestination: \"${pageNumber}\" is not a valid page number, for dest=\"${dest}\".`);\n      return;\n    }\n    if (this.pdfHistory) {\n      this.pdfHistory.pushCurrentPosition();\n      this.pdfHistory.push({\n        namedDest,\n        explicitDest,\n        pageNumber\n      });\n    }\n    this.pdfViewer.scrollPageIntoView({\n      pageNumber,\n      destArray: explicitDest,\n      ignoreDestinationZoom: this._ignoreDestinationZoom\n    });\n  }\n  goToPage(val) {\n    if (!this.pdfDocument) {\n      return;\n    }\n    const pageNumber = typeof val === \"string\" && this.pdfViewer.pageLabelToPageNumber(val) || val | 0;\n    if (!(Number.isInteger(pageNumber) && pageNumber > 0 && pageNumber <= this.pagesCount)) {\n      console.error(`PDFLinkService.goToPage: \"${val}\" is not a valid page.`);\n      return;\n    }\n    if (this.pdfHistory) {\n      this.pdfHistory.pushCurrentPosition();\n      this.pdfHistory.pushPage(pageNumber);\n    }\n    this.pdfViewer.scrollPageIntoView({\n      pageNumber\n    });\n  }\n  addLinkAttributes(link, url, newWindow = false) {\n    if (!url || typeof url !== \"string\") {\n      throw new Error('A valid \"url\" parameter must provided.');\n    }\n    const target = newWindow ? LinkTarget.BLANK : this.externalLinkTarget,\n      rel = this.externalLinkRel;\n    if (this.externalLinkEnabled) {\n      link.href = link.title = url;\n    } else {\n      link.href = \"\";\n      link.title = `Disabled: ${url}`;\n      link.onclick = () => false;\n    }\n    let targetStr = \"\";\n    switch (target) {\n      case LinkTarget.NONE:\n        break;\n      case LinkTarget.SELF:\n        targetStr = \"_self\";\n        break;\n      case LinkTarget.BLANK:\n        targetStr = \"_blank\";\n        break;\n      case LinkTarget.PARENT:\n        targetStr = \"_parent\";\n        break;\n      case LinkTarget.TOP:\n        targetStr = \"_top\";\n        break;\n    }\n    link.target = targetStr;\n    link.rel = typeof rel === \"string\" ? rel : DEFAULT_LINK_REL;\n  }\n  getDestinationHash(dest) {\n    if (typeof dest === \"string\") {\n      if (dest.length > 0) {\n        return this.getAnchorUrl(\"#\" + escape(dest));\n      }\n    } else if (Array.isArray(dest)) {\n      const str = JSON.stringify(dest);\n      if (str.length > 0) {\n        return this.getAnchorUrl(\"#\" + escape(str));\n      }\n    }\n    return this.getAnchorUrl(\"\");\n  }\n  getAnchorUrl(anchor) {\n    return this.baseUrl ? this.baseUrl + anchor : anchor;\n  }\n  setHash(hash) {\n    if (!this.pdfDocument) {\n      return;\n    }\n    let pageNumber, dest;\n    if (hash.includes(\"=\")) {\n      const params = parseQueryString(hash);\n      if (params.has(\"search\")) {\n        const query = params.get(\"search\").replaceAll('\"', \"\"),\n          phrase = params.get(\"phrase\") === \"true\";\n        this.eventBus.dispatch(\"findfromurlhash\", {\n          source: this,\n          query: phrase ? query : query.match(/\\S+/g)\n        });\n      }\n      if (params.has(\"page\")) {\n        pageNumber = params.get(\"page\") | 0 || 1;\n      }\n      if (params.has(\"zoom\")) {\n        const zoomArgs = params.get(\"zoom\").split(\",\");\n        const zoomArg = zoomArgs[0];\n        const zoomArgNumber = parseFloat(zoomArg);\n        if (!zoomArg.includes(\"Fit\")) {\n          dest = [null, {\n            name: \"XYZ\"\n          }, zoomArgs.length > 1 ? zoomArgs[1] | 0 : null, zoomArgs.length > 2 ? zoomArgs[2] | 0 : null, zoomArgNumber ? zoomArgNumber / 100 : zoomArg];\n        } else if (zoomArg === \"Fit\" || zoomArg === \"FitB\") {\n          dest = [null, {\n            name: zoomArg\n          }];\n        } else if (zoomArg === \"FitH\" || zoomArg === \"FitBH\" || zoomArg === \"FitV\" || zoomArg === \"FitBV\") {\n          dest = [null, {\n            name: zoomArg\n          }, zoomArgs.length > 1 ? zoomArgs[1] | 0 : null];\n        } else if (zoomArg === \"FitR\") {\n          if (zoomArgs.length !== 5) {\n            console.error('PDFLinkService.setHash: Not enough parameters for \"FitR\".');\n          } else {\n            dest = [null, {\n              name: zoomArg\n            }, zoomArgs[1] | 0, zoomArgs[2] | 0, zoomArgs[3] | 0, zoomArgs[4] | 0];\n          }\n        } else {\n          console.error(`PDFLinkService.setHash: \"${zoomArg}\" is not a valid zoom value.`);\n        }\n      }\n      if (dest) {\n        this.pdfViewer.scrollPageIntoView({\n          pageNumber: pageNumber || this.page,\n          destArray: dest,\n          allowNegativeOffset: true\n        });\n      } else if (pageNumber) {\n        this.page = pageNumber;\n      }\n      if (params.has(\"pagemode\")) {\n        this.eventBus.dispatch(\"pagemode\", {\n          source: this,\n          mode: params.get(\"pagemode\")\n        });\n      }\n      if (params.has(\"nameddest\")) {\n        this.goToDestination(params.get(\"nameddest\"));\n      }\n      return;\n    }\n    dest = unescape(hash);\n    try {\n      dest = JSON.parse(dest);\n      if (!Array.isArray(dest)) {\n        dest = dest.toString();\n      }\n    } catch {}\n    if (typeof dest === \"string\" || PDFLinkService.#isValidExplicitDest(dest)) {\n      this.goToDestination(dest);\n      return;\n    }\n    console.error(`PDFLinkService.setHash: \"${unescape(hash)}\" is not a valid destination.`);\n  }\n  executeNamedAction(action) {\n    if (!this.pdfDocument) {\n      return;\n    }\n    switch (action) {\n      case \"GoBack\":\n        this.pdfHistory?.back();\n        break;\n      case \"GoForward\":\n        this.pdfHistory?.forward();\n        break;\n      case \"NextPage\":\n        this.pdfViewer.nextPage();\n        break;\n      case \"PrevPage\":\n        this.pdfViewer.previousPage();\n        break;\n      case \"LastPage\":\n        this.page = this.pagesCount;\n        break;\n      case \"FirstPage\":\n        this.page = 1;\n        break;\n      default:\n        break;\n    }\n    this.eventBus.dispatch(\"namedaction\", {\n      source: this,\n      action\n    });\n  }\n  async executeSetOCGState(action) {\n    if (!this.pdfDocument) {\n      return;\n    }\n    const pdfDocument = this.pdfDocument,\n      optionalContentConfig = await this.pdfViewer.optionalContentConfigPromise;\n    if (pdfDocument !== this.pdfDocument) {\n      return;\n    }\n    optionalContentConfig.setOCGState(action);\n    this.pdfViewer.optionalContentConfigPromise = Promise.resolve(optionalContentConfig);\n  }\n  static #isValidExplicitDest(dest) {\n    if (!Array.isArray(dest) || dest.length < 2) {\n      return false;\n    }\n    const [page, zoom, ...args] = dest;\n    if (!(typeof page === \"object\" && Number.isInteger(page?.num) && Number.isInteger(page?.gen)) && !Number.isInteger(page)) {\n      return false;\n    }\n    if (!(typeof zoom === \"object\" && typeof zoom?.name === \"string\")) {\n      return false;\n    }\n    const argsLen = args.length;\n    let allowNull = true;\n    switch (zoom.name) {\n      case \"XYZ\":\n        if (argsLen < 2 || argsLen > 3) {\n          return false;\n        }\n        break;\n      case \"Fit\":\n      case \"FitB\":\n        return argsLen === 0;\n      case \"FitH\":\n      case \"FitBH\":\n      case \"FitV\":\n      case \"FitBV\":\n        if (argsLen > 1) {\n          return false;\n        }\n        break;\n      case \"FitR\":\n        if (argsLen !== 4) {\n          return false;\n        }\n        allowNull = false;\n        break;\n      default:\n        return false;\n    }\n    for (const arg of args) {\n      if (!(typeof arg === \"number\" || allowNull && arg === null)) {\n        return false;\n      }\n    }\n    return true;\n  }\n}\nclass SimpleLinkService extends PDFLinkService {\n  setDocument(pdfDocument, baseUrl = null) {}\n}\n\n;// ./web/pdfjs.js\nconst {\n  AbortException,\n  AnnotationEditorLayer,\n  AnnotationEditorParamsType,\n  AnnotationEditorType,\n  AnnotationEditorUIManager,\n  AnnotationLayer,\n  AnnotationMode,\n  build,\n  ColorPicker,\n  createValidAbsoluteUrl,\n  DOMSVGFactory,\n  DrawLayer,\n  FeatureTest,\n  fetchData,\n  getDocument,\n  getFilenameFromUrl,\n  getPdfFilenameFromUrl,\n  getXfaPageViewport,\n  GlobalWorkerOptions,\n  ImageKind,\n  InvalidPDFException,\n  isDataScheme,\n  isPdfFile,\n  MissingPDFException,\n  noContextMenu,\n  normalizeUnicode,\n  OPS,\n  OutputScale,\n  PasswordResponses,\n  PDFDataRangeTransport,\n  PDFDateString,\n  PDFWorker,\n  PermissionFlag,\n  PixelsPerInch,\n  RenderingCancelledException,\n  setLayerDimensions,\n  shadow,\n  TextLayer,\n  UnexpectedResponseException,\n  Util,\n  VerbosityLevel,\n  version,\n  XfaLayer\n} = globalThis.pdfjsLib;\n\n;// ./web/annotation_layer_builder.js\n\n\nclass AnnotationLayerBuilder {\n  #onAppend = null;\n  #eventAbortController = null;\n  constructor({\n    pdfPage,\n    linkService,\n    downloadManager,\n    annotationStorage = null,\n    imageResourcesPath = \"\",\n    renderForms = true,\n    enableScripting = false,\n    hasJSActionsPromise = null,\n    fieldObjectsPromise = null,\n    annotationCanvasMap = null,\n    accessibilityManager = null,\n    annotationEditorUIManager = null,\n    onAppend = null\n  }) {\n    this.pdfPage = pdfPage;\n    this.linkService = linkService;\n    this.downloadManager = downloadManager;\n    this.imageResourcesPath = imageResourcesPath;\n    this.renderForms = renderForms;\n    this.annotationStorage = annotationStorage;\n    this.enableScripting = enableScripting;\n    this._hasJSActionsPromise = hasJSActionsPromise || Promise.resolve(false);\n    this._fieldObjectsPromise = fieldObjectsPromise || Promise.resolve(null);\n    this._annotationCanvasMap = annotationCanvasMap;\n    this._accessibilityManager = accessibilityManager;\n    this._annotationEditorUIManager = annotationEditorUIManager;\n    this.#onAppend = onAppend;\n    this.annotationLayer = null;\n    this.div = null;\n    this._cancelled = false;\n    this._eventBus = linkService.eventBus;\n  }\n  async render(viewport, options, intent = \"display\") {\n    if (this.div) {\n      if (this._cancelled || !this.annotationLayer) {\n        return;\n      }\n      this.annotationLayer.update({\n        viewport: viewport.clone({\n          dontFlip: true\n        })\n      });\n      return;\n    }\n    const [annotations, hasJSActions, fieldObjects] = await Promise.all([this.pdfPage.getAnnotations({\n      intent\n    }), this._hasJSActionsPromise, this._fieldObjectsPromise]);\n    if (this._cancelled) {\n      return;\n    }\n    const div = this.div = document.createElement(\"div\");\n    div.className = \"annotationLayer\";\n    this.#onAppend?.(div);\n    if (annotations.length === 0) {\n      this.hide();\n      return;\n    }\n    this.annotationLayer = new AnnotationLayer({\n      div,\n      accessibilityManager: this._accessibilityManager,\n      annotationCanvasMap: this._annotationCanvasMap,\n      annotationEditorUIManager: this._annotationEditorUIManager,\n      page: this.pdfPage,\n      viewport: viewport.clone({\n        dontFlip: true\n      }),\n      structTreeLayer: options?.structTreeLayer || null\n    });\n    await this.annotationLayer.render({\n      annotations,\n      imageResourcesPath: this.imageResourcesPath,\n      renderForms: this.renderForms,\n      linkService: this.linkService,\n      downloadManager: this.downloadManager,\n      annotationStorage: this.annotationStorage,\n      enableScripting: this.enableScripting,\n      hasJSActions,\n      fieldObjects\n    });\n    if (this.linkService.isInPresentationMode) {\n      this.#updatePresentationModeState(PresentationModeState.FULLSCREEN);\n    }\n    if (!this.#eventAbortController) {\n      this.#eventAbortController = new AbortController();\n      this._eventBus?._on(\"presentationmodechanged\", evt => {\n        this.#updatePresentationModeState(evt.state);\n      }, {\n        signal: this.#eventAbortController.signal\n      });\n    }\n  }\n  cancel() {\n    this._cancelled = true;\n    this.#eventAbortController?.abort();\n    this.#eventAbortController = null;\n  }\n  hide() {\n    if (!this.div) {\n      return;\n    }\n    this.div.hidden = true;\n  }\n  hasEditableAnnotations() {\n    return !!this.annotationLayer?.hasEditableAnnotations();\n  }\n  #updatePresentationModeState(state) {\n    if (!this.div) {\n      return;\n    }\n    let disableFormElements = false;\n    switch (state) {\n      case PresentationModeState.FULLSCREEN:\n        disableFormElements = true;\n        break;\n      case PresentationModeState.NORMAL:\n        break;\n      default:\n        return;\n    }\n    for (const section of this.div.childNodes) {\n      if (section.hasAttribute(\"data-internal-link\")) {\n        continue;\n      }\n      section.inert = disableFormElements;\n    }\n  }\n}\n\n;// ./web/download_manager.js\n\nfunction download(blobUrl, filename) {\n  const a = document.createElement(\"a\");\n  if (!a.click) {\n    throw new Error('DownloadManager: \"a.click()\" is not supported.');\n  }\n  a.href = blobUrl;\n  a.target = \"_parent\";\n  if (\"download\" in a) {\n    a.download = filename;\n  }\n  (document.body || document.documentElement).append(a);\n  a.click();\n  a.remove();\n}\nclass DownloadManager {\n  #openBlobUrls = new WeakMap();\n  downloadData(data, filename, contentType) {\n    const blobUrl = URL.createObjectURL(new Blob([data], {\n      type: contentType\n    }));\n    download(blobUrl, filename);\n  }\n  openOrDownloadData(data, filename, dest = null) {\n    const isPdfData = isPdfFile(filename);\n    const contentType = isPdfData ? \"application/pdf\" : \"\";\n    this.downloadData(data, filename, contentType);\n    return false;\n  }\n  download(data, url, filename) {\n    let blobUrl;\n    if (data) {\n      blobUrl = URL.createObjectURL(new Blob([data], {\n        type: \"application/pdf\"\n      }));\n    } else {\n      if (!createValidAbsoluteUrl(url, \"http://example.com\")) {\n        console.error(`download - not a valid URL: ${url}`);\n        return;\n      }\n      blobUrl = url + \"#pdfjs.action=download\";\n    }\n    download(blobUrl, filename);\n  }\n}\n\n;// ./web/event_utils.js\nconst WaitOnType = {\n  EVENT: \"event\",\n  TIMEOUT: \"timeout\"\n};\nasync function waitOnEventOrTimeout({\n  target,\n  name,\n  delay = 0\n}) {\n  if (typeof target !== \"object\" || !(name && typeof name === \"string\") || !(Number.isInteger(delay) && delay >= 0)) {\n    throw new Error(\"waitOnEventOrTimeout - invalid parameters.\");\n  }\n  const {\n    promise,\n    resolve\n  } = Promise.withResolvers();\n  const ac = new AbortController();\n  function handler(type) {\n    ac.abort();\n    clearTimeout(timeout);\n    resolve(type);\n  }\n  const evtMethod = target instanceof EventBus ? \"_on\" : \"addEventListener\";\n  target[evtMethod](name, handler.bind(null, WaitOnType.EVENT), {\n    signal: ac.signal\n  });\n  const timeout = setTimeout(handler.bind(null, WaitOnType.TIMEOUT), delay);\n  return promise;\n}\nclass EventBus {\n  #listeners = Object.create(null);\n  on(eventName, listener, options = null) {\n    this._on(eventName, listener, {\n      external: true,\n      once: options?.once,\n      signal: options?.signal\n    });\n  }\n  off(eventName, listener, options = null) {\n    this._off(eventName, listener);\n  }\n  dispatch(eventName, data) {\n    const eventListeners = this.#listeners[eventName];\n    if (!eventListeners || eventListeners.length === 0) {\n      return;\n    }\n    let externalListeners;\n    for (const {\n      listener,\n      external,\n      once\n    } of eventListeners.slice(0)) {\n      if (once) {\n        this._off(eventName, listener);\n      }\n      if (external) {\n        (externalListeners ||= []).push(listener);\n        continue;\n      }\n      listener(data);\n    }\n    if (externalListeners) {\n      for (const listener of externalListeners) {\n        listener(data);\n      }\n      externalListeners = null;\n    }\n  }\n  _on(eventName, listener, options = null) {\n    let rmAbort = null;\n    if (options?.signal instanceof AbortSignal) {\n      const {\n        signal\n      } = options;\n      if (signal.aborted) {\n        console.error(\"Cannot use an `aborted` signal.\");\n        return;\n      }\n      const onAbort = () => this._off(eventName, listener);\n      rmAbort = () => signal.removeEventListener(\"abort\", onAbort);\n      signal.addEventListener(\"abort\", onAbort);\n    }\n    const eventListeners = this.#listeners[eventName] ||= [];\n    eventListeners.push({\n      listener,\n      external: options?.external === true,\n      once: options?.once === true,\n      rmAbort\n    });\n  }\n  _off(eventName, listener, options = null) {\n    const eventListeners = this.#listeners[eventName];\n    if (!eventListeners) {\n      return;\n    }\n    for (let i = 0, ii = eventListeners.length; i < ii; i++) {\n      const evt = eventListeners[i];\n      if (evt.listener === listener) {\n        evt.rmAbort?.();\n        eventListeners.splice(i, 1);\n        return;\n      }\n    }\n  }\n}\nclass FirefoxEventBus extends EventBus {\n  #externalServices;\n  #globalEventNames;\n  #isInAutomation;\n  constructor(globalEventNames, externalServices, isInAutomation) {\n    super();\n    this.#globalEventNames = globalEventNames;\n    this.#externalServices = externalServices;\n    this.#isInAutomation = isInAutomation;\n  }\n  dispatch(eventName, data) {\n    throw new Error(\"Not implemented: FirefoxEventBus.dispatch\");\n  }\n}\n\n;// ./node_modules/@fluent/bundle/esm/types.js\nclass FluentType {\n  constructor(value) {\n    this.value = value;\n  }\n  valueOf() {\n    return this.value;\n  }\n}\nclass FluentNone extends FluentType {\n  constructor(value = \"???\") {\n    super(value);\n  }\n  toString(scope) {\n    return `{${this.value}}`;\n  }\n}\nclass FluentNumber extends FluentType {\n  constructor(value, opts = {}) {\n    super(value);\n    this.opts = opts;\n  }\n  toString(scope) {\n    try {\n      const nf = scope.memoizeIntlObject(Intl.NumberFormat, this.opts);\n      return nf.format(this.value);\n    } catch (err) {\n      scope.reportError(err);\n      return this.value.toString(10);\n    }\n  }\n}\nclass FluentDateTime extends FluentType {\n  constructor(value, opts = {}) {\n    super(value);\n    this.opts = opts;\n  }\n  toString(scope) {\n    try {\n      const dtf = scope.memoizeIntlObject(Intl.DateTimeFormat, this.opts);\n      return dtf.format(this.value);\n    } catch (err) {\n      scope.reportError(err);\n      return new Date(this.value).toISOString();\n    }\n  }\n}\n;// ./node_modules/@fluent/bundle/esm/resolver.js\n\nconst MAX_PLACEABLES = 100;\nconst FSI = \"\\u2068\";\nconst PDI = \"\\u2069\";\nfunction match(scope, selector, key) {\n  if (key === selector) {\n    return true;\n  }\n  if (key instanceof FluentNumber && selector instanceof FluentNumber && key.value === selector.value) {\n    return true;\n  }\n  if (selector instanceof FluentNumber && typeof key === \"string\") {\n    let category = scope.memoizeIntlObject(Intl.PluralRules, selector.opts).select(selector.value);\n    if (key === category) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction getDefault(scope, variants, star) {\n  if (variants[star]) {\n    return resolvePattern(scope, variants[star].value);\n  }\n  scope.reportError(new RangeError(\"No default\"));\n  return new FluentNone();\n}\nfunction getArguments(scope, args) {\n  const positional = [];\n  const named = Object.create(null);\n  for (const arg of args) {\n    if (arg.type === \"narg\") {\n      named[arg.name] = resolveExpression(scope, arg.value);\n    } else {\n      positional.push(resolveExpression(scope, arg));\n    }\n  }\n  return {\n    positional,\n    named\n  };\n}\nfunction resolveExpression(scope, expr) {\n  switch (expr.type) {\n    case \"str\":\n      return expr.value;\n    case \"num\":\n      return new FluentNumber(expr.value, {\n        minimumFractionDigits: expr.precision\n      });\n    case \"var\":\n      return resolveVariableReference(scope, expr);\n    case \"mesg\":\n      return resolveMessageReference(scope, expr);\n    case \"term\":\n      return resolveTermReference(scope, expr);\n    case \"func\":\n      return resolveFunctionReference(scope, expr);\n    case \"select\":\n      return resolveSelectExpression(scope, expr);\n    default:\n      return new FluentNone();\n  }\n}\nfunction resolveVariableReference(scope, {\n  name\n}) {\n  let arg;\n  if (scope.params) {\n    if (Object.prototype.hasOwnProperty.call(scope.params, name)) {\n      arg = scope.params[name];\n    } else {\n      return new FluentNone(`$${name}`);\n    }\n  } else if (scope.args && Object.prototype.hasOwnProperty.call(scope.args, name)) {\n    arg = scope.args[name];\n  } else {\n    scope.reportError(new ReferenceError(`Unknown variable: $${name}`));\n    return new FluentNone(`$${name}`);\n  }\n  if (arg instanceof FluentType) {\n    return arg;\n  }\n  switch (typeof arg) {\n    case \"string\":\n      return arg;\n    case \"number\":\n      return new FluentNumber(arg);\n    case \"object\":\n      if (arg instanceof Date) {\n        return new FluentDateTime(arg.getTime());\n      }\n    default:\n      scope.reportError(new TypeError(`Variable type not supported: $${name}, ${typeof arg}`));\n      return new FluentNone(`$${name}`);\n  }\n}\nfunction resolveMessageReference(scope, {\n  name,\n  attr\n}) {\n  const message = scope.bundle._messages.get(name);\n  if (!message) {\n    scope.reportError(new ReferenceError(`Unknown message: ${name}`));\n    return new FluentNone(name);\n  }\n  if (attr) {\n    const attribute = message.attributes[attr];\n    if (attribute) {\n      return resolvePattern(scope, attribute);\n    }\n    scope.reportError(new ReferenceError(`Unknown attribute: ${attr}`));\n    return new FluentNone(`${name}.${attr}`);\n  }\n  if (message.value) {\n    return resolvePattern(scope, message.value);\n  }\n  scope.reportError(new ReferenceError(`No value: ${name}`));\n  return new FluentNone(name);\n}\nfunction resolveTermReference(scope, {\n  name,\n  attr,\n  args\n}) {\n  const id = `-${name}`;\n  const term = scope.bundle._terms.get(id);\n  if (!term) {\n    scope.reportError(new ReferenceError(`Unknown term: ${id}`));\n    return new FluentNone(id);\n  }\n  if (attr) {\n    const attribute = term.attributes[attr];\n    if (attribute) {\n      scope.params = getArguments(scope, args).named;\n      const resolved = resolvePattern(scope, attribute);\n      scope.params = null;\n      return resolved;\n    }\n    scope.reportError(new ReferenceError(`Unknown attribute: ${attr}`));\n    return new FluentNone(`${id}.${attr}`);\n  }\n  scope.params = getArguments(scope, args).named;\n  const resolved = resolvePattern(scope, term.value);\n  scope.params = null;\n  return resolved;\n}\nfunction resolveFunctionReference(scope, {\n  name,\n  args\n}) {\n  let func = scope.bundle._functions[name];\n  if (!func) {\n    scope.reportError(new ReferenceError(`Unknown function: ${name}()`));\n    return new FluentNone(`${name}()`);\n  }\n  if (typeof func !== \"function\") {\n    scope.reportError(new TypeError(`Function ${name}() is not callable`));\n    return new FluentNone(`${name}()`);\n  }\n  try {\n    let resolved = getArguments(scope, args);\n    return func(resolved.positional, resolved.named);\n  } catch (err) {\n    scope.reportError(err);\n    return new FluentNone(`${name}()`);\n  }\n}\nfunction resolveSelectExpression(scope, {\n  selector,\n  variants,\n  star\n}) {\n  let sel = resolveExpression(scope, selector);\n  if (sel instanceof FluentNone) {\n    return getDefault(scope, variants, star);\n  }\n  for (const variant of variants) {\n    const key = resolveExpression(scope, variant.key);\n    if (match(scope, sel, key)) {\n      return resolvePattern(scope, variant.value);\n    }\n  }\n  return getDefault(scope, variants, star);\n}\nfunction resolveComplexPattern(scope, ptn) {\n  if (scope.dirty.has(ptn)) {\n    scope.reportError(new RangeError(\"Cyclic reference\"));\n    return new FluentNone();\n  }\n  scope.dirty.add(ptn);\n  const result = [];\n  const useIsolating = scope.bundle._useIsolating && ptn.length > 1;\n  for (const elem of ptn) {\n    if (typeof elem === \"string\") {\n      result.push(scope.bundle._transform(elem));\n      continue;\n    }\n    scope.placeables++;\n    if (scope.placeables > MAX_PLACEABLES) {\n      scope.dirty.delete(ptn);\n      throw new RangeError(`Too many placeables expanded: ${scope.placeables}, ` + `max allowed is ${MAX_PLACEABLES}`);\n    }\n    if (useIsolating) {\n      result.push(FSI);\n    }\n    result.push(resolveExpression(scope, elem).toString(scope));\n    if (useIsolating) {\n      result.push(PDI);\n    }\n  }\n  scope.dirty.delete(ptn);\n  return result.join(\"\");\n}\nfunction resolvePattern(scope, value) {\n  if (typeof value === \"string\") {\n    return scope.bundle._transform(value);\n  }\n  return resolveComplexPattern(scope, value);\n}\n;// ./node_modules/@fluent/bundle/esm/scope.js\nclass Scope {\n  constructor(bundle, errors, args) {\n    this.dirty = new WeakSet();\n    this.params = null;\n    this.placeables = 0;\n    this.bundle = bundle;\n    this.errors = errors;\n    this.args = args;\n  }\n  reportError(error) {\n    if (!this.errors || !(error instanceof Error)) {\n      throw error;\n    }\n    this.errors.push(error);\n  }\n  memoizeIntlObject(ctor, opts) {\n    let cache = this.bundle._intls.get(ctor);\n    if (!cache) {\n      cache = {};\n      this.bundle._intls.set(ctor, cache);\n    }\n    let id = JSON.stringify(opts);\n    if (!cache[id]) {\n      cache[id] = new ctor(this.bundle.locales, opts);\n    }\n    return cache[id];\n  }\n}\n;// ./node_modules/@fluent/bundle/esm/builtins.js\n\nfunction values(opts, allowed) {\n  const unwrapped = Object.create(null);\n  for (const [name, opt] of Object.entries(opts)) {\n    if (allowed.includes(name)) {\n      unwrapped[name] = opt.valueOf();\n    }\n  }\n  return unwrapped;\n}\nconst NUMBER_ALLOWED = [\"unitDisplay\", \"currencyDisplay\", \"useGrouping\", \"minimumIntegerDigits\", \"minimumFractionDigits\", \"maximumFractionDigits\", \"minimumSignificantDigits\", \"maximumSignificantDigits\"];\nfunction NUMBER(args, opts) {\n  let arg = args[0];\n  if (arg instanceof FluentNone) {\n    return new FluentNone(`NUMBER(${arg.valueOf()})`);\n  }\n  if (arg instanceof FluentNumber) {\n    return new FluentNumber(arg.valueOf(), {\n      ...arg.opts,\n      ...values(opts, NUMBER_ALLOWED)\n    });\n  }\n  if (arg instanceof FluentDateTime) {\n    return new FluentNumber(arg.valueOf(), {\n      ...values(opts, NUMBER_ALLOWED)\n    });\n  }\n  throw new TypeError(\"Invalid argument to NUMBER\");\n}\nconst DATETIME_ALLOWED = [\"dateStyle\", \"timeStyle\", \"fractionalSecondDigits\", \"dayPeriod\", \"hour12\", \"weekday\", \"era\", \"year\", \"month\", \"day\", \"hour\", \"minute\", \"second\", \"timeZoneName\"];\nfunction DATETIME(args, opts) {\n  let arg = args[0];\n  if (arg instanceof FluentNone) {\n    return new FluentNone(`DATETIME(${arg.valueOf()})`);\n  }\n  if (arg instanceof FluentDateTime) {\n    return new FluentDateTime(arg.valueOf(), {\n      ...arg.opts,\n      ...values(opts, DATETIME_ALLOWED)\n    });\n  }\n  if (arg instanceof FluentNumber) {\n    return new FluentDateTime(arg.valueOf(), {\n      ...values(opts, DATETIME_ALLOWED)\n    });\n  }\n  throw new TypeError(\"Invalid argument to DATETIME\");\n}\n;// ./node_modules/@fluent/bundle/esm/memoizer.js\nconst cache = new Map();\nfunction getMemoizerForLocale(locales) {\n  const stringLocale = Array.isArray(locales) ? locales.join(\" \") : locales;\n  let memoizer = cache.get(stringLocale);\n  if (memoizer === undefined) {\n    memoizer = new Map();\n    cache.set(stringLocale, memoizer);\n  }\n  return memoizer;\n}\n;// ./node_modules/@fluent/bundle/esm/bundle.js\n\n\n\n\n\nclass FluentBundle {\n  constructor(locales, {\n    functions,\n    useIsolating = true,\n    transform = v => v\n  } = {}) {\n    this._terms = new Map();\n    this._messages = new Map();\n    this.locales = Array.isArray(locales) ? locales : [locales];\n    this._functions = {\n      NUMBER: NUMBER,\n      DATETIME: DATETIME,\n      ...functions\n    };\n    this._useIsolating = useIsolating;\n    this._transform = transform;\n    this._intls = getMemoizerForLocale(locales);\n  }\n  hasMessage(id) {\n    return this._messages.has(id);\n  }\n  getMessage(id) {\n    return this._messages.get(id);\n  }\n  addResource(res, {\n    allowOverrides = false\n  } = {}) {\n    const errors = [];\n    for (let i = 0; i < res.body.length; i++) {\n      let entry = res.body[i];\n      if (entry.id.startsWith(\"-\")) {\n        if (allowOverrides === false && this._terms.has(entry.id)) {\n          errors.push(new Error(`Attempt to override an existing term: \"${entry.id}\"`));\n          continue;\n        }\n        this._terms.set(entry.id, entry);\n      } else {\n        if (allowOverrides === false && this._messages.has(entry.id)) {\n          errors.push(new Error(`Attempt to override an existing message: \"${entry.id}\"`));\n          continue;\n        }\n        this._messages.set(entry.id, entry);\n      }\n    }\n    return errors;\n  }\n  formatPattern(pattern, args = null, errors = null) {\n    if (typeof pattern === \"string\") {\n      return this._transform(pattern);\n    }\n    let scope = new Scope(this, errors, args);\n    try {\n      let value = resolveComplexPattern(scope, pattern);\n      return value.toString(scope);\n    } catch (err) {\n      if (scope.errors && err instanceof Error) {\n        scope.errors.push(err);\n        return new FluentNone().toString(scope);\n      }\n      throw err;\n    }\n  }\n}\n;// ./node_modules/@fluent/bundle/esm/resource.js\nconst RE_MESSAGE_START = /^(-?[a-zA-Z][\\w-]*) *= */gm;\nconst RE_ATTRIBUTE_START = /\\.([a-zA-Z][\\w-]*) *= */y;\nconst RE_VARIANT_START = /\\*?\\[/y;\nconst RE_NUMBER_LITERAL = /(-?[0-9]+(?:\\.([0-9]+))?)/y;\nconst RE_IDENTIFIER = /([a-zA-Z][\\w-]*)/y;\nconst RE_REFERENCE = /([$-])?([a-zA-Z][\\w-]*)(?:\\.([a-zA-Z][\\w-]*))?/y;\nconst RE_FUNCTION_NAME = /^[A-Z][A-Z0-9_-]*$/;\nconst RE_TEXT_RUN = /([^{}\\n\\r]+)/y;\nconst RE_STRING_RUN = /([^\\\\\"\\n\\r]*)/y;\nconst RE_STRING_ESCAPE = /\\\\([\\\\\"])/y;\nconst RE_UNICODE_ESCAPE = /\\\\u([a-fA-F0-9]{4})|\\\\U([a-fA-F0-9]{6})/y;\nconst RE_LEADING_NEWLINES = /^\\n+/;\nconst RE_TRAILING_SPACES = / +$/;\nconst RE_BLANK_LINES = / *\\r?\\n/g;\nconst RE_INDENT = /( *)$/;\nconst TOKEN_BRACE_OPEN = /{\\s*/y;\nconst TOKEN_BRACE_CLOSE = /\\s*}/y;\nconst TOKEN_BRACKET_OPEN = /\\[\\s*/y;\nconst TOKEN_BRACKET_CLOSE = /\\s*] */y;\nconst TOKEN_PAREN_OPEN = /\\s*\\(\\s*/y;\nconst TOKEN_ARROW = /\\s*->\\s*/y;\nconst TOKEN_COLON = /\\s*:\\s*/y;\nconst TOKEN_COMMA = /\\s*,?\\s*/y;\nconst TOKEN_BLANK = /\\s+/y;\nclass FluentResource {\n  constructor(source) {\n    this.body = [];\n    RE_MESSAGE_START.lastIndex = 0;\n    let cursor = 0;\n    while (true) {\n      let next = RE_MESSAGE_START.exec(source);\n      if (next === null) {\n        break;\n      }\n      cursor = RE_MESSAGE_START.lastIndex;\n      try {\n        this.body.push(parseMessage(next[1]));\n      } catch (err) {\n        if (err instanceof SyntaxError) {\n          continue;\n        }\n        throw err;\n      }\n    }\n    function test(re) {\n      re.lastIndex = cursor;\n      return re.test(source);\n    }\n    function consumeChar(char, errorClass) {\n      if (source[cursor] === char) {\n        cursor++;\n        return true;\n      }\n      if (errorClass) {\n        throw new errorClass(`Expected ${char}`);\n      }\n      return false;\n    }\n    function consumeToken(re, errorClass) {\n      if (test(re)) {\n        cursor = re.lastIndex;\n        return true;\n      }\n      if (errorClass) {\n        throw new errorClass(`Expected ${re.toString()}`);\n      }\n      return false;\n    }\n    function match(re) {\n      re.lastIndex = cursor;\n      let result = re.exec(source);\n      if (result === null) {\n        throw new SyntaxError(`Expected ${re.toString()}`);\n      }\n      cursor = re.lastIndex;\n      return result;\n    }\n    function match1(re) {\n      return match(re)[1];\n    }\n    function parseMessage(id) {\n      let value = parsePattern();\n      let attributes = parseAttributes();\n      if (value === null && Object.keys(attributes).length === 0) {\n        throw new SyntaxError(\"Expected message value or attributes\");\n      }\n      return {\n        id,\n        value,\n        attributes\n      };\n    }\n    function parseAttributes() {\n      let attrs = Object.create(null);\n      while (test(RE_ATTRIBUTE_START)) {\n        let name = match1(RE_ATTRIBUTE_START);\n        let value = parsePattern();\n        if (value === null) {\n          throw new SyntaxError(\"Expected attribute value\");\n        }\n        attrs[name] = value;\n      }\n      return attrs;\n    }\n    function parsePattern() {\n      let first;\n      if (test(RE_TEXT_RUN)) {\n        first = match1(RE_TEXT_RUN);\n      }\n      if (source[cursor] === \"{\" || source[cursor] === \"}\") {\n        return parsePatternElements(first ? [first] : [], Infinity);\n      }\n      let indent = parseIndent();\n      if (indent) {\n        if (first) {\n          return parsePatternElements([first, indent], indent.length);\n        }\n        indent.value = trim(indent.value, RE_LEADING_NEWLINES);\n        return parsePatternElements([indent], indent.length);\n      }\n      if (first) {\n        return trim(first, RE_TRAILING_SPACES);\n      }\n      return null;\n    }\n    function parsePatternElements(elements = [], commonIndent) {\n      while (true) {\n        if (test(RE_TEXT_RUN)) {\n          elements.push(match1(RE_TEXT_RUN));\n          continue;\n        }\n        if (source[cursor] === \"{\") {\n          elements.push(parsePlaceable());\n          continue;\n        }\n        if (source[cursor] === \"}\") {\n          throw new SyntaxError(\"Unbalanced closing brace\");\n        }\n        let indent = parseIndent();\n        if (indent) {\n          elements.push(indent);\n          commonIndent = Math.min(commonIndent, indent.length);\n          continue;\n        }\n        break;\n      }\n      let lastIndex = elements.length - 1;\n      let lastElement = elements[lastIndex];\n      if (typeof lastElement === \"string\") {\n        elements[lastIndex] = trim(lastElement, RE_TRAILING_SPACES);\n      }\n      let baked = [];\n      for (let element of elements) {\n        if (element instanceof Indent) {\n          element = element.value.slice(0, element.value.length - commonIndent);\n        }\n        if (element) {\n          baked.push(element);\n        }\n      }\n      return baked;\n    }\n    function parsePlaceable() {\n      consumeToken(TOKEN_BRACE_OPEN, SyntaxError);\n      let selector = parseInlineExpression();\n      if (consumeToken(TOKEN_BRACE_CLOSE)) {\n        return selector;\n      }\n      if (consumeToken(TOKEN_ARROW)) {\n        let variants = parseVariants();\n        consumeToken(TOKEN_BRACE_CLOSE, SyntaxError);\n        return {\n          type: \"select\",\n          selector,\n          ...variants\n        };\n      }\n      throw new SyntaxError(\"Unclosed placeable\");\n    }\n    function parseInlineExpression() {\n      if (source[cursor] === \"{\") {\n        return parsePlaceable();\n      }\n      if (test(RE_REFERENCE)) {\n        let [, sigil, name, attr = null] = match(RE_REFERENCE);\n        if (sigil === \"$\") {\n          return {\n            type: \"var\",\n            name\n          };\n        }\n        if (consumeToken(TOKEN_PAREN_OPEN)) {\n          let args = parseArguments();\n          if (sigil === \"-\") {\n            return {\n              type: \"term\",\n              name,\n              attr,\n              args\n            };\n          }\n          if (RE_FUNCTION_NAME.test(name)) {\n            return {\n              type: \"func\",\n              name,\n              args\n            };\n          }\n          throw new SyntaxError(\"Function names must be all upper-case\");\n        }\n        if (sigil === \"-\") {\n          return {\n            type: \"term\",\n            name,\n            attr,\n            args: []\n          };\n        }\n        return {\n          type: \"mesg\",\n          name,\n          attr\n        };\n      }\n      return parseLiteral();\n    }\n    function parseArguments() {\n      let args = [];\n      while (true) {\n        switch (source[cursor]) {\n          case \")\":\n            cursor++;\n            return args;\n          case undefined:\n            throw new SyntaxError(\"Unclosed argument list\");\n        }\n        args.push(parseArgument());\n        consumeToken(TOKEN_COMMA);\n      }\n    }\n    function parseArgument() {\n      let expr = parseInlineExpression();\n      if (expr.type !== \"mesg\") {\n        return expr;\n      }\n      if (consumeToken(TOKEN_COLON)) {\n        return {\n          type: \"narg\",\n          name: expr.name,\n          value: parseLiteral()\n        };\n      }\n      return expr;\n    }\n    function parseVariants() {\n      let variants = [];\n      let count = 0;\n      let star;\n      while (test(RE_VARIANT_START)) {\n        if (consumeChar(\"*\")) {\n          star = count;\n        }\n        let key = parseVariantKey();\n        let value = parsePattern();\n        if (value === null) {\n          throw new SyntaxError(\"Expected variant value\");\n        }\n        variants[count++] = {\n          key,\n          value\n        };\n      }\n      if (count === 0) {\n        return null;\n      }\n      if (star === undefined) {\n        throw new SyntaxError(\"Expected default variant\");\n      }\n      return {\n        variants,\n        star\n      };\n    }\n    function parseVariantKey() {\n      consumeToken(TOKEN_BRACKET_OPEN, SyntaxError);\n      let key;\n      if (test(RE_NUMBER_LITERAL)) {\n        key = parseNumberLiteral();\n      } else {\n        key = {\n          type: \"str\",\n          value: match1(RE_IDENTIFIER)\n        };\n      }\n      consumeToken(TOKEN_BRACKET_CLOSE, SyntaxError);\n      return key;\n    }\n    function parseLiteral() {\n      if (test(RE_NUMBER_LITERAL)) {\n        return parseNumberLiteral();\n      }\n      if (source[cursor] === '\"') {\n        return parseStringLiteral();\n      }\n      throw new SyntaxError(\"Invalid expression\");\n    }\n    function parseNumberLiteral() {\n      let [, value, fraction = \"\"] = match(RE_NUMBER_LITERAL);\n      let precision = fraction.length;\n      return {\n        type: \"num\",\n        value: parseFloat(value),\n        precision\n      };\n    }\n    function parseStringLiteral() {\n      consumeChar('\"', SyntaxError);\n      let value = \"\";\n      while (true) {\n        value += match1(RE_STRING_RUN);\n        if (source[cursor] === \"\\\\\") {\n          value += parseEscapeSequence();\n          continue;\n        }\n        if (consumeChar('\"')) {\n          return {\n            type: \"str\",\n            value\n          };\n        }\n        throw new SyntaxError(\"Unclosed string literal\");\n      }\n    }\n    function parseEscapeSequence() {\n      if (test(RE_STRING_ESCAPE)) {\n        return match1(RE_STRING_ESCAPE);\n      }\n      if (test(RE_UNICODE_ESCAPE)) {\n        let [, codepoint4, codepoint6] = match(RE_UNICODE_ESCAPE);\n        let codepoint = parseInt(codepoint4 || codepoint6, 16);\n        return codepoint <= 0xd7ff || 0xe000 <= codepoint ? String.fromCodePoint(codepoint) : \"�\";\n      }\n      throw new SyntaxError(\"Unknown escape sequence\");\n    }\n    function parseIndent() {\n      let start = cursor;\n      consumeToken(TOKEN_BLANK);\n      switch (source[cursor]) {\n        case \".\":\n        case \"[\":\n        case \"*\":\n        case \"}\":\n        case undefined:\n          return false;\n        case \"{\":\n          return makeIndent(source.slice(start, cursor));\n      }\n      if (source[cursor - 1] === \" \") {\n        return makeIndent(source.slice(start, cursor));\n      }\n      return false;\n    }\n    function trim(text, re) {\n      return text.replace(re, \"\");\n    }\n    function makeIndent(blank) {\n      let value = blank.replace(RE_BLANK_LINES, \"\\n\");\n      let length = RE_INDENT.exec(blank)[1].length;\n      return new Indent(value, length);\n    }\n  }\n}\nclass Indent {\n  constructor(value, length) {\n    this.value = value;\n    this.length = length;\n  }\n}\n;// ./node_modules/@fluent/bundle/esm/index.js\n\n\n\n;// ./node_modules/@fluent/dom/esm/overlay.js\nconst reOverlay = /<|&#?\\w+;/;\nconst TEXT_LEVEL_ELEMENTS = {\n  \"http://www.w3.org/1999/xhtml\": [\"em\", \"strong\", \"small\", \"s\", \"cite\", \"q\", \"dfn\", \"abbr\", \"data\", \"time\", \"code\", \"var\", \"samp\", \"kbd\", \"sub\", \"sup\", \"i\", \"b\", \"u\", \"mark\", \"bdi\", \"bdo\", \"span\", \"br\", \"wbr\"]\n};\nconst LOCALIZABLE_ATTRIBUTES = {\n  \"http://www.w3.org/1999/xhtml\": {\n    global: [\"title\", \"aria-label\", \"aria-valuetext\"],\n    a: [\"download\"],\n    area: [\"download\", \"alt\"],\n    input: [\"alt\", \"placeholder\"],\n    menuitem: [\"label\"],\n    menu: [\"label\"],\n    optgroup: [\"label\"],\n    option: [\"label\"],\n    track: [\"label\"],\n    img: [\"alt\"],\n    textarea: [\"placeholder\"],\n    th: [\"abbr\"]\n  },\n  \"http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul\": {\n    global: [\"accesskey\", \"aria-label\", \"aria-valuetext\", \"label\", \"title\", \"tooltiptext\"],\n    description: [\"value\"],\n    key: [\"key\", \"keycode\"],\n    label: [\"value\"],\n    textbox: [\"placeholder\", \"value\"]\n  }\n};\nfunction translateElement(element, translation) {\n  const {\n    value\n  } = translation;\n  if (typeof value === \"string\") {\n    if (element.localName === \"title\" && element.namespaceURI === \"http://www.w3.org/1999/xhtml\") {\n      element.textContent = value;\n    } else if (!reOverlay.test(value)) {\n      element.textContent = value;\n    } else {\n      const templateElement = element.ownerDocument.createElementNS(\"http://www.w3.org/1999/xhtml\", \"template\");\n      templateElement.innerHTML = value;\n      overlayChildNodes(templateElement.content, element);\n    }\n  }\n  overlayAttributes(translation, element);\n}\nfunction overlayChildNodes(fromFragment, toElement) {\n  for (const childNode of fromFragment.childNodes) {\n    if (childNode.nodeType === childNode.TEXT_NODE) {\n      continue;\n    }\n    if (childNode.hasAttribute(\"data-l10n-name\")) {\n      const sanitized = getNodeForNamedElement(toElement, childNode);\n      fromFragment.replaceChild(sanitized, childNode);\n      continue;\n    }\n    if (isElementAllowed(childNode)) {\n      const sanitized = createSanitizedElement(childNode);\n      fromFragment.replaceChild(sanitized, childNode);\n      continue;\n    }\n    console.warn(`An element of forbidden type \"${childNode.localName}\" was found in ` + \"the translation. Only safe text-level elements and elements with \" + \"data-l10n-name are allowed.\");\n    fromFragment.replaceChild(createTextNodeFromTextContent(childNode), childNode);\n  }\n  toElement.textContent = \"\";\n  toElement.appendChild(fromFragment);\n}\nfunction hasAttribute(attributes, name) {\n  if (!attributes) {\n    return false;\n  }\n  for (let attr of attributes) {\n    if (attr.name === name) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction overlayAttributes(fromElement, toElement) {\n  const explicitlyAllowed = toElement.hasAttribute(\"data-l10n-attrs\") ? toElement.getAttribute(\"data-l10n-attrs\").split(\",\").map(i => i.trim()) : null;\n  for (const attr of Array.from(toElement.attributes)) {\n    if (isAttrNameLocalizable(attr.name, toElement, explicitlyAllowed) && !hasAttribute(fromElement.attributes, attr.name)) {\n      toElement.removeAttribute(attr.name);\n    }\n  }\n  if (!fromElement.attributes) {\n    return;\n  }\n  for (const attr of Array.from(fromElement.attributes)) {\n    if (isAttrNameLocalizable(attr.name, toElement, explicitlyAllowed) && toElement.getAttribute(attr.name) !== attr.value) {\n      toElement.setAttribute(attr.name, attr.value);\n    }\n  }\n}\nfunction getNodeForNamedElement(sourceElement, translatedChild) {\n  const childName = translatedChild.getAttribute(\"data-l10n-name\");\n  const sourceChild = sourceElement.querySelector(`[data-l10n-name=\"${childName}\"]`);\n  if (!sourceChild) {\n    console.warn(`An element named \"${childName}\" wasn't found in the source.`);\n    return createTextNodeFromTextContent(translatedChild);\n  }\n  if (sourceChild.localName !== translatedChild.localName) {\n    console.warn(`An element named \"${childName}\" was found in the translation ` + `but its type ${translatedChild.localName} didn't match the ` + `element found in the source (${sourceChild.localName}).`);\n    return createTextNodeFromTextContent(translatedChild);\n  }\n  sourceElement.removeChild(sourceChild);\n  const clone = sourceChild.cloneNode(false);\n  return shallowPopulateUsing(translatedChild, clone);\n}\nfunction createSanitizedElement(element) {\n  const clone = element.ownerDocument.createElement(element.localName);\n  return shallowPopulateUsing(element, clone);\n}\nfunction createTextNodeFromTextContent(element) {\n  return element.ownerDocument.createTextNode(element.textContent);\n}\nfunction isElementAllowed(element) {\n  const allowed = TEXT_LEVEL_ELEMENTS[element.namespaceURI];\n  return allowed && allowed.includes(element.localName);\n}\nfunction isAttrNameLocalizable(name, element, explicitlyAllowed = null) {\n  if (explicitlyAllowed && explicitlyAllowed.includes(name)) {\n    return true;\n  }\n  const allowed = LOCALIZABLE_ATTRIBUTES[element.namespaceURI];\n  if (!allowed) {\n    return false;\n  }\n  const attrName = name.toLowerCase();\n  const elemName = element.localName;\n  if (allowed.global.includes(attrName)) {\n    return true;\n  }\n  if (!allowed[elemName]) {\n    return false;\n  }\n  if (allowed[elemName].includes(attrName)) {\n    return true;\n  }\n  if (element.namespaceURI === \"http://www.w3.org/1999/xhtml\" && elemName === \"input\" && attrName === \"value\") {\n    const type = element.type.toLowerCase();\n    if (type === \"submit\" || type === \"button\" || type === \"reset\") {\n      return true;\n    }\n  }\n  return false;\n}\nfunction shallowPopulateUsing(fromElement, toElement) {\n  toElement.textContent = fromElement.textContent;\n  overlayAttributes(fromElement, toElement);\n  return toElement;\n}\n;// ./node_modules/cached-iterable/src/cached_iterable.mjs\nclass CachedIterable extends Array {\n  static from(iterable) {\n    if (iterable instanceof this) {\n      return iterable;\n    }\n    return new this(iterable);\n  }\n}\n;// ./node_modules/cached-iterable/src/cached_sync_iterable.mjs\n\nclass CachedSyncIterable extends CachedIterable {\n  constructor(iterable) {\n    super();\n    if (Symbol.iterator in Object(iterable)) {\n      this.iterator = iterable[Symbol.iterator]();\n    } else {\n      throw new TypeError(\"Argument must implement the iteration protocol.\");\n    }\n  }\n  [Symbol.iterator]() {\n    const cached = this;\n    let cur = 0;\n    return {\n      next() {\n        if (cached.length <= cur) {\n          cached.push(cached.iterator.next());\n        }\n        return cached[cur++];\n      }\n    };\n  }\n  touchNext(count = 1) {\n    let idx = 0;\n    while (idx++ < count) {\n      const last = this[this.length - 1];\n      if (last && last.done) {\n        break;\n      }\n      this.push(this.iterator.next());\n    }\n    return this[this.length - 1];\n  }\n}\n;// ./node_modules/cached-iterable/src/cached_async_iterable.mjs\n\nclass CachedAsyncIterable extends CachedIterable {\n  constructor(iterable) {\n    super();\n    if (Symbol.asyncIterator in Object(iterable)) {\n      this.iterator = iterable[Symbol.asyncIterator]();\n    } else if (Symbol.iterator in Object(iterable)) {\n      this.iterator = iterable[Symbol.iterator]();\n    } else {\n      throw new TypeError(\"Argument must implement the iteration protocol.\");\n    }\n  }\n  [Symbol.asyncIterator]() {\n    const cached = this;\n    let cur = 0;\n    return {\n      async next() {\n        if (cached.length <= cur) {\n          cached.push(cached.iterator.next());\n        }\n        return cached[cur++];\n      }\n    };\n  }\n  async touchNext(count = 1) {\n    let idx = 0;\n    while (idx++ < count) {\n      const last = this[this.length - 1];\n      if (last && (await last).done) {\n        break;\n      }\n      this.push(this.iterator.next());\n    }\n    return this[this.length - 1];\n  }\n}\n;// ./node_modules/cached-iterable/src/index.mjs\n\n\n;// ./node_modules/@fluent/dom/esm/localization.js\n\nclass Localization {\n  constructor(resourceIds = [], generateBundles) {\n    this.resourceIds = resourceIds;\n    this.generateBundles = generateBundles;\n    this.onChange(true);\n  }\n  addResourceIds(resourceIds, eager = false) {\n    this.resourceIds.push(...resourceIds);\n    this.onChange(eager);\n    return this.resourceIds.length;\n  }\n  removeResourceIds(resourceIds) {\n    this.resourceIds = this.resourceIds.filter(r => !resourceIds.includes(r));\n    this.onChange();\n    return this.resourceIds.length;\n  }\n  async formatWithFallback(keys, method) {\n    const translations = [];\n    let hasAtLeastOneBundle = false;\n    for await (const bundle of this.bundles) {\n      hasAtLeastOneBundle = true;\n      const missingIds = keysFromBundle(method, bundle, keys, translations);\n      if (missingIds.size === 0) {\n        break;\n      }\n      if (typeof console !== \"undefined\") {\n        const locale = bundle.locales[0];\n        const ids = Array.from(missingIds).join(\", \");\n        console.warn(`[fluent] Missing translations in ${locale}: ${ids}`);\n      }\n    }\n    if (!hasAtLeastOneBundle && typeof console !== \"undefined\") {\n      console.warn(`[fluent] Request for keys failed because no resource bundles got generated.\n  keys: ${JSON.stringify(keys)}.\n  resourceIds: ${JSON.stringify(this.resourceIds)}.`);\n    }\n    return translations;\n  }\n  formatMessages(keys) {\n    return this.formatWithFallback(keys, messageFromBundle);\n  }\n  formatValues(keys) {\n    return this.formatWithFallback(keys, valueFromBundle);\n  }\n  async formatValue(id, args) {\n    const [val] = await this.formatValues([{\n      id,\n      args\n    }]);\n    return val;\n  }\n  handleEvent() {\n    this.onChange();\n  }\n  onChange(eager = false) {\n    this.bundles = CachedAsyncIterable.from(this.generateBundles(this.resourceIds));\n    if (eager) {\n      this.bundles.touchNext(2);\n    }\n  }\n}\nfunction valueFromBundle(bundle, errors, message, args) {\n  if (message.value) {\n    return bundle.formatPattern(message.value, args, errors);\n  }\n  return null;\n}\nfunction messageFromBundle(bundle, errors, message, args) {\n  const formatted = {\n    value: null,\n    attributes: null\n  };\n  if (message.value) {\n    formatted.value = bundle.formatPattern(message.value, args, errors);\n  }\n  let attrNames = Object.keys(message.attributes);\n  if (attrNames.length > 0) {\n    formatted.attributes = new Array(attrNames.length);\n    for (let [i, name] of attrNames.entries()) {\n      let value = bundle.formatPattern(message.attributes[name], args, errors);\n      formatted.attributes[i] = {\n        name,\n        value\n      };\n    }\n  }\n  return formatted;\n}\nfunction keysFromBundle(method, bundle, keys, translations) {\n  const messageErrors = [];\n  const missingIds = new Set();\n  keys.forEach(({\n    id,\n    args\n  }, i) => {\n    if (translations[i] !== undefined) {\n      return;\n    }\n    let message = bundle.getMessage(id);\n    if (message) {\n      messageErrors.length = 0;\n      translations[i] = method(bundle, messageErrors, message, args);\n      if (messageErrors.length > 0 && typeof console !== \"undefined\") {\n        const locale = bundle.locales[0];\n        const errors = messageErrors.join(\", \");\n        console.warn(`[fluent][resolver] errors in ${locale}/${id}: ${errors}.`);\n      }\n    } else {\n      missingIds.add(id);\n    }\n  });\n  return missingIds;\n}\n;// ./node_modules/@fluent/dom/esm/dom_localization.js\n\n\nconst L10NID_ATTR_NAME = \"data-l10n-id\";\nconst L10NARGS_ATTR_NAME = \"data-l10n-args\";\nconst L10N_ELEMENT_QUERY = `[${L10NID_ATTR_NAME}]`;\nclass DOMLocalization extends Localization {\n  constructor(resourceIds, generateBundles) {\n    super(resourceIds, generateBundles);\n    this.roots = new Set();\n    this.pendingrAF = null;\n    this.pendingElements = new Set();\n    this.windowElement = null;\n    this.mutationObserver = null;\n    this.observerConfig = {\n      attributes: true,\n      characterData: false,\n      childList: true,\n      subtree: true,\n      attributeFilter: [L10NID_ATTR_NAME, L10NARGS_ATTR_NAME]\n    };\n  }\n  onChange(eager = false) {\n    super.onChange(eager);\n    if (this.roots) {\n      this.translateRoots();\n    }\n  }\n  setAttributes(element, id, args) {\n    element.setAttribute(L10NID_ATTR_NAME, id);\n    if (args) {\n      element.setAttribute(L10NARGS_ATTR_NAME, JSON.stringify(args));\n    } else {\n      element.removeAttribute(L10NARGS_ATTR_NAME);\n    }\n    return element;\n  }\n  getAttributes(element) {\n    return {\n      id: element.getAttribute(L10NID_ATTR_NAME),\n      args: JSON.parse(element.getAttribute(L10NARGS_ATTR_NAME) || null)\n    };\n  }\n  connectRoot(newRoot) {\n    for (const root of this.roots) {\n      if (root === newRoot || root.contains(newRoot) || newRoot.contains(root)) {\n        throw new Error(\"Cannot add a root that overlaps with existing root.\");\n      }\n    }\n    if (this.windowElement) {\n      if (this.windowElement !== newRoot.ownerDocument.defaultView) {\n        throw new Error(`Cannot connect a root:\n          DOMLocalization already has a root from a different window.`);\n      }\n    } else {\n      this.windowElement = newRoot.ownerDocument.defaultView;\n      this.mutationObserver = new this.windowElement.MutationObserver(mutations => this.translateMutations(mutations));\n    }\n    this.roots.add(newRoot);\n    this.mutationObserver.observe(newRoot, this.observerConfig);\n  }\n  disconnectRoot(root) {\n    this.roots.delete(root);\n    this.pauseObserving();\n    if (this.roots.size === 0) {\n      this.mutationObserver = null;\n      if (this.windowElement && this.pendingrAF) {\n        this.windowElement.cancelAnimationFrame(this.pendingrAF);\n      }\n      this.windowElement = null;\n      this.pendingrAF = null;\n      this.pendingElements.clear();\n      return true;\n    }\n    this.resumeObserving();\n    return false;\n  }\n  translateRoots() {\n    const roots = Array.from(this.roots);\n    return Promise.all(roots.map(root => this.translateFragment(root)));\n  }\n  pauseObserving() {\n    if (!this.mutationObserver) {\n      return;\n    }\n    this.translateMutations(this.mutationObserver.takeRecords());\n    this.mutationObserver.disconnect();\n  }\n  resumeObserving() {\n    if (!this.mutationObserver) {\n      return;\n    }\n    for (const root of this.roots) {\n      this.mutationObserver.observe(root, this.observerConfig);\n    }\n  }\n  translateMutations(mutations) {\n    for (const mutation of mutations) {\n      switch (mutation.type) {\n        case \"attributes\":\n          if (mutation.target.hasAttribute(\"data-l10n-id\")) {\n            this.pendingElements.add(mutation.target);\n          }\n          break;\n        case \"childList\":\n          for (const addedNode of mutation.addedNodes) {\n            if (addedNode.nodeType === addedNode.ELEMENT_NODE) {\n              if (addedNode.childElementCount) {\n                for (const element of this.getTranslatables(addedNode)) {\n                  this.pendingElements.add(element);\n                }\n              } else if (addedNode.hasAttribute(L10NID_ATTR_NAME)) {\n                this.pendingElements.add(addedNode);\n              }\n            }\n          }\n          break;\n      }\n    }\n    if (this.pendingElements.size > 0) {\n      if (this.pendingrAF === null) {\n        this.pendingrAF = this.windowElement.requestAnimationFrame(() => {\n          this.translateElements(Array.from(this.pendingElements));\n          this.pendingElements.clear();\n          this.pendingrAF = null;\n        });\n      }\n    }\n  }\n  translateFragment(frag) {\n    return this.translateElements(this.getTranslatables(frag));\n  }\n  async translateElements(elements) {\n    if (!elements.length) {\n      return undefined;\n    }\n    const keys = elements.map(this.getKeysForElement);\n    const translations = await this.formatMessages(keys);\n    return this.applyTranslations(elements, translations);\n  }\n  applyTranslations(elements, translations) {\n    this.pauseObserving();\n    for (let i = 0; i < elements.length; i++) {\n      if (translations[i] !== undefined) {\n        translateElement(elements[i], translations[i]);\n      }\n    }\n    this.resumeObserving();\n  }\n  getTranslatables(element) {\n    const nodes = Array.from(element.querySelectorAll(L10N_ELEMENT_QUERY));\n    if (typeof element.hasAttribute === \"function\" && element.hasAttribute(L10NID_ATTR_NAME)) {\n      nodes.push(element);\n    }\n    return nodes;\n  }\n  getKeysForElement(element) {\n    return {\n      id: element.getAttribute(L10NID_ATTR_NAME),\n      args: JSON.parse(element.getAttribute(L10NARGS_ATTR_NAME) || null)\n    };\n  }\n}\n;// ./node_modules/@fluent/dom/esm/index.js\n\n\n;// ./web/l10n.js\nclass L10n {\n  #dir;\n  #elements;\n  #lang;\n  #l10n;\n  constructor({\n    lang,\n    isRTL\n  }, l10n = null) {\n    this.#lang = L10n.#fixupLangCode(lang);\n    this.#l10n = l10n;\n    this.#dir = isRTL ?? L10n.#isRTL(this.#lang) ? \"rtl\" : \"ltr\";\n  }\n  _setL10n(l10n) {\n    this.#l10n = l10n;\n  }\n  getLanguage() {\n    return this.#lang;\n  }\n  getDirection() {\n    return this.#dir;\n  }\n  async get(ids, args = null, fallback) {\n    if (Array.isArray(ids)) {\n      ids = ids.map(id => ({\n        id\n      }));\n      const messages = await this.#l10n.formatMessages(ids);\n      return messages.map(message => message.value);\n    }\n    const messages = await this.#l10n.formatMessages([{\n      id: ids,\n      args\n    }]);\n    return messages[0]?.value || fallback;\n  }\n  async translate(element) {\n    (this.#elements ||= new Set()).add(element);\n    try {\n      this.#l10n.connectRoot(element);\n      await this.#l10n.translateRoots();\n    } catch {}\n  }\n  async translateOnce(element) {\n    try {\n      await this.#l10n.translateElements([element]);\n    } catch (ex) {\n      console.error(`translateOnce: \"${ex}\".`);\n    }\n  }\n  async destroy() {\n    if (this.#elements) {\n      for (const element of this.#elements) {\n        this.#l10n.disconnectRoot(element);\n      }\n      this.#elements.clear();\n      this.#elements = null;\n    }\n    this.#l10n.pauseObserving();\n  }\n  pause() {\n    this.#l10n.pauseObserving();\n  }\n  resume() {\n    this.#l10n.resumeObserving();\n  }\n  static #fixupLangCode(langCode) {\n    langCode = langCode?.toLowerCase() || \"en-us\";\n    const PARTIAL_LANG_CODES = {\n      en: \"en-us\",\n      es: \"es-es\",\n      fy: \"fy-nl\",\n      ga: \"ga-ie\",\n      gu: \"gu-in\",\n      hi: \"hi-in\",\n      hy: \"hy-am\",\n      nb: \"nb-no\",\n      ne: \"ne-np\",\n      nn: \"nn-no\",\n      pa: \"pa-in\",\n      pt: \"pt-pt\",\n      sv: \"sv-se\",\n      zh: \"zh-cn\"\n    };\n    return PARTIAL_LANG_CODES[langCode] || langCode;\n  }\n  static #isRTL(lang) {\n    const shortCode = lang.split(\"-\", 1)[0];\n    return [\"ar\", \"he\", \"fa\", \"ps\", \"ur\"].includes(shortCode);\n  }\n}\nconst GenericL10n = null;\n\n;// ./web/genericl10n.js\n\n\n\n\nfunction createBundle(lang, text) {\n  const resource = new FluentResource(text);\n  const bundle = new FluentBundle(lang);\n  const errors = bundle.addResource(resource);\n  if (errors.length) {\n    console.error(\"L10n errors\", errors);\n  }\n  return bundle;\n}\nclass genericl10n_GenericL10n extends L10n {\n  constructor(lang) {\n    super({\n      lang\n    });\n    const generateBundles = !lang ? genericl10n_GenericL10n.#generateBundlesFallback.bind(genericl10n_GenericL10n, this.getLanguage()) : genericl10n_GenericL10n.#generateBundles.bind(genericl10n_GenericL10n, \"en-us\", this.getLanguage());\n    this._setL10n(new DOMLocalization([], generateBundles));\n  }\n  static async *#generateBundles(defaultLang, baseLang) {\n    const {\n      baseURL,\n      paths\n    } = await this.#getPaths();\n    const langs = [baseLang];\n    if (defaultLang !== baseLang) {\n      const shortLang = baseLang.split(\"-\", 1)[0];\n      if (shortLang !== baseLang) {\n        langs.push(shortLang);\n      }\n      langs.push(defaultLang);\n    }\n    for (const lang of langs) {\n      const bundle = await this.#createBundle(lang, baseURL, paths);\n      if (bundle) {\n        yield bundle;\n      } else if (lang === \"en-us\") {\n        yield this.#createBundleFallback(lang);\n      }\n    }\n  }\n  static async #createBundle(lang, baseURL, paths) {\n    const path = paths[lang];\n    if (!path) {\n      return null;\n    }\n    const url = new URL(path, baseURL);\n    const text = await fetchData(url, \"text\");\n    return createBundle(lang, text);\n  }\n  static async #getPaths() {\n    try {\n      const {\n        href\n      } = document.querySelector(`link[type=\"application/l10n\"]`);\n      const paths = await fetchData(href, \"json\");\n      return {\n        baseURL: href.replace(/[^/]*$/, \"\") || \"./\",\n        paths\n      };\n    } catch {}\n    return {\n      baseURL: \"./\",\n      paths: Object.create(null)\n    };\n  }\n  static async *#generateBundlesFallback(lang) {\n    yield this.#createBundleFallback(lang);\n  }\n  static async #createBundleFallback(lang) {\n    const text = \"pdfjs-previous-button =\\n    .title = Previous Page\\npdfjs-previous-button-label = Previous\\npdfjs-next-button =\\n    .title = Next Page\\npdfjs-next-button-label = Next\\npdfjs-page-input =\\n    .title = Page\\npdfjs-of-pages = of { $pagesCount }\\npdfjs-page-of-pages = ({ $pageNumber } of { $pagesCount })\\npdfjs-zoom-out-button =\\n    .title = Zoom Out\\npdfjs-zoom-out-button-label = Zoom Out\\npdfjs-zoom-in-button =\\n    .title = Zoom In\\npdfjs-zoom-in-button-label = Zoom In\\npdfjs-zoom-select =\\n    .title = Zoom\\npdfjs-presentation-mode-button =\\n    .title = Switch to Presentation Mode\\npdfjs-presentation-mode-button-label = Presentation Mode\\npdfjs-open-file-button =\\n    .title = Open File\\npdfjs-open-file-button-label = Open\\npdfjs-print-button =\\n    .title = Print\\npdfjs-print-button-label = Print\\npdfjs-save-button =\\n    .title = Save\\npdfjs-save-button-label = Save\\npdfjs-download-button =\\n    .title = Download\\npdfjs-download-button-label = Download\\npdfjs-bookmark-button =\\n    .title = Current Page (View URL from Current Page)\\npdfjs-bookmark-button-label = Current Page\\npdfjs-tools-button =\\n    .title = Tools\\npdfjs-tools-button-label = Tools\\npdfjs-first-page-button =\\n    .title = Go to First Page\\npdfjs-first-page-button-label = Go to First Page\\npdfjs-last-page-button =\\n    .title = Go to Last Page\\npdfjs-last-page-button-label = Go to Last Page\\npdfjs-page-rotate-cw-button =\\n    .title = Rotate Clockwise\\npdfjs-page-rotate-cw-button-label = Rotate Clockwise\\npdfjs-page-rotate-ccw-button =\\n    .title = Rotate Counterclockwise\\npdfjs-page-rotate-ccw-button-label = Rotate Counterclockwise\\npdfjs-cursor-text-select-tool-button =\\n    .title = Enable Text Selection Tool\\npdfjs-cursor-text-select-tool-button-label = Text Selection Tool\\npdfjs-cursor-hand-tool-button =\\n    .title = Enable Hand Tool\\npdfjs-cursor-hand-tool-button-label = Hand Tool\\npdfjs-scroll-page-button =\\n    .title = Use Page Scrolling\\npdfjs-scroll-page-button-label = Page Scrolling\\npdfjs-scroll-vertical-button =\\n    .title = Use Vertical Scrolling\\npdfjs-scroll-vertical-button-label = Vertical Scrolling\\npdfjs-scroll-horizontal-button =\\n    .title = Use Horizontal Scrolling\\npdfjs-scroll-horizontal-button-label = Horizontal Scrolling\\npdfjs-scroll-wrapped-button =\\n    .title = Use Wrapped Scrolling\\npdfjs-scroll-wrapped-button-label = Wrapped Scrolling\\npdfjs-spread-none-button =\\n    .title = Do not join page spreads\\npdfjs-spread-none-button-label = No Spreads\\npdfjs-spread-odd-button =\\n    .title = Join page spreads starting with odd-numbered pages\\npdfjs-spread-odd-button-label = Odd Spreads\\npdfjs-spread-even-button =\\n    .title = Join page spreads starting with even-numbered pages\\npdfjs-spread-even-button-label = Even Spreads\\npdfjs-document-properties-button =\\n    .title = Document Properties\\u2026\\npdfjs-document-properties-button-label = Document Properties\\u2026\\npdfjs-document-properties-file-name = File name:\\npdfjs-document-properties-file-size = File size:\\npdfjs-document-properties-size-kb = { NUMBER($kb, maximumSignificantDigits: 3) } KB ({ $b } bytes)\\npdfjs-document-properties-size-mb = { NUMBER($mb, maximumSignificantDigits: 3) } MB ({ $b } bytes)\\npdfjs-document-properties-title = Title:\\npdfjs-document-properties-author = Author:\\npdfjs-document-properties-subject = Subject:\\npdfjs-document-properties-keywords = Keywords:\\npdfjs-document-properties-creation-date = Creation Date:\\npdfjs-document-properties-modification-date = Modification Date:\\npdfjs-document-properties-date-time-string = { DATETIME($dateObj, dateStyle: \\\"short\\\", timeStyle: \\\"medium\\\") }\\npdfjs-document-properties-creator = Creator:\\npdfjs-document-properties-producer = PDF Producer:\\npdfjs-document-properties-version = PDF Version:\\npdfjs-document-properties-page-count = Page Count:\\npdfjs-document-properties-page-size = Page Size:\\npdfjs-document-properties-page-size-unit-inches = in\\npdfjs-document-properties-page-size-unit-millimeters = mm\\npdfjs-document-properties-page-size-orientation-portrait = portrait\\npdfjs-document-properties-page-size-orientation-landscape = landscape\\npdfjs-document-properties-page-size-name-a-three = A3\\npdfjs-document-properties-page-size-name-a-four = A4\\npdfjs-document-properties-page-size-name-letter = Letter\\npdfjs-document-properties-page-size-name-legal = Legal\\npdfjs-document-properties-page-size-dimension-string = { $width } \\xD7 { $height } { $unit } ({ $orientation })\\npdfjs-document-properties-page-size-dimension-name-string = { $width } \\xD7 { $height } { $unit } ({ $name }, { $orientation })\\npdfjs-document-properties-linearized = Fast Web View:\\npdfjs-document-properties-linearized-yes = Yes\\npdfjs-document-properties-linearized-no = No\\npdfjs-document-properties-close-button = Close\\npdfjs-print-progress-message = Preparing document for printing\\u2026\\npdfjs-print-progress-percent = { $progress }%\\npdfjs-print-progress-close-button = Cancel\\npdfjs-printing-not-supported = Warning: Printing is not fully supported by this browser.\\npdfjs-printing-not-ready = Warning: The PDF is not fully loaded for printing.\\npdfjs-toggle-sidebar-button =\\n    .title = Toggle Sidebar\\npdfjs-toggle-sidebar-notification-button =\\n    .title = Toggle Sidebar (document contains outline/attachments/layers)\\npdfjs-toggle-sidebar-button-label = Toggle Sidebar\\npdfjs-document-outline-button =\\n    .title = Show Document Outline (double-click to expand/collapse all items)\\npdfjs-document-outline-button-label = Document Outline\\npdfjs-attachments-button =\\n    .title = Show Attachments\\npdfjs-attachments-button-label = Attachments\\npdfjs-layers-button =\\n    .title = Show Layers (double-click to reset all layers to the default state)\\npdfjs-layers-button-label = Layers\\npdfjs-thumbs-button =\\n    .title = Show Thumbnails\\npdfjs-thumbs-button-label = Thumbnails\\npdfjs-current-outline-item-button =\\n    .title = Find Current Outline Item\\npdfjs-current-outline-item-button-label = Current Outline Item\\npdfjs-findbar-button =\\n    .title = Find in Document\\npdfjs-findbar-button-label = Find\\npdfjs-additional-layers = Additional Layers\\npdfjs-thumb-page-title =\\n    .title = Page { $page }\\npdfjs-thumb-page-canvas =\\n    .aria-label = Thumbnail of Page { $page }\\npdfjs-find-input =\\n    .title = Find\\n    .placeholder = Find in document\\u2026\\npdfjs-find-previous-button =\\n    .title = Find the previous occurrence of the phrase\\npdfjs-find-previous-button-label = Previous\\npdfjs-find-next-button =\\n    .title = Find the next occurrence of the phrase\\npdfjs-find-next-button-label = Next\\npdfjs-find-highlight-checkbox = Highlight All\\npdfjs-find-match-case-checkbox-label = Match Case\\npdfjs-find-match-diacritics-checkbox-label = Match Diacritics\\npdfjs-find-entire-word-checkbox-label = Whole Words\\npdfjs-find-reached-top = Reached top of document, continued from bottom\\npdfjs-find-reached-bottom = Reached end of document, continued from top\\npdfjs-find-match-count =\\n    { $total ->\\n        [one] { $current } of { $total } match\\n       *[other] { $current } of { $total } matches\\n    }\\npdfjs-find-match-count-limit =\\n    { $limit ->\\n        [one] More than { $limit } match\\n       *[other] More than { $limit } matches\\n    }\\npdfjs-find-not-found = Phrase not found\\npdfjs-page-scale-width = Page Width\\npdfjs-page-scale-fit = Page Fit\\npdfjs-page-scale-auto = Automatic Zoom\\npdfjs-page-scale-actual = Actual Size\\npdfjs-page-scale-percent = { $scale }%\\npdfjs-page-landmark =\\n    .aria-label = Page { $page }\\npdfjs-loading-error = An error occurred while loading the PDF.\\npdfjs-invalid-file-error = Invalid or corrupted PDF file.\\npdfjs-missing-file-error = Missing PDF file.\\npdfjs-unexpected-response-error = Unexpected server response.\\npdfjs-rendering-error = An error occurred while rendering the page.\\npdfjs-annotation-date-time-string = { DATETIME($dateObj, dateStyle: \\\"short\\\", timeStyle: \\\"medium\\\") }\\npdfjs-text-annotation-type =\\n    .alt = [{ $type } Annotation]\\npdfjs-password-label = Enter the password to open this PDF file.\\npdfjs-password-invalid = Invalid password. Please try again.\\npdfjs-password-ok-button = OK\\npdfjs-password-cancel-button = Cancel\\npdfjs-web-fonts-disabled = Web fonts are disabled: unable to use embedded PDF fonts.\\npdfjs-editor-free-text-button =\\n    .title = Text\\npdfjs-editor-free-text-button-label = Text\\npdfjs-editor-ink-button =\\n    .title = Draw\\npdfjs-editor-ink-button-label = Draw\\npdfjs-editor-stamp-button =\\n    .title = Add or edit images\\npdfjs-editor-stamp-button-label = Add or edit images\\npdfjs-editor-highlight-button =\\n    .title = Highlight\\npdfjs-editor-highlight-button-label = Highlight\\npdfjs-highlight-floating-button1 =\\n    .title = Highlight\\n    .aria-label = Highlight\\npdfjs-highlight-floating-button-label = Highlight\\npdfjs-editor-remove-ink-button =\\n    .title = Remove drawing\\npdfjs-editor-remove-freetext-button =\\n    .title = Remove text\\npdfjs-editor-remove-stamp-button =\\n    .title = Remove image\\npdfjs-editor-remove-highlight-button =\\n    .title = Remove highlight\\npdfjs-editor-free-text-color-input = Color\\npdfjs-editor-free-text-size-input = Size\\npdfjs-editor-ink-color-input = Color\\npdfjs-editor-ink-thickness-input = Thickness\\npdfjs-editor-ink-opacity-input = Opacity\\npdfjs-editor-stamp-add-image-button =\\n    .title = Add image\\npdfjs-editor-stamp-add-image-button-label = Add image\\npdfjs-editor-free-highlight-thickness-input = Thickness\\npdfjs-editor-free-highlight-thickness-title =\\n    .title = Change thickness when highlighting items other than text\\npdfjs-free-text2 =\\n    .aria-label = Text Editor\\n    .default-content = Start typing\\u2026\\npdfjs-ink =\\n    .aria-label = Draw Editor\\npdfjs-ink-canvas =\\n    .aria-label = User-created image\\npdfjs-editor-alt-text-button =\\n    .aria-label = Alt text\\npdfjs-editor-alt-text-button-label = Alt text\\npdfjs-editor-alt-text-edit-button =\\n    .aria-label = Edit alt text\\npdfjs-editor-alt-text-dialog-label = Choose an option\\npdfjs-editor-alt-text-dialog-description = Alt text (alternative text) helps when people can\\u2019t see the image or when it doesn\\u2019t load.\\npdfjs-editor-alt-text-add-description-label = Add a description\\npdfjs-editor-alt-text-add-description-description = Aim for 1-2 sentences that describe the subject, setting, or actions.\\npdfjs-editor-alt-text-mark-decorative-label = Mark as decorative\\npdfjs-editor-alt-text-mark-decorative-description = This is used for ornamental images, like borders or watermarks.\\npdfjs-editor-alt-text-cancel-button = Cancel\\npdfjs-editor-alt-text-save-button = Save\\npdfjs-editor-alt-text-decorative-tooltip = Marked as decorative\\npdfjs-editor-alt-text-textarea =\\n    .placeholder = For example, \\u201CA young man sits down at a table to eat a meal\\u201D\\npdfjs-editor-resizer-top-left =\\n    .aria-label = Top left corner \\u2014 resize\\npdfjs-editor-resizer-top-middle =\\n    .aria-label = Top middle \\u2014 resize\\npdfjs-editor-resizer-top-right =\\n    .aria-label = Top right corner \\u2014 resize\\npdfjs-editor-resizer-middle-right =\\n    .aria-label = Middle right \\u2014 resize\\npdfjs-editor-resizer-bottom-right =\\n    .aria-label = Bottom right corner \\u2014 resize\\npdfjs-editor-resizer-bottom-middle =\\n    .aria-label = Bottom middle \\u2014 resize\\npdfjs-editor-resizer-bottom-left =\\n    .aria-label = Bottom left corner \\u2014 resize\\npdfjs-editor-resizer-middle-left =\\n    .aria-label = Middle left \\u2014 resize\\npdfjs-editor-highlight-colorpicker-label = Highlight color\\npdfjs-editor-colorpicker-button =\\n    .title = Change color\\npdfjs-editor-colorpicker-dropdown =\\n    .aria-label = Color choices\\npdfjs-editor-colorpicker-yellow =\\n    .title = Yellow\\npdfjs-editor-colorpicker-green =\\n    .title = Green\\npdfjs-editor-colorpicker-blue =\\n    .title = Blue\\npdfjs-editor-colorpicker-pink =\\n    .title = Pink\\npdfjs-editor-colorpicker-red =\\n    .title = Red\\npdfjs-editor-highlight-show-all-button-label = Show all\\npdfjs-editor-highlight-show-all-button =\\n    .title = Show all\\npdfjs-editor-new-alt-text-dialog-edit-label = Edit alt text (image description)\\npdfjs-editor-new-alt-text-dialog-add-label = Add alt text (image description)\\npdfjs-editor-new-alt-text-textarea =\\n    .placeholder = Write your description here\\u2026\\npdfjs-editor-new-alt-text-description = Short description for people who can\\u2019t see the image or when the image doesn\\u2019t load.\\npdfjs-editor-new-alt-text-disclaimer1 = This alt text was created automatically and may be inaccurate.\\npdfjs-editor-new-alt-text-disclaimer-learn-more-url = Learn more\\npdfjs-editor-new-alt-text-create-automatically-button-label = Create alt text automatically\\npdfjs-editor-new-alt-text-not-now-button = Not now\\npdfjs-editor-new-alt-text-error-title = Couldn\\u2019t create alt text automatically\\npdfjs-editor-new-alt-text-error-description = Please write your own alt text or try again later.\\npdfjs-editor-new-alt-text-error-close-button = Close\\npdfjs-editor-new-alt-text-ai-model-downloading-progress = Downloading alt text AI model ({ $downloadedSize } of { $totalSize } MB)\\n    .aria-valuetext = Downloading alt text AI model ({ $downloadedSize } of { $totalSize } MB)\\npdfjs-editor-new-alt-text-added-button =\\n    .aria-label = Alt text added\\npdfjs-editor-new-alt-text-added-button-label = Alt text added\\npdfjs-editor-new-alt-text-missing-button =\\n    .aria-label = Missing alt text\\npdfjs-editor-new-alt-text-missing-button-label = Missing alt text\\npdfjs-editor-new-alt-text-to-review-button =\\n    .aria-label = Review alt text\\npdfjs-editor-new-alt-text-to-review-button-label = Review alt text\\npdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer = Created automatically: { $generatedAltText }\\npdfjs-image-alt-text-settings-button =\\n    .title = Image alt text settings\\npdfjs-image-alt-text-settings-button-label = Image alt text settings\\npdfjs-editor-alt-text-settings-dialog-label = Image alt text settings\\npdfjs-editor-alt-text-settings-automatic-title = Automatic alt text\\npdfjs-editor-alt-text-settings-create-model-button-label = Create alt text automatically\\npdfjs-editor-alt-text-settings-create-model-description = Suggests descriptions to help people who can\\u2019t see the image or when the image doesn\\u2019t load.\\npdfjs-editor-alt-text-settings-download-model-label = Alt text AI model ({ $totalSize } MB)\\npdfjs-editor-alt-text-settings-ai-model-description = Runs locally on your device so your data stays private. Required for automatic alt text.\\npdfjs-editor-alt-text-settings-delete-model-button = Delete\\npdfjs-editor-alt-text-settings-download-model-button = Download\\npdfjs-editor-alt-text-settings-downloading-model-button = Downloading\\u2026\\npdfjs-editor-alt-text-settings-editor-title = Alt text editor\\npdfjs-editor-alt-text-settings-show-dialog-button-label = Show alt text editor right away when adding an image\\npdfjs-editor-alt-text-settings-show-dialog-description = Helps you make sure all your images have alt text.\\npdfjs-editor-alt-text-settings-close-button = Close\";\n    return createBundle(lang, text);\n  }\n}\n\n;// ./web/pdf_history.js\n\n\nconst HASH_CHANGE_TIMEOUT = 1000;\nconst POSITION_UPDATED_THRESHOLD = 50;\nconst UPDATE_VIEWAREA_TIMEOUT = 1000;\nfunction getCurrentHash() {\n  return document.location.hash;\n}\nclass PDFHistory {\n  #eventAbortController = null;\n  constructor({\n    linkService,\n    eventBus\n  }) {\n    this.linkService = linkService;\n    this.eventBus = eventBus;\n    this._initialized = false;\n    this._fingerprint = \"\";\n    this.reset();\n    this.eventBus._on(\"pagesinit\", () => {\n      this._isPagesLoaded = false;\n      this.eventBus._on(\"pagesloaded\", evt => {\n        this._isPagesLoaded = !!evt.pagesCount;\n      }, {\n        once: true\n      });\n    });\n  }\n  initialize({\n    fingerprint,\n    resetHistory = false,\n    updateUrl = false\n  }) {\n    if (!fingerprint || typeof fingerprint !== \"string\") {\n      console.error('PDFHistory.initialize: The \"fingerprint\" must be a non-empty string.');\n      return;\n    }\n    if (this._initialized) {\n      this.reset();\n    }\n    const reInitialized = this._fingerprint !== \"\" && this._fingerprint !== fingerprint;\n    this._fingerprint = fingerprint;\n    this._updateUrl = updateUrl === true;\n    this._initialized = true;\n    this.#bindEvents();\n    const state = window.history.state;\n    this._popStateInProgress = false;\n    this._blockHashChange = 0;\n    this._currentHash = getCurrentHash();\n    this._numPositionUpdates = 0;\n    this._uid = this._maxUid = 0;\n    this._destination = null;\n    this._position = null;\n    if (!this.#isValidState(state, true) || resetHistory) {\n      const {\n        hash,\n        page,\n        rotation\n      } = this.#parseCurrentHash(true);\n      if (!hash || reInitialized || resetHistory) {\n        this.#pushOrReplaceState(null, true);\n        return;\n      }\n      this.#pushOrReplaceState({\n        hash,\n        page,\n        rotation\n      }, true);\n      return;\n    }\n    const destination = state.destination;\n    this.#updateInternalState(destination, state.uid, true);\n    if (destination.rotation !== undefined) {\n      this._initialRotation = destination.rotation;\n    }\n    if (destination.dest) {\n      this._initialBookmark = JSON.stringify(destination.dest);\n      this._destination.page = null;\n    } else if (destination.hash) {\n      this._initialBookmark = destination.hash;\n    } else if (destination.page) {\n      this._initialBookmark = `page=${destination.page}`;\n    }\n  }\n  reset() {\n    if (this._initialized) {\n      this.#pageHide();\n      this._initialized = false;\n      this.#unbindEvents();\n    }\n    if (this._updateViewareaTimeout) {\n      clearTimeout(this._updateViewareaTimeout);\n      this._updateViewareaTimeout = null;\n    }\n    this._initialBookmark = null;\n    this._initialRotation = null;\n  }\n  push({\n    namedDest = null,\n    explicitDest,\n    pageNumber\n  }) {\n    if (!this._initialized) {\n      return;\n    }\n    if (namedDest && typeof namedDest !== \"string\") {\n      console.error(\"PDFHistory.push: \" + `\"${namedDest}\" is not a valid namedDest parameter.`);\n      return;\n    } else if (!Array.isArray(explicitDest)) {\n      console.error(\"PDFHistory.push: \" + `\"${explicitDest}\" is not a valid explicitDest parameter.`);\n      return;\n    } else if (!this.#isValidPage(pageNumber)) {\n      if (pageNumber !== null || this._destination) {\n        console.error(\"PDFHistory.push: \" + `\"${pageNumber}\" is not a valid pageNumber parameter.`);\n        return;\n      }\n    }\n    const hash = namedDest || JSON.stringify(explicitDest);\n    if (!hash) {\n      return;\n    }\n    let forceReplace = false;\n    if (this._destination && (isDestHashesEqual(this._destination.hash, hash) || isDestArraysEqual(this._destination.dest, explicitDest))) {\n      if (this._destination.page) {\n        return;\n      }\n      forceReplace = true;\n    }\n    if (this._popStateInProgress && !forceReplace) {\n      return;\n    }\n    this.#pushOrReplaceState({\n      dest: explicitDest,\n      hash,\n      page: pageNumber,\n      rotation: this.linkService.rotation\n    }, forceReplace);\n    if (!this._popStateInProgress) {\n      this._popStateInProgress = true;\n      Promise.resolve().then(() => {\n        this._popStateInProgress = false;\n      });\n    }\n  }\n  pushPage(pageNumber) {\n    if (!this._initialized) {\n      return;\n    }\n    if (!this.#isValidPage(pageNumber)) {\n      console.error(`PDFHistory.pushPage: \"${pageNumber}\" is not a valid page number.`);\n      return;\n    }\n    if (this._destination?.page === pageNumber) {\n      return;\n    }\n    if (this._popStateInProgress) {\n      return;\n    }\n    this.#pushOrReplaceState({\n      dest: null,\n      hash: `page=${pageNumber}`,\n      page: pageNumber,\n      rotation: this.linkService.rotation\n    });\n    if (!this._popStateInProgress) {\n      this._popStateInProgress = true;\n      Promise.resolve().then(() => {\n        this._popStateInProgress = false;\n      });\n    }\n  }\n  pushCurrentPosition() {\n    if (!this._initialized || this._popStateInProgress) {\n      return;\n    }\n    this.#tryPushCurrentPosition();\n  }\n  back() {\n    if (!this._initialized || this._popStateInProgress) {\n      return;\n    }\n    const state = window.history.state;\n    if (this.#isValidState(state) && state.uid > 0) {\n      window.history.back();\n    }\n  }\n  forward() {\n    if (!this._initialized || this._popStateInProgress) {\n      return;\n    }\n    const state = window.history.state;\n    if (this.#isValidState(state) && state.uid < this._maxUid) {\n      window.history.forward();\n    }\n  }\n  get popStateInProgress() {\n    return this._initialized && (this._popStateInProgress || this._blockHashChange > 0);\n  }\n  get initialBookmark() {\n    return this._initialized ? this._initialBookmark : null;\n  }\n  get initialRotation() {\n    return this._initialized ? this._initialRotation : null;\n  }\n  #pushOrReplaceState(destination, forceReplace = false) {\n    const shouldReplace = forceReplace || !this._destination;\n    const newState = {\n      fingerprint: this._fingerprint,\n      uid: shouldReplace ? this._uid : this._uid + 1,\n      destination\n    };\n    this.#updateInternalState(destination, newState.uid);\n    let newUrl;\n    if (this._updateUrl && destination?.hash) {\n      const baseUrl = document.location.href.split(\"#\", 1)[0];\n      if (!baseUrl.startsWith(\"file://\")) {\n        newUrl = `${baseUrl}#${destination.hash}`;\n      }\n    }\n    if (shouldReplace) {\n      window.history.replaceState(newState, \"\", newUrl);\n    } else {\n      window.history.pushState(newState, \"\", newUrl);\n    }\n  }\n  #tryPushCurrentPosition(temporary = false) {\n    if (!this._position) {\n      return;\n    }\n    let position = this._position;\n    if (temporary) {\n      position = Object.assign(Object.create(null), this._position);\n      position.temporary = true;\n    }\n    if (!this._destination) {\n      this.#pushOrReplaceState(position);\n      return;\n    }\n    if (this._destination.temporary) {\n      this.#pushOrReplaceState(position, true);\n      return;\n    }\n    if (this._destination.hash === position.hash) {\n      return;\n    }\n    if (!this._destination.page && (POSITION_UPDATED_THRESHOLD <= 0 || this._numPositionUpdates <= POSITION_UPDATED_THRESHOLD)) {\n      return;\n    }\n    let forceReplace = false;\n    if (this._destination.page >= position.first && this._destination.page <= position.page) {\n      if (this._destination.dest !== undefined || !this._destination.first) {\n        return;\n      }\n      forceReplace = true;\n    }\n    this.#pushOrReplaceState(position, forceReplace);\n  }\n  #isValidPage(val) {\n    return Number.isInteger(val) && val > 0 && val <= this.linkService.pagesCount;\n  }\n  #isValidState(state, checkReload = false) {\n    if (!state) {\n      return false;\n    }\n    if (state.fingerprint !== this._fingerprint) {\n      if (checkReload) {\n        if (typeof state.fingerprint !== \"string\" || state.fingerprint.length !== this._fingerprint.length) {\n          return false;\n        }\n        const [perfEntry] = performance.getEntriesByType(\"navigation\");\n        if (perfEntry?.type !== \"reload\") {\n          return false;\n        }\n      } else {\n        return false;\n      }\n    }\n    if (!Number.isInteger(state.uid) || state.uid < 0) {\n      return false;\n    }\n    if (state.destination === null || typeof state.destination !== \"object\") {\n      return false;\n    }\n    return true;\n  }\n  #updateInternalState(destination, uid, removeTemporary = false) {\n    if (this._updateViewareaTimeout) {\n      clearTimeout(this._updateViewareaTimeout);\n      this._updateViewareaTimeout = null;\n    }\n    if (removeTemporary && destination?.temporary) {\n      delete destination.temporary;\n    }\n    this._destination = destination;\n    this._uid = uid;\n    this._maxUid = Math.max(this._maxUid, uid);\n    this._numPositionUpdates = 0;\n  }\n  #parseCurrentHash(checkNameddest = false) {\n    const hash = unescape(getCurrentHash()).substring(1);\n    const params = parseQueryString(hash);\n    const nameddest = params.get(\"nameddest\") || \"\";\n    let page = params.get(\"page\") | 0;\n    if (!this.#isValidPage(page) || checkNameddest && nameddest.length > 0) {\n      page = null;\n    }\n    return {\n      hash,\n      page,\n      rotation: this.linkService.rotation\n    };\n  }\n  #updateViewarea({\n    location\n  }) {\n    if (this._updateViewareaTimeout) {\n      clearTimeout(this._updateViewareaTimeout);\n      this._updateViewareaTimeout = null;\n    }\n    this._position = {\n      hash: location.pdfOpenParams.substring(1),\n      page: this.linkService.page,\n      first: location.pageNumber,\n      rotation: location.rotation\n    };\n    if (this._popStateInProgress) {\n      return;\n    }\n    if (POSITION_UPDATED_THRESHOLD > 0 && this._isPagesLoaded && this._destination && !this._destination.page) {\n      this._numPositionUpdates++;\n    }\n    if (UPDATE_VIEWAREA_TIMEOUT > 0) {\n      this._updateViewareaTimeout = setTimeout(() => {\n        if (!this._popStateInProgress) {\n          this.#tryPushCurrentPosition(true);\n        }\n        this._updateViewareaTimeout = null;\n      }, UPDATE_VIEWAREA_TIMEOUT);\n    }\n  }\n  #popState({\n    state\n  }) {\n    const newHash = getCurrentHash(),\n      hashChanged = this._currentHash !== newHash;\n    this._currentHash = newHash;\n    if (!state) {\n      this._uid++;\n      const {\n        hash,\n        page,\n        rotation\n      } = this.#parseCurrentHash();\n      this.#pushOrReplaceState({\n        hash,\n        page,\n        rotation\n      }, true);\n      return;\n    }\n    if (!this.#isValidState(state)) {\n      return;\n    }\n    this._popStateInProgress = true;\n    if (hashChanged) {\n      this._blockHashChange++;\n      waitOnEventOrTimeout({\n        target: window,\n        name: \"hashchange\",\n        delay: HASH_CHANGE_TIMEOUT\n      }).then(() => {\n        this._blockHashChange--;\n      });\n    }\n    const destination = state.destination;\n    this.#updateInternalState(destination, state.uid, true);\n    if (isValidRotation(destination.rotation)) {\n      this.linkService.rotation = destination.rotation;\n    }\n    if (destination.dest) {\n      this.linkService.goToDestination(destination.dest);\n    } else if (destination.hash) {\n      this.linkService.setHash(destination.hash);\n    } else if (destination.page) {\n      this.linkService.page = destination.page;\n    }\n    Promise.resolve().then(() => {\n      this._popStateInProgress = false;\n    });\n  }\n  #pageHide() {\n    if (!this._destination || this._destination.temporary) {\n      this.#tryPushCurrentPosition();\n    }\n  }\n  #bindEvents() {\n    if (this.#eventAbortController) {\n      return;\n    }\n    this.#eventAbortController = new AbortController();\n    const {\n      signal\n    } = this.#eventAbortController;\n    this.eventBus._on(\"updateviewarea\", this.#updateViewarea.bind(this), {\n      signal\n    });\n    window.addEventListener(\"popstate\", this.#popState.bind(this), {\n      signal\n    });\n    window.addEventListener(\"pagehide\", this.#pageHide.bind(this), {\n      signal\n    });\n  }\n  #unbindEvents() {\n    this.#eventAbortController?.abort();\n    this.#eventAbortController = null;\n  }\n}\nfunction isDestHashesEqual(destHash, pushHash) {\n  if (typeof destHash !== \"string\" || typeof pushHash !== \"string\") {\n    return false;\n  }\n  if (destHash === pushHash) {\n    return true;\n  }\n  const nameddest = parseQueryString(destHash).get(\"nameddest\");\n  if (nameddest === pushHash) {\n    return true;\n  }\n  return false;\n}\nfunction isDestArraysEqual(firstDest, secondDest) {\n  function isEntryEqual(first, second) {\n    if (typeof first !== typeof second) {\n      return false;\n    }\n    if (Array.isArray(first) || Array.isArray(second)) {\n      return false;\n    }\n    if (first !== null && typeof first === \"object\" && second !== null) {\n      if (Object.keys(first).length !== Object.keys(second).length) {\n        return false;\n      }\n      for (const key in first) {\n        if (!isEntryEqual(first[key], second[key])) {\n          return false;\n        }\n      }\n      return true;\n    }\n    return first === second || Number.isNaN(first) && Number.isNaN(second);\n  }\n  if (!(Array.isArray(firstDest) && Array.isArray(secondDest))) {\n    return false;\n  }\n  if (firstDest.length !== secondDest.length) {\n    return false;\n  }\n  for (let i = 0, ii = firstDest.length; i < ii; i++) {\n    if (!isEntryEqual(firstDest[i], secondDest[i])) {\n      return false;\n    }\n  }\n  return true;\n}\n\n;// ./web/annotation_editor_layer_builder.js\n\n\nclass AnnotationEditorLayerBuilder {\n  #annotationLayer = null;\n  #drawLayer = null;\n  #onAppend = null;\n  #structTreeLayer = null;\n  #textLayer = null;\n  #uiManager;\n  constructor(options) {\n    this.pdfPage = options.pdfPage;\n    this.accessibilityManager = options.accessibilityManager;\n    this.l10n = options.l10n;\n    this.l10n ||= new genericl10n_GenericL10n();\n    this.annotationEditorLayer = null;\n    this.div = null;\n    this._cancelled = false;\n    this.#uiManager = options.uiManager;\n    this.#annotationLayer = options.annotationLayer || null;\n    this.#textLayer = options.textLayer || null;\n    this.#drawLayer = options.drawLayer || null;\n    this.#onAppend = options.onAppend || null;\n    this.#structTreeLayer = options.structTreeLayer || null;\n  }\n  async render(viewport, intent = \"display\") {\n    if (intent !== \"display\") {\n      return;\n    }\n    if (this._cancelled) {\n      return;\n    }\n    const clonedViewport = viewport.clone({\n      dontFlip: true\n    });\n    if (this.div) {\n      this.annotationEditorLayer.update({\n        viewport: clonedViewport\n      });\n      this.show();\n      return;\n    }\n    const div = this.div = document.createElement(\"div\");\n    div.className = \"annotationEditorLayer\";\n    div.hidden = true;\n    div.dir = this.#uiManager.direction;\n    this.#onAppend?.(div);\n    this.annotationEditorLayer = new AnnotationEditorLayer({\n      uiManager: this.#uiManager,\n      div,\n      structTreeLayer: this.#structTreeLayer,\n      accessibilityManager: this.accessibilityManager,\n      pageIndex: this.pdfPage.pageNumber - 1,\n      l10n: this.l10n,\n      viewport: clonedViewport,\n      annotationLayer: this.#annotationLayer,\n      textLayer: this.#textLayer,\n      drawLayer: this.#drawLayer\n    });\n    const parameters = {\n      viewport: clonedViewport,\n      div,\n      annotations: null,\n      intent\n    };\n    this.annotationEditorLayer.render(parameters);\n    this.show();\n  }\n  cancel() {\n    this._cancelled = true;\n    if (!this.div) {\n      return;\n    }\n    this.annotationEditorLayer.destroy();\n  }\n  hide() {\n    if (!this.div) {\n      return;\n    }\n    this.div.hidden = true;\n  }\n  show() {\n    if (!this.div || this.annotationEditorLayer.isInvisible) {\n      return;\n    }\n    this.div.hidden = false;\n  }\n}\n\n;// ./web/app_options.js\n{\n  var compatParams = new Map();\n  const userAgent = navigator.userAgent || \"\";\n  const platform = navigator.platform || \"\";\n  const maxTouchPoints = navigator.maxTouchPoints || 1;\n  const isAndroid = /Android/.test(userAgent);\n  const isIOS = /\\b(iPad|iPhone|iPod)(?=;)/.test(userAgent) || platform === \"MacIntel\" && maxTouchPoints > 1;\n  (function () {\n    if (isIOS || isAndroid) {\n      compatParams.set(\"maxCanvasPixels\", 5242880);\n    }\n  })();\n  (function () {\n    if (isAndroid) {\n      compatParams.set(\"useSystemFonts\", false);\n    }\n  })();\n}\nconst OptionKind = {\n  BROWSER: 0x01,\n  VIEWER: 0x02,\n  API: 0x04,\n  WORKER: 0x08,\n  EVENT_DISPATCH: 0x10,\n  PREFERENCE: 0x80\n};\nconst Type = {\n  BOOLEAN: 0x01,\n  NUMBER: 0x02,\n  OBJECT: 0x04,\n  STRING: 0x08,\n  UNDEFINED: 0x10\n};\nconst defaultOptions = {\n  allowedGlobalEvents: {\n    value: null,\n    kind: OptionKind.BROWSER\n  },\n  canvasMaxAreaInBytes: {\n    value: -1,\n    kind: OptionKind.BROWSER + OptionKind.API\n  },\n  isInAutomation: {\n    value: false,\n    kind: OptionKind.BROWSER\n  },\n  localeProperties: {\n    value: {\n      lang: navigator.language || \"en-US\"\n    },\n    kind: OptionKind.BROWSER\n  },\n  nimbusDataStr: {\n    value: \"\",\n    kind: OptionKind.BROWSER\n  },\n  supportsCaretBrowsingMode: {\n    value: false,\n    kind: OptionKind.BROWSER\n  },\n  supportsDocumentFonts: {\n    value: true,\n    kind: OptionKind.BROWSER\n  },\n  supportsIntegratedFind: {\n    value: false,\n    kind: OptionKind.BROWSER\n  },\n  supportsMouseWheelZoomCtrlKey: {\n    value: true,\n    kind: OptionKind.BROWSER\n  },\n  supportsMouseWheelZoomMetaKey: {\n    value: true,\n    kind: OptionKind.BROWSER\n  },\n  supportsPinchToZoom: {\n    value: true,\n    kind: OptionKind.BROWSER\n  },\n  toolbarDensity: {\n    value: 0,\n    kind: OptionKind.BROWSER + OptionKind.EVENT_DISPATCH\n  },\n  altTextLearnMoreUrl: {\n    value: \"\",\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  annotationEditorMode: {\n    value: 0,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  annotationMode: {\n    value: 2,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  cursorToolOnLoad: {\n    value: 0,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  debuggerSrc: {\n    value: \"./debugger.mjs\",\n    kind: OptionKind.VIEWER\n  },\n  defaultZoomDelay: {\n    value: 400,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  defaultZoomValue: {\n    value: \"\",\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  disableHistory: {\n    value: false,\n    kind: OptionKind.VIEWER\n  },\n  disablePageLabels: {\n    value: false,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  enableAltText: {\n    value: false,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  enableAltTextModelDownload: {\n    value: true,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE + OptionKind.EVENT_DISPATCH\n  },\n  enableGuessAltText: {\n    value: true,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE + OptionKind.EVENT_DISPATCH\n  },\n  enableHighlightFloatingButton: {\n    value: false,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  enableNewAltTextWhenAddingImage: {\n    value: true,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  enablePermissions: {\n    value: false,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  enablePrintAutoRotate: {\n    value: true,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  enableScripting: {\n    value: true,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  enableUpdatedAddImage: {\n    value: false,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  externalLinkRel: {\n    value: \"noopener noreferrer nofollow\",\n    kind: OptionKind.VIEWER\n  },\n  externalLinkTarget: {\n    value: 0,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  highlightEditorColors: {\n    value: \"yellow=#FFFF98,green=#53FFBC,blue=#80EBFF,pink=#FFCBE6,red=#FF4F5F\",\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  historyUpdateUrl: {\n    value: false,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  ignoreDestinationZoom: {\n    value: false,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  imageResourcesPath: {\n    value: \"./images/\",\n    kind: OptionKind.VIEWER\n  },\n  maxCanvasPixels: {\n    value: 2 ** 25,\n    kind: OptionKind.VIEWER\n  },\n  forcePageColors: {\n    value: false,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  pageColorsBackground: {\n    value: \"Canvas\",\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  pageColorsForeground: {\n    value: \"CanvasText\",\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  pdfBugEnabled: {\n    value: false,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  printResolution: {\n    value: 150,\n    kind: OptionKind.VIEWER\n  },\n  sidebarViewOnLoad: {\n    value: -1,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  scrollModeOnLoad: {\n    value: -1,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  spreadModeOnLoad: {\n    value: -1,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  textLayerMode: {\n    value: 1,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  viewOnLoad: {\n    value: 0,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  cMapPacked: {\n    value: true,\n    kind: OptionKind.API\n  },\n  cMapUrl: {\n    value: \"../web/cmaps/\",\n    kind: OptionKind.API\n  },\n  disableAutoFetch: {\n    value: false,\n    kind: OptionKind.API + OptionKind.PREFERENCE\n  },\n  disableFontFace: {\n    value: false,\n    kind: OptionKind.API + OptionKind.PREFERENCE\n  },\n  disableRange: {\n    value: false,\n    kind: OptionKind.API + OptionKind.PREFERENCE\n  },\n  disableStream: {\n    value: false,\n    kind: OptionKind.API + OptionKind.PREFERENCE\n  },\n  docBaseUrl: {\n    value: \"\",\n    kind: OptionKind.API\n  },\n  enableHWA: {\n    value: true,\n    kind: OptionKind.API + OptionKind.VIEWER + OptionKind.PREFERENCE\n  },\n  enableXfa: {\n    value: true,\n    kind: OptionKind.API + OptionKind.PREFERENCE\n  },\n  fontExtraProperties: {\n    value: false,\n    kind: OptionKind.API\n  },\n  isEvalSupported: {\n    value: true,\n    kind: OptionKind.API\n  },\n  isOffscreenCanvasSupported: {\n    value: true,\n    kind: OptionKind.API\n  },\n  maxImageSize: {\n    value: -1,\n    kind: OptionKind.API\n  },\n  pdfBug: {\n    value: false,\n    kind: OptionKind.API\n  },\n  standardFontDataUrl: {\n    value: \"../web/standard_fonts/\",\n    kind: OptionKind.API\n  },\n  useSystemFonts: {\n    value: undefined,\n    kind: OptionKind.API,\n    type: Type.BOOLEAN + Type.UNDEFINED\n  },\n  verbosity: {\n    value: 1,\n    kind: OptionKind.API\n  },\n  workerPort: {\n    value: null,\n    kind: OptionKind.WORKER\n  },\n  workerSrc: {\n    value: \"../build/pdf.worker.mjs\",\n    kind: OptionKind.WORKER\n  }\n};\n{\n  defaultOptions.defaultUrl = {\n    value: \"compressed.tracemonkey-pldi-09.pdf\",\n    kind: OptionKind.VIEWER\n  };\n  defaultOptions.sandboxBundleSrc = {\n    value: \"../build/pdf.sandbox.mjs\",\n    kind: OptionKind.VIEWER\n  };\n  defaultOptions.viewerCssTheme = {\n    value: 0,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE\n  };\n  defaultOptions.enableFakeMLManager = {\n    value: true,\n    kind: OptionKind.VIEWER\n  };\n}\n{\n  defaultOptions.disablePreferences = {\n    value: false,\n    kind: OptionKind.VIEWER\n  };\n}\nclass AppOptions {\n  static eventBus;\n  static #opts = new Map();\n  static {\n    for (const name in defaultOptions) {\n      this.#opts.set(name, defaultOptions[name].value);\n    }\n    for (const [name, value] of compatParams) {\n      this.#opts.set(name, value);\n    }\n    this._hasInvokedSet = false;\n    this._checkDisablePreferences = () => {\n      if (this.get(\"disablePreferences\")) {\n        return true;\n      }\n      if (this._hasInvokedSet) {\n        console.warn(\"The Preferences may override manually set AppOptions; \" + 'please use the \"disablePreferences\"-option to prevent that.');\n      }\n      return false;\n    };\n  }\n  static get(name) {\n    return this.#opts.get(name);\n  }\n  static getAll(kind = null, defaultOnly = false) {\n    const options = Object.create(null);\n    for (const name in defaultOptions) {\n      const defaultOpt = defaultOptions[name];\n      if (kind && !(kind & defaultOpt.kind)) {\n        continue;\n      }\n      options[name] = !defaultOnly ? this.#opts.get(name) : defaultOpt.value;\n    }\n    return options;\n  }\n  static set(name, value) {\n    this.setAll({\n      [name]: value\n    });\n  }\n  static setAll(options, prefs = false) {\n    this._hasInvokedSet ||= true;\n    let events;\n    for (const name in options) {\n      const defaultOpt = defaultOptions[name],\n        userOpt = options[name];\n      if (!defaultOpt || !(typeof userOpt === typeof defaultOpt.value || Type[(typeof userOpt).toUpperCase()] & defaultOpt.type)) {\n        continue;\n      }\n      const {\n        kind\n      } = defaultOpt;\n      if (prefs && !(kind & OptionKind.BROWSER || kind & OptionKind.PREFERENCE)) {\n        continue;\n      }\n      if (this.eventBus && kind & OptionKind.EVENT_DISPATCH) {\n        (events ||= new Map()).set(name, userOpt);\n      }\n      this.#opts.set(name, userOpt);\n    }\n    if (events) {\n      for (const [name, value] of events) {\n        this.eventBus.dispatch(name.toLowerCase(), {\n          source: this,\n          value\n        });\n      }\n    }\n  }\n}\n\n;// ./web/draw_layer_builder.js\n\nclass DrawLayerBuilder {\n  #drawLayer = null;\n  constructor(options) {\n    this.pageIndex = options.pageIndex;\n  }\n  async render(intent = \"display\") {\n    if (intent !== \"display\" || this.#drawLayer || this._cancelled) {\n      return;\n    }\n    this.#drawLayer = new DrawLayer({\n      pageIndex: this.pageIndex\n    });\n  }\n  cancel() {\n    this._cancelled = true;\n    if (!this.#drawLayer) {\n      return;\n    }\n    this.#drawLayer.destroy();\n    this.#drawLayer = null;\n  }\n  setParent(parent) {\n    this.#drawLayer?.setParent(parent);\n  }\n  getDrawLayer() {\n    return this.#drawLayer;\n  }\n}\n\n;// ./web/struct_tree_layer_builder.js\n\nconst PDF_ROLE_TO_HTML_ROLE = {\n  Document: null,\n  DocumentFragment: null,\n  Part: \"group\",\n  Sect: \"group\",\n  Div: \"group\",\n  Aside: \"note\",\n  NonStruct: \"none\",\n  P: null,\n  H: \"heading\",\n  Title: null,\n  FENote: \"note\",\n  Sub: \"group\",\n  Lbl: null,\n  Span: null,\n  Em: null,\n  Strong: null,\n  Link: \"link\",\n  Annot: \"note\",\n  Form: \"form\",\n  Ruby: null,\n  RB: null,\n  RT: null,\n  RP: null,\n  Warichu: null,\n  WT: null,\n  WP: null,\n  L: \"list\",\n  LI: \"listitem\",\n  LBody: null,\n  Table: \"table\",\n  TR: \"row\",\n  TH: \"columnheader\",\n  TD: \"cell\",\n  THead: \"columnheader\",\n  TBody: null,\n  TFoot: null,\n  Caption: null,\n  Figure: \"figure\",\n  Formula: null,\n  Artifact: null\n};\nconst HEADING_PATTERN = /^H(\\d+)$/;\nclass StructTreeLayerBuilder {\n  #promise;\n  #treeDom = null;\n  #treePromise;\n  #elementAttributes = new Map();\n  #rawDims;\n  #elementsToAddToTextLayer = null;\n  constructor(pdfPage, rawDims) {\n    this.#promise = pdfPage.getStructTree();\n    this.#rawDims = rawDims;\n  }\n  async render() {\n    if (this.#treePromise) {\n      return this.#treePromise;\n    }\n    const {\n      promise,\n      resolve,\n      reject\n    } = Promise.withResolvers();\n    this.#treePromise = promise;\n    try {\n      this.#treeDom = this.#walk(await this.#promise);\n    } catch (ex) {\n      reject(ex);\n    }\n    this.#promise = null;\n    this.#treeDom?.classList.add(\"structTree\");\n    resolve(this.#treeDom);\n    return promise;\n  }\n  async getAriaAttributes(annotationId) {\n    try {\n      await this.render();\n      return this.#elementAttributes.get(annotationId);\n    } catch {}\n    return null;\n  }\n  hide() {\n    if (this.#treeDom && !this.#treeDom.hidden) {\n      this.#treeDom.hidden = true;\n    }\n  }\n  show() {\n    if (this.#treeDom?.hidden) {\n      this.#treeDom.hidden = false;\n    }\n  }\n  #setAttributes(structElement, htmlElement) {\n    const {\n      alt,\n      id,\n      lang\n    } = structElement;\n    if (alt !== undefined) {\n      let added = false;\n      const label = removeNullCharacters(alt);\n      for (const child of structElement.children) {\n        if (child.type === \"annotation\") {\n          let attrs = this.#elementAttributes.get(child.id);\n          if (!attrs) {\n            attrs = new Map();\n            this.#elementAttributes.set(child.id, attrs);\n          }\n          attrs.set(\"aria-label\", label);\n          added = true;\n        }\n      }\n      if (!added) {\n        htmlElement.setAttribute(\"aria-label\", label);\n      }\n    }\n    if (id !== undefined) {\n      htmlElement.setAttribute(\"aria-owns\", id);\n    }\n    if (lang !== undefined) {\n      htmlElement.setAttribute(\"lang\", removeNullCharacters(lang, true));\n    }\n  }\n  #addImageInTextLayer(node, element) {\n    const {\n      alt,\n      bbox,\n      children\n    } = node;\n    const child = children?.[0];\n    if (!this.#rawDims || !alt || !bbox || child?.type !== \"content\") {\n      return false;\n    }\n    const {\n      id\n    } = child;\n    if (!id) {\n      return false;\n    }\n    element.setAttribute(\"aria-owns\", id);\n    const img = document.createElement(\"span\");\n    (this.#elementsToAddToTextLayer ||= new Map()).set(id, img);\n    img.setAttribute(\"role\", \"img\");\n    img.setAttribute(\"aria-label\", removeNullCharacters(alt));\n    const {\n      pageHeight,\n      pageX,\n      pageY\n    } = this.#rawDims;\n    const calc = \"calc(var(--scale-factor)*\";\n    const {\n      style\n    } = img;\n    style.width = `${calc}${bbox[2] - bbox[0]}px)`;\n    style.height = `${calc}${bbox[3] - bbox[1]}px)`;\n    style.left = `${calc}${bbox[0] - pageX}px)`;\n    style.top = `${calc}${pageHeight - bbox[3] + pageY}px)`;\n    return true;\n  }\n  addElementsToTextLayer() {\n    if (!this.#elementsToAddToTextLayer) {\n      return;\n    }\n    for (const [id, img] of this.#elementsToAddToTextLayer) {\n      document.getElementById(id)?.append(img);\n    }\n    this.#elementsToAddToTextLayer.clear();\n    this.#elementsToAddToTextLayer = null;\n  }\n  #walk(node) {\n    if (!node) {\n      return null;\n    }\n    const element = document.createElement(\"span\");\n    if (\"role\" in node) {\n      const {\n        role\n      } = node;\n      const match = role.match(HEADING_PATTERN);\n      if (match) {\n        element.setAttribute(\"role\", \"heading\");\n        element.setAttribute(\"aria-level\", match[1]);\n      } else if (PDF_ROLE_TO_HTML_ROLE[role]) {\n        element.setAttribute(\"role\", PDF_ROLE_TO_HTML_ROLE[role]);\n      }\n      if (role === \"Figure\" && this.#addImageInTextLayer(node, element)) {\n        return element;\n      }\n    }\n    this.#setAttributes(node, element);\n    if (node.children) {\n      if (node.children.length === 1 && \"id\" in node.children[0]) {\n        this.#setAttributes(node.children[0], element);\n      } else {\n        for (const kid of node.children) {\n          element.append(this.#walk(kid));\n        }\n      }\n    }\n    return element;\n  }\n}\n\n;// ./web/text_accessibility.js\n\nclass TextAccessibilityManager {\n  #enabled = false;\n  #textChildren = null;\n  #textNodes = new Map();\n  #waitingElements = new Map();\n  setTextMapping(textDivs) {\n    this.#textChildren = textDivs;\n  }\n  static #compareElementPositions(e1, e2) {\n    const rect1 = e1.getBoundingClientRect();\n    const rect2 = e2.getBoundingClientRect();\n    if (rect1.width === 0 && rect1.height === 0) {\n      return +1;\n    }\n    if (rect2.width === 0 && rect2.height === 0) {\n      return -1;\n    }\n    const top1 = rect1.y;\n    const bot1 = rect1.y + rect1.height;\n    const mid1 = rect1.y + rect1.height / 2;\n    const top2 = rect2.y;\n    const bot2 = rect2.y + rect2.height;\n    const mid2 = rect2.y + rect2.height / 2;\n    if (mid1 <= top2 && mid2 >= bot1) {\n      return -1;\n    }\n    if (mid2 <= top1 && mid1 >= bot2) {\n      return +1;\n    }\n    const centerX1 = rect1.x + rect1.width / 2;\n    const centerX2 = rect2.x + rect2.width / 2;\n    return centerX1 - centerX2;\n  }\n  enable() {\n    if (this.#enabled) {\n      throw new Error(\"TextAccessibilityManager is already enabled.\");\n    }\n    if (!this.#textChildren) {\n      throw new Error(\"Text divs and strings have not been set.\");\n    }\n    this.#enabled = true;\n    this.#textChildren = this.#textChildren.slice();\n    this.#textChildren.sort(TextAccessibilityManager.#compareElementPositions);\n    if (this.#textNodes.size > 0) {\n      const textChildren = this.#textChildren;\n      for (const [id, nodeIndex] of this.#textNodes) {\n        const element = document.getElementById(id);\n        if (!element) {\n          this.#textNodes.delete(id);\n          continue;\n        }\n        this.#addIdToAriaOwns(id, textChildren[nodeIndex]);\n      }\n    }\n    for (const [element, isRemovable] of this.#waitingElements) {\n      this.addPointerInTextLayer(element, isRemovable);\n    }\n    this.#waitingElements.clear();\n  }\n  disable() {\n    if (!this.#enabled) {\n      return;\n    }\n    this.#waitingElements.clear();\n    this.#textChildren = null;\n    this.#enabled = false;\n  }\n  removePointerInTextLayer(element) {\n    if (!this.#enabled) {\n      this.#waitingElements.delete(element);\n      return;\n    }\n    const children = this.#textChildren;\n    if (!children || children.length === 0) {\n      return;\n    }\n    const {\n      id\n    } = element;\n    const nodeIndex = this.#textNodes.get(id);\n    if (nodeIndex === undefined) {\n      return;\n    }\n    const node = children[nodeIndex];\n    this.#textNodes.delete(id);\n    let owns = node.getAttribute(\"aria-owns\");\n    if (owns?.includes(id)) {\n      owns = owns.split(\" \").filter(x => x !== id).join(\" \");\n      if (owns) {\n        node.setAttribute(\"aria-owns\", owns);\n      } else {\n        node.removeAttribute(\"aria-owns\");\n        node.setAttribute(\"role\", \"presentation\");\n      }\n    }\n  }\n  #addIdToAriaOwns(id, node) {\n    const owns = node.getAttribute(\"aria-owns\");\n    if (!owns?.includes(id)) {\n      node.setAttribute(\"aria-owns\", owns ? `${owns} ${id}` : id);\n    }\n    node.removeAttribute(\"role\");\n  }\n  addPointerInTextLayer(element, isRemovable) {\n    const {\n      id\n    } = element;\n    if (!id) {\n      return null;\n    }\n    if (!this.#enabled) {\n      this.#waitingElements.set(element, isRemovable);\n      return null;\n    }\n    if (isRemovable) {\n      this.removePointerInTextLayer(element);\n    }\n    const children = this.#textChildren;\n    if (!children || children.length === 0) {\n      return null;\n    }\n    const index = binarySearchFirstItem(children, node => TextAccessibilityManager.#compareElementPositions(element, node) < 0);\n    const nodeIndex = Math.max(0, index - 1);\n    const child = children[nodeIndex];\n    this.#addIdToAriaOwns(id, child);\n    this.#textNodes.set(id, nodeIndex);\n    const parent = child.parentNode;\n    return parent?.classList.contains(\"markedContent\") ? parent.id : null;\n  }\n  moveElementInDOM(container, element, contentElement, isRemovable) {\n    const id = this.addPointerInTextLayer(contentElement, isRemovable);\n    if (!container.hasChildNodes()) {\n      container.append(element);\n      return id;\n    }\n    const children = Array.from(container.childNodes).filter(node => node !== element);\n    if (children.length === 0) {\n      return id;\n    }\n    const elementToCompare = contentElement || element;\n    const index = binarySearchFirstItem(children, node => TextAccessibilityManager.#compareElementPositions(elementToCompare, node) < 0);\n    if (index === 0) {\n      children[0].before(element);\n    } else {\n      children[index - 1].after(element);\n    }\n    return id;\n  }\n}\n\n;// ./web/text_highlighter.js\nclass TextHighlighter {\n  #eventAbortController = null;\n  constructor({\n    findController,\n    eventBus,\n    pageIndex\n  }) {\n    this.findController = findController;\n    this.matches = [];\n    this.eventBus = eventBus;\n    this.pageIdx = pageIndex;\n    this.textDivs = null;\n    this.textContentItemsStr = null;\n    this.enabled = false;\n  }\n  setTextMapping(divs, texts) {\n    this.textDivs = divs;\n    this.textContentItemsStr = texts;\n  }\n  enable() {\n    if (!this.textDivs || !this.textContentItemsStr) {\n      throw new Error(\"Text divs and strings have not been set.\");\n    }\n    if (this.enabled) {\n      throw new Error(\"TextHighlighter is already enabled.\");\n    }\n    this.enabled = true;\n    if (!this.#eventAbortController) {\n      this.#eventAbortController = new AbortController();\n      this.eventBus._on(\"updatetextlayermatches\", evt => {\n        if (evt.pageIndex === this.pageIdx || evt.pageIndex === -1) {\n          this._updateMatches();\n        }\n      }, {\n        signal: this.#eventAbortController.signal\n      });\n    }\n    this._updateMatches();\n  }\n  disable() {\n    if (!this.enabled) {\n      return;\n    }\n    this.enabled = false;\n    this.#eventAbortController?.abort();\n    this.#eventAbortController = null;\n    this._updateMatches(true);\n  }\n  _convertMatches(matches, matchesLength) {\n    if (!matches) {\n      return [];\n    }\n    const {\n      textContentItemsStr\n    } = this;\n    let i = 0,\n      iIndex = 0;\n    const end = textContentItemsStr.length - 1;\n    const result = [];\n    for (let m = 0, mm = matches.length; m < mm; m++) {\n      let matchIdx = matches[m];\n      while (i !== end && matchIdx >= iIndex + textContentItemsStr[i].length) {\n        iIndex += textContentItemsStr[i].length;\n        i++;\n      }\n      if (i === textContentItemsStr.length) {\n        console.error(\"Could not find a matching mapping\");\n      }\n      const match = {\n        begin: {\n          divIdx: i,\n          offset: matchIdx - iIndex\n        }\n      };\n      matchIdx += matchesLength[m];\n      while (i !== end && matchIdx > iIndex + textContentItemsStr[i].length) {\n        iIndex += textContentItemsStr[i].length;\n        i++;\n      }\n      match.end = {\n        divIdx: i,\n        offset: matchIdx - iIndex\n      };\n      result.push(match);\n    }\n    return result;\n  }\n  _renderMatches(matches) {\n    if (matches.length === 0) {\n      return;\n    }\n    const {\n      findController,\n      pageIdx\n    } = this;\n    const {\n      textContentItemsStr,\n      textDivs\n    } = this;\n    const isSelectedPage = pageIdx === findController.selected.pageIdx;\n    const selectedMatchIdx = findController.selected.matchIdx;\n    const highlightAll = findController.state.highlightAll;\n    let prevEnd = null;\n    const infinity = {\n      divIdx: -1,\n      offset: undefined\n    };\n    function beginText(begin, className) {\n      const divIdx = begin.divIdx;\n      textDivs[divIdx].textContent = \"\";\n      return appendTextToDiv(divIdx, 0, begin.offset, className);\n    }\n    function appendTextToDiv(divIdx, fromOffset, toOffset, className) {\n      let div = textDivs[divIdx];\n      if (div.nodeType === Node.TEXT_NODE) {\n        const span = document.createElement(\"span\");\n        div.before(span);\n        span.append(div);\n        textDivs[divIdx] = span;\n        div = span;\n      }\n      const content = textContentItemsStr[divIdx].substring(fromOffset, toOffset);\n      const node = document.createTextNode(content);\n      if (className) {\n        const span = document.createElement(\"span\");\n        span.className = `${className} appended`;\n        span.append(node);\n        div.append(span);\n        return className.includes(\"selected\") ? span.offsetLeft : 0;\n      }\n      div.append(node);\n      return 0;\n    }\n    let i0 = selectedMatchIdx,\n      i1 = i0 + 1;\n    if (highlightAll) {\n      i0 = 0;\n      i1 = matches.length;\n    } else if (!isSelectedPage) {\n      return;\n    }\n    let lastDivIdx = -1;\n    let lastOffset = -1;\n    for (let i = i0; i < i1; i++) {\n      const match = matches[i];\n      const begin = match.begin;\n      if (begin.divIdx === lastDivIdx && begin.offset === lastOffset) {\n        continue;\n      }\n      lastDivIdx = begin.divIdx;\n      lastOffset = begin.offset;\n      const end = match.end;\n      const isSelected = isSelectedPage && i === selectedMatchIdx;\n      const highlightSuffix = isSelected ? \" selected\" : \"\";\n      let selectedLeft = 0;\n      if (!prevEnd || begin.divIdx !== prevEnd.divIdx) {\n        if (prevEnd !== null) {\n          appendTextToDiv(prevEnd.divIdx, prevEnd.offset, infinity.offset);\n        }\n        beginText(begin);\n      } else {\n        appendTextToDiv(prevEnd.divIdx, prevEnd.offset, begin.offset);\n      }\n      if (begin.divIdx === end.divIdx) {\n        selectedLeft = appendTextToDiv(begin.divIdx, begin.offset, end.offset, \"highlight\" + highlightSuffix);\n      } else {\n        selectedLeft = appendTextToDiv(begin.divIdx, begin.offset, infinity.offset, \"highlight begin\" + highlightSuffix);\n        for (let n0 = begin.divIdx + 1, n1 = end.divIdx; n0 < n1; n0++) {\n          textDivs[n0].className = \"highlight middle\" + highlightSuffix;\n        }\n        beginText(end, \"highlight end\" + highlightSuffix);\n      }\n      prevEnd = end;\n      if (isSelected) {\n        findController.scrollMatchIntoView({\n          element: textDivs[begin.divIdx],\n          selectedLeft,\n          pageIndex: pageIdx,\n          matchIndex: selectedMatchIdx\n        });\n      }\n    }\n    if (prevEnd) {\n      appendTextToDiv(prevEnd.divIdx, prevEnd.offset, infinity.offset);\n    }\n  }\n  _updateMatches(reset = false) {\n    if (!this.enabled && !reset) {\n      return;\n    }\n    const {\n      findController,\n      matches,\n      pageIdx\n    } = this;\n    const {\n      textContentItemsStr,\n      textDivs\n    } = this;\n    let clearedUntilDivIdx = -1;\n    for (const match of matches) {\n      const begin = Math.max(clearedUntilDivIdx, match.begin.divIdx);\n      for (let n = begin, end = match.end.divIdx; n <= end; n++) {\n        const div = textDivs[n];\n        div.textContent = textContentItemsStr[n];\n        div.className = \"\";\n      }\n      clearedUntilDivIdx = match.end.divIdx + 1;\n    }\n    if (!findController?.highlightMatches || reset) {\n      return;\n    }\n    const pageMatches = findController.pageMatches[pageIdx] || null;\n    const pageMatchesLength = findController.pageMatchesLength[pageIdx] || null;\n    this.matches = this._convertMatches(pageMatches, pageMatchesLength);\n    this._renderMatches(this.matches);\n  }\n}\n\n;// ./web/text_layer_builder.js\n\n\nclass TextLayerBuilder {\n  #enablePermissions = false;\n  #onAppend = null;\n  #renderingDone = false;\n  #textLayer = null;\n  static #textLayers = new Map();\n  static #selectionChangeAbortController = null;\n  constructor({\n    pdfPage,\n    highlighter = null,\n    accessibilityManager = null,\n    enablePermissions = false,\n    onAppend = null\n  }) {\n    this.pdfPage = pdfPage;\n    this.highlighter = highlighter;\n    this.accessibilityManager = accessibilityManager;\n    this.#enablePermissions = enablePermissions === true;\n    this.#onAppend = onAppend;\n    this.div = document.createElement(\"div\");\n    this.div.tabIndex = 0;\n    this.div.className = \"textLayer\";\n  }\n  async render(viewport, textContentParams = null) {\n    if (this.#renderingDone && this.#textLayer) {\n      this.#textLayer.update({\n        viewport,\n        onBefore: this.hide.bind(this)\n      });\n      this.show();\n      return;\n    }\n    this.cancel();\n    this.#textLayer = new TextLayer({\n      textContentSource: this.pdfPage.streamTextContent(textContentParams || {\n        includeMarkedContent: true,\n        disableNormalization: true\n      }),\n      container: this.div,\n      viewport\n    });\n    const {\n      textDivs,\n      textContentItemsStr\n    } = this.#textLayer;\n    this.highlighter?.setTextMapping(textDivs, textContentItemsStr);\n    this.accessibilityManager?.setTextMapping(textDivs);\n    await this.#textLayer.render();\n    this.#renderingDone = true;\n    const endOfContent = document.createElement(\"div\");\n    endOfContent.className = \"endOfContent\";\n    this.div.append(endOfContent);\n    this.#bindMouse(endOfContent);\n    this.#onAppend?.(this.div);\n    this.highlighter?.enable();\n    this.accessibilityManager?.enable();\n  }\n  hide() {\n    if (!this.div.hidden && this.#renderingDone) {\n      this.highlighter?.disable();\n      this.div.hidden = true;\n    }\n  }\n  show() {\n    if (this.div.hidden && this.#renderingDone) {\n      this.div.hidden = false;\n      this.highlighter?.enable();\n    }\n  }\n  cancel() {\n    this.#textLayer?.cancel();\n    this.#textLayer = null;\n    this.highlighter?.disable();\n    this.accessibilityManager?.disable();\n    TextLayerBuilder.#removeGlobalSelectionListener(this.div);\n  }\n  #bindMouse(end) {\n    const {\n      div\n    } = this;\n    div.addEventListener(\"mousedown\", () => {\n      div.classList.add(\"selecting\");\n    });\n    div.addEventListener(\"copy\", event => {\n      if (!this.#enablePermissions) {\n        const selection = document.getSelection();\n        event.clipboardData.setData(\"text/plain\", removeNullCharacters(normalizeUnicode(selection.toString())));\n      }\n      event.preventDefault();\n      event.stopPropagation();\n    });\n    TextLayerBuilder.#textLayers.set(div, end);\n    TextLayerBuilder.#enableGlobalSelectionListener();\n  }\n  static #removeGlobalSelectionListener(textLayerDiv) {\n    this.#textLayers.delete(textLayerDiv);\n    if (this.#textLayers.size === 0) {\n      this.#selectionChangeAbortController?.abort();\n      this.#selectionChangeAbortController = null;\n    }\n  }\n  static #enableGlobalSelectionListener() {\n    if (this.#selectionChangeAbortController) {\n      return;\n    }\n    this.#selectionChangeAbortController = new AbortController();\n    const {\n      signal\n    } = this.#selectionChangeAbortController;\n    const reset = (end, textLayer) => {\n      textLayer.append(end);\n      end.style.width = \"\";\n      end.style.height = \"\";\n      textLayer.classList.remove(\"selecting\");\n    };\n    let isPointerDown = false;\n    document.addEventListener(\"pointerdown\", () => {\n      isPointerDown = true;\n    }, {\n      signal\n    });\n    document.addEventListener(\"pointerup\", () => {\n      isPointerDown = false;\n      this.#textLayers.forEach(reset);\n    }, {\n      signal\n    });\n    window.addEventListener(\"blur\", () => {\n      isPointerDown = false;\n      this.#textLayers.forEach(reset);\n    }, {\n      signal\n    });\n    document.addEventListener(\"keyup\", () => {\n      if (!isPointerDown) {\n        this.#textLayers.forEach(reset);\n      }\n    }, {\n      signal\n    });\n    var isFirefox, prevRange;\n    document.addEventListener(\"selectionchange\", () => {\n      const selection = document.getSelection();\n      if (selection.rangeCount === 0) {\n        this.#textLayers.forEach(reset);\n        return;\n      }\n      const activeTextLayers = new Set();\n      for (let i = 0; i < selection.rangeCount; i++) {\n        const range = selection.getRangeAt(i);\n        for (const textLayerDiv of this.#textLayers.keys()) {\n          if (!activeTextLayers.has(textLayerDiv) && range.intersectsNode(textLayerDiv)) {\n            activeTextLayers.add(textLayerDiv);\n          }\n        }\n      }\n      for (const [textLayerDiv, endDiv] of this.#textLayers) {\n        if (activeTextLayers.has(textLayerDiv)) {\n          textLayerDiv.classList.add(\"selecting\");\n        } else {\n          reset(endDiv, textLayerDiv);\n        }\n      }\n      isFirefox ??= getComputedStyle(this.#textLayers.values().next().value).getPropertyValue(\"-moz-user-select\") === \"none\";\n      if (isFirefox) {\n        return;\n      }\n      const range = selection.getRangeAt(0);\n      const modifyStart = prevRange && (range.compareBoundaryPoints(Range.END_TO_END, prevRange) === 0 || range.compareBoundaryPoints(Range.START_TO_END, prevRange) === 0);\n      let anchor = modifyStart ? range.startContainer : range.endContainer;\n      if (anchor.nodeType === Node.TEXT_NODE) {\n        anchor = anchor.parentNode;\n      }\n      const parentTextLayer = anchor.parentElement?.closest(\".textLayer\");\n      const endDiv = this.#textLayers.get(parentTextLayer);\n      if (endDiv) {\n        endDiv.style.width = parentTextLayer.style.width;\n        endDiv.style.height = parentTextLayer.style.height;\n        anchor.parentElement.insertBefore(endDiv, modifyStart ? anchor : anchor.nextSibling);\n      }\n      prevRange = range.cloneRange();\n    }, {\n      signal\n    });\n  }\n}\n\n;// ./web/xfa_layer_builder.js\n\nclass XfaLayerBuilder {\n  constructor({\n    pdfPage,\n    annotationStorage = null,\n    linkService,\n    xfaHtml = null\n  }) {\n    this.pdfPage = pdfPage;\n    this.annotationStorage = annotationStorage;\n    this.linkService = linkService;\n    this.xfaHtml = xfaHtml;\n    this.div = null;\n    this._cancelled = false;\n  }\n  async render(viewport, intent = \"display\") {\n    if (intent === \"print\") {\n      const parameters = {\n        viewport: viewport.clone({\n          dontFlip: true\n        }),\n        div: this.div,\n        xfaHtml: this.xfaHtml,\n        annotationStorage: this.annotationStorage,\n        linkService: this.linkService,\n        intent\n      };\n      this.div = document.createElement(\"div\");\n      parameters.div = this.div;\n      return XfaLayer.render(parameters);\n    }\n    const xfaHtml = await this.pdfPage.getXfa();\n    if (this._cancelled || !xfaHtml) {\n      return {\n        textDivs: []\n      };\n    }\n    const parameters = {\n      viewport: viewport.clone({\n        dontFlip: true\n      }),\n      div: this.div,\n      xfaHtml,\n      annotationStorage: this.annotationStorage,\n      linkService: this.linkService,\n      intent\n    };\n    if (this.div) {\n      return XfaLayer.update(parameters);\n    }\n    this.div = document.createElement(\"div\");\n    parameters.div = this.div;\n    return XfaLayer.render(parameters);\n  }\n  cancel() {\n    this._cancelled = true;\n  }\n  hide() {\n    if (!this.div) {\n      return;\n    }\n    this.div.hidden = true;\n  }\n}\n\n;// ./web/pdf_page_view.js\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst DEFAULT_LAYER_PROPERTIES = {\n  annotationEditorUIManager: null,\n  annotationStorage: null,\n  downloadManager: null,\n  enableScripting: false,\n  fieldObjectsPromise: null,\n  findController: null,\n  hasJSActionsPromise: null,\n  get linkService() {\n    return new SimpleLinkService();\n  }\n};\nconst LAYERS_ORDER = new Map([[\"canvasWrapper\", 0], [\"textLayer\", 1], [\"annotationLayer\", 2], [\"annotationEditorLayer\", 3], [\"xfaLayer\", 3]]);\nclass PDFPageView {\n  #annotationMode = AnnotationMode.ENABLE_FORMS;\n  #enableHWA = false;\n  #hasRestrictedScaling = false;\n  #isEditing = false;\n  #layerProperties = null;\n  #loadingId = null;\n  #previousRotation = null;\n  #scaleRoundX = 1;\n  #scaleRoundY = 1;\n  #renderError = null;\n  #renderingState = RenderingStates.INITIAL;\n  #textLayerMode = TextLayerMode.ENABLE;\n  #useThumbnailCanvas = {\n    directDrawing: true,\n    initialOptionalContent: true,\n    regularAnnotations: true\n  };\n  #viewportMap = new WeakMap();\n  #layers = [null, null, null, null];\n  constructor(options) {\n    const container = options.container;\n    const defaultViewport = options.defaultViewport;\n    this.id = options.id;\n    this.renderingId = \"page\" + this.id;\n    this.#layerProperties = options.layerProperties || DEFAULT_LAYER_PROPERTIES;\n    this.pdfPage = null;\n    this.pageLabel = null;\n    this.rotation = 0;\n    this.scale = options.scale || DEFAULT_SCALE;\n    this.viewport = defaultViewport;\n    this.pdfPageRotate = defaultViewport.rotation;\n    this._optionalContentConfigPromise = options.optionalContentConfigPromise || null;\n    this.#textLayerMode = options.textLayerMode ?? TextLayerMode.ENABLE;\n    this.#annotationMode = options.annotationMode ?? AnnotationMode.ENABLE_FORMS;\n    this.imageResourcesPath = options.imageResourcesPath || \"\";\n    this.maxCanvasPixels = options.maxCanvasPixels ?? AppOptions.get(\"maxCanvasPixels\");\n    this.pageColors = options.pageColors || null;\n    this.#enableHWA = options.enableHWA || false;\n    this.eventBus = options.eventBus;\n    this.renderingQueue = options.renderingQueue;\n    this.l10n = options.l10n;\n    this.l10n ||= new genericl10n_GenericL10n();\n    this.renderTask = null;\n    this.resume = null;\n    this._isStandalone = !this.renderingQueue?.hasViewer();\n    this._container = container;\n    this._annotationCanvasMap = null;\n    this.annotationLayer = null;\n    this.annotationEditorLayer = null;\n    this.textLayer = null;\n    this.zoomLayer = null;\n    this.xfaLayer = null;\n    this.structTreeLayer = null;\n    this.drawLayer = null;\n    const div = document.createElement(\"div\");\n    div.className = \"page\";\n    div.setAttribute(\"data-page-number\", this.id);\n    div.setAttribute(\"role\", \"region\");\n    div.setAttribute(\"data-l10n-id\", \"pdfjs-page-landmark\");\n    div.setAttribute(\"data-l10n-args\", JSON.stringify({\n      page: this.id\n    }));\n    this.div = div;\n    this.#setDimensions();\n    container?.append(div);\n    if (this._isStandalone) {\n      container?.style.setProperty(\"--scale-factor\", this.scale * PixelsPerInch.PDF_TO_CSS_UNITS);\n      if (this.pageColors?.background) {\n        container?.style.setProperty(\"--page-bg-color\", this.pageColors.background);\n      }\n      const {\n        optionalContentConfigPromise\n      } = options;\n      if (optionalContentConfigPromise) {\n        optionalContentConfigPromise.then(optionalContentConfig => {\n          if (optionalContentConfigPromise !== this._optionalContentConfigPromise) {\n            return;\n          }\n          this.#useThumbnailCanvas.initialOptionalContent = optionalContentConfig.hasInitialVisibility;\n        });\n      }\n      if (!options.l10n) {\n        this.l10n.translate(this.div);\n      }\n    }\n  }\n  #addLayer(div, name) {\n    const pos = LAYERS_ORDER.get(name);\n    const oldDiv = this.#layers[pos];\n    this.#layers[pos] = div;\n    if (oldDiv) {\n      oldDiv.replaceWith(div);\n      return;\n    }\n    for (let i = pos - 1; i >= 0; i--) {\n      const layer = this.#layers[i];\n      if (layer) {\n        layer.after(div);\n        return;\n      }\n    }\n    this.div.prepend(div);\n  }\n  get renderingState() {\n    return this.#renderingState;\n  }\n  set renderingState(state) {\n    if (state === this.#renderingState) {\n      return;\n    }\n    this.#renderingState = state;\n    if (this.#loadingId) {\n      clearTimeout(this.#loadingId);\n      this.#loadingId = null;\n    }\n    switch (state) {\n      case RenderingStates.PAUSED:\n        this.div.classList.remove(\"loading\");\n        break;\n      case RenderingStates.RUNNING:\n        this.div.classList.add(\"loadingIcon\");\n        this.#loadingId = setTimeout(() => {\n          this.div.classList.add(\"loading\");\n          this.#loadingId = null;\n        }, 0);\n        break;\n      case RenderingStates.INITIAL:\n      case RenderingStates.FINISHED:\n        this.div.classList.remove(\"loadingIcon\", \"loading\");\n        break;\n    }\n  }\n  #setDimensions() {\n    const {\n      viewport\n    } = this;\n    if (this.pdfPage) {\n      if (this.#previousRotation === viewport.rotation) {\n        return;\n      }\n      this.#previousRotation = viewport.rotation;\n    }\n    setLayerDimensions(this.div, viewport, true, false);\n  }\n  setPdfPage(pdfPage) {\n    if (this._isStandalone && (this.pageColors?.foreground === \"CanvasText\" || this.pageColors?.background === \"Canvas\")) {\n      this._container?.style.setProperty(\"--hcm-highlight-filter\", pdfPage.filterFactory.addHighlightHCMFilter(\"highlight\", \"CanvasText\", \"Canvas\", \"HighlightText\", \"Highlight\"));\n      this._container?.style.setProperty(\"--hcm-highlight-selected-filter\", pdfPage.filterFactory.addHighlightHCMFilter(\"highlight_selected\", \"CanvasText\", \"Canvas\", \"HighlightText\", \"Highlight\"));\n    }\n    this.pdfPage = pdfPage;\n    this.pdfPageRotate = pdfPage.rotate;\n    const totalRotation = (this.rotation + this.pdfPageRotate) % 360;\n    this.viewport = pdfPage.getViewport({\n      scale: this.scale * PixelsPerInch.PDF_TO_CSS_UNITS,\n      rotation: totalRotation\n    });\n    this.#setDimensions();\n    this.reset();\n  }\n  destroy() {\n    this.reset();\n    this.pdfPage?.cleanup();\n  }\n  hasEditableAnnotations() {\n    return !!this.annotationLayer?.hasEditableAnnotations();\n  }\n  get _textHighlighter() {\n    return shadow(this, \"_textHighlighter\", new TextHighlighter({\n      pageIndex: this.id - 1,\n      eventBus: this.eventBus,\n      findController: this.#layerProperties.findController\n    }));\n  }\n  #dispatchLayerRendered(name, error) {\n    this.eventBus.dispatch(name, {\n      source: this,\n      pageNumber: this.id,\n      error\n    });\n  }\n  async #renderAnnotationLayer() {\n    let error = null;\n    try {\n      await this.annotationLayer.render(this.viewport, {\n        structTreeLayer: this.structTreeLayer\n      }, \"display\");\n    } catch (ex) {\n      console.error(`#renderAnnotationLayer: \"${ex}\".`);\n      error = ex;\n    } finally {\n      this.#dispatchLayerRendered(\"annotationlayerrendered\", error);\n    }\n  }\n  async #renderAnnotationEditorLayer() {\n    let error = null;\n    try {\n      await this.annotationEditorLayer.render(this.viewport, \"display\");\n    } catch (ex) {\n      console.error(`#renderAnnotationEditorLayer: \"${ex}\".`);\n      error = ex;\n    } finally {\n      this.#dispatchLayerRendered(\"annotationeditorlayerrendered\", error);\n    }\n  }\n  async #renderDrawLayer() {\n    try {\n      await this.drawLayer.render(\"display\");\n    } catch (ex) {\n      console.error(`#renderDrawLayer: \"${ex}\".`);\n    }\n  }\n  async #renderXfaLayer() {\n    let error = null;\n    try {\n      const result = await this.xfaLayer.render(this.viewport, \"display\");\n      if (result?.textDivs && this._textHighlighter) {\n        this.#buildXfaTextContentItems(result.textDivs);\n      }\n    } catch (ex) {\n      console.error(`#renderXfaLayer: \"${ex}\".`);\n      error = ex;\n    } finally {\n      if (this.xfaLayer?.div) {\n        this.l10n.pause();\n        this.#addLayer(this.xfaLayer.div, \"xfaLayer\");\n        this.l10n.resume();\n      }\n      this.#dispatchLayerRendered(\"xfalayerrendered\", error);\n    }\n  }\n  async #renderTextLayer() {\n    if (!this.textLayer) {\n      return;\n    }\n    let error = null;\n    try {\n      await this.textLayer.render(this.viewport);\n    } catch (ex) {\n      if (ex instanceof AbortException) {\n        return;\n      }\n      console.error(`#renderTextLayer: \"${ex}\".`);\n      error = ex;\n    }\n    this.#dispatchLayerRendered(\"textlayerrendered\", error);\n    this.#renderStructTreeLayer();\n  }\n  async #renderStructTreeLayer() {\n    if (!this.textLayer) {\n      return;\n    }\n    const treeDom = await this.structTreeLayer?.render();\n    if (treeDom) {\n      this.l10n.pause();\n      this.structTreeLayer?.addElementsToTextLayer();\n      if (this.canvas && treeDom.parentNode !== this.canvas) {\n        this.canvas.append(treeDom);\n      }\n      this.l10n.resume();\n    }\n    this.structTreeLayer?.show();\n  }\n  async #buildXfaTextContentItems(textDivs) {\n    const text = await this.pdfPage.getTextContent();\n    const items = [];\n    for (const item of text.items) {\n      items.push(item.str);\n    }\n    this._textHighlighter.setTextMapping(textDivs, items);\n    this._textHighlighter.enable();\n  }\n  _resetZoomLayer(removeFromDOM = false) {\n    if (!this.zoomLayer) {\n      return;\n    }\n    const zoomLayerCanvas = this.zoomLayer.firstChild;\n    this.#viewportMap.delete(zoomLayerCanvas);\n    zoomLayerCanvas.width = 0;\n    zoomLayerCanvas.height = 0;\n    if (removeFromDOM) {\n      this.zoomLayer.remove();\n    }\n    this.zoomLayer = null;\n  }\n  reset({\n    keepZoomLayer = false,\n    keepAnnotationLayer = false,\n    keepAnnotationEditorLayer = false,\n    keepXfaLayer = false,\n    keepTextLayer = false\n  } = {}) {\n    this.cancelRendering({\n      keepAnnotationLayer,\n      keepAnnotationEditorLayer,\n      keepXfaLayer,\n      keepTextLayer\n    });\n    this.renderingState = RenderingStates.INITIAL;\n    const div = this.div;\n    const childNodes = div.childNodes,\n      zoomLayerNode = keepZoomLayer && this.zoomLayer || null,\n      annotationLayerNode = keepAnnotationLayer && this.annotationLayer?.div || null,\n      annotationEditorLayerNode = keepAnnotationEditorLayer && this.annotationEditorLayer?.div || null,\n      xfaLayerNode = keepXfaLayer && this.xfaLayer?.div || null,\n      textLayerNode = keepTextLayer && this.textLayer?.div || null;\n    for (let i = childNodes.length - 1; i >= 0; i--) {\n      const node = childNodes[i];\n      switch (node) {\n        case zoomLayerNode:\n        case annotationLayerNode:\n        case annotationEditorLayerNode:\n        case xfaLayerNode:\n        case textLayerNode:\n          continue;\n      }\n      node.remove();\n      const layerIndex = this.#layers.indexOf(node);\n      if (layerIndex >= 0) {\n        this.#layers[layerIndex] = null;\n      }\n    }\n    div.removeAttribute(\"data-loaded\");\n    if (annotationLayerNode) {\n      this.annotationLayer.hide();\n    }\n    if (annotationEditorLayerNode) {\n      this.annotationEditorLayer.hide();\n    }\n    if (xfaLayerNode) {\n      this.xfaLayer.hide();\n    }\n    if (textLayerNode) {\n      this.textLayer.hide();\n    }\n    this.structTreeLayer?.hide();\n    if (!zoomLayerNode) {\n      if (this.canvas) {\n        this.#viewportMap.delete(this.canvas);\n        this.canvas.width = 0;\n        this.canvas.height = 0;\n        delete this.canvas;\n      }\n      this._resetZoomLayer();\n    }\n  }\n  toggleEditingMode(isEditing) {\n    if (!this.hasEditableAnnotations()) {\n      return;\n    }\n    this.#isEditing = isEditing;\n    this.reset({\n      keepZoomLayer: true,\n      keepAnnotationLayer: true,\n      keepAnnotationEditorLayer: true,\n      keepXfaLayer: true,\n      keepTextLayer: true\n    });\n  }\n  update({\n    scale = 0,\n    rotation = null,\n    optionalContentConfigPromise = null,\n    drawingDelay = -1\n  }) {\n    this.scale = scale || this.scale;\n    if (typeof rotation === \"number\") {\n      this.rotation = rotation;\n    }\n    if (optionalContentConfigPromise instanceof Promise) {\n      this._optionalContentConfigPromise = optionalContentConfigPromise;\n      optionalContentConfigPromise.then(optionalContentConfig => {\n        if (optionalContentConfigPromise !== this._optionalContentConfigPromise) {\n          return;\n        }\n        this.#useThumbnailCanvas.initialOptionalContent = optionalContentConfig.hasInitialVisibility;\n      });\n    }\n    this.#useThumbnailCanvas.directDrawing = true;\n    const totalRotation = (this.rotation + this.pdfPageRotate) % 360;\n    this.viewport = this.viewport.clone({\n      scale: this.scale * PixelsPerInch.PDF_TO_CSS_UNITS,\n      rotation: totalRotation\n    });\n    this.#setDimensions();\n    if (this._isStandalone) {\n      this._container?.style.setProperty(\"--scale-factor\", this.viewport.scale);\n    }\n    if (this.canvas) {\n      let onlyCssZoom = false;\n      if (this.#hasRestrictedScaling) {\n        if (this.maxCanvasPixels === 0) {\n          onlyCssZoom = true;\n        } else if (this.maxCanvasPixels > 0) {\n          const {\n            width,\n            height\n          } = this.viewport;\n          const {\n            sx,\n            sy\n          } = this.outputScale;\n          onlyCssZoom = (Math.floor(width) * sx | 0) * (Math.floor(height) * sy | 0) > this.maxCanvasPixels;\n        }\n      }\n      const postponeDrawing = drawingDelay >= 0 && drawingDelay < 1000;\n      if (postponeDrawing || onlyCssZoom) {\n        if (postponeDrawing && !onlyCssZoom && this.renderingState !== RenderingStates.FINISHED) {\n          this.cancelRendering({\n            keepZoomLayer: true,\n            keepAnnotationLayer: true,\n            keepAnnotationEditorLayer: true,\n            keepXfaLayer: true,\n            keepTextLayer: true,\n            cancelExtraDelay: drawingDelay\n          });\n          this.renderingState = RenderingStates.FINISHED;\n          this.#useThumbnailCanvas.directDrawing = false;\n        }\n        this.cssTransform({\n          target: this.canvas,\n          redrawAnnotationLayer: true,\n          redrawAnnotationEditorLayer: true,\n          redrawXfaLayer: true,\n          redrawTextLayer: !postponeDrawing,\n          hideTextLayer: postponeDrawing\n        });\n        if (postponeDrawing) {\n          return;\n        }\n        this.eventBus.dispatch(\"pagerendered\", {\n          source: this,\n          pageNumber: this.id,\n          cssTransform: true,\n          timestamp: performance.now(),\n          error: this.#renderError\n        });\n        return;\n      }\n      if (!this.zoomLayer && !this.canvas.hidden) {\n        this.zoomLayer = this.canvas.parentNode;\n        this.zoomLayer.style.position = \"absolute\";\n      }\n    }\n    if (this.zoomLayer) {\n      this.cssTransform({\n        target: this.zoomLayer.firstChild\n      });\n    }\n    this.reset({\n      keepZoomLayer: true,\n      keepAnnotationLayer: true,\n      keepAnnotationEditorLayer: true,\n      keepXfaLayer: true,\n      keepTextLayer: true\n    });\n  }\n  cancelRendering({\n    keepAnnotationLayer = false,\n    keepAnnotationEditorLayer = false,\n    keepXfaLayer = false,\n    keepTextLayer = false,\n    cancelExtraDelay = 0\n  } = {}) {\n    if (this.renderTask) {\n      this.renderTask.cancel(cancelExtraDelay);\n      this.renderTask = null;\n    }\n    this.resume = null;\n    if (this.textLayer && (!keepTextLayer || !this.textLayer.div)) {\n      this.textLayer.cancel();\n      this.textLayer = null;\n    }\n    if (this.annotationLayer && (!keepAnnotationLayer || !this.annotationLayer.div)) {\n      this.annotationLayer.cancel();\n      this.annotationLayer = null;\n      this._annotationCanvasMap = null;\n    }\n    if (this.structTreeLayer && !this.textLayer) {\n      this.structTreeLayer = null;\n    }\n    if (this.annotationEditorLayer && (!keepAnnotationEditorLayer || !this.annotationEditorLayer.div)) {\n      if (this.drawLayer) {\n        this.drawLayer.cancel();\n        this.drawLayer = null;\n      }\n      this.annotationEditorLayer.cancel();\n      this.annotationEditorLayer = null;\n    }\n    if (this.xfaLayer && (!keepXfaLayer || !this.xfaLayer.div)) {\n      this.xfaLayer.cancel();\n      this.xfaLayer = null;\n      this._textHighlighter?.disable();\n    }\n  }\n  cssTransform({\n    target,\n    redrawAnnotationLayer = false,\n    redrawAnnotationEditorLayer = false,\n    redrawXfaLayer = false,\n    redrawTextLayer = false,\n    hideTextLayer = false\n  }) {\n    if (!target.hasAttribute(\"zooming\")) {\n      target.setAttribute(\"zooming\", true);\n      const {\n        style\n      } = target;\n      style.width = style.height = \"\";\n    }\n    const originalViewport = this.#viewportMap.get(target);\n    if (this.viewport !== originalViewport) {\n      const relativeRotation = this.viewport.rotation - originalViewport.rotation;\n      const absRotation = Math.abs(relativeRotation);\n      let scaleX = 1,\n        scaleY = 1;\n      if (absRotation === 90 || absRotation === 270) {\n        const {\n          width,\n          height\n        } = this.viewport;\n        scaleX = height / width;\n        scaleY = width / height;\n      }\n      target.style.transform = `rotate(${relativeRotation}deg) scale(${scaleX}, ${scaleY})`;\n    }\n    if (redrawAnnotationLayer && this.annotationLayer) {\n      this.#renderAnnotationLayer();\n    }\n    if (redrawAnnotationEditorLayer && this.annotationEditorLayer) {\n      if (this.drawLayer) {\n        this.#renderDrawLayer();\n      }\n      this.#renderAnnotationEditorLayer();\n    }\n    if (redrawXfaLayer && this.xfaLayer) {\n      this.#renderXfaLayer();\n    }\n    if (this.textLayer) {\n      if (hideTextLayer) {\n        this.textLayer.hide();\n        this.structTreeLayer?.hide();\n      } else if (redrawTextLayer) {\n        this.#renderTextLayer();\n      }\n    }\n  }\n  get width() {\n    return this.viewport.width;\n  }\n  get height() {\n    return this.viewport.height;\n  }\n  getPagePoint(x, y) {\n    return this.viewport.convertToPdfPoint(x, y);\n  }\n  async #finishRenderTask(renderTask, error = null) {\n    if (renderTask === this.renderTask) {\n      this.renderTask = null;\n    }\n    if (error instanceof RenderingCancelledException) {\n      this.#renderError = null;\n      return;\n    }\n    this.#renderError = error;\n    this.renderingState = RenderingStates.FINISHED;\n    this._resetZoomLayer(true);\n    this.#useThumbnailCanvas.regularAnnotations = !renderTask.separateAnnots;\n    this.eventBus.dispatch(\"pagerendered\", {\n      source: this,\n      pageNumber: this.id,\n      cssTransform: false,\n      timestamp: performance.now(),\n      error: this.#renderError\n    });\n    if (error) {\n      throw error;\n    }\n  }\n  async draw() {\n    if (this.renderingState !== RenderingStates.INITIAL) {\n      console.error(\"Must be in new state before drawing\");\n      this.reset();\n    }\n    const {\n      div,\n      l10n,\n      pageColors,\n      pdfPage,\n      viewport\n    } = this;\n    if (!pdfPage) {\n      this.renderingState = RenderingStates.FINISHED;\n      throw new Error(\"pdfPage is not loaded\");\n    }\n    this.renderingState = RenderingStates.RUNNING;\n    const canvasWrapper = document.createElement(\"div\");\n    canvasWrapper.classList.add(\"canvasWrapper\");\n    this.#addLayer(canvasWrapper, \"canvasWrapper\");\n    if (!this.textLayer && this.#textLayerMode !== TextLayerMode.DISABLE && !pdfPage.isPureXfa) {\n      this._accessibilityManager ||= new TextAccessibilityManager();\n      this.textLayer = new TextLayerBuilder({\n        pdfPage,\n        highlighter: this._textHighlighter,\n        accessibilityManager: this._accessibilityManager,\n        enablePermissions: this.#textLayerMode === TextLayerMode.ENABLE_PERMISSIONS,\n        onAppend: textLayerDiv => {\n          this.l10n.pause();\n          this.#addLayer(textLayerDiv, \"textLayer\");\n          this.l10n.resume();\n        }\n      });\n    }\n    if (!this.annotationLayer && this.#annotationMode !== AnnotationMode.DISABLE) {\n      const {\n        annotationStorage,\n        annotationEditorUIManager,\n        downloadManager,\n        enableScripting,\n        fieldObjectsPromise,\n        hasJSActionsPromise,\n        linkService\n      } = this.#layerProperties;\n      this._annotationCanvasMap ||= new Map();\n      this.annotationLayer = new AnnotationLayerBuilder({\n        pdfPage,\n        annotationStorage,\n        imageResourcesPath: this.imageResourcesPath,\n        renderForms: this.#annotationMode === AnnotationMode.ENABLE_FORMS,\n        linkService,\n        downloadManager,\n        enableScripting,\n        hasJSActionsPromise,\n        fieldObjectsPromise,\n        annotationCanvasMap: this._annotationCanvasMap,\n        accessibilityManager: this._accessibilityManager,\n        annotationEditorUIManager,\n        onAppend: annotationLayerDiv => {\n          this.#addLayer(annotationLayerDiv, \"annotationLayer\");\n        }\n      });\n    }\n    const renderContinueCallback = cont => {\n      showCanvas?.(false);\n      if (this.renderingQueue && !this.renderingQueue.isHighestPriority(this)) {\n        this.renderingState = RenderingStates.PAUSED;\n        this.resume = () => {\n          this.renderingState = RenderingStates.RUNNING;\n          cont();\n        };\n        return;\n      }\n      cont();\n    };\n    const {\n      width,\n      height\n    } = viewport;\n    const canvas = document.createElement(\"canvas\");\n    canvas.setAttribute(\"role\", \"presentation\");\n    canvas.hidden = true;\n    const hasHCM = !!(pageColors?.background && pageColors?.foreground);\n    let showCanvas = isLastShow => {\n      if (!hasHCM || isLastShow) {\n        canvas.hidden = false;\n        showCanvas = null;\n      }\n    };\n    canvasWrapper.append(canvas);\n    this.canvas = canvas;\n    const ctx = canvas.getContext(\"2d\", {\n      alpha: false,\n      willReadFrequently: !this.#enableHWA\n    });\n    const outputScale = this.outputScale = new OutputScale();\n    if (this.maxCanvasPixels === 0) {\n      const invScale = 1 / this.scale;\n      outputScale.sx *= invScale;\n      outputScale.sy *= invScale;\n      this.#hasRestrictedScaling = true;\n    } else if (this.maxCanvasPixels > 0) {\n      const pixelsInViewport = width * height;\n      const maxScale = Math.sqrt(this.maxCanvasPixels / pixelsInViewport);\n      if (outputScale.sx > maxScale || outputScale.sy > maxScale) {\n        outputScale.sx = maxScale;\n        outputScale.sy = maxScale;\n        this.#hasRestrictedScaling = true;\n      } else {\n        this.#hasRestrictedScaling = false;\n      }\n    }\n    const sfx = approximateFraction(outputScale.sx);\n    const sfy = approximateFraction(outputScale.sy);\n    const canvasWidth = canvas.width = floorToDivide(calcRound(width * outputScale.sx), sfx[0]);\n    const canvasHeight = canvas.height = floorToDivide(calcRound(height * outputScale.sy), sfy[0]);\n    const pageWidth = floorToDivide(calcRound(width), sfx[1]);\n    const pageHeight = floorToDivide(calcRound(height), sfy[1]);\n    outputScale.sx = canvasWidth / pageWidth;\n    outputScale.sy = canvasHeight / pageHeight;\n    if (this.#scaleRoundX !== sfx[1]) {\n      div.style.setProperty(\"--scale-round-x\", `${sfx[1]}px`);\n      this.#scaleRoundX = sfx[1];\n    }\n    if (this.#scaleRoundY !== sfy[1]) {\n      div.style.setProperty(\"--scale-round-y\", `${sfy[1]}px`);\n      this.#scaleRoundY = sfy[1];\n    }\n    this.#viewportMap.set(canvas, viewport);\n    const transform = outputScale.scaled ? [outputScale.sx, 0, 0, outputScale.sy, 0, 0] : null;\n    const renderContext = {\n      canvasContext: ctx,\n      transform,\n      viewport,\n      annotationMode: this.#annotationMode,\n      optionalContentConfigPromise: this._optionalContentConfigPromise,\n      annotationCanvasMap: this._annotationCanvasMap,\n      pageColors,\n      isEditing: this.#isEditing\n    };\n    const renderTask = this.renderTask = pdfPage.render(renderContext);\n    renderTask.onContinue = renderContinueCallback;\n    const resultPromise = renderTask.promise.then(async () => {\n      showCanvas?.(true);\n      await this.#finishRenderTask(renderTask);\n      this.structTreeLayer ||= new StructTreeLayerBuilder(pdfPage, viewport.rawDims);\n      this.#renderTextLayer();\n      if (this.annotationLayer) {\n        await this.#renderAnnotationLayer();\n      }\n      const {\n        annotationEditorUIManager\n      } = this.#layerProperties;\n      if (!annotationEditorUIManager) {\n        return;\n      }\n      this.drawLayer ||= new DrawLayerBuilder({\n        pageIndex: this.id\n      });\n      await this.#renderDrawLayer();\n      this.drawLayer.setParent(canvasWrapper);\n      this.annotationEditorLayer ||= new AnnotationEditorLayerBuilder({\n        uiManager: annotationEditorUIManager,\n        pdfPage,\n        l10n,\n        structTreeLayer: this.structTreeLayer,\n        accessibilityManager: this._accessibilityManager,\n        annotationLayer: this.annotationLayer?.annotationLayer,\n        textLayer: this.textLayer,\n        drawLayer: this.drawLayer.getDrawLayer(),\n        onAppend: annotationEditorLayerDiv => {\n          this.#addLayer(annotationEditorLayerDiv, \"annotationEditorLayer\");\n        }\n      });\n      this.#renderAnnotationEditorLayer();\n    }, error => {\n      if (!(error instanceof RenderingCancelledException)) {\n        showCanvas?.(true);\n      }\n      return this.#finishRenderTask(renderTask, error);\n    });\n    if (pdfPage.isPureXfa) {\n      if (!this.xfaLayer) {\n        const {\n          annotationStorage,\n          linkService\n        } = this.#layerProperties;\n        this.xfaLayer = new XfaLayerBuilder({\n          pdfPage,\n          annotationStorage,\n          linkService\n        });\n      }\n      this.#renderXfaLayer();\n    }\n    div.setAttribute(\"data-loaded\", true);\n    this.eventBus.dispatch(\"pagerender\", {\n      source: this,\n      pageNumber: this.id\n    });\n    return resultPromise;\n  }\n  setPageLabel(label) {\n    this.pageLabel = typeof label === \"string\" ? label : null;\n    this.div.setAttribute(\"data-l10n-args\", JSON.stringify({\n      page: this.pageLabel ?? this.id\n    }));\n    if (this.pageLabel !== null) {\n      this.div.setAttribute(\"data-page-label\", this.pageLabel);\n    } else {\n      this.div.removeAttribute(\"data-page-label\");\n    }\n  }\n  get thumbnailCanvas() {\n    const {\n      directDrawing,\n      initialOptionalContent,\n      regularAnnotations\n    } = this.#useThumbnailCanvas;\n    return directDrawing && initialOptionalContent && regularAnnotations ? this.canvas : null;\n  }\n}\n\n;// ./web/generic_scripting.js\n\nasync function docProperties(pdfDocument) {\n  const url = \"\",\n    baseUrl = url.split(\"#\", 1)[0];\n  let {\n    info,\n    metadata,\n    contentDispositionFilename,\n    contentLength\n  } = await pdfDocument.getMetadata();\n  if (!contentLength) {\n    const {\n      length\n    } = await pdfDocument.getDownloadInfo();\n    contentLength = length;\n  }\n  return {\n    ...info,\n    baseURL: baseUrl,\n    filesize: contentLength,\n    filename: contentDispositionFilename || getPdfFilenameFromUrl(url),\n    metadata: metadata?.getRaw(),\n    authors: metadata?.get(\"dc:creator\"),\n    numPages: pdfDocument.numPages,\n    URL: url\n  };\n}\nclass GenericScripting {\n  constructor(sandboxBundleSrc) {\n    this._ready = new Promise((resolve, reject) => {\n      const sandbox = import(/*webpackIgnore: true*/sandboxBundleSrc);\n      sandbox.then(pdfjsSandbox => {\n        resolve(pdfjsSandbox.QuickJSSandbox());\n      }).catch(reject);\n    });\n  }\n  async createSandbox(data) {\n    const sandbox = await this._ready;\n    sandbox.create(data);\n  }\n  async dispatchEventInSandbox(event) {\n    const sandbox = await this._ready;\n    setTimeout(() => sandbox.dispatchEvent(event), 0);\n  }\n  async destroySandbox() {\n    const sandbox = await this._ready;\n    sandbox.nukeSandbox();\n  }\n}\n\n;// ./web/pdf_scripting_manager.js\n\n\nclass PDFScriptingManager {\n  #closeCapability = null;\n  #destroyCapability = null;\n  #docProperties = null;\n  #eventAbortController = null;\n  #eventBus = null;\n  #externalServices = null;\n  #pdfDocument = null;\n  #pdfViewer = null;\n  #ready = false;\n  #scripting = null;\n  #willPrintCapability = null;\n  constructor({\n    eventBus,\n    externalServices = null,\n    docProperties = null\n  }) {\n    this.#eventBus = eventBus;\n    this.#externalServices = externalServices;\n    this.#docProperties = docProperties;\n  }\n  setViewer(pdfViewer) {\n    this.#pdfViewer = pdfViewer;\n  }\n  async setDocument(pdfDocument) {\n    if (this.#pdfDocument) {\n      await this.#destroyScripting();\n    }\n    this.#pdfDocument = pdfDocument;\n    if (!pdfDocument) {\n      return;\n    }\n    const [objects, calculationOrder, docActions] = await Promise.all([pdfDocument.getFieldObjects(), pdfDocument.getCalculationOrderIds(), pdfDocument.getJSActions()]);\n    if (!objects && !docActions) {\n      await this.#destroyScripting();\n      return;\n    }\n    if (pdfDocument !== this.#pdfDocument) {\n      return;\n    }\n    try {\n      this.#scripting = this.#initScripting();\n    } catch (error) {\n      console.error(`setDocument: \"${error.message}\".`);\n      await this.#destroyScripting();\n      return;\n    }\n    const eventBus = this.#eventBus;\n    this.#eventAbortController = new AbortController();\n    const {\n      signal\n    } = this.#eventAbortController;\n    eventBus._on(\"updatefromsandbox\", event => {\n      if (event?.source === window) {\n        this.#updateFromSandbox(event.detail);\n      }\n    }, {\n      signal\n    });\n    eventBus._on(\"dispatcheventinsandbox\", event => {\n      this.#scripting?.dispatchEventInSandbox(event.detail);\n    }, {\n      signal\n    });\n    eventBus._on(\"pagechanging\", ({\n      pageNumber,\n      previous\n    }) => {\n      if (pageNumber === previous) {\n        return;\n      }\n      this.#dispatchPageClose(previous);\n      this.#dispatchPageOpen(pageNumber);\n    }, {\n      signal\n    });\n    eventBus._on(\"pagerendered\", ({\n      pageNumber\n    }) => {\n      if (!this._pageOpenPending.has(pageNumber)) {\n        return;\n      }\n      if (pageNumber !== this.#pdfViewer.currentPageNumber) {\n        return;\n      }\n      this.#dispatchPageOpen(pageNumber);\n    }, {\n      signal\n    });\n    eventBus._on(\"pagesdestroy\", async () => {\n      await this.#dispatchPageClose(this.#pdfViewer.currentPageNumber);\n      await this.#scripting?.dispatchEventInSandbox({\n        id: \"doc\",\n        name: \"WillClose\"\n      });\n      this.#closeCapability?.resolve();\n    }, {\n      signal\n    });\n    try {\n      const docProperties = await this.#docProperties(pdfDocument);\n      if (pdfDocument !== this.#pdfDocument) {\n        return;\n      }\n      await this.#scripting.createSandbox({\n        objects,\n        calculationOrder,\n        appInfo: {\n          platform: navigator.platform,\n          language: navigator.language\n        },\n        docInfo: {\n          ...docProperties,\n          actions: docActions\n        }\n      });\n      eventBus.dispatch(\"sandboxcreated\", {\n        source: this\n      });\n    } catch (error) {\n      console.error(`setDocument: \"${error.message}\".`);\n      await this.#destroyScripting();\n      return;\n    }\n    await this.#scripting?.dispatchEventInSandbox({\n      id: \"doc\",\n      name: \"Open\"\n    });\n    await this.#dispatchPageOpen(this.#pdfViewer.currentPageNumber, true);\n    Promise.resolve().then(() => {\n      if (pdfDocument === this.#pdfDocument) {\n        this.#ready = true;\n      }\n    });\n  }\n  async dispatchWillSave() {\n    return this.#scripting?.dispatchEventInSandbox({\n      id: \"doc\",\n      name: \"WillSave\"\n    });\n  }\n  async dispatchDidSave() {\n    return this.#scripting?.dispatchEventInSandbox({\n      id: \"doc\",\n      name: \"DidSave\"\n    });\n  }\n  async dispatchWillPrint() {\n    if (!this.#scripting) {\n      return;\n    }\n    await this.#willPrintCapability?.promise;\n    this.#willPrintCapability = Promise.withResolvers();\n    try {\n      await this.#scripting.dispatchEventInSandbox({\n        id: \"doc\",\n        name: \"WillPrint\"\n      });\n    } catch (ex) {\n      this.#willPrintCapability.resolve();\n      this.#willPrintCapability = null;\n      throw ex;\n    }\n    await this.#willPrintCapability.promise;\n  }\n  async dispatchDidPrint() {\n    return this.#scripting?.dispatchEventInSandbox({\n      id: \"doc\",\n      name: \"DidPrint\"\n    });\n  }\n  get destroyPromise() {\n    return this.#destroyCapability?.promise || null;\n  }\n  get ready() {\n    return this.#ready;\n  }\n  get _pageOpenPending() {\n    return shadow(this, \"_pageOpenPending\", new Set());\n  }\n  get _visitedPages() {\n    return shadow(this, \"_visitedPages\", new Map());\n  }\n  async #updateFromSandbox(detail) {\n    const pdfViewer = this.#pdfViewer;\n    const isInPresentationMode = pdfViewer.isInPresentationMode || pdfViewer.isChangingPresentationMode;\n    const {\n      id,\n      siblings,\n      command,\n      value\n    } = detail;\n    if (!id) {\n      switch (command) {\n        case \"clear\":\n          console.clear();\n          break;\n        case \"error\":\n          console.error(value);\n          break;\n        case \"layout\":\n          if (!isInPresentationMode) {\n            const modes = apiPageLayoutToViewerModes(value);\n            pdfViewer.spreadMode = modes.spreadMode;\n          }\n          break;\n        case \"page-num\":\n          pdfViewer.currentPageNumber = value + 1;\n          break;\n        case \"print\":\n          await pdfViewer.pagesPromise;\n          this.#eventBus.dispatch(\"print\", {\n            source: this\n          });\n          break;\n        case \"println\":\n          console.log(value);\n          break;\n        case \"zoom\":\n          if (!isInPresentationMode) {\n            pdfViewer.currentScaleValue = value;\n          }\n          break;\n        case \"SaveAs\":\n          this.#eventBus.dispatch(\"download\", {\n            source: this\n          });\n          break;\n        case \"FirstPage\":\n          pdfViewer.currentPageNumber = 1;\n          break;\n        case \"LastPage\":\n          pdfViewer.currentPageNumber = pdfViewer.pagesCount;\n          break;\n        case \"NextPage\":\n          pdfViewer.nextPage();\n          break;\n        case \"PrevPage\":\n          pdfViewer.previousPage();\n          break;\n        case \"ZoomViewIn\":\n          if (!isInPresentationMode) {\n            pdfViewer.increaseScale();\n          }\n          break;\n        case \"ZoomViewOut\":\n          if (!isInPresentationMode) {\n            pdfViewer.decreaseScale();\n          }\n          break;\n        case \"WillPrintFinished\":\n          this.#willPrintCapability?.resolve();\n          this.#willPrintCapability = null;\n          break;\n      }\n      return;\n    }\n    if (isInPresentationMode && detail.focus) {\n      return;\n    }\n    delete detail.id;\n    delete detail.siblings;\n    const ids = siblings ? [id, ...siblings] : [id];\n    for (const elementId of ids) {\n      const element = document.querySelector(`[data-element-id=\"${elementId}\"]`);\n      if (element) {\n        element.dispatchEvent(new CustomEvent(\"updatefromsandbox\", {\n          detail\n        }));\n      } else {\n        this.#pdfDocument?.annotationStorage.setValue(elementId, detail);\n      }\n    }\n  }\n  async #dispatchPageOpen(pageNumber, initialize = false) {\n    const pdfDocument = this.#pdfDocument,\n      visitedPages = this._visitedPages;\n    if (initialize) {\n      this.#closeCapability = Promise.withResolvers();\n    }\n    if (!this.#closeCapability) {\n      return;\n    }\n    const pageView = this.#pdfViewer.getPageView(pageNumber - 1);\n    if (pageView?.renderingState !== RenderingStates.FINISHED) {\n      this._pageOpenPending.add(pageNumber);\n      return;\n    }\n    this._pageOpenPending.delete(pageNumber);\n    const actionsPromise = (async () => {\n      const actions = await (!visitedPages.has(pageNumber) ? pageView.pdfPage?.getJSActions() : null);\n      if (pdfDocument !== this.#pdfDocument) {\n        return;\n      }\n      await this.#scripting?.dispatchEventInSandbox({\n        id: \"page\",\n        name: \"PageOpen\",\n        pageNumber,\n        actions\n      });\n    })();\n    visitedPages.set(pageNumber, actionsPromise);\n  }\n  async #dispatchPageClose(pageNumber) {\n    const pdfDocument = this.#pdfDocument,\n      visitedPages = this._visitedPages;\n    if (!this.#closeCapability) {\n      return;\n    }\n    if (this._pageOpenPending.has(pageNumber)) {\n      return;\n    }\n    const actionsPromise = visitedPages.get(pageNumber);\n    if (!actionsPromise) {\n      return;\n    }\n    visitedPages.set(pageNumber, null);\n    await actionsPromise;\n    if (pdfDocument !== this.#pdfDocument) {\n      return;\n    }\n    await this.#scripting?.dispatchEventInSandbox({\n      id: \"page\",\n      name: \"PageClose\",\n      pageNumber\n    });\n  }\n  #initScripting() {\n    this.#destroyCapability = Promise.withResolvers();\n    if (this.#scripting) {\n      throw new Error(\"#initScripting: Scripting already exists.\");\n    }\n    return this.#externalServices.createScripting();\n  }\n  async #destroyScripting() {\n    if (!this.#scripting) {\n      this.#pdfDocument = null;\n      this.#destroyCapability?.resolve();\n      return;\n    }\n    if (this.#closeCapability) {\n      await Promise.race([this.#closeCapability.promise, new Promise(resolve => {\n        setTimeout(resolve, 1000);\n      })]).catch(() => {});\n      this.#closeCapability = null;\n    }\n    this.#pdfDocument = null;\n    try {\n      await this.#scripting.destroySandbox();\n    } catch {}\n    this.#willPrintCapability?.reject(new Error(\"Scripting destroyed.\"));\n    this.#willPrintCapability = null;\n    this.#eventAbortController?.abort();\n    this.#eventAbortController = null;\n    this._pageOpenPending.clear();\n    this._visitedPages.clear();\n    this.#scripting = null;\n    this.#ready = false;\n    this.#destroyCapability?.resolve();\n  }\n}\n\n;// ./web/pdf_scripting_manager.component.js\n\n\nclass PDFScriptingManagerComponents extends PDFScriptingManager {\n  constructor(options) {\n    if (!options.externalServices) {\n      window.addEventListener(\"updatefromsandbox\", event => {\n        options.eventBus.dispatch(\"updatefromsandbox\", {\n          source: window,\n          detail: event.detail\n        });\n      });\n    }\n    options.externalServices ||= {\n      createScripting: () => new GenericScripting(options.sandboxBundleSrc)\n    };\n    options.docProperties ||= pdfDocument => docProperties(pdfDocument);\n    super(options);\n  }\n}\n\n;// ./web/pdf_rendering_queue.js\n\n\nconst CLEANUP_TIMEOUT = 30000;\nclass PDFRenderingQueue {\n  constructor() {\n    this.pdfViewer = null;\n    this.pdfThumbnailViewer = null;\n    this.onIdle = null;\n    this.highestPriorityPage = null;\n    this.idleTimeout = null;\n    this.printing = false;\n    this.isThumbnailViewEnabled = false;\n    Object.defineProperty(this, \"hasViewer\", {\n      value: () => !!this.pdfViewer\n    });\n  }\n  setViewer(pdfViewer) {\n    this.pdfViewer = pdfViewer;\n  }\n  setThumbnailViewer(pdfThumbnailViewer) {\n    this.pdfThumbnailViewer = pdfThumbnailViewer;\n  }\n  isHighestPriority(view) {\n    return this.highestPriorityPage === view.renderingId;\n  }\n  renderHighestPriority(currentlyVisiblePages) {\n    if (this.idleTimeout) {\n      clearTimeout(this.idleTimeout);\n      this.idleTimeout = null;\n    }\n    if (this.pdfViewer.forceRendering(currentlyVisiblePages)) {\n      return;\n    }\n    if (this.isThumbnailViewEnabled && this.pdfThumbnailViewer?.forceRendering()) {\n      return;\n    }\n    if (this.printing) {\n      return;\n    }\n    if (this.onIdle) {\n      this.idleTimeout = setTimeout(this.onIdle.bind(this), CLEANUP_TIMEOUT);\n    }\n  }\n  getHighestPriority(visible, views, scrolledDown, preRenderExtra = false) {\n    const visibleViews = visible.views,\n      numVisible = visibleViews.length;\n    if (numVisible === 0) {\n      return null;\n    }\n    for (let i = 0; i < numVisible; i++) {\n      const view = visibleViews[i].view;\n      if (!this.isViewFinished(view)) {\n        return view;\n      }\n    }\n    const firstId = visible.first.id,\n      lastId = visible.last.id;\n    if (lastId - firstId + 1 > numVisible) {\n      const visibleIds = visible.ids;\n      for (let i = 1, ii = lastId - firstId; i < ii; i++) {\n        const holeId = scrolledDown ? firstId + i : lastId - i;\n        if (visibleIds.has(holeId)) {\n          continue;\n        }\n        const holeView = views[holeId - 1];\n        if (!this.isViewFinished(holeView)) {\n          return holeView;\n        }\n      }\n    }\n    let preRenderIndex = scrolledDown ? lastId : firstId - 2;\n    let preRenderView = views[preRenderIndex];\n    if (preRenderView && !this.isViewFinished(preRenderView)) {\n      return preRenderView;\n    }\n    if (preRenderExtra) {\n      preRenderIndex += scrolledDown ? 1 : -1;\n      preRenderView = views[preRenderIndex];\n      if (preRenderView && !this.isViewFinished(preRenderView)) {\n        return preRenderView;\n      }\n    }\n    return null;\n  }\n  isViewFinished(view) {\n    return view.renderingState === RenderingStates.FINISHED;\n  }\n  renderView(view) {\n    switch (view.renderingState) {\n      case RenderingStates.FINISHED:\n        return false;\n      case RenderingStates.PAUSED:\n        this.highestPriorityPage = view.renderingId;\n        view.resume();\n        break;\n      case RenderingStates.RUNNING:\n        this.highestPriorityPage = view.renderingId;\n        break;\n      case RenderingStates.INITIAL:\n        this.highestPriorityPage = view.renderingId;\n        view.draw().finally(() => {\n          this.renderHighestPriority();\n        }).catch(reason => {\n          if (reason instanceof RenderingCancelledException) {\n            return;\n          }\n          console.error(`renderView: \"${reason}\"`);\n        });\n        break;\n    }\n    return true;\n  }\n}\n\n;// ./web/pdf_viewer.js\n\n\n\n\n\n\nconst DEFAULT_CACHE_SIZE = 10;\nconst PagesCountLimit = {\n  FORCE_SCROLL_MODE_PAGE: 10000,\n  FORCE_LAZY_PAGE_INIT: 5000,\n  PAUSE_EAGER_PAGE_INIT: 250\n};\nfunction isValidAnnotationEditorMode(mode) {\n  return Object.values(AnnotationEditorType).includes(mode) && mode !== AnnotationEditorType.DISABLE;\n}\nclass PDFPageViewBuffer {\n  #buf = new Set();\n  #size = 0;\n  constructor(size) {\n    this.#size = size;\n  }\n  push(view) {\n    const buf = this.#buf;\n    if (buf.has(view)) {\n      buf.delete(view);\n    }\n    buf.add(view);\n    if (buf.size > this.#size) {\n      this.#destroyFirstView();\n    }\n  }\n  resize(newSize, idsToKeep = null) {\n    this.#size = newSize;\n    const buf = this.#buf;\n    if (idsToKeep) {\n      const ii = buf.size;\n      let i = 1;\n      for (const view of buf) {\n        if (idsToKeep.has(view.id)) {\n          buf.delete(view);\n          buf.add(view);\n        }\n        if (++i > ii) {\n          break;\n        }\n      }\n    }\n    while (buf.size > this.#size) {\n      this.#destroyFirstView();\n    }\n  }\n  has(view) {\n    return this.#buf.has(view);\n  }\n  [Symbol.iterator]() {\n    return this.#buf.keys();\n  }\n  #destroyFirstView() {\n    const firstView = this.#buf.keys().next().value;\n    firstView?.destroy();\n    this.#buf.delete(firstView);\n  }\n}\nclass PDFViewer {\n  #buffer = null;\n  #altTextManager = null;\n  #annotationEditorHighlightColors = null;\n  #annotationEditorMode = AnnotationEditorType.NONE;\n  #annotationEditorUIManager = null;\n  #annotationMode = AnnotationMode.ENABLE_FORMS;\n  #containerTopLeft = null;\n  #enableHWA = false;\n  #enableHighlightFloatingButton = false;\n  #enablePermissions = false;\n  #enableUpdatedAddImage = false;\n  #enableNewAltTextWhenAddingImage = false;\n  #eventAbortController = null;\n  #mlManager = null;\n  #switchAnnotationEditorModeAC = null;\n  #switchAnnotationEditorModeTimeoutId = null;\n  #getAllTextInProgress = false;\n  #hiddenCopyElement = null;\n  #interruptCopyCondition = false;\n  #previousContainerHeight = 0;\n  #resizeObserver = new ResizeObserver(this.#resizeObserverCallback.bind(this));\n  #scrollModePageState = null;\n  #scaleTimeoutId = null;\n  #textLayerMode = TextLayerMode.ENABLE;\n  constructor(options) {\n    const viewerVersion = \"4.8.69\";\n    if (version !== viewerVersion) {\n      throw new Error(`The API version \"${version}\" does not match the Viewer version \"${viewerVersion}\".`);\n    }\n    this.container = options.container;\n    this.viewer = options.viewer || options.container.firstElementChild;\n    if (this.container?.tagName !== \"DIV\" || this.viewer?.tagName !== \"DIV\") {\n      throw new Error(\"Invalid `container` and/or `viewer` option.\");\n    }\n    if (this.container.offsetParent && getComputedStyle(this.container).position !== \"absolute\") {\n      throw new Error(\"The `container` must be absolutely positioned.\");\n    }\n    this.#resizeObserver.observe(this.container);\n    this.eventBus = options.eventBus;\n    this.linkService = options.linkService || new SimpleLinkService();\n    this.downloadManager = options.downloadManager || null;\n    this.findController = options.findController || null;\n    this.#altTextManager = options.altTextManager || null;\n    if (this.findController) {\n      this.findController.onIsPageVisible = pageNumber => this._getVisiblePages().ids.has(pageNumber);\n    }\n    this._scriptingManager = options.scriptingManager || null;\n    this.#textLayerMode = options.textLayerMode ?? TextLayerMode.ENABLE;\n    this.#annotationMode = options.annotationMode ?? AnnotationMode.ENABLE_FORMS;\n    this.#annotationEditorMode = options.annotationEditorMode ?? AnnotationEditorType.NONE;\n    this.#annotationEditorHighlightColors = options.annotationEditorHighlightColors || null;\n    this.#enableHighlightFloatingButton = options.enableHighlightFloatingButton === true;\n    this.#enableUpdatedAddImage = options.enableUpdatedAddImage === true;\n    this.#enableNewAltTextWhenAddingImage = options.enableNewAltTextWhenAddingImage === true;\n    this.imageResourcesPath = options.imageResourcesPath || \"\";\n    this.enablePrintAutoRotate = options.enablePrintAutoRotate || false;\n    this.removePageBorders = options.removePageBorders || false;\n    this.maxCanvasPixels = options.maxCanvasPixels;\n    this.l10n = options.l10n;\n    this.l10n ||= new genericl10n_GenericL10n();\n    this.#enablePermissions = options.enablePermissions || false;\n    this.pageColors = options.pageColors || null;\n    this.#mlManager = options.mlManager || null;\n    this.#enableHWA = options.enableHWA || false;\n    this.defaultRenderingQueue = !options.renderingQueue;\n    if (this.defaultRenderingQueue) {\n      this.renderingQueue = new PDFRenderingQueue();\n      this.renderingQueue.setViewer(this);\n    } else {\n      this.renderingQueue = options.renderingQueue;\n    }\n    const {\n      abortSignal\n    } = options;\n    abortSignal?.addEventListener(\"abort\", () => {\n      this.#resizeObserver.disconnect();\n      this.#resizeObserver = null;\n    }, {\n      once: true\n    });\n    this.scroll = watchScroll(this.container, this._scrollUpdate.bind(this), abortSignal);\n    this.presentationModeState = PresentationModeState.UNKNOWN;\n    this._resetView();\n    if (this.removePageBorders) {\n      this.viewer.classList.add(\"removePageBorders\");\n    }\n    this.#updateContainerHeightCss();\n    this.eventBus._on(\"thumbnailrendered\", ({\n      pageNumber,\n      pdfPage\n    }) => {\n      const pageView = this._pages[pageNumber - 1];\n      if (!this.#buffer.has(pageView)) {\n        pdfPage?.cleanup();\n      }\n    });\n    if (!options.l10n) {\n      this.l10n.translate(this.container);\n    }\n  }\n  get pagesCount() {\n    return this._pages.length;\n  }\n  getPageView(index) {\n    return this._pages[index];\n  }\n  getCachedPageViews() {\n    return new Set(this.#buffer);\n  }\n  get pageViewsReady() {\n    return this._pages.every(pageView => pageView?.pdfPage);\n  }\n  get renderForms() {\n    return this.#annotationMode === AnnotationMode.ENABLE_FORMS;\n  }\n  get enableScripting() {\n    return !!this._scriptingManager;\n  }\n  get currentPageNumber() {\n    return this._currentPageNumber;\n  }\n  set currentPageNumber(val) {\n    if (!Number.isInteger(val)) {\n      throw new Error(\"Invalid page number.\");\n    }\n    if (!this.pdfDocument) {\n      return;\n    }\n    if (!this._setCurrentPageNumber(val, true)) {\n      console.error(`currentPageNumber: \"${val}\" is not a valid page.`);\n    }\n  }\n  _setCurrentPageNumber(val, resetCurrentPageView = false) {\n    if (this._currentPageNumber === val) {\n      if (resetCurrentPageView) {\n        this.#resetCurrentPageView();\n      }\n      return true;\n    }\n    if (!(0 < val && val <= this.pagesCount)) {\n      return false;\n    }\n    const previous = this._currentPageNumber;\n    this._currentPageNumber = val;\n    this.eventBus.dispatch(\"pagechanging\", {\n      source: this,\n      pageNumber: val,\n      pageLabel: this._pageLabels?.[val - 1] ?? null,\n      previous\n    });\n    if (resetCurrentPageView) {\n      this.#resetCurrentPageView();\n    }\n    return true;\n  }\n  get currentPageLabel() {\n    return this._pageLabels?.[this._currentPageNumber - 1] ?? null;\n  }\n  set currentPageLabel(val) {\n    if (!this.pdfDocument) {\n      return;\n    }\n    let page = val | 0;\n    if (this._pageLabels) {\n      const i = this._pageLabels.indexOf(val);\n      if (i >= 0) {\n        page = i + 1;\n      }\n    }\n    if (!this._setCurrentPageNumber(page, true)) {\n      console.error(`currentPageLabel: \"${val}\" is not a valid page.`);\n    }\n  }\n  get currentScale() {\n    return this._currentScale !== UNKNOWN_SCALE ? this._currentScale : DEFAULT_SCALE;\n  }\n  set currentScale(val) {\n    if (isNaN(val)) {\n      throw new Error(\"Invalid numeric scale.\");\n    }\n    if (!this.pdfDocument) {\n      return;\n    }\n    this.#setScale(val, {\n      noScroll: false\n    });\n  }\n  get currentScaleValue() {\n    return this._currentScaleValue;\n  }\n  set currentScaleValue(val) {\n    if (!this.pdfDocument) {\n      return;\n    }\n    this.#setScale(val, {\n      noScroll: false\n    });\n  }\n  get pagesRotation() {\n    return this._pagesRotation;\n  }\n  set pagesRotation(rotation) {\n    if (!isValidRotation(rotation)) {\n      throw new Error(\"Invalid pages rotation angle.\");\n    }\n    if (!this.pdfDocument) {\n      return;\n    }\n    rotation %= 360;\n    if (rotation < 0) {\n      rotation += 360;\n    }\n    if (this._pagesRotation === rotation) {\n      return;\n    }\n    this._pagesRotation = rotation;\n    const pageNumber = this._currentPageNumber;\n    this.refresh(true, {\n      rotation\n    });\n    if (this._currentScaleValue) {\n      this.#setScale(this._currentScaleValue, {\n        noScroll: true\n      });\n    }\n    this.eventBus.dispatch(\"rotationchanging\", {\n      source: this,\n      pagesRotation: rotation,\n      pageNumber\n    });\n    if (this.defaultRenderingQueue) {\n      this.update();\n    }\n  }\n  get firstPagePromise() {\n    return this.pdfDocument ? this._firstPageCapability.promise : null;\n  }\n  get onePageRendered() {\n    return this.pdfDocument ? this._onePageRenderedCapability.promise : null;\n  }\n  get pagesPromise() {\n    return this.pdfDocument ? this._pagesCapability.promise : null;\n  }\n  get _layerProperties() {\n    const self = this;\n    return shadow(this, \"_layerProperties\", {\n      get annotationEditorUIManager() {\n        return self.#annotationEditorUIManager;\n      },\n      get annotationStorage() {\n        return self.pdfDocument?.annotationStorage;\n      },\n      get downloadManager() {\n        return self.downloadManager;\n      },\n      get enableScripting() {\n        return !!self._scriptingManager;\n      },\n      get fieldObjectsPromise() {\n        return self.pdfDocument?.getFieldObjects();\n      },\n      get findController() {\n        return self.findController;\n      },\n      get hasJSActionsPromise() {\n        return self.pdfDocument?.hasJSActions();\n      },\n      get linkService() {\n        return self.linkService;\n      }\n    });\n  }\n  #initializePermissions(permissions) {\n    const params = {\n      annotationEditorMode: this.#annotationEditorMode,\n      annotationMode: this.#annotationMode,\n      textLayerMode: this.#textLayerMode\n    };\n    if (!permissions) {\n      return params;\n    }\n    if (!permissions.includes(PermissionFlag.COPY) && this.#textLayerMode === TextLayerMode.ENABLE) {\n      params.textLayerMode = TextLayerMode.ENABLE_PERMISSIONS;\n    }\n    if (!permissions.includes(PermissionFlag.MODIFY_CONTENTS)) {\n      params.annotationEditorMode = AnnotationEditorType.DISABLE;\n    }\n    if (!permissions.includes(PermissionFlag.MODIFY_ANNOTATIONS) && !permissions.includes(PermissionFlag.FILL_INTERACTIVE_FORMS) && this.#annotationMode === AnnotationMode.ENABLE_FORMS) {\n      params.annotationMode = AnnotationMode.ENABLE;\n    }\n    return params;\n  }\n  async #onePageRenderedOrForceFetch(signal) {\n    if (document.visibilityState === \"hidden\" || !this.container.offsetParent || this._getVisiblePages().views.length === 0) {\n      return;\n    }\n    const hiddenCapability = Promise.withResolvers(),\n      ac = new AbortController();\n    document.addEventListener(\"visibilitychange\", () => {\n      if (document.visibilityState === \"hidden\") {\n        hiddenCapability.resolve();\n      }\n    }, {\n      signal: typeof AbortSignal.any === \"function\" ? AbortSignal.any([signal, ac.signal]) : signal\n    });\n    await Promise.race([this._onePageRenderedCapability.promise, hiddenCapability.promise]);\n    ac.abort();\n  }\n  async getAllText() {\n    const texts = [];\n    const buffer = [];\n    for (let pageNum = 1, pagesCount = this.pdfDocument.numPages; pageNum <= pagesCount; ++pageNum) {\n      if (this.#interruptCopyCondition) {\n        return null;\n      }\n      buffer.length = 0;\n      const page = await this.pdfDocument.getPage(pageNum);\n      const {\n        items\n      } = await page.getTextContent();\n      for (const item of items) {\n        if (item.str) {\n          buffer.push(item.str);\n        }\n        if (item.hasEOL) {\n          buffer.push(\"\\n\");\n        }\n      }\n      texts.push(removeNullCharacters(buffer.join(\"\")));\n    }\n    return texts.join(\"\\n\");\n  }\n  #copyCallback(textLayerMode, event) {\n    const selection = document.getSelection();\n    const {\n      focusNode,\n      anchorNode\n    } = selection;\n    if (anchorNode && focusNode && selection.containsNode(this.#hiddenCopyElement)) {\n      if (this.#getAllTextInProgress || textLayerMode === TextLayerMode.ENABLE_PERMISSIONS) {\n        event.preventDefault();\n        event.stopPropagation();\n        return;\n      }\n      this.#getAllTextInProgress = true;\n      const {\n        classList\n      } = this.viewer;\n      classList.add(\"copyAll\");\n      const ac = new AbortController();\n      window.addEventListener(\"keydown\", ev => this.#interruptCopyCondition = ev.key === \"Escape\", {\n        signal: ac.signal\n      });\n      this.getAllText().then(async text => {\n        if (text !== null) {\n          await navigator.clipboard.writeText(text);\n        }\n      }).catch(reason => {\n        console.warn(`Something goes wrong when extracting the text: ${reason.message}`);\n      }).finally(() => {\n        this.#getAllTextInProgress = false;\n        this.#interruptCopyCondition = false;\n        ac.abort();\n        classList.remove(\"copyAll\");\n      });\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  }\n  setDocument(pdfDocument) {\n    if (this.pdfDocument) {\n      this.eventBus.dispatch(\"pagesdestroy\", {\n        source: this\n      });\n      this._cancelRendering();\n      this._resetView();\n      this.findController?.setDocument(null);\n      this._scriptingManager?.setDocument(null);\n      this.#annotationEditorUIManager?.destroy();\n      this.#annotationEditorUIManager = null;\n    }\n    this.pdfDocument = pdfDocument;\n    if (!pdfDocument) {\n      return;\n    }\n    const pagesCount = pdfDocument.numPages;\n    const firstPagePromise = pdfDocument.getPage(1);\n    const optionalContentConfigPromise = pdfDocument.getOptionalContentConfig({\n      intent: \"display\"\n    });\n    const permissionsPromise = this.#enablePermissions ? pdfDocument.getPermissions() : Promise.resolve();\n    const {\n      eventBus,\n      pageColors,\n      viewer\n    } = this;\n    this.#eventAbortController = new AbortController();\n    const {\n      signal\n    } = this.#eventAbortController;\n    if (pagesCount > PagesCountLimit.FORCE_SCROLL_MODE_PAGE) {\n      console.warn(\"Forcing PAGE-scrolling for performance reasons, given the length of the document.\");\n      const mode = this._scrollMode = ScrollMode.PAGE;\n      eventBus.dispatch(\"scrollmodechanged\", {\n        source: this,\n        mode\n      });\n    }\n    this._pagesCapability.promise.then(() => {\n      eventBus.dispatch(\"pagesloaded\", {\n        source: this,\n        pagesCount\n      });\n    }, () => {});\n    const onBeforeDraw = evt => {\n      const pageView = this._pages[evt.pageNumber - 1];\n      if (!pageView) {\n        return;\n      }\n      this.#buffer.push(pageView);\n    };\n    eventBus._on(\"pagerender\", onBeforeDraw, {\n      signal\n    });\n    const onAfterDraw = evt => {\n      if (evt.cssTransform) {\n        return;\n      }\n      this._onePageRenderedCapability.resolve({\n        timestamp: evt.timestamp\n      });\n      eventBus._off(\"pagerendered\", onAfterDraw);\n    };\n    eventBus._on(\"pagerendered\", onAfterDraw, {\n      signal\n    });\n    Promise.all([firstPagePromise, permissionsPromise]).then(([firstPdfPage, permissions]) => {\n      if (pdfDocument !== this.pdfDocument) {\n        return;\n      }\n      this._firstPageCapability.resolve(firstPdfPage);\n      this._optionalContentConfigPromise = optionalContentConfigPromise;\n      const {\n        annotationEditorMode,\n        annotationMode,\n        textLayerMode\n      } = this.#initializePermissions(permissions);\n      if (textLayerMode !== TextLayerMode.DISABLE) {\n        const element = this.#hiddenCopyElement = document.createElement(\"div\");\n        element.id = \"hiddenCopyElement\";\n        viewer.before(element);\n      }\n      if (typeof AbortSignal.any === \"function\" && annotationEditorMode !== AnnotationEditorType.DISABLE) {\n        const mode = annotationEditorMode;\n        if (pdfDocument.isPureXfa) {\n          console.warn(\"Warning: XFA-editing is not implemented.\");\n        } else if (isValidAnnotationEditorMode(mode)) {\n          this.#annotationEditorUIManager = new AnnotationEditorUIManager(this.container, viewer, this.#altTextManager, eventBus, pdfDocument, pageColors, this.#annotationEditorHighlightColors, this.#enableHighlightFloatingButton, this.#enableUpdatedAddImage, this.#enableNewAltTextWhenAddingImage, this.#mlManager);\n          eventBus.dispatch(\"annotationeditoruimanager\", {\n            source: this,\n            uiManager: this.#annotationEditorUIManager\n          });\n          if (mode !== AnnotationEditorType.NONE) {\n            if (mode === AnnotationEditorType.STAMP) {\n              this.#mlManager?.loadModel(\"altText\");\n            }\n            this.#annotationEditorUIManager.updateMode(mode);\n          }\n        } else {\n          console.error(`Invalid AnnotationEditor mode: ${mode}`);\n        }\n      }\n      const viewerElement = this._scrollMode === ScrollMode.PAGE ? null : viewer;\n      const scale = this.currentScale;\n      const viewport = firstPdfPage.getViewport({\n        scale: scale * PixelsPerInch.PDF_TO_CSS_UNITS\n      });\n      viewer.style.setProperty(\"--scale-factor\", viewport.scale);\n      if (pageColors?.background) {\n        viewer.style.setProperty(\"--page-bg-color\", pageColors.background);\n      }\n      if (pageColors?.foreground === \"CanvasText\" || pageColors?.background === \"Canvas\") {\n        viewer.style.setProperty(\"--hcm-highlight-filter\", pdfDocument.filterFactory.addHighlightHCMFilter(\"highlight\", \"CanvasText\", \"Canvas\", \"HighlightText\", \"Highlight\"));\n        viewer.style.setProperty(\"--hcm-highlight-selected-filter\", pdfDocument.filterFactory.addHighlightHCMFilter(\"highlight_selected\", \"CanvasText\", \"Canvas\", \"HighlightText\", \"ButtonText\"));\n      }\n      for (let pageNum = 1; pageNum <= pagesCount; ++pageNum) {\n        const pageView = new PDFPageView({\n          container: viewerElement,\n          eventBus,\n          id: pageNum,\n          scale,\n          defaultViewport: viewport.clone(),\n          optionalContentConfigPromise,\n          renderingQueue: this.renderingQueue,\n          textLayerMode,\n          annotationMode,\n          imageResourcesPath: this.imageResourcesPath,\n          maxCanvasPixels: this.maxCanvasPixels,\n          pageColors,\n          l10n: this.l10n,\n          layerProperties: this._layerProperties,\n          enableHWA: this.#enableHWA\n        });\n        this._pages.push(pageView);\n      }\n      this._pages[0]?.setPdfPage(firstPdfPage);\n      if (this._scrollMode === ScrollMode.PAGE) {\n        this.#ensurePageViewVisible();\n      } else if (this._spreadMode !== SpreadMode.NONE) {\n        this._updateSpreadMode();\n      }\n      this.#onePageRenderedOrForceFetch(signal).then(async () => {\n        if (pdfDocument !== this.pdfDocument) {\n          return;\n        }\n        this.findController?.setDocument(pdfDocument);\n        this._scriptingManager?.setDocument(pdfDocument);\n        if (this.#hiddenCopyElement) {\n          document.addEventListener(\"copy\", this.#copyCallback.bind(this, textLayerMode), {\n            signal\n          });\n        }\n        if (this.#annotationEditorUIManager) {\n          eventBus.dispatch(\"annotationeditormodechanged\", {\n            source: this,\n            mode: this.#annotationEditorMode\n          });\n        }\n        if (pdfDocument.loadingParams.disableAutoFetch || pagesCount > PagesCountLimit.FORCE_LAZY_PAGE_INIT) {\n          this._pagesCapability.resolve();\n          return;\n        }\n        let getPagesLeft = pagesCount - 1;\n        if (getPagesLeft <= 0) {\n          this._pagesCapability.resolve();\n          return;\n        }\n        for (let pageNum = 2; pageNum <= pagesCount; ++pageNum) {\n          const promise = pdfDocument.getPage(pageNum).then(pdfPage => {\n            const pageView = this._pages[pageNum - 1];\n            if (!pageView.pdfPage) {\n              pageView.setPdfPage(pdfPage);\n            }\n            if (--getPagesLeft === 0) {\n              this._pagesCapability.resolve();\n            }\n          }, reason => {\n            console.error(`Unable to get page ${pageNum} to initialize viewer`, reason);\n            if (--getPagesLeft === 0) {\n              this._pagesCapability.resolve();\n            }\n          });\n          if (pageNum % PagesCountLimit.PAUSE_EAGER_PAGE_INIT === 0) {\n            await promise;\n          }\n        }\n      });\n      eventBus.dispatch(\"pagesinit\", {\n        source: this\n      });\n      pdfDocument.getMetadata().then(({\n        info\n      }) => {\n        if (pdfDocument !== this.pdfDocument) {\n          return;\n        }\n        if (info.Language) {\n          viewer.lang = info.Language;\n        }\n      });\n      if (this.defaultRenderingQueue) {\n        this.update();\n      }\n    }).catch(reason => {\n      console.error(\"Unable to initialize viewer\", reason);\n      this._pagesCapability.reject(reason);\n    });\n  }\n  setPageLabels(labels) {\n    if (!this.pdfDocument) {\n      return;\n    }\n    if (!labels) {\n      this._pageLabels = null;\n    } else if (!(Array.isArray(labels) && this.pdfDocument.numPages === labels.length)) {\n      this._pageLabels = null;\n      console.error(`setPageLabels: Invalid page labels.`);\n    } else {\n      this._pageLabels = labels;\n    }\n    for (let i = 0, ii = this._pages.length; i < ii; i++) {\n      this._pages[i].setPageLabel(this._pageLabels?.[i] ?? null);\n    }\n  }\n  _resetView() {\n    this._pages = [];\n    this._currentPageNumber = 1;\n    this._currentScale = UNKNOWN_SCALE;\n    this._currentScaleValue = null;\n    this._pageLabels = null;\n    this.#buffer = new PDFPageViewBuffer(DEFAULT_CACHE_SIZE);\n    this._location = null;\n    this._pagesRotation = 0;\n    this._optionalContentConfigPromise = null;\n    this._firstPageCapability = Promise.withResolvers();\n    this._onePageRenderedCapability = Promise.withResolvers();\n    this._pagesCapability = Promise.withResolvers();\n    this._scrollMode = ScrollMode.VERTICAL;\n    this._previousScrollMode = ScrollMode.UNKNOWN;\n    this._spreadMode = SpreadMode.NONE;\n    this.#scrollModePageState = {\n      previousPageNumber: 1,\n      scrollDown: true,\n      pages: []\n    };\n    this.#eventAbortController?.abort();\n    this.#eventAbortController = null;\n    this.viewer.textContent = \"\";\n    this._updateScrollMode();\n    this.viewer.removeAttribute(\"lang\");\n    this.#hiddenCopyElement?.remove();\n    this.#hiddenCopyElement = null;\n    this.#cleanupSwitchAnnotationEditorMode();\n  }\n  #ensurePageViewVisible() {\n    if (this._scrollMode !== ScrollMode.PAGE) {\n      throw new Error(\"#ensurePageViewVisible: Invalid scrollMode value.\");\n    }\n    const pageNumber = this._currentPageNumber,\n      state = this.#scrollModePageState,\n      viewer = this.viewer;\n    viewer.textContent = \"\";\n    state.pages.length = 0;\n    if (this._spreadMode === SpreadMode.NONE && !this.isInPresentationMode) {\n      const pageView = this._pages[pageNumber - 1];\n      viewer.append(pageView.div);\n      state.pages.push(pageView);\n    } else {\n      const pageIndexSet = new Set(),\n        parity = this._spreadMode - 1;\n      if (parity === -1) {\n        pageIndexSet.add(pageNumber - 1);\n      } else if (pageNumber % 2 !== parity) {\n        pageIndexSet.add(pageNumber - 1);\n        pageIndexSet.add(pageNumber);\n      } else {\n        pageIndexSet.add(pageNumber - 2);\n        pageIndexSet.add(pageNumber - 1);\n      }\n      const spread = document.createElement(\"div\");\n      spread.className = \"spread\";\n      if (this.isInPresentationMode) {\n        const dummyPage = document.createElement(\"div\");\n        dummyPage.className = \"dummyPage\";\n        spread.append(dummyPage);\n      }\n      for (const i of pageIndexSet) {\n        const pageView = this._pages[i];\n        if (!pageView) {\n          continue;\n        }\n        spread.append(pageView.div);\n        state.pages.push(pageView);\n      }\n      viewer.append(spread);\n    }\n    state.scrollDown = pageNumber >= state.previousPageNumber;\n    state.previousPageNumber = pageNumber;\n  }\n  _scrollUpdate() {\n    if (this.pagesCount === 0) {\n      return;\n    }\n    this.update();\n  }\n  #scrollIntoView(pageView, pageSpot = null) {\n    const {\n      div,\n      id\n    } = pageView;\n    if (this._currentPageNumber !== id) {\n      this._setCurrentPageNumber(id);\n    }\n    if (this._scrollMode === ScrollMode.PAGE) {\n      this.#ensurePageViewVisible();\n      this.update();\n    }\n    if (!pageSpot && !this.isInPresentationMode) {\n      const left = div.offsetLeft + div.clientLeft,\n        right = left + div.clientWidth;\n      const {\n        scrollLeft,\n        clientWidth\n      } = this.container;\n      if (this._scrollMode === ScrollMode.HORIZONTAL || left < scrollLeft || right > scrollLeft + clientWidth) {\n        pageSpot = {\n          left: 0,\n          top: 0\n        };\n      }\n    }\n    scrollIntoView(div, pageSpot);\n    if (!this._currentScaleValue && this._location) {\n      this._location = null;\n    }\n  }\n  #isSameScale(newScale) {\n    return newScale === this._currentScale || Math.abs(newScale - this._currentScale) < 1e-15;\n  }\n  #setScaleUpdatePages(newScale, newValue, {\n    noScroll = false,\n    preset = false,\n    drawingDelay = -1,\n    origin = null\n  }) {\n    this._currentScaleValue = newValue.toString();\n    if (this.#isSameScale(newScale)) {\n      if (preset) {\n        this.eventBus.dispatch(\"scalechanging\", {\n          source: this,\n          scale: newScale,\n          presetValue: newValue\n        });\n      }\n      return;\n    }\n    this.viewer.style.setProperty(\"--scale-factor\", newScale * PixelsPerInch.PDF_TO_CSS_UNITS);\n    const postponeDrawing = drawingDelay >= 0 && drawingDelay < 1000;\n    this.refresh(true, {\n      scale: newScale,\n      drawingDelay: postponeDrawing ? drawingDelay : -1\n    });\n    if (postponeDrawing) {\n      this.#scaleTimeoutId = setTimeout(() => {\n        this.#scaleTimeoutId = null;\n        this.refresh();\n      }, drawingDelay);\n    }\n    const previousScale = this._currentScale;\n    this._currentScale = newScale;\n    if (!noScroll) {\n      let page = this._currentPageNumber,\n        dest;\n      if (this._location && !(this.isInPresentationMode || this.isChangingPresentationMode)) {\n        page = this._location.pageNumber;\n        dest = [null, {\n          name: \"XYZ\"\n        }, this._location.left, this._location.top, null];\n      }\n      this.scrollPageIntoView({\n        pageNumber: page,\n        destArray: dest,\n        allowNegativeOffset: true\n      });\n      if (Array.isArray(origin)) {\n        const scaleDiff = newScale / previousScale - 1;\n        const [top, left] = this.containerTopLeft;\n        this.container.scrollLeft += (origin[0] - left) * scaleDiff;\n        this.container.scrollTop += (origin[1] - top) * scaleDiff;\n      }\n    }\n    this.eventBus.dispatch(\"scalechanging\", {\n      source: this,\n      scale: newScale,\n      presetValue: preset ? newValue : undefined\n    });\n    if (this.defaultRenderingQueue) {\n      this.update();\n    }\n  }\n  get #pageWidthScaleFactor() {\n    if (this._spreadMode !== SpreadMode.NONE && this._scrollMode !== ScrollMode.HORIZONTAL) {\n      return 2;\n    }\n    return 1;\n  }\n  #setScale(value, options) {\n    let scale = parseFloat(value);\n    if (scale > 0) {\n      options.preset = false;\n      this.#setScaleUpdatePages(scale, value, options);\n    } else {\n      const currentPage = this._pages[this._currentPageNumber - 1];\n      if (!currentPage) {\n        return;\n      }\n      let hPadding = SCROLLBAR_PADDING,\n        vPadding = VERTICAL_PADDING;\n      if (this.isInPresentationMode) {\n        hPadding = vPadding = 4;\n        if (this._spreadMode !== SpreadMode.NONE) {\n          hPadding *= 2;\n        }\n      } else if (this.removePageBorders) {\n        hPadding = vPadding = 0;\n      } else if (this._scrollMode === ScrollMode.HORIZONTAL) {\n        [hPadding, vPadding] = [vPadding, hPadding];\n      }\n      const pageWidthScale = (this.container.clientWidth - hPadding) / currentPage.width * currentPage.scale / this.#pageWidthScaleFactor;\n      const pageHeightScale = (this.container.clientHeight - vPadding) / currentPage.height * currentPage.scale;\n      switch (value) {\n        case \"page-actual\":\n          scale = 1;\n          break;\n        case \"page-width\":\n          scale = pageWidthScale;\n          break;\n        case \"page-height\":\n          scale = pageHeightScale;\n          break;\n        case \"page-fit\":\n          scale = Math.min(pageWidthScale, pageHeightScale);\n          break;\n        case \"auto\":\n          const horizontalScale = isPortraitOrientation(currentPage) ? pageWidthScale : Math.min(pageHeightScale, pageWidthScale);\n          scale = Math.min(MAX_AUTO_SCALE, horizontalScale);\n          break;\n        default:\n          console.error(`#setScale: \"${value}\" is an unknown zoom value.`);\n          return;\n      }\n      options.preset = true;\n      this.#setScaleUpdatePages(scale, value, options);\n    }\n  }\n  #resetCurrentPageView() {\n    const pageView = this._pages[this._currentPageNumber - 1];\n    if (this.isInPresentationMode) {\n      this.#setScale(this._currentScaleValue, {\n        noScroll: true\n      });\n    }\n    this.#scrollIntoView(pageView);\n  }\n  pageLabelToPageNumber(label) {\n    if (!this._pageLabels) {\n      return null;\n    }\n    const i = this._pageLabels.indexOf(label);\n    if (i < 0) {\n      return null;\n    }\n    return i + 1;\n  }\n  scrollPageIntoView({\n    pageNumber,\n    destArray = null,\n    allowNegativeOffset = false,\n    ignoreDestinationZoom = false\n  }) {\n    if (!this.pdfDocument) {\n      return;\n    }\n    const pageView = Number.isInteger(pageNumber) && this._pages[pageNumber - 1];\n    if (!pageView) {\n      console.error(`scrollPageIntoView: \"${pageNumber}\" is not a valid pageNumber parameter.`);\n      return;\n    }\n    if (this.isInPresentationMode || !destArray) {\n      this._setCurrentPageNumber(pageNumber, true);\n      return;\n    }\n    let x = 0,\n      y = 0;\n    let width = 0,\n      height = 0,\n      widthScale,\n      heightScale;\n    const changeOrientation = pageView.rotation % 180 !== 0;\n    const pageWidth = (changeOrientation ? pageView.height : pageView.width) / pageView.scale / PixelsPerInch.PDF_TO_CSS_UNITS;\n    const pageHeight = (changeOrientation ? pageView.width : pageView.height) / pageView.scale / PixelsPerInch.PDF_TO_CSS_UNITS;\n    let scale = 0;\n    switch (destArray[1].name) {\n      case \"XYZ\":\n        x = destArray[2];\n        y = destArray[3];\n        scale = destArray[4];\n        x = x !== null ? x : 0;\n        y = y !== null ? y : pageHeight;\n        break;\n      case \"Fit\":\n      case \"FitB\":\n        scale = \"page-fit\";\n        break;\n      case \"FitH\":\n      case \"FitBH\":\n        y = destArray[2];\n        scale = \"page-width\";\n        if (y === null && this._location) {\n          x = this._location.left;\n          y = this._location.top;\n        } else if (typeof y !== \"number\" || y < 0) {\n          y = pageHeight;\n        }\n        break;\n      case \"FitV\":\n      case \"FitBV\":\n        x = destArray[2];\n        width = pageWidth;\n        height = pageHeight;\n        scale = \"page-height\";\n        break;\n      case \"FitR\":\n        x = destArray[2];\n        y = destArray[3];\n        width = destArray[4] - x;\n        height = destArray[5] - y;\n        let hPadding = SCROLLBAR_PADDING,\n          vPadding = VERTICAL_PADDING;\n        if (this.removePageBorders) {\n          hPadding = vPadding = 0;\n        }\n        widthScale = (this.container.clientWidth - hPadding) / width / PixelsPerInch.PDF_TO_CSS_UNITS;\n        heightScale = (this.container.clientHeight - vPadding) / height / PixelsPerInch.PDF_TO_CSS_UNITS;\n        scale = Math.min(Math.abs(widthScale), Math.abs(heightScale));\n        break;\n      default:\n        console.error(`scrollPageIntoView: \"${destArray[1].name}\" is not a valid destination type.`);\n        return;\n    }\n    if (!ignoreDestinationZoom) {\n      if (scale && scale !== this._currentScale) {\n        this.currentScaleValue = scale;\n      } else if (this._currentScale === UNKNOWN_SCALE) {\n        this.currentScaleValue = DEFAULT_SCALE_VALUE;\n      }\n    }\n    if (scale === \"page-fit\" && !destArray[4]) {\n      this.#scrollIntoView(pageView);\n      return;\n    }\n    const boundingRect = [pageView.viewport.convertToViewportPoint(x, y), pageView.viewport.convertToViewportPoint(x + width, y + height)];\n    let left = Math.min(boundingRect[0][0], boundingRect[1][0]);\n    let top = Math.min(boundingRect[0][1], boundingRect[1][1]);\n    if (!allowNegativeOffset) {\n      left = Math.max(left, 0);\n      top = Math.max(top, 0);\n    }\n    this.#scrollIntoView(pageView, {\n      left,\n      top\n    });\n  }\n  _updateLocation(firstPage) {\n    const currentScale = this._currentScale;\n    const currentScaleValue = this._currentScaleValue;\n    const normalizedScaleValue = parseFloat(currentScaleValue) === currentScale ? Math.round(currentScale * 10000) / 100 : currentScaleValue;\n    const pageNumber = firstPage.id;\n    const currentPageView = this._pages[pageNumber - 1];\n    const container = this.container;\n    const topLeft = currentPageView.getPagePoint(container.scrollLeft - firstPage.x, container.scrollTop - firstPage.y);\n    const intLeft = Math.round(topLeft[0]);\n    const intTop = Math.round(topLeft[1]);\n    let pdfOpenParams = `#page=${pageNumber}`;\n    if (!this.isInPresentationMode) {\n      pdfOpenParams += `&zoom=${normalizedScaleValue},${intLeft},${intTop}`;\n    }\n    this._location = {\n      pageNumber,\n      scale: normalizedScaleValue,\n      top: intTop,\n      left: intLeft,\n      rotation: this._pagesRotation,\n      pdfOpenParams\n    };\n  }\n  update() {\n    const visible = this._getVisiblePages();\n    const visiblePages = visible.views,\n      numVisiblePages = visiblePages.length;\n    if (numVisiblePages === 0) {\n      return;\n    }\n    const newCacheSize = Math.max(DEFAULT_CACHE_SIZE, 2 * numVisiblePages + 1);\n    this.#buffer.resize(newCacheSize, visible.ids);\n    this.renderingQueue.renderHighestPriority(visible);\n    const isSimpleLayout = this._spreadMode === SpreadMode.NONE && (this._scrollMode === ScrollMode.PAGE || this._scrollMode === ScrollMode.VERTICAL);\n    const currentId = this._currentPageNumber;\n    let stillFullyVisible = false;\n    for (const page of visiblePages) {\n      if (page.percent < 100) {\n        break;\n      }\n      if (page.id === currentId && isSimpleLayout) {\n        stillFullyVisible = true;\n        break;\n      }\n    }\n    this._setCurrentPageNumber(stillFullyVisible ? currentId : visiblePages[0].id);\n    this._updateLocation(visible.first);\n    this.eventBus.dispatch(\"updateviewarea\", {\n      source: this,\n      location: this._location\n    });\n  }\n  #switchToEditAnnotationMode() {\n    const visible = this._getVisiblePages();\n    const pagesToRefresh = [];\n    const {\n      ids,\n      views\n    } = visible;\n    for (const page of views) {\n      const {\n        view\n      } = page;\n      if (!view.hasEditableAnnotations()) {\n        ids.delete(view.id);\n        continue;\n      }\n      pagesToRefresh.push(page);\n    }\n    if (pagesToRefresh.length === 0) {\n      return null;\n    }\n    this.renderingQueue.renderHighestPriority({\n      first: pagesToRefresh[0],\n      last: pagesToRefresh.at(-1),\n      views: pagesToRefresh,\n      ids\n    });\n    return ids;\n  }\n  containsElement(element) {\n    return this.container.contains(element);\n  }\n  focus() {\n    this.container.focus();\n  }\n  get _isContainerRtl() {\n    return getComputedStyle(this.container).direction === \"rtl\";\n  }\n  get isInPresentationMode() {\n    return this.presentationModeState === PresentationModeState.FULLSCREEN;\n  }\n  get isChangingPresentationMode() {\n    return this.presentationModeState === PresentationModeState.CHANGING;\n  }\n  get isHorizontalScrollbarEnabled() {\n    return this.isInPresentationMode ? false : this.container.scrollWidth > this.container.clientWidth;\n  }\n  get isVerticalScrollbarEnabled() {\n    return this.isInPresentationMode ? false : this.container.scrollHeight > this.container.clientHeight;\n  }\n  _getVisiblePages() {\n    const views = this._scrollMode === ScrollMode.PAGE ? this.#scrollModePageState.pages : this._pages,\n      horizontal = this._scrollMode === ScrollMode.HORIZONTAL,\n      rtl = horizontal && this._isContainerRtl;\n    return getVisibleElements({\n      scrollEl: this.container,\n      views,\n      sortByVisibility: true,\n      horizontal,\n      rtl\n    });\n  }\n  cleanup() {\n    for (const pageView of this._pages) {\n      if (pageView.renderingState !== RenderingStates.FINISHED) {\n        pageView.reset();\n      }\n    }\n  }\n  _cancelRendering() {\n    for (const pageView of this._pages) {\n      pageView.cancelRendering();\n    }\n  }\n  async #ensurePdfPageLoaded(pageView) {\n    if (pageView.pdfPage) {\n      return pageView.pdfPage;\n    }\n    try {\n      const pdfPage = await this.pdfDocument.getPage(pageView.id);\n      if (!pageView.pdfPage) {\n        pageView.setPdfPage(pdfPage);\n      }\n      return pdfPage;\n    } catch (reason) {\n      console.error(\"Unable to get page for page view\", reason);\n      return null;\n    }\n  }\n  #getScrollAhead(visible) {\n    if (visible.first?.id === 1) {\n      return true;\n    } else if (visible.last?.id === this.pagesCount) {\n      return false;\n    }\n    switch (this._scrollMode) {\n      case ScrollMode.PAGE:\n        return this.#scrollModePageState.scrollDown;\n      case ScrollMode.HORIZONTAL:\n        return this.scroll.right;\n    }\n    return this.scroll.down;\n  }\n  forceRendering(currentlyVisiblePages) {\n    const visiblePages = currentlyVisiblePages || this._getVisiblePages();\n    const scrollAhead = this.#getScrollAhead(visiblePages);\n    const preRenderExtra = this._spreadMode !== SpreadMode.NONE && this._scrollMode !== ScrollMode.HORIZONTAL;\n    const pageView = this.renderingQueue.getHighestPriority(visiblePages, this._pages, scrollAhead, preRenderExtra);\n    if (pageView) {\n      this.#ensurePdfPageLoaded(pageView).then(() => {\n        this.renderingQueue.renderView(pageView);\n      });\n      return true;\n    }\n    return false;\n  }\n  get hasEqualPageSizes() {\n    const firstPageView = this._pages[0];\n    for (let i = 1, ii = this._pages.length; i < ii; ++i) {\n      const pageView = this._pages[i];\n      if (pageView.width !== firstPageView.width || pageView.height !== firstPageView.height) {\n        return false;\n      }\n    }\n    return true;\n  }\n  getPagesOverview() {\n    let initialOrientation;\n    return this._pages.map(pageView => {\n      const viewport = pageView.pdfPage.getViewport({\n        scale: 1\n      });\n      const orientation = isPortraitOrientation(viewport);\n      if (initialOrientation === undefined) {\n        initialOrientation = orientation;\n      } else if (this.enablePrintAutoRotate && orientation !== initialOrientation) {\n        return {\n          width: viewport.height,\n          height: viewport.width,\n          rotation: (viewport.rotation - 90) % 360\n        };\n      }\n      return {\n        width: viewport.width,\n        height: viewport.height,\n        rotation: viewport.rotation\n      };\n    });\n  }\n  get optionalContentConfigPromise() {\n    if (!this.pdfDocument) {\n      return Promise.resolve(null);\n    }\n    if (!this._optionalContentConfigPromise) {\n      console.error(\"optionalContentConfigPromise: Not initialized yet.\");\n      return this.pdfDocument.getOptionalContentConfig({\n        intent: \"display\"\n      });\n    }\n    return this._optionalContentConfigPromise;\n  }\n  set optionalContentConfigPromise(promise) {\n    if (!(promise instanceof Promise)) {\n      throw new Error(`Invalid optionalContentConfigPromise: ${promise}`);\n    }\n    if (!this.pdfDocument) {\n      return;\n    }\n    if (!this._optionalContentConfigPromise) {\n      return;\n    }\n    this._optionalContentConfigPromise = promise;\n    this.refresh(false, {\n      optionalContentConfigPromise: promise\n    });\n    this.eventBus.dispatch(\"optionalcontentconfigchanged\", {\n      source: this,\n      promise\n    });\n  }\n  get scrollMode() {\n    return this._scrollMode;\n  }\n  set scrollMode(mode) {\n    if (this._scrollMode === mode) {\n      return;\n    }\n    if (!isValidScrollMode(mode)) {\n      throw new Error(`Invalid scroll mode: ${mode}`);\n    }\n    if (this.pagesCount > PagesCountLimit.FORCE_SCROLL_MODE_PAGE) {\n      return;\n    }\n    this._previousScrollMode = this._scrollMode;\n    this._scrollMode = mode;\n    this.eventBus.dispatch(\"scrollmodechanged\", {\n      source: this,\n      mode\n    });\n    this._updateScrollMode(this._currentPageNumber);\n  }\n  _updateScrollMode(pageNumber = null) {\n    const scrollMode = this._scrollMode,\n      viewer = this.viewer;\n    viewer.classList.toggle(\"scrollHorizontal\", scrollMode === ScrollMode.HORIZONTAL);\n    viewer.classList.toggle(\"scrollWrapped\", scrollMode === ScrollMode.WRAPPED);\n    if (!this.pdfDocument || !pageNumber) {\n      return;\n    }\n    if (scrollMode === ScrollMode.PAGE) {\n      this.#ensurePageViewVisible();\n    } else if (this._previousScrollMode === ScrollMode.PAGE) {\n      this._updateSpreadMode();\n    }\n    if (this._currentScaleValue && isNaN(this._currentScaleValue)) {\n      this.#setScale(this._currentScaleValue, {\n        noScroll: true\n      });\n    }\n    this._setCurrentPageNumber(pageNumber, true);\n    this.update();\n  }\n  get spreadMode() {\n    return this._spreadMode;\n  }\n  set spreadMode(mode) {\n    if (this._spreadMode === mode) {\n      return;\n    }\n    if (!isValidSpreadMode(mode)) {\n      throw new Error(`Invalid spread mode: ${mode}`);\n    }\n    this._spreadMode = mode;\n    this.eventBus.dispatch(\"spreadmodechanged\", {\n      source: this,\n      mode\n    });\n    this._updateSpreadMode(this._currentPageNumber);\n  }\n  _updateSpreadMode(pageNumber = null) {\n    if (!this.pdfDocument) {\n      return;\n    }\n    const viewer = this.viewer,\n      pages = this._pages;\n    if (this._scrollMode === ScrollMode.PAGE) {\n      this.#ensurePageViewVisible();\n    } else {\n      viewer.textContent = \"\";\n      if (this._spreadMode === SpreadMode.NONE) {\n        for (const pageView of this._pages) {\n          viewer.append(pageView.div);\n        }\n      } else {\n        const parity = this._spreadMode - 1;\n        let spread = null;\n        for (let i = 0, ii = pages.length; i < ii; ++i) {\n          if (spread === null) {\n            spread = document.createElement(\"div\");\n            spread.className = \"spread\";\n            viewer.append(spread);\n          } else if (i % 2 === parity) {\n            spread = spread.cloneNode(false);\n            viewer.append(spread);\n          }\n          spread.append(pages[i].div);\n        }\n      }\n    }\n    if (!pageNumber) {\n      return;\n    }\n    if (this._currentScaleValue && isNaN(this._currentScaleValue)) {\n      this.#setScale(this._currentScaleValue, {\n        noScroll: true\n      });\n    }\n    this._setCurrentPageNumber(pageNumber, true);\n    this.update();\n  }\n  _getPageAdvance(currentPageNumber, previous = false) {\n    switch (this._scrollMode) {\n      case ScrollMode.WRAPPED:\n        {\n          const {\n              views\n            } = this._getVisiblePages(),\n            pageLayout = new Map();\n          for (const {\n            id,\n            y,\n            percent,\n            widthPercent\n          } of views) {\n            if (percent === 0 || widthPercent < 100) {\n              continue;\n            }\n            let yArray = pageLayout.get(y);\n            if (!yArray) {\n              pageLayout.set(y, yArray ||= []);\n            }\n            yArray.push(id);\n          }\n          for (const yArray of pageLayout.values()) {\n            const currentIndex = yArray.indexOf(currentPageNumber);\n            if (currentIndex === -1) {\n              continue;\n            }\n            const numPages = yArray.length;\n            if (numPages === 1) {\n              break;\n            }\n            if (previous) {\n              for (let i = currentIndex - 1, ii = 0; i >= ii; i--) {\n                const currentId = yArray[i],\n                  expectedId = yArray[i + 1] - 1;\n                if (currentId < expectedId) {\n                  return currentPageNumber - expectedId;\n                }\n              }\n            } else {\n              for (let i = currentIndex + 1, ii = numPages; i < ii; i++) {\n                const currentId = yArray[i],\n                  expectedId = yArray[i - 1] + 1;\n                if (currentId > expectedId) {\n                  return expectedId - currentPageNumber;\n                }\n              }\n            }\n            if (previous) {\n              const firstId = yArray[0];\n              if (firstId < currentPageNumber) {\n                return currentPageNumber - firstId + 1;\n              }\n            } else {\n              const lastId = yArray[numPages - 1];\n              if (lastId > currentPageNumber) {\n                return lastId - currentPageNumber + 1;\n              }\n            }\n            break;\n          }\n          break;\n        }\n      case ScrollMode.HORIZONTAL:\n        {\n          break;\n        }\n      case ScrollMode.PAGE:\n      case ScrollMode.VERTICAL:\n        {\n          if (this._spreadMode === SpreadMode.NONE) {\n            break;\n          }\n          const parity = this._spreadMode - 1;\n          if (previous && currentPageNumber % 2 !== parity) {\n            break;\n          } else if (!previous && currentPageNumber % 2 === parity) {\n            break;\n          }\n          const {\n              views\n            } = this._getVisiblePages(),\n            expectedId = previous ? currentPageNumber - 1 : currentPageNumber + 1;\n          for (const {\n            id,\n            percent,\n            widthPercent\n          } of views) {\n            if (id !== expectedId) {\n              continue;\n            }\n            if (percent > 0 && widthPercent === 100) {\n              return 2;\n            }\n            break;\n          }\n          break;\n        }\n    }\n    return 1;\n  }\n  nextPage() {\n    const currentPageNumber = this._currentPageNumber,\n      pagesCount = this.pagesCount;\n    if (currentPageNumber >= pagesCount) {\n      return false;\n    }\n    const advance = this._getPageAdvance(currentPageNumber, false) || 1;\n    this.currentPageNumber = Math.min(currentPageNumber + advance, pagesCount);\n    return true;\n  }\n  previousPage() {\n    const currentPageNumber = this._currentPageNumber;\n    if (currentPageNumber <= 1) {\n      return false;\n    }\n    const advance = this._getPageAdvance(currentPageNumber, true) || 1;\n    this.currentPageNumber = Math.max(currentPageNumber - advance, 1);\n    return true;\n  }\n  updateScale({\n    drawingDelay,\n    scaleFactor = null,\n    steps = null,\n    origin\n  }) {\n    if (steps === null && scaleFactor === null) {\n      throw new Error(\"Invalid updateScale options: either `steps` or `scaleFactor` must be provided.\");\n    }\n    if (!this.pdfDocument) {\n      return;\n    }\n    let newScale = this._currentScale;\n    if (scaleFactor > 0 && scaleFactor !== 1) {\n      newScale = Math.round(newScale * scaleFactor * 100) / 100;\n    } else if (steps) {\n      const delta = steps > 0 ? DEFAULT_SCALE_DELTA : 1 / DEFAULT_SCALE_DELTA;\n      const round = steps > 0 ? Math.ceil : Math.floor;\n      steps = Math.abs(steps);\n      do {\n        newScale = round((newScale * delta).toFixed(2) * 10) / 10;\n      } while (--steps > 0);\n    }\n    newScale = Math.max(MIN_SCALE, Math.min(MAX_SCALE, newScale));\n    this.#setScale(newScale, {\n      noScroll: false,\n      drawingDelay,\n      origin\n    });\n  }\n  increaseScale(options = {}) {\n    this.updateScale({\n      ...options,\n      steps: options.steps ?? 1\n    });\n  }\n  decreaseScale(options = {}) {\n    this.updateScale({\n      ...options,\n      steps: -(options.steps ?? 1)\n    });\n  }\n  #updateContainerHeightCss(height = this.container.clientHeight) {\n    if (height !== this.#previousContainerHeight) {\n      this.#previousContainerHeight = height;\n      docStyle.setProperty(\"--viewer-container-height\", `${height}px`);\n    }\n  }\n  #resizeObserverCallback(entries) {\n    for (const entry of entries) {\n      if (entry.target === this.container) {\n        this.#updateContainerHeightCss(Math.floor(entry.borderBoxSize[0].blockSize));\n        this.#containerTopLeft = null;\n        break;\n      }\n    }\n  }\n  get containerTopLeft() {\n    return this.#containerTopLeft ||= [this.container.offsetTop, this.container.offsetLeft];\n  }\n  #cleanupSwitchAnnotationEditorMode() {\n    this.#switchAnnotationEditorModeAC?.abort();\n    this.#switchAnnotationEditorModeAC = null;\n    if (this.#switchAnnotationEditorModeTimeoutId !== null) {\n      clearTimeout(this.#switchAnnotationEditorModeTimeoutId);\n      this.#switchAnnotationEditorModeTimeoutId = null;\n    }\n  }\n  get annotationEditorMode() {\n    return this.#annotationEditorUIManager ? this.#annotationEditorMode : AnnotationEditorType.DISABLE;\n  }\n  set annotationEditorMode({\n    mode,\n    editId = null,\n    isFromKeyboard = false\n  }) {\n    if (!this.#annotationEditorUIManager) {\n      throw new Error(`The AnnotationEditor is not enabled.`);\n    }\n    if (this.#annotationEditorMode === mode) {\n      return;\n    }\n    if (!isValidAnnotationEditorMode(mode)) {\n      throw new Error(`Invalid AnnotationEditor mode: ${mode}`);\n    }\n    if (!this.pdfDocument) {\n      return;\n    }\n    if (mode === AnnotationEditorType.STAMP) {\n      this.#mlManager?.loadModel(\"altText\");\n    }\n    const {\n      eventBus\n    } = this;\n    const updater = () => {\n      this.#cleanupSwitchAnnotationEditorMode();\n      this.#annotationEditorMode = mode;\n      this.#annotationEditorUIManager.updateMode(mode, editId, isFromKeyboard);\n      eventBus.dispatch(\"annotationeditormodechanged\", {\n        source: this,\n        mode\n      });\n    };\n    if (mode === AnnotationEditorType.NONE || this.#annotationEditorMode === AnnotationEditorType.NONE) {\n      const isEditing = mode !== AnnotationEditorType.NONE;\n      if (!isEditing) {\n        this.pdfDocument.annotationStorage.resetModifiedIds();\n      }\n      for (const pageView of this._pages) {\n        pageView.toggleEditingMode(isEditing);\n      }\n      const idsToRefresh = this.#switchToEditAnnotationMode();\n      if (isEditing && idsToRefresh) {\n        this.#cleanupSwitchAnnotationEditorMode();\n        this.#switchAnnotationEditorModeAC = new AbortController();\n        const signal = AbortSignal.any([this.#eventAbortController.signal, this.#switchAnnotationEditorModeAC.signal]);\n        eventBus._on(\"pagerendered\", ({\n          pageNumber\n        }) => {\n          idsToRefresh.delete(pageNumber);\n          if (idsToRefresh.size === 0) {\n            this.#switchAnnotationEditorModeTimeoutId = setTimeout(updater, 0);\n          }\n        }, {\n          signal\n        });\n        return;\n      }\n    }\n    updater();\n  }\n  refresh(noUpdate = false, updateArgs = Object.create(null)) {\n    if (!this.pdfDocument) {\n      return;\n    }\n    for (const pageView of this._pages) {\n      pageView.update(updateArgs);\n    }\n    if (this.#scaleTimeoutId !== null) {\n      clearTimeout(this.#scaleTimeoutId);\n      this.#scaleTimeoutId = null;\n    }\n    if (!noUpdate) {\n      this.update();\n    }\n  }\n}\n\n;// ./web/pdf_single_page_viewer.js\n\n\nclass PDFSinglePageViewer extends PDFViewer {\n  _resetView() {\n    super._resetView();\n    this._scrollMode = ScrollMode.PAGE;\n    this._spreadMode = SpreadMode.NONE;\n  }\n  set scrollMode(mode) {}\n  _updateScrollMode() {}\n  set spreadMode(mode) {}\n  _updateSpreadMode() {}\n}\n\n;// ./web/pdf_viewer.component.js\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst pdfjsVersion = \"4.8.69\";\nconst pdfjsBuild = \"3634dab10\";\n\nvar __webpack_exports__AnnotationLayerBuilder = __webpack_exports__.AnnotationLayerBuilder;\nvar __webpack_exports__DownloadManager = __webpack_exports__.DownloadManager;\nvar __webpack_exports__EventBus = __webpack_exports__.EventBus;\nvar __webpack_exports__FindState = __webpack_exports__.FindState;\nvar __webpack_exports__GenericL10n = __webpack_exports__.GenericL10n;\nvar __webpack_exports__LinkTarget = __webpack_exports__.LinkTarget;\nvar __webpack_exports__PDFFindController = __webpack_exports__.PDFFindController;\nvar __webpack_exports__PDFHistory = __webpack_exports__.PDFHistory;\nvar __webpack_exports__PDFLinkService = __webpack_exports__.PDFLinkService;\nvar __webpack_exports__PDFPageView = __webpack_exports__.PDFPageView;\nvar __webpack_exports__PDFScriptingManager = __webpack_exports__.PDFScriptingManager;\nvar __webpack_exports__PDFSinglePageViewer = __webpack_exports__.PDFSinglePageViewer;\nvar __webpack_exports__PDFViewer = __webpack_exports__.PDFViewer;\nvar __webpack_exports__ProgressBar = __webpack_exports__.ProgressBar;\nvar __webpack_exports__RenderingStates = __webpack_exports__.RenderingStates;\nvar __webpack_exports__ScrollMode = __webpack_exports__.ScrollMode;\nvar __webpack_exports__SimpleLinkService = __webpack_exports__.SimpleLinkService;\nvar __webpack_exports__SpreadMode = __webpack_exports__.SpreadMode;\nvar __webpack_exports__StructTreeLayerBuilder = __webpack_exports__.StructTreeLayerBuilder;\nvar __webpack_exports__TextLayerBuilder = __webpack_exports__.TextLayerBuilder;\nvar __webpack_exports__XfaLayerBuilder = __webpack_exports__.XfaLayerBuilder;\nvar __webpack_exports__parseQueryString = __webpack_exports__.parseQueryString;\nexport { __webpack_exports__AnnotationLayerBuilder as AnnotationLayerBuilder, __webpack_exports__DownloadManager as DownloadManager, __webpack_exports__EventBus as EventBus, __webpack_exports__FindState as FindState, __webpack_exports__GenericL10n as GenericL10n, __webpack_exports__LinkTarget as LinkTarget, __webpack_exports__PDFFindController as PDFFindController, __webpack_exports__PDFHistory as PDFHistory, __webpack_exports__PDFLinkService as PDFLinkService, __webpack_exports__PDFPageView as PDFPageView, __webpack_exports__PDFScriptingManager as PDFScriptingManager, __webpack_exports__PDFSinglePageViewer as PDFSinglePageViewer, __webpack_exports__PDFViewer as PDFViewer, __webpack_exports__ProgressBar as ProgressBar, __webpack_exports__RenderingStates as RenderingStates, __webpack_exports__ScrollMode as ScrollMode, __webpack_exports__SimpleLinkService as SimpleLinkService, __webpack_exports__SpreadMode as SpreadMode, __webpack_exports__StructTreeLayerBuilder as StructTreeLayerBuilder, __webpack_exports__TextLayerBuilder as TextLayerBuilder, __webpack_exports__XfaLayerBuilder as XfaLayerBuilder, __webpack_exports__parseQueryString as parseQueryString };\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}